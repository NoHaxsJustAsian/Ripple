var QA=Object.defineProperty;var ZA=(t,e,n)=>e in t?QA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ue=(t,e,n)=>ZA(t,typeof e!="symbol"?e+"":e,n);function e2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var In=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function t2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var iS={exports:{}},mf={},aS={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc=Symbol.for("react.element"),n2=Symbol.for("react.portal"),r2=Symbol.for("react.fragment"),o2=Symbol.for("react.strict_mode"),s2=Symbol.for("react.profiler"),i2=Symbol.for("react.provider"),a2=Symbol.for("react.context"),l2=Symbol.for("react.forward_ref"),c2=Symbol.for("react.suspense"),u2=Symbol.for("react.memo"),d2=Symbol.for("react.lazy"),K0=Symbol.iterator;function f2(t){return t===null||typeof t!="object"?null:(t=K0&&t[K0]||t["@@iterator"],typeof t=="function"?t:null)}var lS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cS=Object.assign,uS={};function Sa(t,e,n){this.props=t,this.context=e,this.refs=uS,this.updater=n||lS}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dS(){}dS.prototype=Sa.prototype;function iv(t,e,n){this.props=t,this.context=e,this.refs=uS,this.updater=n||lS}var av=iv.prototype=new dS;av.constructor=iv;cS(av,Sa.prototype);av.isPureReactComponent=!0;var q0=Array.isArray,fS=Object.prototype.hasOwnProperty,lv={current:null},hS={key:!0,ref:!0,__self:!0,__source:!0};function pS(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)fS.call(e,r)&&!hS.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:xc,type:t,key:s,ref:i,props:o,_owner:lv.current}}function h2(t,e){return{$$typeof:xc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cv(t){return typeof t=="object"&&t!==null&&t.$$typeof===xc}function p2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var G0=/\/+/g;function Ph(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p2(""+t.key):e.toString(36)}function Vu(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case xc:case n2:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+Ph(i,0):r,q0(o)?(n="",t!=null&&(n=t.replace(G0,"$&/")+"/"),Vu(o,e,n,"",function(c){return c})):o!=null&&(cv(o)&&(o=h2(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(G0,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",q0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ph(s,a);i+=Vu(s,e,n,l,o)}else if(l=f2(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ph(s,a++),i+=Vu(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Qc(t,e,n){if(t==null)return t;var r=[],o=0;return Vu(t,r,"","",function(s){return e.call(n,s,o++)}),r}function m2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Wu={transition:null},g2={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Wu,ReactCurrentOwner:lv};function mS(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!cv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Sa;_e.Fragment=r2;_e.Profiler=s2;_e.PureComponent=iv;_e.StrictMode=o2;_e.Suspense=c2;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g2;_e.act=mS;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cS({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=lv.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fS.call(e,l)&&!hS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:xc,type:t.type,key:o,ref:s,props:r,_owner:i}};_e.createContext=function(t){return t={$$typeof:a2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:i2,_context:t},t.Consumer=t};_e.createElement=pS;_e.createFactory=function(t){var e=pS.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:l2,render:t}};_e.isValidElement=cv;_e.lazy=function(t){return{$$typeof:d2,_payload:{_status:-1,_result:t},_init:m2}};_e.memo=function(t,e){return{$$typeof:u2,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Wu.transition;Wu.transition={};try{t()}finally{Wu.transition=e}};_e.unstable_act=mS;_e.useCallback=function(t,e){return Wt.current.useCallback(t,e)};_e.useContext=function(t){return Wt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Wt.current.useEffect(t,e)};_e.useId=function(){return Wt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Wt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};_e.useRef=function(t){return Wt.current.useRef(t)};_e.useState=function(t){return Wt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Wt.current.useTransition()};_e.version="18.3.1";aS.exports=_e;var p=aS.exports;const X=sS(p),v2=e2({__proto__:null,default:X},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=p,x2=Symbol.for("react.element"),w2=Symbol.for("react.fragment"),b2=Object.prototype.hasOwnProperty,S2=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C2={key:!0,ref:!0,__self:!0,__source:!0};function gS(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)b2.call(e,r)&&!C2.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:x2,type:t,key:s,ref:i,props:o,_owner:S2.current}}mf.Fragment=w2;mf.jsx=gS;mf.jsxs=gS;iS.exports=mf;var f=iS.exports,vS={exports:{}},wn={},yS={exports:{}},xS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,N){var $=R.length;R.push(N);e:for(;0<$;){var L=$-1>>>1,P=R[L];if(0<o(P,N))R[L]=N,R[$]=P,$=L;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var N=R[0],$=R.pop();if($!==N){R[0]=$;e:for(var L=0,P=R.length,q=P>>>1;L<q;){var Z=2*(L+1)-1,M=R[Z],O=Z+1,D=R[O];if(0>o(M,$))O<P&&0>o(D,M)?(R[L]=D,R[O]=$,L=O):(R[L]=M,R[Z]=$,L=Z);else if(O<P&&0>o(D,$))R[L]=D,R[O]=$,L=O;else break e}}return N}function o(R,N){var $=R.sortIndex-N.sortIndex;return $!==0?$:R.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=R)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function S(R){if(v=!1,b(R),!g)if(n(l)!==null)g=!0,H(C);else{var N=n(c);N!==null&&te(S,N.startTime-R)}}function C(R,N){g=!1,v&&(v=!1,y(T),T=-1),m=!0;var $=h;try{for(b(N),d=n(l);d!==null&&(!(d.expirationTime>N)||R&&!V());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var P=L(d.expirationTime<=N);N=t.unstable_now(),typeof P=="function"?d.callback=P:d===n(l)&&r(l),b(N)}else r(l);d=n(l)}if(d!==null)var q=!0;else{var Z=n(c);Z!==null&&te(S,Z.startTime-N),q=!1}return q}finally{d=null,h=$,m=!1}}var E=!1,k=null,T=-1,j=5,I=-1;function V(){return!(t.unstable_now()-I<j)}function U(){if(k!==null){var R=t.unstable_now();I=R;var N=!0;try{N=k(!0,R)}finally{N?B():(E=!1,k=null)}}else E=!1}var B;if(typeof w=="function")B=function(){w(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,oe=W.port2;W.port1.onmessage=U,B=function(){oe.postMessage(null)}}else B=function(){x(U,0)};function H(R){k=R,E||(E=!0,B())}function te(R,N){T=x(function(){R(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,H(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var N=3;break;default:N=h}var $=h;h=N;try{return R()}finally{h=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,N){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var $=h;h=R;try{return N()}finally{h=$}},t.unstable_scheduleCallback=function(R,N,$){var L=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?L+$:L):$=L,R){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=$+P,R={id:u++,callback:N,priorityLevel:R,startTime:$,expirationTime:P,sortIndex:-1},$>L?(R.sortIndex=$,e(c,R),n(l)===null&&R===n(c)&&(v?(y(T),T=-1):v=!0,te(S,$-L))):(R.sortIndex=P,e(l,R),g||m||(g=!0,H(C))),R},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(R){var N=h;return function(){var $=h;h=N;try{return R.apply(this,arguments)}finally{h=$}}}})(xS);yS.exports=xS;var k2=yS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2=p,xn=k2;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wS=new Set,Ol={};function Ys(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(Ol[t]=e,t=0;t<e.length;t++)wS.add(e[t])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tm=Object.prototype.hasOwnProperty,T2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y0={},J0={};function N2(t){return tm.call(J0,t)?!0:tm.call(Y0,t)?!1:T2.test(t)?J0[t]=!0:(Y0[t]=!0,!1)}function M2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P2(t,e,n,r){if(e===null||typeof e>"u"||M2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var uv=/[\-:]([a-z])/g;function dv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uv,dv);Mt[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uv,dv);Mt[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uv,dv);Mt[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fv(t,e,n,r){var o=Mt.hasOwnProperty(e)?Mt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(P2(e,n,o,r)&&(n=null),r||o===null?N2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=E2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zc=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),hv=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),SS=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),rm=Symbol.for("react.suspense"),om=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),CS=Symbol.for("react.offscreen"),X0=Symbol.iterator;function za(t){return t===null||typeof t!="object"?null:(t=X0&&t[X0]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,_h;function nl(t){if(_h===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_h=e&&e[1]||""}return`
`+_h+t}var Rh=!1;function Ah(t,e){if(!t||Rh)return"";Rh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{Rh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nl(t):""}function _2(t){switch(t.tag){case 5:return nl(t.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return t=Ah(t.type,!1),t;case 11:return t=Ah(t.type.render,!1),t;case 1:return t=Ah(t.type,!0),t;default:return""}}function sm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case Ti:return"Portal";case nm:return"Profiler";case hv:return"StrictMode";case rm:return"Suspense";case om:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SS:return(t.displayName||"Context")+".Consumer";case bS:return(t._context.displayName||"Context")+".Provider";case pv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mv:return e=t.displayName||null,e!==null?e:sm(t.type)||"Memo";case lo:e=t._payload,t=t._init;try{return sm(t(e))}catch{}}return null}function R2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sm(e);case 8:return e===hv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A2(t){var e=kS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eu(t){t._valueTracker||(t._valueTracker=A2(t))}function ES(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function im(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Q0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TS(t,e){e=e.checked,e!=null&&fv(t,"checked",e,!1)}function am(t,e){TS(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lm(t,e.type,n):e.hasOwnProperty("defaultValue")&&lm(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lm(t,e,n){(e!=="number"||fd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rl=Array.isArray;function Bi(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function cm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ex(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(rl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function NS(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function um(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tu,PS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tu=tu||document.createElement("div"),tu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O2=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){O2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function _S(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function RS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=_S(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var j2=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dm(t,e){if(e){if(j2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function fm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hm=null;function gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pm=null,Hi=null,Ui=null;function nx(t){if(t=Sc(t)){if(typeof pm!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=wf(e),pm(t.stateNode,t.type,e))}}function AS(t){Hi?Ui?Ui.push(t):Ui=[t]:Hi=t}function OS(){if(Hi){var t=Hi,e=Ui;if(Ui=Hi=null,nx(t),e)for(t=0;t<e.length;t++)nx(e[t])}}function jS(t,e){return t(e)}function IS(){}var Oh=!1;function DS(t,e,n){if(Oh)return t(e,n);Oh=!0;try{return jS(t,e,n)}finally{Oh=!1,(Hi!==null||Ui!==null)&&(IS(),OS())}}function Il(t,e){var n=t.stateNode;if(n===null)return null;var r=wf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var mm=!1;if(Ir)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){mm=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{mm=!1}function I2(t,e,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ml=!1,hd=null,pd=!1,gm=null,D2={onError:function(t){ml=!0,hd=t}};function L2(t,e,n,r,o,s,i,a,l){ml=!1,hd=null,I2.apply(D2,arguments)}function $2(t,e,n,r,o,s,i,a,l){if(L2.apply(this,arguments),ml){if(ml){var c=hd;ml=!1,hd=null}else throw Error(ee(198));pd||(pd=!0,gm=c)}}function Js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rx(t){if(Js(t)!==t)throw Error(ee(188))}function F2(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return rx(o),t;if(s===r)return rx(o),e;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function $S(t){return t=F2(t),t!==null?FS(t):null}function FS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FS(t);if(e!==null)return e;t=t.sibling}return null}var zS=xn.unstable_scheduleCallback,ox=xn.unstable_cancelCallback,z2=xn.unstable_shouldYield,B2=xn.unstable_requestPaint,at=xn.unstable_now,H2=xn.unstable_getCurrentPriorityLevel,vv=xn.unstable_ImmediatePriority,BS=xn.unstable_UserBlockingPriority,md=xn.unstable_NormalPriority,U2=xn.unstable_LowPriority,HS=xn.unstable_IdlePriority,gf=null,ur=null;function V2(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:q2,W2=Math.log,K2=Math.LN2;function q2(t){return t>>>=0,t===0?32:31-(W2(t)/K2|0)|0}var nu=64,ru=4194304;function ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=ol(a):(s&=i,s!==0&&(r=ol(s)))}else i=n&~o,i!==0?r=ol(i):s!==0&&(r=ol(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qn(e),o=1<<n,r|=t[n],e&=~o;return r}function G2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-qn(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=G2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function US(){var t=nu;return nu<<=1,!(nu&4194240)&&(nu=64),t}function jh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qn(e),t[e]=n}function J2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-qn(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function yv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qn(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Fe=0;function VS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WS,xv,KS,qS,GS,ym=!1,ou=[],Co=null,ko=null,Eo=null,Dl=new Map,Ll=new Map,po=[],X2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sx(t,e){switch(t){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Ha(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Sc(e),e!==null&&xv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Q2(t,e,n,r,o){switch(e){case"focusin":return Co=Ha(Co,t,e,n,r,o),!0;case"dragenter":return ko=Ha(ko,t,e,n,r,o),!0;case"mouseover":return Eo=Ha(Eo,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Dl.set(s,Ha(Dl.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Ll.set(s,Ha(Ll.get(s)||null,t,e,n,r,o)),!0}return!1}function YS(t){var e=ys(t.target);if(e!==null){var n=Js(e);if(n!==null){if(e=n.tag,e===13){if(e=LS(n),e!==null){t.blockedOn=e,GS(t.priority,function(){KS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ku(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hm=r,n.target.dispatchEvent(r),hm=null}else return e=Sc(n),e!==null&&xv(e),t.blockedOn=n,!1;e.shift()}return!0}function ix(t,e,n){Ku(t)&&n.delete(e)}function Z2(){ym=!1,Co!==null&&Ku(Co)&&(Co=null),ko!==null&&Ku(ko)&&(ko=null),Eo!==null&&Ku(Eo)&&(Eo=null),Dl.forEach(ix),Ll.forEach(ix)}function Ua(t,e){t.blockedOn===e&&(t.blockedOn=null,ym||(ym=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,Z2)))}function $l(t){function e(o){return Ua(o,t)}if(0<ou.length){Ua(ou[0],t);for(var n=1;n<ou.length;n++){var r=ou[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Co!==null&&Ua(Co,t),ko!==null&&Ua(ko,t),Eo!==null&&Ua(Eo,t),Dl.forEach(e),Ll.forEach(e),n=0;n<po.length;n++)r=po[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<po.length&&(n=po[0],n.blockedOn===null);)YS(n),n.blockedOn===null&&po.shift()}var Vi=Ur.ReactCurrentBatchConfig,vd=!0;function eO(t,e,n,r){var o=Fe,s=Vi.transition;Vi.transition=null;try{Fe=1,wv(t,e,n,r)}finally{Fe=o,Vi.transition=s}}function tO(t,e,n,r){var o=Fe,s=Vi.transition;Vi.transition=null;try{Fe=4,wv(t,e,n,r)}finally{Fe=o,Vi.transition=s}}function wv(t,e,n,r){if(vd){var o=xm(t,e,n,r);if(o===null)Vh(t,e,r,yd,n),sx(t,r);else if(Q2(o,t,e,n,r))r.stopPropagation();else if(sx(t,r),e&4&&-1<X2.indexOf(t)){for(;o!==null;){var s=Sc(o);if(s!==null&&WS(s),s=xm(t,e,n,r),s===null&&Vh(t,e,r,yd,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Vh(t,e,r,null,n)}}var yd=null;function xm(t,e,n,r){if(yd=null,t=gv(r),t=ys(t),t!==null)if(e=Js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yd=t,null}function JS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H2()){case vv:return 1;case BS:return 4;case md:case U2:return 16;case HS:return 536870912;default:return 16}default:return 16}}var yo=null,bv=null,qu=null;function XS(){if(qu)return qu;var t,e=bv,n=e.length,r,o="value"in yo?yo.value:yo.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return qu=o.slice(t,1<r?1-r:void 0)}function Gu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function ax(){return!1}function bn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?su:ax,this.isPropagationStopped=ax,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sv=bn(Ca),bc=tt({},Ca,{view:0,detail:0}),nO=bn(bc),Ih,Dh,Va,vf=tt({},bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Va&&(Va&&t.type==="mousemove"?(Ih=t.screenX-Va.screenX,Dh=t.screenY-Va.screenY):Dh=Ih=0,Va=t),Ih)},movementY:function(t){return"movementY"in t?t.movementY:Dh}}),lx=bn(vf),rO=tt({},vf,{dataTransfer:0}),oO=bn(rO),sO=tt({},bc,{relatedTarget:0}),Lh=bn(sO),iO=tt({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),aO=bn(iO),lO=tt({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cO=bn(lO),uO=tt({},Ca,{data:0}),cx=bn(uO),dO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hO[t])?!!e[t]:!1}function Cv(){return pO}var mO=tt({},bc,{key:function(t){if(t.key){var e=dO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cv,charCode:function(t){return t.type==="keypress"?Gu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gO=bn(mO),vO=tt({},vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ux=bn(vO),yO=tt({},bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cv}),xO=bn(yO),wO=tt({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),bO=bn(wO),SO=tt({},vf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CO=bn(SO),kO=[9,13,27,32],kv=Ir&&"CompositionEvent"in window,gl=null;Ir&&"documentMode"in document&&(gl=document.documentMode);var EO=Ir&&"TextEvent"in window&&!gl,QS=Ir&&(!kv||gl&&8<gl&&11>=gl),dx=" ",fx=!1;function ZS(t,e){switch(t){case"keyup":return kO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mi=!1;function TO(t,e){switch(t){case"compositionend":return eC(e);case"keypress":return e.which!==32?null:(fx=!0,dx);case"textInput":return t=e.data,t===dx&&fx?null:t;default:return null}}function NO(t,e){if(Mi)return t==="compositionend"||!kv&&ZS(t,e)?(t=XS(),qu=bv=yo=null,Mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QS&&e.locale!=="ko"?null:e.data;default:return null}}var MO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MO[t.type]:e==="textarea"}function tC(t,e,n,r){AS(r),e=xd(e,"onChange"),0<e.length&&(n=new Sv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vl=null,Fl=null;function PO(t){fC(t,0)}function yf(t){var e=Ri(t);if(ES(e))return t}function _O(t,e){if(t==="change")return e}var nC=!1;if(Ir){var $h;if(Ir){var Fh="oninput"in document;if(!Fh){var px=document.createElement("div");px.setAttribute("oninput","return;"),Fh=typeof px.oninput=="function"}$h=Fh}else $h=!1;nC=$h&&(!document.documentMode||9<document.documentMode)}function mx(){vl&&(vl.detachEvent("onpropertychange",rC),Fl=vl=null)}function rC(t){if(t.propertyName==="value"&&yf(Fl)){var e=[];tC(e,Fl,t,gv(t)),DS(PO,e)}}function RO(t,e,n){t==="focusin"?(mx(),vl=e,Fl=n,vl.attachEvent("onpropertychange",rC)):t==="focusout"&&mx()}function AO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(Fl)}function OO(t,e){if(t==="click")return yf(e)}function jO(t,e){if(t==="input"||t==="change")return yf(e)}function IO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:IO;function zl(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!tm.call(e,o)||!Yn(t[o],e[o]))return!1}return!0}function gx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vx(t,e){var n=gx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gx(n)}}function oC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sC(){for(var t=window,e=fd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fd(t.document)}return e}function Ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DO(t){var e=sC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oC(n.ownerDocument.documentElement,n)){if(r!==null&&Ev(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=vx(n,s);var i=vx(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LO=Ir&&"documentMode"in document&&11>=document.documentMode,Pi=null,wm=null,yl=null,bm=!1;function yx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bm||Pi==null||Pi!==fd(r)||(r=Pi,"selectionStart"in r&&Ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yl&&zl(yl,r)||(yl=r,r=xd(wm,"onSelect"),0<r.length&&(e=new Sv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pi)))}function iu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _i={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionend:iu("Transition","TransitionEnd")},zh={},iC={};Ir&&(iC=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function xf(t){if(zh[t])return zh[t];if(!_i[t])return t;var e=_i[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iC)return zh[t]=e[n];return t}var aC=xf("animationend"),lC=xf("animationiteration"),cC=xf("animationstart"),uC=xf("transitionend"),dC=new Map,xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(t,e){dC.set(t,e),Ys(e,[t])}for(var Bh=0;Bh<xx.length;Bh++){var Hh=xx[Bh],$O=Hh.toLowerCase(),FO=Hh[0].toUpperCase()+Hh.slice(1);Ko($O,"on"+FO)}Ko(aC,"onAnimationEnd");Ko(lC,"onAnimationIteration");Ko(cC,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(uC,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zO=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function wx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$2(r,e,void 0,t),t.currentTarget=null}function fC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;wx(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;wx(o,a,c),s=l}}}if(pd)throw t=gm,pd=!1,gm=null,t}function Ge(t,e){var n=e[Tm];n===void 0&&(n=e[Tm]=new Set);var r=t+"__bubble";n.has(r)||(hC(e,t,2,!1),n.add(r))}function Uh(t,e,n){var r=0;e&&(r|=4),hC(n,t,r,e)}var au="_reactListening"+Math.random().toString(36).slice(2);function Bl(t){if(!t[au]){t[au]=!0,wS.forEach(function(n){n!=="selectionchange"&&(zO.has(n)||Uh(n,!1,t),Uh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[au]||(e[au]=!0,Uh("selectionchange",!1,e))}}function hC(t,e,n,r){switch(JS(e)){case 1:var o=eO;break;case 4:o=tO;break;default:o=wv}n=o.bind(null,e,n,t),o=void 0,!mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Vh(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=ys(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}DS(function(){var c=s,u=gv(n),d=[];e:{var h=dC.get(t);if(h!==void 0){var m=Sv,g=t;switch(t){case"keypress":if(Gu(n)===0)break e;case"keydown":case"keyup":m=gO;break;case"focusin":g="focus",m=Lh;break;case"focusout":g="blur",m=Lh;break;case"beforeblur":case"afterblur":m=Lh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=lx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=oO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=xO;break;case aC:case lC:case cC:m=aO;break;case uC:m=bO;break;case"scroll":m=nO;break;case"wheel":m=CO;break;case"copy":case"cut":case"paste":m=cO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ux}var v=(e&4)!==0,x=!v&&t==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var w=c,b;w!==null;){b=w;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,y!==null&&(S=Il(w,y),S!=null&&v.push(Hl(w,S,b)))),x)break;w=w.return}0<v.length&&(h=new m(h,g,null,n,u),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==hm&&(g=n.relatedTarget||n.fromElement)&&(ys(g)||g[Dr]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?ys(g):null,g!==null&&(x=Js(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=lx,S="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=ux,S="onPointerLeave",y="onPointerEnter",w="pointer"),x=m==null?h:Ri(m),b=g==null?h:Ri(g),h=new v(S,w+"leave",m,n,u),h.target=x,h.relatedTarget=b,S=null,ys(u)===c&&(v=new v(y,w+"enter",g,n,u),v.target=b,v.relatedTarget=x,S=v),x=S,m&&g)t:{for(v=m,y=g,w=0,b=v;b;b=li(b))w++;for(b=0,S=y;S;S=li(S))b++;for(;0<w-b;)v=li(v),w--;for(;0<b-w;)y=li(y),b--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=li(v),y=li(y)}v=null}else v=null;m!==null&&bx(d,h,m,v,!1),g!==null&&x!==null&&bx(d,x,g,v,!0)}}e:{if(h=c?Ri(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var C=_O;else if(hx(h))if(nC)C=jO;else{C=AO;var E=RO}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=OO);if(C&&(C=C(t,c))){tC(d,C,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&lm(h,"number",h.value)}switch(E=c?Ri(c):window,t){case"focusin":(hx(E)||E.contentEditable==="true")&&(Pi=E,wm=c,yl=null);break;case"focusout":yl=wm=Pi=null;break;case"mousedown":bm=!0;break;case"contextmenu":case"mouseup":case"dragend":bm=!1,yx(d,n,u);break;case"selectionchange":if(LO)break;case"keydown":case"keyup":yx(d,n,u)}var k;if(kv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Mi?ZS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(QS&&n.locale!=="ko"&&(Mi||T!=="onCompositionStart"?T==="onCompositionEnd"&&Mi&&(k=XS()):(yo=u,bv="value"in yo?yo.value:yo.textContent,Mi=!0)),E=xd(c,T),0<E.length&&(T=new cx(T,t,null,n,u),d.push({event:T,listeners:E}),k?T.data=k:(k=eC(n),k!==null&&(T.data=k)))),(k=EO?TO(t,n):NO(t,n))&&(c=xd(c,"onBeforeInput"),0<c.length&&(u=new cx("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}fC(d,e)})}function Hl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xd(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Il(t,n),s!=null&&r.unshift(Hl(t,s,o)),s=Il(t,e),s!=null&&r.push(Hl(t,s,o))),t=t.return}return r}function li(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bx(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=Il(n,s),l!=null&&i.unshift(Hl(n,l,a))):o||(l=Il(n,s),l!=null&&i.push(Hl(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var BO=/\r\n?/g,HO=/\u0000|\uFFFD/g;function Sx(t){return(typeof t=="string"?t:""+t).replace(BO,`
`).replace(HO,"")}function lu(t,e,n){if(e=Sx(e),Sx(t)!==e&&n)throw Error(ee(425))}function wd(){}var Sm=null,Cm=null;function km(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,UO=typeof clearTimeout=="function"?clearTimeout:void 0,Cx=typeof Promise=="function"?Promise:void 0,VO=typeof queueMicrotask=="function"?queueMicrotask:typeof Cx<"u"?function(t){return Cx.resolve(null).then(t).catch(WO)}:Em;function WO(t){setTimeout(function(){throw t})}function Wh(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),$l(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);$l(e)}function To(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ka=Math.random().toString(36).slice(2),lr="__reactFiber$"+ka,Ul="__reactProps$"+ka,Dr="__reactContainer$"+ka,Tm="__reactEvents$"+ka,KO="__reactListeners$"+ka,qO="__reactHandles$"+ka;function ys(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kx(t);t!==null;){if(n=t[lr])return n;t=kx(t)}return e}t=n,n=t.parentNode}return null}function Sc(t){return t=t[lr]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function wf(t){return t[Ul]||null}var Nm=[],Ai=-1;function qo(t){return{current:t}}function Ye(t){0>Ai||(t.current=Nm[Ai],Nm[Ai]=null,Ai--)}function We(t,e){Ai++,Nm[Ai]=t.current,t.current=e}var $o={},Lt=qo($o),on=qo(!1),Os=$o;function oa(t,e){var n=t.type.contextTypes;if(!n)return $o;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function sn(t){return t=t.childContextTypes,t!=null}function bd(){Ye(on),Ye(Lt)}function Ex(t,e,n){if(Lt.current!==$o)throw Error(ee(168));We(Lt,e),We(on,n)}function pC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(ee(108,R2(t)||"Unknown",o));return tt({},n,r)}function Sd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$o,Os=Lt.current,We(Lt,t),We(on,on.current),!0}function Tx(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=pC(t,e,Os),r.__reactInternalMemoizedMergedChildContext=t,Ye(on),Ye(Lt),We(Lt,t)):Ye(on),We(on,n)}var Mr=null,bf=!1,Kh=!1;function mC(t){Mr===null?Mr=[t]:Mr.push(t)}function GO(t){bf=!0,mC(t)}function Go(){if(!Kh&&Mr!==null){Kh=!0;var t=0,e=Fe;try{var n=Mr;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mr=null,bf=!1}catch(o){throw Mr!==null&&(Mr=Mr.slice(t+1)),zS(vv,Go),o}finally{Fe=e,Kh=!1}}return null}var Oi=[],ji=0,Cd=null,kd=0,Tn=[],Nn=0,js=null,Pr=1,_r="";function cs(t,e){Oi[ji++]=kd,Oi[ji++]=Cd,Cd=t,kd=e}function gC(t,e,n){Tn[Nn++]=Pr,Tn[Nn++]=_r,Tn[Nn++]=js,js=t;var r=Pr;t=_r;var o=32-qn(r)-1;r&=~(1<<o),n+=1;var s=32-qn(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Pr=1<<32-qn(e)+o|n<<o|r,_r=s+t}else Pr=1<<s|n<<o|r,_r=t}function Tv(t){t.return!==null&&(cs(t,1),gC(t,1,0))}function Nv(t){for(;t===Cd;)Cd=Oi[--ji],Oi[ji]=null,kd=Oi[--ji],Oi[ji]=null;for(;t===js;)js=Tn[--Nn],Tn[Nn]=null,_r=Tn[--Nn],Tn[Nn]=null,Pr=Tn[--Nn],Tn[Nn]=null}var vn=null,gn=null,Xe=!1,Wn=null;function vC(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=To(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=js!==null?{id:Pr,overflow:_r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function Mm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pm(t){if(Xe){var e=gn;if(e){var n=e;if(!Nx(t,e)){if(Mm(t))throw Error(ee(418));e=To(n.nextSibling);var r=vn;e&&Nx(t,e)?vC(r,n):(t.flags=t.flags&-4097|2,Xe=!1,vn=t)}}else{if(Mm(t))throw Error(ee(418));t.flags=t.flags&-4097|2,Xe=!1,vn=t}}}function Mx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function cu(t){if(t!==vn)return!1;if(!Xe)return Mx(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!km(t.type,t.memoizedProps)),e&&(e=gn)){if(Mm(t))throw yC(),Error(ee(418));for(;e;)vC(t,e),e=To(e.nextSibling)}if(Mx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=To(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?To(t.stateNode.nextSibling):null;return!0}function yC(){for(var t=gn;t;)t=To(t.nextSibling)}function sa(){gn=vn=null,Xe=!1}function Mv(t){Wn===null?Wn=[t]:Wn.push(t)}var YO=Ur.ReactCurrentBatchConfig;function Wa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function uu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Px(t){var e=t._init;return e(t._payload)}function xC(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function o(y,w){return y=_o(y,w),y.index=0,y.sibling=null,y}function s(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,b,S){return w===null||w.tag!==6?(w=Zh(b,y.mode,S),w.return=y,w):(w=o(w,b),w.return=y,w)}function l(y,w,b,S){var C=b.type;return C===Ni?u(y,w,b.props.children,S,b.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===lo&&Px(C)===w.type)?(S=o(w,b.props),S.ref=Wa(y,w,b),S.return=y,S):(S=td(b.type,b.key,b.props,null,y.mode,S),S.ref=Wa(y,w,b),S.return=y,S)}function c(y,w,b,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=ep(b,y.mode,S),w.return=y,w):(w=o(w,b.children||[]),w.return=y,w)}function u(y,w,b,S,C){return w===null||w.tag!==7?(w=Es(b,y.mode,S,C),w.return=y,w):(w=o(w,b),w.return=y,w)}function d(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Zh(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zc:return b=td(w.type,w.key,w.props,null,y.mode,b),b.ref=Wa(y,null,w),b.return=y,b;case Ti:return w=ep(w,y.mode,b),w.return=y,w;case lo:var S=w._init;return d(y,S(w._payload),b)}if(rl(w)||za(w))return w=Es(w,y.mode,b,null),w.return=y,w;uu(y,w)}return null}function h(y,w,b,S){var C=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(y,w,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zc:return b.key===C?l(y,w,b,S):null;case Ti:return b.key===C?c(y,w,b,S):null;case lo:return C=b._init,h(y,w,C(b._payload),S)}if(rl(b)||za(b))return C!==null?null:u(y,w,b,S,null);uu(y,b)}return null}function m(y,w,b,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(b)||null,a(w,y,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zc:return y=y.get(S.key===null?b:S.key)||null,l(w,y,S,C);case Ti:return y=y.get(S.key===null?b:S.key)||null,c(w,y,S,C);case lo:var E=S._init;return m(y,w,b,E(S._payload),C)}if(rl(S)||za(S))return y=y.get(b)||null,u(w,y,S,C,null);uu(w,S)}return null}function g(y,w,b,S){for(var C=null,E=null,k=w,T=w=0,j=null;k!==null&&T<b.length;T++){k.index>T?(j=k,k=null):j=k.sibling;var I=h(y,k,b[T],S);if(I===null){k===null&&(k=j);break}t&&k&&I.alternate===null&&e(y,k),w=s(I,w,T),E===null?C=I:E.sibling=I,E=I,k=j}if(T===b.length)return n(y,k),Xe&&cs(y,T),C;if(k===null){for(;T<b.length;T++)k=d(y,b[T],S),k!==null&&(w=s(k,w,T),E===null?C=k:E.sibling=k,E=k);return Xe&&cs(y,T),C}for(k=r(y,k);T<b.length;T++)j=m(k,y,T,b[T],S),j!==null&&(t&&j.alternate!==null&&k.delete(j.key===null?T:j.key),w=s(j,w,T),E===null?C=j:E.sibling=j,E=j);return t&&k.forEach(function(V){return e(y,V)}),Xe&&cs(y,T),C}function v(y,w,b,S){var C=za(b);if(typeof C!="function")throw Error(ee(150));if(b=C.call(b),b==null)throw Error(ee(151));for(var E=C=null,k=w,T=w=0,j=null,I=b.next();k!==null&&!I.done;T++,I=b.next()){k.index>T?(j=k,k=null):j=k.sibling;var V=h(y,k,I.value,S);if(V===null){k===null&&(k=j);break}t&&k&&V.alternate===null&&e(y,k),w=s(V,w,T),E===null?C=V:E.sibling=V,E=V,k=j}if(I.done)return n(y,k),Xe&&cs(y,T),C;if(k===null){for(;!I.done;T++,I=b.next())I=d(y,I.value,S),I!==null&&(w=s(I,w,T),E===null?C=I:E.sibling=I,E=I);return Xe&&cs(y,T),C}for(k=r(y,k);!I.done;T++,I=b.next())I=m(k,y,T,I.value,S),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?T:I.key),w=s(I,w,T),E===null?C=I:E.sibling=I,E=I);return t&&k.forEach(function(U){return e(y,U)}),Xe&&cs(y,T),C}function x(y,w,b,S){if(typeof b=="object"&&b!==null&&b.type===Ni&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zc:e:{for(var C=b.key,E=w;E!==null;){if(E.key===C){if(C=b.type,C===Ni){if(E.tag===7){n(y,E.sibling),w=o(E,b.props.children),w.return=y,y=w;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===lo&&Px(C)===E.type){n(y,E.sibling),w=o(E,b.props),w.ref=Wa(y,E,b),w.return=y,y=w;break e}n(y,E);break}else e(y,E);E=E.sibling}b.type===Ni?(w=Es(b.props.children,y.mode,S,b.key),w.return=y,y=w):(S=td(b.type,b.key,b.props,null,y.mode,S),S.ref=Wa(y,w,b),S.return=y,y=S)}return i(y);case Ti:e:{for(E=b.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),w=o(w,b.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=ep(b,y.mode,S),w.return=y,y=w}return i(y);case lo:return E=b._init,x(y,w,E(b._payload),S)}if(rl(b))return g(y,w,b,S);if(za(b))return v(y,w,b,S);uu(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),w=o(w,b),w.return=y,y=w):(n(y,w),w=Zh(b,y.mode,S),w.return=y,y=w),i(y)):n(y,w)}return x}var ia=xC(!0),wC=xC(!1),Ed=qo(null),Td=null,Ii=null,Pv=null;function _v(){Pv=Ii=Td=null}function Rv(t){var e=Ed.current;Ye(Ed),t._currentValue=e}function _m(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wi(t,e){Td=t,Pv=Ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Pv!==t)if(t={context:t,memoizedValue:e,next:null},Ii===null){if(Td===null)throw Error(ee(308));Ii=t,Td.dependencies={lanes:0,firstContext:t}}else Ii=Ii.next=t;return e}var xs=null;function Av(t){xs===null?xs=[t]:xs.push(t)}function bC(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,Av(e)):(n.next=o.next,o.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var co=!1;function Ov(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function No(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Lr(t,n)}return o=r.interleaved,o===null?(e.next=e,Av(r)):(e.next=o.next,o.next=e),r.interleaved=e,Lr(t,n)}function Yu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yv(t,n)}}function _x(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nd(t,e,n,r){var o=t.updateQueue;co=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=o.baseState;i=0,u=c=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(h=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=tt({},d,h);break e;case 2:co=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,i|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Ds|=i,t.lanes=i,t.memoizedState=d}}function Rx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ee(191,o));o.call(r)}}}var Cc={},dr=qo(Cc),Vl=qo(Cc),Wl=qo(Cc);function ws(t){if(t===Cc)throw Error(ee(174));return t}function jv(t,e){switch(We(Wl,e),We(Vl,t),We(dr,Cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:um(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=um(e,t)}Ye(dr),We(dr,e)}function aa(){Ye(dr),Ye(Vl),Ye(Wl)}function CC(t){ws(Wl.current);var e=ws(dr.current),n=um(e,t.type);e!==n&&(We(Vl,t),We(dr,n))}function Iv(t){Vl.current===t&&(Ye(dr),Ye(Vl))}var Ze=qo(0);function Md(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qh=[];function Dv(){for(var t=0;t<qh.length;t++)qh[t]._workInProgressVersionPrimary=null;qh.length=0}var Ju=Ur.ReactCurrentDispatcher,Gh=Ur.ReactCurrentBatchConfig,Is=0,et=null,ft=null,mt=null,Pd=!1,xl=!1,Kl=0,JO=0;function At(){throw Error(ee(321))}function Lv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function $v(t,e,n,r,o,s){if(Is=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ju.current=t===null||t.memoizedState===null?ej:tj,t=n(r,o),xl){s=0;do{if(xl=!1,Kl=0,25<=s)throw Error(ee(301));s+=1,mt=ft=null,e.updateQueue=null,Ju.current=nj,t=n(r,o)}while(xl)}if(Ju.current=_d,e=ft!==null&&ft.next!==null,Is=0,mt=ft=et=null,Pd=!1,e)throw Error(ee(300));return t}function Fv(){var t=Kl!==0;return Kl=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?et.memoizedState=mt=t:mt=mt.next=t,mt}function Ln(){if(ft===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=mt===null?et.memoizedState:mt.next;if(e!==null)mt=e,ft=t;else{if(t===null)throw Error(ee(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},mt===null?et.memoizedState=mt=t:mt=mt.next=t}return mt}function ql(t,e){return typeof e=="function"?e(t):e}function Yh(t){var e=Ln(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=ft,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var u=c.lane;if((Is&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,et.lanes|=u,Ds|=u}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Yn(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,et.lanes|=s,Ds|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jh(t){var e=Ln(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Yn(s,e.memoizedState)||(nn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function kC(){}function EC(t,e){var n=et,r=Ln(),o=e(),s=!Yn(r.memoizedState,o);if(s&&(r.memoizedState=o,nn=!0),r=r.queue,zv(MC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Gl(9,NC.bind(null,n,r,o,e),void 0,null),yt===null)throw Error(ee(349));Is&30||TC(n,e,o)}return o}function TC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NC(t,e,n,r){e.value=n,e.getSnapshot=r,PC(e)&&_C(t)}function MC(t,e,n){return n(function(){PC(e)&&_C(t)})}function PC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function _C(t){var e=Lr(t,1);e!==null&&Gn(e,t,1,-1)}function Ax(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:t},e.queue=t,t=t.dispatch=ZO.bind(null,et,t),[e.memoizedState,t]}function Gl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RC(){return Ln().memoizedState}function Xu(t,e,n,r){var o=ar();et.flags|=t,o.memoizedState=Gl(1|e,n,void 0,r===void 0?null:r)}function Sf(t,e,n,r){var o=Ln();r=r===void 0?null:r;var s=void 0;if(ft!==null){var i=ft.memoizedState;if(s=i.destroy,r!==null&&Lv(r,i.deps)){o.memoizedState=Gl(e,n,s,r);return}}et.flags|=t,o.memoizedState=Gl(1|e,n,s,r)}function Ox(t,e){return Xu(8390656,8,t,e)}function zv(t,e){return Sf(2048,8,t,e)}function AC(t,e){return Sf(4,2,t,e)}function OC(t,e){return Sf(4,4,t,e)}function jC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IC(t,e,n){return n=n!=null?n.concat([t]):null,Sf(4,4,jC.bind(null,e,t),n)}function Bv(){}function DC(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function LC(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $C(t,e,n){return Is&21?(Yn(n,e)||(n=US(),et.lanes|=n,Ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function XO(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Gh.transition;Gh.transition={};try{t(!1),e()}finally{Fe=n,Gh.transition=r}}function FC(){return Ln().memoizedState}function QO(t,e,n){var r=Po(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zC(t))BC(e,n);else if(n=bC(t,e,n,r),n!==null){var o=Bt();Gn(n,t,r,o),HC(n,e,r)}}function ZO(t,e,n){var r=Po(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zC(t))BC(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Yn(a,i)){var l=e.interleaved;l===null?(o.next=o,Av(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=bC(t,e,o,r),n!==null&&(o=Bt(),Gn(n,t,r,o),HC(n,e,r))}}function zC(t){var e=t.alternate;return t===et||e!==null&&e===et}function BC(t,e){xl=Pd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yv(t,n)}}var _d={readContext:Dn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},ej={readContext:Dn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:Ox,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xu(4194308,4,jC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xu(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QO.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:Ax,useDebugValue:Bv,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=Ax(!1),e=t[0];return t=XO.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,o=ar();if(Xe){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),yt===null)throw Error(ee(349));Is&30||TC(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,Ox(MC.bind(null,r,s,t),[t]),r.flags|=2048,Gl(9,NC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ar(),e=yt.identifierPrefix;if(Xe){var n=_r,r=Pr;n=(r&~(1<<32-qn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=JO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tj={readContext:Dn,useCallback:DC,useContext:Dn,useEffect:zv,useImperativeHandle:IC,useInsertionEffect:AC,useLayoutEffect:OC,useMemo:LC,useReducer:Yh,useRef:RC,useState:function(){return Yh(ql)},useDebugValue:Bv,useDeferredValue:function(t){var e=Ln();return $C(e,ft.memoizedState,t)},useTransition:function(){var t=Yh(ql)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:kC,useSyncExternalStore:EC,useId:FC,unstable_isNewReconciler:!1},nj={readContext:Dn,useCallback:DC,useContext:Dn,useEffect:zv,useImperativeHandle:IC,useInsertionEffect:AC,useLayoutEffect:OC,useMemo:LC,useReducer:Jh,useRef:RC,useState:function(){return Jh(ql)},useDebugValue:Bv,useDeferredValue:function(t){var e=Ln();return ft===null?e.memoizedState=t:$C(e,ft.memoizedState,t)},useTransition:function(){var t=Jh(ql)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:kC,useSyncExternalStore:EC,useId:FC,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cf={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),o=Po(t),s=Ar(r,o);s.payload=e,n!=null&&(s.callback=n),e=No(t,s,o),e!==null&&(Gn(e,t,o,r),Yu(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),o=Po(t),s=Ar(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=No(t,s,o),e!==null&&(Gn(e,t,o,r),Yu(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=Po(t),o=Ar(n,r);o.tag=2,e!=null&&(o.callback=e),e=No(t,o,r),e!==null&&(Gn(e,t,r,n),Yu(e,t,r))}};function jx(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!zl(n,r)||!zl(o,s):!0}function UC(t,e,n){var r=!1,o=$o,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(o=sn(e)?Os:Lt.current,r=e.contextTypes,s=(r=r!=null)?oa(t,o):$o),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ix(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cf.enqueueReplaceState(e,e.state,null)}function Am(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Ov(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Dn(s):(s=sn(e)?Os:Lt.current,o.context=oa(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rm(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Cf.enqueueReplaceState(o,o.state,null),Nd(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function la(t,e){try{var n="",r=e;do n+=_2(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function Xh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Om(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rj=typeof WeakMap=="function"?WeakMap:Map;function VC(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ad||(Ad=!0,Um=r),Om(t,e)},n}function WC(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Om(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Om(t,e),typeof r!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Dx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rj;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=vj.bind(null,t,e,n),e.then(t,t))}function Lx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $x(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,No(n,e,1))),n.lanes|=1),t)}var oj=Ur.ReactCurrentOwner,nn=!1;function zt(t,e,n,r){e.child=t===null?wC(e,null,n,r):ia(e,t.child,n,r)}function Fx(t,e,n,r,o){n=n.render;var s=e.ref;return Wi(e,o),r=$v(t,e,n,r,s,o),n=Fv(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,$r(t,e,o)):(Xe&&n&&Tv(e),e.flags|=1,zt(t,e,r,o),e.child)}function zx(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!Yv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,KC(t,e,s,r,o)):(t=td(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:zl,n(i,r)&&t.ref===e.ref)return $r(t,e,o)}return e.flags|=1,t=_o(s,r),t.ref=e.ref,t.return=e,e.child=t}function KC(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(zl(s,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,$r(t,e,o)}return jm(t,e,n,r,o)}function qC(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Li,hn),hn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(Li,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,We(Li,hn),hn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,We(Li,hn),hn|=r;return zt(t,e,o,n),e.child}function GC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jm(t,e,n,r,o){var s=sn(n)?Os:Lt.current;return s=oa(e,s),Wi(e,o),n=$v(t,e,n,r,s,o),r=Fv(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,$r(t,e,o)):(Xe&&r&&Tv(e),e.flags|=1,zt(t,e,n,o),e.child)}function Bx(t,e,n,r,o){if(sn(n)){var s=!0;Sd(e)}else s=!1;if(Wi(e,o),e.stateNode===null)Qu(t,e),UC(e,n,r),Am(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=sn(n)?Os:Lt.current,c=oa(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Ix(e,i,r,c),co=!1;var h=e.memoizedState;i.state=h,Nd(e,r,i,o),l=e.memoizedState,a!==r||h!==l||on.current||co?(typeof u=="function"&&(Rm(e,n,u,r),l=e.memoizedState),(a=co||jx(e,n,a,r,h,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,SC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hn(e.type,a),i.props=c,d=e.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=sn(n)?Os:Lt.current,l=oa(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Ix(e,i,r,l),co=!1,h=e.memoizedState,i.state=h,Nd(e,r,i,o);var g=e.memoizedState;a!==d||h!==g||on.current||co?(typeof m=="function"&&(Rm(e,n,m,r),g=e.memoizedState),(c=co||jx(e,n,c,r,h,g,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),i.props=r,i.state=g,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Im(t,e,n,r,s,o)}function Im(t,e,n,r,o,s){GC(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&Tx(e,n,!1),$r(t,e,s);r=e.stateNode,oj.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=ia(e,t.child,null,s),e.child=ia(e,null,a,s)):zt(t,e,a,s),e.memoizedState=r.state,o&&Tx(e,n,!0),e.child}function YC(t){var e=t.stateNode;e.pendingContext?Ex(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ex(t,e.context,!1),jv(t,e.containerInfo)}function Hx(t,e,n,r,o){return sa(),Mv(o),e.flags|=256,zt(t,e,n,r),e.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Lm(t){return{baseLanes:t,cachePool:null,transitions:null}}function JC(t,e,n){var r=e.pendingProps,o=Ze.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),We(Ze,o&1),t===null)return Pm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Tf(i,r,0,null),t=Es(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Lm(n),e.memoizedState=Dm,t):Hv(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return sj(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_o(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=_o(a,s):(s=Es(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?Lm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=Dm,r}return s=t.child,t=s.sibling,r=_o(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hv(t,e){return e=Tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function du(t,e,n,r){return r!==null&&Mv(r),ia(e,t.child,null,n),t=Hv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sj(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=Xh(Error(ee(422))),du(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=Tf({mode:"visible",children:r.children},o,0,null),s=Es(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ia(e,t.child,null,i),e.child.memoizedState=Lm(i),e.memoizedState=Dm,s);if(!(e.mode&1))return du(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ee(419)),r=Xh(s,r,void 0),du(t,e,i,r)}if(a=(i&t.childLanes)!==0,nn||a){if(r=yt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Lr(t,o),Gn(r,t,o,-1))}return Gv(),r=Xh(Error(ee(421))),du(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=yj.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,gn=To(o.nextSibling),vn=e,Xe=!0,Wn=null,t!==null&&(Tn[Nn++]=Pr,Tn[Nn++]=_r,Tn[Nn++]=js,Pr=t.id,_r=t.overflow,js=e),e=Hv(e,r.children),e.flags|=4096,e)}function Ux(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_m(t.return,e,n)}function Qh(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function XC(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(zt(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ux(t,n,e);else if(t.tag===19)Ux(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(We(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Md(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Qh(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Md(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Qh(e,!0,n,null,s);break;case"together":Qh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=_o(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_o(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ij(t,e,n){switch(e.tag){case 3:YC(e),sa();break;case 5:CC(e);break;case 1:sn(e.type)&&Sd(e);break;case 4:jv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;We(Ed,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(We(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?JC(t,e,n):(We(Ze,Ze.current&1),t=$r(t,e,n),t!==null?t.sibling:null);We(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XC(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),We(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,qC(t,e,n)}return $r(t,e,n)}var QC,$m,ZC,ek;QC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};ZC=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,ws(dr.current);var s=null;switch(n){case"input":o=im(t,o),r=im(t,r),s=[];break;case"select":o=tt({},o,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":o=cm(t,o),r=cm(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wd)}dm(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ol.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ol.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ge("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ek=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ka(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aj(t,e,n){var r=e.pendingProps;switch(Nv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return sn(e.type)&&bd(),Ot(e),null;case 3:return r=e.stateNode,aa(),Ye(on),Ye(Lt),Dv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Km(Wn),Wn=null))),$m(t,e),Ot(e),null;case 5:Iv(e);var o=ws(Wl.current);if(n=e.type,t!==null&&e.stateNode!=null)ZC(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Ot(e),null}if(t=ws(dr.current),cu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[lr]=e,r[Ul]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<sl.length;o++)Ge(sl[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Q0(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":ex(r,s),Ge("invalid",r)}dm(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,a,t),o=["children",""+a]):Ol.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Ge("scroll",r)}switch(n){case"input":eu(r),Z0(r,s,!0);break;case"textarea":eu(r),tx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wd)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[lr]=e,t[Ul]=r,QC(t,e,!1,!1),e.stateNode=t;e:{switch(i=fm(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),o=r;break;case"iframe":case"object":case"embed":Ge("load",t),o=r;break;case"video":case"audio":for(o=0;o<sl.length;o++)Ge(sl[o],t);o=r;break;case"source":Ge("error",t),o=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),o=r;break;case"details":Ge("toggle",t),o=r;break;case"input":Q0(t,r),o=im(t,r),Ge("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=tt({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":ex(t,r),o=cm(t,r),Ge("invalid",t);break;default:o=r}dm(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&PS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&jl(t,l):typeof l=="number"&&jl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ol.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",t):l!=null&&fv(t,s,l,i))}switch(n){case"input":eu(t),Z0(t,r,!1);break;case"textarea":eu(t),tx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=wd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)ek(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ws(Wl.current),ws(dr.current),cu(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(s=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return Ot(e),null;case 13:if(Ye(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&gn!==null&&e.mode&1&&!(e.flags&128))yC(),sa(),e.flags|=98560,s=!1;else if(s=cu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[lr]=e}else sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),s=!1}else Wn!==null&&(Km(Wn),Wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?ht===0&&(ht=3):Gv())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return aa(),$m(t,e),t===null&&Bl(e.stateNode.containerInfo),Ot(e),null;case 10:return Rv(e.type._context),Ot(e),null;case 17:return sn(e.type)&&bd(),Ot(e),null;case 19:if(Ye(Ze),s=e.memoizedState,s===null)return Ot(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)Ka(s,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Md(t),i!==null){for(e.flags|=128,Ka(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(Ze,Ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&at()>ca&&(e.flags|=128,r=!0,Ka(s,!1),e.lanes=4194304)}else{if(!r)if(t=Md(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ka(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Xe)return Ot(e),null}else 2*at()-s.renderingStartTime>ca&&n!==1073741824&&(e.flags|=128,r=!0,Ka(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=at(),e.sibling=null,n=Ze.current,We(Ze,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return qv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function lj(t,e){switch(Nv(e),e.tag){case 1:return sn(e.type)&&bd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return aa(),Ye(on),Ye(Lt),Dv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Iv(e),null;case 13:if(Ye(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(Ze),null;case 4:return aa(),null;case 10:return Rv(e.type._context),null;case 22:case 23:return qv(),null;case 24:return null;default:return null}}var fu=!1,It=!1,cj=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function Fm(t,e,n){try{n()}catch(r){rt(t,e,r)}}var Vx=!1;function uj(t,e){if(Sm=vd,t=sC(),Ev(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var m;d!==n||o!==0&&d.nodeType!==3||(a=i+o),d!==s||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++c===o&&(a=i),h===s&&++u===r&&(l=i),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cm={focusedElem:t,selectionRange:n},vd=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Hn(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(S){rt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return g=Vx,Vx=!1,g}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&Fm(e,n,s)}o=o.next}while(o!==r)}}function kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tk(t){var e=t.alternate;e!==null&&(t.alternate=null,tk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[Ul],delete e[Tm],delete e[KO],delete e[qO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nk(t){return t.tag===5||t.tag===3||t.tag===4}function Wx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wd));else if(r!==4&&(t=t.child,t!==null))for(Bm(t,e,n),t=t.sibling;t!==null;)Bm(t,e,n),t=t.sibling}function Hm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hm(t,e,n),t=t.sibling;t!==null;)Hm(t,e,n),t=t.sibling}var Ct=null,Un=!1;function Xr(t,e,n){for(n=n.child;n!==null;)rk(t,e,n),n=n.sibling}function rk(t,e,n){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(gf,n)}catch{}switch(n.tag){case 5:It||Di(n,e);case 6:var r=Ct,o=Un;Ct=null,Xr(t,e,n),Ct=r,Un=o,Ct!==null&&(Un?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Un?(t=Ct,n=n.stateNode,t.nodeType===8?Wh(t.parentNode,n):t.nodeType===1&&Wh(t,n),$l(t)):Wh(Ct,n.stateNode));break;case 4:r=Ct,o=Un,Ct=n.stateNode.containerInfo,Un=!0,Xr(t,e,n),Ct=r,Un=o;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Fm(n,e,i),o=o.next}while(o!==r)}Xr(t,e,n);break;case 1:if(!It&&(Di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rt(n,e,a)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Xr(t,e,n),It=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function Kx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cj),e.forEach(function(r){var o=xj.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Un=!1;break e;case 3:Ct=a.stateNode.containerInfo,Un=!0;break e;case 4:Ct=a.stateNode.containerInfo,Un=!0;break e}a=a.return}if(Ct===null)throw Error(ee(160));rk(s,i,o),Ct=null,Un=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){rt(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ok(e,t),e=e.sibling}function ok(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),or(t),r&4){try{wl(3,t,t.return),kf(3,t)}catch(v){rt(t,t.return,v)}try{wl(5,t,t.return)}catch(v){rt(t,t.return,v)}}break;case 1:zn(e,t),or(t),r&512&&n!==null&&Di(n,n.return);break;case 5:if(zn(e,t),or(t),r&512&&n!==null&&Di(n,n.return),t.flags&32){var o=t.stateNode;try{jl(o,"")}catch(v){rt(t,t.return,v)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TS(o,s),fm(a,i);var c=fm(a,s);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];u==="style"?RS(o,d):u==="dangerouslySetInnerHTML"?PS(o,d):u==="children"?jl(o,d):fv(o,u,d,c)}switch(a){case"input":am(o,s);break;case"textarea":NS(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Bi(o,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Bi(o,!!s.multiple,s.defaultValue,!0):Bi(o,!!s.multiple,s.multiple?[]:"",!1))}o[Ul]=s}catch(v){rt(t,t.return,v)}}break;case 6:if(zn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(ee(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(v){rt(t,t.return,v)}}break;case 3:if(zn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$l(e.containerInfo)}catch(v){rt(t,t.return,v)}break;case 4:zn(e,t),or(t);break;case 13:zn(e,t),or(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Wv=at())),r&4&&Kx(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||u,zn(e,t),It=c):zn(e,t),or(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ce=t,u=t.child;u!==null;){for(d=ce=u;ce!==null;){switch(h=ce,m=h.child,h.tag){case 0:case 11:case 14:case 15:wl(4,h,h.return);break;case 1:Di(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){rt(r,n,v)}}break;case 5:Di(h,h.return);break;case 22:if(h.memoizedState!==null){Gx(d);continue}}m!==null?(m.return=h,ce=m):Gx(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{o=d.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_S("display",i))}catch(v){rt(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){rt(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zn(e,t),or(t),r&4&&Kx(t);break;case 21:break;default:zn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nk(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(jl(o,""),r.flags&=-33);var s=Wx(t);Hm(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Wx(t);Bm(t,a,i);break;default:throw Error(ee(161))}}catch(l){rt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dj(t,e,n){ce=t,sk(t)}function sk(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var o=ce,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||fu;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||It;a=fu;var c=It;if(fu=i,(It=l)&&!c)for(ce=o;ce!==null;)i=ce,l=i.child,i.tag===22&&i.memoizedState!==null?Yx(o):l!==null?(l.return=i,ce=l):Yx(o);for(;s!==null;)ce=s,sk(s),s=s.sibling;ce=o,fu=a,It=c}qx(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,ce=s):qx(t)}}function qx(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Rx(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rx(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&$l(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}It||e.flags&512&&zm(e)}catch(h){rt(e,e.return,h)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function Gx(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function Yx(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kf(4,e)}catch(l){rt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){rt(e,o,l)}}var s=e.return;try{zm(e)}catch(l){rt(e,s,l)}break;case 5:var i=e.return;try{zm(e)}catch(l){rt(e,i,l)}}}catch(l){rt(e,e.return,l)}if(e===t){ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ce=a;break}ce=e.return}}var fj=Math.ceil,Rd=Ur.ReactCurrentDispatcher,Uv=Ur.ReactCurrentOwner,_n=Ur.ReactCurrentBatchConfig,Ie=0,yt=null,ct=null,Nt=0,hn=0,Li=qo(0),ht=0,Yl=null,Ds=0,Ef=0,Vv=0,bl=null,en=null,Wv=0,ca=1/0,Er=null,Ad=!1,Um=null,Mo=null,hu=!1,xo=null,Od=0,Sl=0,Vm=null,Zu=-1,ed=0;function Bt(){return Ie&6?at():Zu!==-1?Zu:Zu=at()}function Po(t){return t.mode&1?Ie&2&&Nt!==0?Nt&-Nt:YO.transition!==null?(ed===0&&(ed=US()),ed):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:JS(t.type)),t):1}function Gn(t,e,n,r){if(50<Sl)throw Sl=0,Vm=null,Error(ee(185));wc(t,n,r),(!(Ie&2)||t!==yt)&&(t===yt&&(!(Ie&2)&&(Ef|=n),ht===4&&mo(t,Nt)),an(t,r),n===1&&Ie===0&&!(e.mode&1)&&(ca=at()+500,bf&&Go()))}function an(t,e){var n=t.callbackNode;Y2(t,e);var r=gd(t,t===yt?Nt:0);if(r===0)n!==null&&ox(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ox(n),e===1)t.tag===0?GO(Jx.bind(null,t)):mC(Jx.bind(null,t)),VO(function(){!(Ie&6)&&Go()}),n=null;else{switch(VS(r)){case 1:n=vv;break;case 4:n=BS;break;case 16:n=md;break;case 536870912:n=HS;break;default:n=md}n=hk(n,ik.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ik(t,e){if(Zu=-1,ed=0,Ie&6)throw Error(ee(327));var n=t.callbackNode;if(Ki()&&t.callbackNode!==n)return null;var r=gd(t,t===yt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jd(t,r);else{e=r;var o=Ie;Ie|=2;var s=lk();(yt!==t||Nt!==e)&&(Er=null,ca=at()+500,ks(t,e));do try{mj();break}catch(a){ak(t,a)}while(!0);_v(),Rd.current=s,Ie=o,ct!==null?e=0:(yt=null,Nt=0,e=ht)}if(e!==0){if(e===2&&(o=vm(t),o!==0&&(r=o,e=Wm(t,o))),e===1)throw n=Yl,ks(t,0),mo(t,r),an(t,at()),n;if(e===6)mo(t,r);else{if(o=t.current.alternate,!(r&30)&&!hj(o)&&(e=jd(t,r),e===2&&(s=vm(t),s!==0&&(r=s,e=Wm(t,s))),e===1))throw n=Yl,ks(t,0),mo(t,r),an(t,at()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:us(t,en,Er);break;case 3:if(mo(t,r),(r&130023424)===r&&(e=Wv+500-at(),10<e)){if(gd(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Em(us.bind(null,t,en,Er),e);break}us(t,en,Er);break;case 4:if(mo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-qn(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fj(r/1960))-r,10<r){t.timeoutHandle=Em(us.bind(null,t,en,Er),r);break}us(t,en,Er);break;case 5:us(t,en,Er);break;default:throw Error(ee(329))}}}return an(t,at()),t.callbackNode===n?ik.bind(null,t):null}function Wm(t,e){var n=bl;return t.current.memoizedState.isDehydrated&&(ks(t,e).flags|=256),t=jd(t,e),t!==2&&(e=en,en=n,e!==null&&Km(e)),t}function Km(t){en===null?en=t:en.push.apply(en,t)}function hj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Yn(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mo(t,e){for(e&=~Vv,e&=~Ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qn(e),r=1<<n;t[n]=-1,e&=~r}}function Jx(t){if(Ie&6)throw Error(ee(327));Ki();var e=gd(t,0);if(!(e&1))return an(t,at()),null;var n=jd(t,e);if(t.tag!==0&&n===2){var r=vm(t);r!==0&&(e=r,n=Wm(t,r))}if(n===1)throw n=Yl,ks(t,0),mo(t,e),an(t,at()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,en,Er),an(t,at()),null}function Kv(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(ca=at()+500,bf&&Go())}}function Ls(t){xo!==null&&xo.tag===0&&!(Ie&6)&&Ki();var e=Ie;Ie|=1;var n=_n.transition,r=Fe;try{if(_n.transition=null,Fe=1,t)return t()}finally{Fe=r,_n.transition=n,Ie=e,!(Ie&6)&&Go()}}function qv(){hn=Li.current,Ye(Li)}function ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UO(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(Nv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bd();break;case 3:aa(),Ye(on),Ye(Lt),Dv();break;case 5:Iv(r);break;case 4:aa();break;case 13:Ye(Ze);break;case 19:Ye(Ze);break;case 10:Rv(r.type._context);break;case 22:case 23:qv()}n=n.return}if(yt=t,ct=t=_o(t.current,null),Nt=hn=e,ht=0,Yl=null,Vv=Ef=Ds=0,en=bl=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}xs=null}return t}function ak(t,e){do{var n=ct;try{if(_v(),Ju.current=_d,Pd){for(var r=et.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Pd=!1}if(Is=0,mt=ft=et=null,xl=!1,Kl=0,Uv.current=null,n===null||n.return===null){ht=1,Yl=e,ct=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Lx(i);if(m!==null){m.flags&=-257,$x(m,i,a,s,e),m.mode&1&&Dx(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){Dx(s,c,e),Gv();break e}l=Error(ee(426))}}else if(Xe&&a.mode&1){var x=Lx(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),$x(x,i,a,s,e),Mv(la(l,a));break e}}s=l=la(l,a),ht!==4&&(ht=2),bl===null?bl=[s]:bl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=VC(s,l,e);_x(s,y);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Mo===null||!Mo.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=WC(s,a,e);_x(s,S);break e}}s=s.return}while(s!==null)}uk(n)}catch(C){e=C,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function lk(){var t=Rd.current;return Rd.current=_d,t===null?_d:t}function Gv(){(ht===0||ht===3||ht===2)&&(ht=4),yt===null||!(Ds&268435455)&&!(Ef&268435455)||mo(yt,Nt)}function jd(t,e){var n=Ie;Ie|=2;var r=lk();(yt!==t||Nt!==e)&&(Er=null,ks(t,e));do try{pj();break}catch(o){ak(t,o)}while(!0);if(_v(),Ie=n,Rd.current=r,ct!==null)throw Error(ee(261));return yt=null,Nt=0,ht}function pj(){for(;ct!==null;)ck(ct)}function mj(){for(;ct!==null&&!z2();)ck(ct)}function ck(t){var e=fk(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?uk(t):ct=e,Uv.current=null}function uk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lj(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,ct=null;return}}else if(n=aj(n,e,hn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);ht===0&&(ht=5)}function us(t,e,n){var r=Fe,o=_n.transition;try{_n.transition=null,Fe=1,gj(t,e,n,r)}finally{_n.transition=o,Fe=r}return null}function gj(t,e,n,r){do Ki();while(xo!==null);if(Ie&6)throw Error(ee(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(J2(t,s),t===yt&&(ct=yt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hu||(hu=!0,hk(md,function(){return Ki(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_n.transition,_n.transition=null;var i=Fe;Fe=1;var a=Ie;Ie|=4,Uv.current=null,uj(t,n),ok(n,t),DO(Cm),vd=!!Sm,Cm=Sm=null,t.current=n,dj(n),B2(),Ie=a,Fe=i,_n.transition=s}else t.current=n;if(hu&&(hu=!1,xo=t,Od=o),s=t.pendingLanes,s===0&&(Mo=null),V2(n.stateNode),an(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ad)throw Ad=!1,t=Um,Um=null,t;return Od&1&&t.tag!==0&&Ki(),s=t.pendingLanes,s&1?t===Vm?Sl++:(Sl=0,Vm=t):Sl=0,Go(),null}function Ki(){if(xo!==null){var t=VS(Od),e=_n.transition,n=Fe;try{if(_n.transition=null,Fe=16>t?16:t,xo===null)var r=!1;else{if(t=xo,xo=null,Od=0,Ie&6)throw Error(ee(331));var o=Ie;for(Ie|=4,ce=t.current;ce!==null;){var s=ce,i=s.child;if(ce.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ce=c;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:wl(8,u,s)}var d=u.child;if(d!==null)d.return=u,ce=d;else for(;ce!==null;){u=ce;var h=u.sibling,m=u.return;if(tk(u),u===c){ce=null;break}if(h!==null){h.return=m,ce=h;break}ce=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ce=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,ce=i;else e:for(;ce!==null;){if(s=ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ce=y;break e}ce=s.return}}var w=t.current;for(ce=w;ce!==null;){i=ce;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,ce=b;else e:for(i=w;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kf(9,a)}}catch(C){rt(a,a.return,C)}if(a===i){ce=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ce=S;break e}ce=a.return}}if(Ie=o,Go(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(gf,t)}catch{}r=!0}return r}finally{Fe=n,_n.transition=e}}return!1}function Xx(t,e,n){e=la(n,e),e=VC(t,e,1),t=No(t,e,1),e=Bt(),t!==null&&(wc(t,1,e),an(t,e))}function rt(t,e,n){if(t.tag===3)Xx(t,t,n);else for(;e!==null;){if(e.tag===3){Xx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mo===null||!Mo.has(r))){t=la(n,t),t=WC(e,t,1),e=No(e,t,1),t=Bt(),e!==null&&(wc(e,1,t),an(e,t));break}}e=e.return}}function vj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(Nt&n)===n&&(ht===4||ht===3&&(Nt&130023424)===Nt&&500>at()-Wv?ks(t,0):Vv|=n),an(t,e)}function dk(t,e){e===0&&(t.mode&1?(e=ru,ru<<=1,!(ru&130023424)&&(ru=4194304)):e=1);var n=Bt();t=Lr(t,e),t!==null&&(wc(t,e,n),an(t,n))}function yj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dk(t,n)}function xj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),dk(t,n)}var fk;fk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,ij(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Xe&&e.flags&1048576&&gC(e,kd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qu(t,e),t=e.pendingProps;var o=oa(e,Lt.current);Wi(e,n),o=$v(null,e,r,t,o,n);var s=Fv();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(s=!0,Sd(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ov(e),o.updater=Cf,e.stateNode=o,o._reactInternals=e,Am(e,r,t,n),e=Im(null,e,r,!0,s,n)):(e.tag=0,Xe&&s&&Tv(e),zt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qu(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=bj(r),t=Hn(r,t),o){case 0:e=jm(null,e,r,t,n);break e;case 1:e=Bx(null,e,r,t,n);break e;case 11:e=Fx(null,e,r,t,n);break e;case 14:e=zx(null,e,r,Hn(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Hn(r,o),jm(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Hn(r,o),Bx(t,e,r,o,n);case 3:e:{if(YC(e),t===null)throw Error(ee(387));r=e.pendingProps,s=e.memoizedState,o=s.element,SC(t,e),Nd(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=la(Error(ee(423)),e),e=Hx(t,e,r,n,o);break e}else if(r!==o){o=la(Error(ee(424)),e),e=Hx(t,e,r,n,o);break e}else for(gn=To(e.stateNode.containerInfo.firstChild),vn=e,Xe=!0,Wn=null,n=wC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sa(),r===o){e=$r(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return CC(e),t===null&&Pm(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,km(r,o)?i=null:s!==null&&km(r,s)&&(e.flags|=32),GC(t,e),zt(t,e,i,n),e.child;case 6:return t===null&&Pm(e),null;case 13:return JC(t,e,n);case 4:return jv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ia(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Hn(r,o),Fx(t,e,r,o,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,We(Ed,r._currentValue),r._currentValue=i,s!==null)if(Yn(s.value,i)){if(s.children===o.children&&!on.current){e=$r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ar(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),_m(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(ee(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),_m(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}zt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Wi(e,n),o=Dn(o),r=r(o),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,o=Hn(r,e.pendingProps),o=Hn(r.type,o),zx(t,e,r,o,n);case 15:return KC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Hn(r,o),Qu(t,e),e.tag=1,sn(r)?(t=!0,Sd(e)):t=!1,Wi(e,n),UC(e,r,o),Am(e,r,o,n),Im(null,e,r,!0,t,n);case 19:return XC(t,e,n);case 22:return qC(t,e,n)}throw Error(ee(156,e.tag))};function hk(t,e){return zS(t,e)}function wj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new wj(t,e,n,r)}function Yv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bj(t){if(typeof t=="function")return Yv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pv)return 11;if(t===mv)return 14}return 2}function _o(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function td(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")Yv(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Ni:return Es(n.children,o,s,e);case hv:i=8,o|=8;break;case nm:return t=Pn(12,n,e,o|2),t.elementType=nm,t.lanes=s,t;case rm:return t=Pn(13,n,e,o),t.elementType=rm,t.lanes=s,t;case om:return t=Pn(19,n,e,o),t.elementType=om,t.lanes=s,t;case CS:return Tf(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bS:i=10;break e;case SS:i=9;break e;case pv:i=11;break e;case mv:i=14;break e;case lo:i=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Pn(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function Es(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Tf(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=CS,t.lanes=n,t.stateNode={isHidden:!1},t}function Zh(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function ep(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sj(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jh(0),this.expirationTimes=jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jh(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Jv(t,e,n,r,o,s,i,a,l){return t=new Sj(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ov(s),t}function Cj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pk(t){if(!t)return $o;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(sn(n))return pC(t,n,e)}return e}function mk(t,e,n,r,o,s,i,a,l){return t=Jv(n,r,!0,t,o,s,i,a,l),t.context=pk(null),n=t.current,r=Bt(),o=Po(n),s=Ar(r,o),s.callback=e??null,No(n,s,o),t.current.lanes=o,wc(t,o,r),an(t,r),t}function Nf(t,e,n,r){var o=e.current,s=Bt(),i=Po(o);return n=pk(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=No(o,e,i),t!==null&&(Gn(t,o,i,s),Yu(t,o,i)),i}function Id(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xv(t,e){Qx(t,e),(t=t.alternate)&&Qx(t,e)}function kj(){return null}var gk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qv(t){this._internalRoot=t}Mf.prototype.render=Qv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Nf(t,e,null,null)};Mf.prototype.unmount=Qv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){Nf(null,t,null,null)}),e[Dr]=null}};function Mf(t){this._internalRoot=t}Mf.prototype.unstable_scheduleHydration=function(t){if(t){var e=qS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<po.length&&e!==0&&e<po[n].priority;n++);po.splice(n,0,t),n===0&&YS(t)}};function Zv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zx(){}function Ej(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Id(i);s.call(c)}}var i=mk(e,r,t,0,null,!1,!1,"",Zx);return t._reactRootContainer=i,t[Dr]=i.current,Bl(t.nodeType===8?t.parentNode:t),Ls(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=Id(l);a.call(c)}}var l=Jv(t,0,!1,null,null,!1,!1,"",Zx);return t._reactRootContainer=l,t[Dr]=l.current,Bl(t.nodeType===8?t.parentNode:t),Ls(function(){Nf(e,l,n,r)}),l}function _f(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=Id(i);a.call(l)}}Nf(e,i,t,o)}else i=Ej(n,e,t,o,r);return Id(i)}WS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ol(e.pendingLanes);n!==0&&(yv(e,n|1),an(e,at()),!(Ie&6)&&(ca=at()+500,Go()))}break;case 13:Ls(function(){var r=Lr(t,1);if(r!==null){var o=Bt();Gn(r,t,1,o)}}),Xv(t,1)}};xv=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=Bt();Gn(e,t,134217728,n)}Xv(t,134217728)}};KS=function(t){if(t.tag===13){var e=Po(t),n=Lr(t,e);if(n!==null){var r=Bt();Gn(n,t,e,r)}Xv(t,e)}};qS=function(){return Fe};GS=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};pm=function(t,e,n){switch(e){case"input":if(am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=wf(r);if(!o)throw Error(ee(90));ES(r),am(r,o)}}}break;case"textarea":NS(t,n);break;case"select":e=n.value,e!=null&&Bi(t,!!n.multiple,e,!1)}};jS=Kv;IS=Ls;var Tj={usingClientEntryPoint:!1,Events:[Sc,Ri,wf,AS,OS,Kv]},qa={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nj={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$S(t),t===null?null:t.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||kj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{gf=pu.inject(Nj),ur=pu}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tj;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zv(e))throw Error(ee(200));return Cj(t,e,null,n)};wn.createRoot=function(t,e){if(!Zv(t))throw Error(ee(299));var n=!1,r="",o=gk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Jv(t,1,!1,null,null,n,!1,r,o),t[Dr]=e.current,Bl(t.nodeType===8?t.parentNode:t),new Qv(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=$S(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return Ls(t)};wn.hydrate=function(t,e,n){if(!Pf(e))throw Error(ee(200));return _f(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!Zv(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=gk;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=mk(e,null,t,1,n??null,o,!1,s,i),t[Dr]=e.current,Bl(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Mf(e)};wn.render=function(t,e,n){if(!Pf(e))throw Error(ee(200));return _f(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!Pf(t))throw Error(ee(40));return t._reactRootContainer?(Ls(function(){_f(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};wn.unstable_batchedUpdates=Kv;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return _f(t,e,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function vk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vk)}catch(t){console.error(t)}}vk(),vS.exports=wn;var Yo=vS.exports;const kc=sS(Yo);var yk,ew=Yo;yk=ew.createRoot,ew.hydrateRoot;const Mj={theme:"system",setTheme:()=>null},xk=p.createContext(Mj);function Pj({children:t,defaultTheme:e="system",storageKey:n="vite-ui-theme",...r}){const[o,s]=p.useState(()=>localStorage.getItem(n)||e);p.useEffect(()=>{const a=window.document.documentElement;if(a.classList.remove("light","dark"),o==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a.classList.add(l);return}a.classList.add(o)},[o]);const i={theme:o,setTheme:a=>{localStorage.setItem(n,a),s(a)}};return f.jsx(xk.Provider,{...r,value:i,children:t})}const _j=()=>{const t=p.useContext(xk);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};var tw=["light","dark"],Rj="(prefers-color-scheme: dark)",Aj=p.createContext(void 0),Oj={setTheme:t=>{},themes:[]},jj=()=>{var t;return(t=p.useContext(Aj))!=null?t:Oj};p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,attrs:a,nonce:l})=>{let c=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=o?tw.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,x=!0)=>{let y=i?i[g]:g,w=v?g+"|| ''":`'${y}'`,b="";return o&&x&&!v&&tw.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?b+=`c.add(${w})`:b+="null":y&&(b+=`d[s](n,${w})`),b},m=t?`!function(){${u}${h(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${Rj}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${c?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return p.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var Ij=t=>{switch(t){case"success":return $j;case"info":return zj;case"warning":return Fj;case"error":return Bj;default:return null}},Dj=Array(12).fill(0),Lj=({visible:t})=>X.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},X.createElement("div",{className:"sonner-spinner"},Dj.map((e,n)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),$j=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Fj=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),zj=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Bj=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Hj=()=>{let[t,e]=X.useState(document.hidden);return X.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},qm=1,Uj=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,o=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:qm++,s=this.toasts.find(a=>a.id===o),i=t.dismissible===void 0?!0:t.dismissible;return s?this.toasts=this.toasts.map(a=>a.id===o?(this.publish({...a,...t,id:o,title:n}),{...a,...t,id:o,dismissible:i,title:n}):a):this.addToast({title:n,...r,dismissible:i,id:o}),o},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),o=n!==void 0;return r.then(async s=>{if(Wj(s)&&!s.ok){o=!1;let i=typeof e.error=="function"?await e.error(`HTTP error! status: ${s.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:n,type:"error",message:i,description:a})}else if(e.success!==void 0){o=!1;let i=typeof e.success=="function"?await e.success(s):e.success,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:n,type:"success",message:i,description:a})}}).catch(async s=>{if(e.error!==void 0){o=!1;let i=typeof e.error=="function"?await e.error(s):e.error,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:n,type:"error",message:i,description:a})}}).finally(()=>{var s;o&&(this.dismiss(n),n=void 0),(s=e.finally)==null||s.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||qm++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},fn=new Uj,Vj=(t,e)=>{let n=(e==null?void 0:e.id)||qm++;return fn.addToast({title:t,...e,id:n}),n},Wj=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Kj=Vj,qj=()=>fn.toasts,ge=Object.assign(Kj,{success:fn.success,info:fn.info,warning:fn.warning,error:fn.error,custom:fn.custom,message:fn.message,promise:fn.promise,dismiss:fn.dismiss,loading:fn.loading},{getHistory:qj});function Gj(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Gj(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function mu(t){return t.label!==void 0}var Yj=3,Jj="32px",Xj=4e3,Qj=356,Zj=14,eI=20,tI=200;function nI(...t){return t.filter(Boolean).join(" ")}var rI=t=>{var e,n,r,o,s,i,a,l,c,u;let{invert:d,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:x,heights:y,index:w,toasts:b,expanded:S,removeToast:C,defaultRichColors:E,closeButton:k,style:T,cancelButtonStyle:j,actionButtonStyle:I,className:V="",descriptionClassName:U="",duration:B,position:W,gap:oe,loadingIcon:H,expandByDefault:te,classNames:R,icons:N,closeButtonAriaLabel:$="Close toast",pauseWhenPageIsHidden:L,cn:P}=t,[q,Z]=X.useState(!1),[M,O]=X.useState(!1),[D,re]=X.useState(!1),[z,G]=X.useState(!1),[se,ne]=X.useState(0),[pe,_]=X.useState(0),Ne=X.useRef(null),Pe=X.useRef(null),De=w===0,Re=w+1<=x,be=h.type,Xt=h.dismissible!==!1,La=h.className||"",$a=h.descriptionClassName||"",qr=X.useMemo(()=>y.findIndex(A=>A.toastId===h.id)||0,[y,h.id]),Gr=X.useMemo(()=>{var A;return(A=h.closeButton)!=null?A:k},[h.closeButton,k]),ii=X.useMemo(()=>h.duration||B||Xj,[h.duration,B]),ss=X.useRef(0),Cn=X.useRef(0),Yr=X.useRef(0),Fn=X.useRef(null),[is,ai]=W.split("-"),F=X.useMemo(()=>y.reduce((A,Q,K)=>K>=qr?A:A+Q.height,0),[y,qr]),Y=Hj(),fe=h.invert||d,de=be==="loading";Cn.current=X.useMemo(()=>qr*oe+F,[qr,F]),X.useEffect(()=>{Z(!0)},[]),X.useLayoutEffect(()=>{if(!q)return;let A=Pe.current,Q=A.style.height;A.style.height="auto";let K=A.getBoundingClientRect().height;A.style.height=Q,_(K),v(ye=>ye.find(ue=>ue.toastId===h.id)?ye.map(ue=>ue.toastId===h.id?{...ue,height:K}:ue):[{toastId:h.id,height:K,position:h.position},...ye])},[q,h.title,h.description,v,h.id]);let me=X.useCallback(()=>{O(!0),ne(Cn.current),v(A=>A.filter(Q=>Q.toastId!==h.id)),setTimeout(()=>{C(h)},tI)},[h,C,v,Cn]);X.useEffect(()=>{if(h.promise&&be==="loading"||h.duration===1/0||h.type==="loading")return;let A,Q=ii;return S||g||L&&Y?(()=>{if(Yr.current<ss.current){let K=new Date().getTime()-ss.current;Q=Q-K}Yr.current=new Date().getTime()})():Q!==1/0&&(ss.current=new Date().getTime(),A=setTimeout(()=>{var K;(K=h.onAutoClose)==null||K.call(h,h),me()},Q)),()=>clearTimeout(A)},[S,g,te,h,ii,me,h.promise,be,L,Y]),X.useEffect(()=>{let A=Pe.current;if(A){let Q=A.getBoundingClientRect().height;return _(Q),v(K=>[{toastId:h.id,height:Q,position:h.position},...K]),()=>v(K=>K.filter(ye=>ye.toastId!==h.id))}},[v,h.id]),X.useEffect(()=>{h.delete&&me()},[me,h.delete]);function Ae(){return N!=null&&N.loading?X.createElement("div",{className:"sonner-loader","data-visible":be==="loading"},N.loading):H?X.createElement("div",{className:"sonner-loader","data-visible":be==="loading"},H):X.createElement(Lj,{visible:be==="loading"})}return X.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Pe,className:P(V,La,R==null?void 0:R.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,R==null?void 0:R.default,R==null?void 0:R[be],(n=h==null?void 0:h.classNames)==null?void 0:n[be]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:E,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":q,"data-promise":!!h.promise,"data-removed":M,"data-visible":Re,"data-y-position":is,"data-x-position":ai,"data-index":w,"data-front":De,"data-swiping":D,"data-dismissible":Xt,"data-type":be,"data-invert":fe,"data-swipe-out":z,"data-expanded":!!(S||te&&q),style:{"--index":w,"--toasts-before":w,"--z-index":b.length-w,"--offset":`${M?se:Cn.current}px`,"--initial-height":te?"auto":`${pe}px`,...T,...h.style},onPointerDown:A=>{de||!Xt||(Ne.current=new Date,ne(Cn.current),A.target.setPointerCapture(A.pointerId),A.target.tagName!=="BUTTON"&&(re(!0),Fn.current={x:A.clientX,y:A.clientY}))},onPointerUp:()=>{var A,Q,K,ye;if(z||!Xt)return;Fn.current=null;let ue=Number(((A=Pe.current)==null?void 0:A.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Le=new Date().getTime()-((Q=Ne.current)==null?void 0:Q.getTime()),Ft=Math.abs(ue)/Le;if(Math.abs(ue)>=eI||Ft>.11){ne(Cn.current),(K=h.onDismiss)==null||K.call(h,h),me(),G(!0);return}(ye=Pe.current)==null||ye.style.setProperty("--swipe-amount","0px"),re(!1)},onPointerMove:A=>{var Q;if(!Fn.current||!Xt)return;let K=A.clientY-Fn.current.y,ye=A.clientX-Fn.current.x,ue=(is==="top"?Math.min:Math.max)(0,K),Le=A.pointerType==="touch"?10:2;Math.abs(ue)>Le?(Q=Pe.current)==null||Q.style.setProperty("--swipe-amount",`${K}px`):Math.abs(ye)>Le&&(Fn.current=null)}},Gr&&!h.jsx?X.createElement("button",{"aria-label":$,"data-disabled":de,"data-close-button":!0,onClick:de||!Xt?()=>{}:()=>{var A;me(),(A=h.onDismiss)==null||A.call(h,h)},className:P(R==null?void 0:R.closeButton,(o=h==null?void 0:h.classNames)==null?void 0:o.closeButton)},X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||X.isValidElement(h.title)?h.jsx||h.title:X.createElement(X.Fragment,null,be||h.icon||h.promise?X.createElement("div",{"data-icon":"",className:P(R==null?void 0:R.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Ae():null,h.type!=="loading"?h.icon||(N==null?void 0:N[be])||Ij(be):null):null,X.createElement("div",{"data-content":"",className:P(R==null?void 0:R.content,(i=h==null?void 0:h.classNames)==null?void 0:i.content)},X.createElement("div",{"data-title":"",className:P(R==null?void 0:R.title,(a=h==null?void 0:h.classNames)==null?void 0:a.title)},h.title),h.description?X.createElement("div",{"data-description":"",className:P(U,$a,R==null?void 0:R.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),X.isValidElement(h.cancel)?h.cancel:h.cancel&&mu(h.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||j,onClick:A=>{var Q,K;mu(h.cancel)&&Xt&&((K=(Q=h.cancel).onClick)==null||K.call(Q,A),me())},className:P(R==null?void 0:R.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,X.isValidElement(h.action)?h.action:h.action&&mu(h.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||I,onClick:A=>{var Q,K;mu(h.action)&&(A.defaultPrevented||((K=(Q=h.action).onClick)==null||K.call(Q,A),me()))},className:P(R==null?void 0:R.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function nw(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var oI=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:o,closeButton:s,className:i,offset:a,theme:l="light",richColors:c,duration:u,style:d,visibleToasts:h=Yj,toastOptions:m,dir:g=nw(),gap:v=Zj,loadingIcon:x,icons:y,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:b,cn:S=nI}=t,[C,E]=X.useState([]),k=X.useMemo(()=>Array.from(new Set([n].concat(C.filter(L=>L.position).map(L=>L.position)))),[C,n]),[T,j]=X.useState([]),[I,V]=X.useState(!1),[U,B]=X.useState(!1),[W,oe]=X.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=X.useRef(null),te=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=X.useRef(null),N=X.useRef(!1),$=X.useCallback(L=>{var P;(P=C.find(q=>q.id===L.id))!=null&&P.delete||fn.dismiss(L.id),E(q=>q.filter(({id:Z})=>Z!==L.id))},[C]);return X.useEffect(()=>fn.subscribe(L=>{if(L.dismiss){E(P=>P.map(q=>q.id===L.id?{...q,delete:!0}:q));return}setTimeout(()=>{kc.flushSync(()=>{E(P=>{let q=P.findIndex(Z=>Z.id===L.id);return q!==-1?[...P.slice(0,q),{...P[q],...L},...P.slice(q+1)]:[L,...P]})})})}),[]),X.useEffect(()=>{if(l!=="system"){oe(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:L})=>{oe(L?"dark":"light")})},[l]),X.useEffect(()=>{C.length<=1&&V(!1)},[C]),X.useEffect(()=>{let L=P=>{var q,Z;r.every(M=>P[M]||P.code===M)&&(V(!0),(q=H.current)==null||q.focus()),P.code==="Escape"&&(document.activeElement===H.current||(Z=H.current)!=null&&Z.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[r]),X.useEffect(()=>{if(H.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,N.current=!1)}},[H.current]),C.length?X.createElement("section",{"aria-label":`${w} ${te}`,tabIndex:-1},k.map((L,P)=>{var q;let[Z,M]=L.split("-");return X.createElement("ol",{key:L,dir:g==="auto"?nw():g,tabIndex:-1,ref:H,className:i,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":Z,"data-x-position":M,style:{"--front-toast-height":`${((q=T[0])==null?void 0:q.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||Jj,"--width":`${Qj}px`,"--gap":`${v}px`,...d},onBlur:O=>{N.current&&!O.currentTarget.contains(O.relatedTarget)&&(N.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:O=>{O.target instanceof HTMLElement&&O.target.dataset.dismissible==="false"||N.current||(N.current=!0,R.current=O.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{U||V(!1)},onPointerDown:O=>{O.target instanceof HTMLElement&&O.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},C.filter(O=>!O.position&&P===0||O.position===L).map((O,D)=>{var re,z;return X.createElement(rI,{key:O.id,icons:y,index:D,toast:O,defaultRichColors:c,duration:(re=m==null?void 0:m.duration)!=null?re:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:h,closeButton:(z=m==null?void 0:m.closeButton)!=null?z:s,interacting:U,position:L,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:$,toasts:C.filter(G=>G.position==O.position),heights:T.filter(G=>G.position==O.position),setHeights:j,expandByDefault:o,gap:v,loadingIcon:x,expanded:I,pauseWhenPageIsHidden:b,cn:S})}))})):null};const sI=({...t})=>{const{theme:e="system"}=jj();return f.jsx(oI,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:`
            group toast 
            group-[.toaster]:bg-background 
            group-[.toaster]:text-foreground 
            group-[.toaster]:border-border 
            group-[.toaster]:shadow-lg 
            dark:group-[.toaster]:shadow-white/10  // Add white shadow for dark mode
            dark:group-[.toaster]:shadow-xl       // Optional: Add larger shadow in dark mode
          `,description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function kt(t){this.content=t}kt.prototype={constructor:kt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new kt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new kt(n)},addToStart:function(t,e){return new kt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new kt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new kt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=kt.from(t),t.size?new kt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=kt.from(t),t.size?new kt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=kt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};kt.from=function(t){if(t instanceof kt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new kt(e)};function wk(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=wk(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function bk(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=bk(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class J{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new J(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new J(r,o)}cutByIndex(e,n){return e==n?J.empty:e==0&&n==this.content.length?this:new J(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new J(o,s)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return wk(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return bk(this,e,n,r)}findIndex(e,n=-1){if(e==0)return gu(0,e);if(e==this.size)return gu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?gu(r+1,i):gu(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return J.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new J(n||e,r)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const tp={index:0,offset:0};function gu(t,e){return tp.index=t,tp.offset=e,tp}function Dd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Dd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Dd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let He=class Gm{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Dd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Gm.none;if(e instanceof Gm)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};He.none=[];class Ld extends Error{}class ae{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Ck(this.content,e+this.openStart,n);return r&&new ae(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ae(Sk(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ae.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ae(J.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new ae(e,r,o)}}ae.empty=new ae(J.empty,0,0);function Sk(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Sk(s.content,e-o-1,n-o-1)))}function Ck(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=Ck(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function iI(t,e,n){if(n.openStart>t.depth)throw new Ld("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ld("Inconsistent open depths");return kk(t,e,n,0)}function kk(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=kk(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return Ns(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=aI(n,t);return Ns(s,Tk(t,i,a,e,r))}else return Ns(s,$d(t,e,r))}function Ek(t,e){if(!e.type.compatibleContent(t.type))throw new Ld("Cannot join "+e.type.name+" onto "+t.type.name)}function Ym(t,e,n){let r=t.node(n);return Ek(r,e.node(n)),r}function Ts(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Cl(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Ts(t.nodeAfter,r),s++));for(let a=s;a<i;a++)Ts(o.child(a),r);e&&e.depth==n&&e.textOffset&&Ts(e.nodeBefore,r)}function Ns(t,e){return t.type.checkContent(e),t.copy(e)}function Tk(t,e,n,r,o){let s=t.depth>o&&Ym(t,e,o+1),i=r.depth>o&&Ym(n,r,o+1),a=[];return Cl(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(Ek(s,i),Ts(Ns(s,Tk(t,e,n,r,o+1)),a)):(s&&Ts(Ns(s,$d(t,e,o+1)),a),Cl(e,n,o,a),i&&Ts(Ns(i,$d(n,r,o+1)),a)),Cl(r,null,o,a),new J(a)}function $d(t,e,n){let r=[];if(Cl(null,t,n,r),t.depth>n){let o=Ym(t,e,n+1);Ts(Ns(o,$d(t,e,n+1)),r)}return Cl(e,null,n,r),new J(r)}function aI(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(J.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class Jl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return He.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Fd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new Jl(n,r,s)}static resolveCached(e,n){let r=rw.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else rw.set(e,r=new lI);let o=r.elts[r.i]=Jl.resolve(e,n);return r.i=(r.i+1)%cI,o}}class lI{constructor(){this.elts=[],this.i=0}}const cI=12,rw=new WeakMap;class Fd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const uI=Object.create(null);let Ro=class Jm{constructor(e,n,r,o=He.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||J.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Dd(this.attrs,n||e.defaultAttrs||uI)&&He.sameSet(this.marks,r||He.none)}copy(e=null){return e==this.content?this:new Jm(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Jm(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ae.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new ae(c,o.depth-i,s.depth-i)}replace(e,n,r){return iI(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Jl.resolveCached(this,e)}resolveNoCache(e){return Jl.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Nk(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=J.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=He.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!He.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=J.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};Ro.prototype.text=void 0;class zd extends Ro{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Nk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new zd(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new zd(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Nk(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class $s{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new dI(e,n);if(r.next==null)return $s.empty;let o=Mk(r);r.next&&r.err("Unexpected trailing text");let s=yI(vI(o));return xI(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return J.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}$s.empty=new $s(!0);class dI{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Mk(t){let e=[];do e.push(fI(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function fI(t){let e=[];do e.push(hI(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function hI(t){let e=gI(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=pI(t,e);else break;return e}function ow(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function pI(t,e){let n=ow(t),r=n;return t.eat(",")&&(t.next!="}"?r=ow(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function mI(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function gI(t){if(t.eat("(")){let e=Mk(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=mI(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vI(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();o(s(i.expr,l),u),l=u}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),o(s(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function Pk(t,e){return e-t}function sw(t,e){let n=[];return r(e),n.sort(Pk);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function yI(t){let e=Object.create(null);return n(sw(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);sw(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new $s(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(Pk);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function xI(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function _k(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Rk(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function Ak(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function Ok(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new bI(t,r,e[r]);return n}let iw=class jk{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ok(e,r.attrs),this.defaultAttrs=_k(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==$s.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Rk(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ro(this,this.computeAttrs(e),J.from(n),He.setFrom(r))}createChecked(e=null,n,r){return n=J.from(n),this.checkContent(n),new Ro(this,this.computeAttrs(e),n,He.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=J.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(J.empty,!0);return s?new Ro(this,e,n.append(s),He.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ak(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:He.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new jk(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function wI(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class bI{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?wI(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Rf{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=Ok(e,o.attrs),this.excluded=null;let s=_k(this.attrs);this.instance=s?new He(this,s):null}create(e=null){return!e&&this.instance?this.instance:new He(this,Rk(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new Rf(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Ak(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Ik{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=kt.from(e.nodes),n.marks=kt.from(e.marks||{}),this.nodes=iw.compile(this.spec.nodes,this),this.marks=Rf.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=$s.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?aw(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:aw(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof iw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new zd(r,r.defaultAttrs,e,He.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Ro.fromJSON(this,e)}markFromJSON(e){return He.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function aw(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function SI(t){return t.tag!=null}function CI(t){return t.style!=null}class Ao{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(SI(o))this.tags.push(o);else if(CI(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new cw(this,n,!1);return r.addAll(e,He.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new cw(this,n,!0);return r.addAll(e,He.none,n.from,n.to),ae.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(TI(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=uw(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=uw(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ao(e,Ao.schemaRules(e)))}}const Dk={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},kI={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Lk={ol:!0,ul:!0},Xl=1,Xm=2,kl=4;function lw(t,e,n){return e!=null?(e?Xl:0)|(e==="full"?Xm:0):t&&t.whitespace=="pre"?Xl|Xm:n&~kl}class vu{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=He.none,this.match=s||(i&kl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(J.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Xl)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=J.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Dk.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class cw{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=lw(null,n.preserveWhitespace,0)|(r?kl:0);o?s=new vu(o.type,o.attrs,He.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new vu(null,null,He.none,!0,null,i):s=new vu(e.schema.topNodeType,null,He.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&Xm?"full":this.localPreserveWS||(o.options&Xl)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;Lk.hasOwnProperty(i)&&this.parser.normalizeLists&&EI(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:kI.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Dk.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n){let r,o;for(let s=this.open;s>=0;s--){let i=this.nodes[s],a=i.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,o=i,!a.length)||i.solid)break}if(!r)return null;this.sync(o);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=He.none;for(let i of r.concat(e.marks))(o.type?o.type.allowsMarkType(i.type):dw(i.type,e.type))&&(s=i.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=lw(e,s,i.options);i.options&kl&&i.content.length==0&&(a|=kl);let l=He.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):dw(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new vu(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Xl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function EI(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Lk.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function TI(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function uw(t){let e={};for(let n in t)e[n]=t[n];return e}function dw(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&i(u))return!0}};if(i(o.contentMatch))return!0}}class Xs{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=np(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=nd(np(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&nd(np(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return nd(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Xs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=fw(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return fw(e.marks)}}function fw(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function np(t){return t.document||window.document}const hw=new WeakMap;function NI(t){let e=hw.get(t);return e===void 0&&hw.set(t,e=MI(t)),e}function MI(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function nd(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=NI(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:g}=nd(t,h,n,r);if(l.appendChild(m),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const $k=65535,Fk=Math.pow(2,16);function PI(t,e){return t+e*Fk}function pw(t){return t&$k}function _I(t){return(t-(t&$k))/Fk}const zk=1,Bk=2,rd=4,Hk=8;class Qm{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Hk)>0}get deletedBefore(){return(this.delInfo&(zk|rd))>0}get deletedAfter(){return(this.delInfo&(Bk|rd))>0}get deletedAcross(){return(this.delInfo&rd)>0}}class mn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&mn.empty)return mn.empty}recover(e){let n=0,r=pw(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+_I(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+i],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,m=l+o+(h<0?0:u);if(r)return m;let g=e==(n<0?l:d)?null:PI(a/3,e-l),v=e==l?Bk:e==d?zk:rd;return(n<0?e!=l:e!=d)&&(v|=Hk),new Qm(m,v,g)}o+=u-c}return r?e+o:new Qm(e+o,0,null)}touches(e,n){let r=0,o=pw(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new mn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?mn.empty:new mn(e<0?[0,-e,0]:[0,0,e])}}mn.empty=new mn([]);class qi{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new qi(this.maps,this.mirror,e,n)}copy(){return new qi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new qi;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this.maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Qm(e,o,null)}}const rp=Object.create(null);class $t{getMap(){return mn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=rp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in rp)throw new RangeError("Duplicate use of step JSON ID "+e);return rp[e]=n,n.prototype.jsonID=e,n}}class ut{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ut(e,null)}static fail(e){return new ut(null,e)}static fromReplace(e,n,r,o){try{return ut.ok(e.replace(n,r,o))}catch(s){if(s instanceof Ld)return ut.fail(s.message);throw s}}}function ey(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(ey(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return J.fromArray(r)}class wo extends $t{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new ae(ey(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return ut.fromReplace(e,this.from,this.to,s)}invert(){return new cr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new wo(n.pos,r.pos,this.mark)}merge(e){return e instanceof wo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new wo(n.from,n.to,e.markFromJSON(n.mark))}}$t.jsonID("addMark",wo);class cr extends $t{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ae(ey(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return ut.fromReplace(e,this.from,this.to,r)}invert(){return new wo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new cr(n.pos,r.pos,this.mark)}merge(e){return e instanceof cr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new cr(n.from,n.to,e.markFromJSON(n.mark))}}$t.jsonID("removeMark",cr);class bo extends $t{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ut.fromReplace(e,this.pos,this.pos+1,new ae(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new bo(this.pos,n.marks[o]);return new bo(this.pos,this.mark)}}return new ua(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new bo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new bo(n.pos,e.markFromJSON(n.mark))}}$t.jsonID("addNodeMark",bo);class ua extends $t{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ut.fromReplace(e,this.pos,this.pos+1,new ae(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new bo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ua(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ua(n.pos,e.markFromJSON(n.mark))}}$t.jsonID("removeNodeMark",ua);class vt extends $t{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Zm(e,this.from,this.to)?ut.fail("Structure replace would overwrite content"):ut.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new mn([this.from,this.to-this.from,this.slice.size])}invert(e){return new vt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof vt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ae.empty:new ae(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ae.empty:new ae(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vt(n.from,n.to,ae.fromJSON(e,n.slice),!!n.structure)}}$t.jsonID("replace",vt);class xt extends $t{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(Zm(e,this.from,this.gapFrom)||Zm(e,this.gapTo,this.to)))return ut.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ut.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ut.fromReplace(e,this.from,this.to,r):ut.fail("Content does not fit in gap")}getMap(){return new mn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new xt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new xt(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new xt(n.from,n.to,n.gapFrom,n.gapTo,ae.fromJSON(e,n.slice),n.insert,!!n.structure)}}$t.jsonID("replaceAround",xt);function Zm(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function RI(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),m=Math.min(c+l.nodeSize,n),g=r.addToSet(d);for(let v=0;v<d.length;v++)d[v].isInSet(g)||(i&&i.to==h&&i.mark.eq(d[v])?i.to=m:o.push(i=new cr(h,m,d[v])));a&&a.to==h?a.to=m:s.push(a=new wo(h,m,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function AI(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof Rf){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let m=0;m<o.length;m++){let g=o[m];g.step==s-1&&d.eq(o[m].style)&&(h=g)}h?(h.to=c,h.step=s):o.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new cr(i.from,i.to,i.style)))}function ty(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)i.push(new vt(a,u,ae.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new cr(a,u,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(c.text);)g||(g=new ae(J.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new vt(a+h.index,a+h.index+h[0].length,g))}}a=u}if(!r.validEnd){let l=r.fillBefore(J.empty,!0);t.replace(a,a,new ae(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function OI(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ea(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!OI(o,s,i))break}return null}function jI(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,u=J.empty,d=0;for(let g=s,v=!1;g>n;g--)v||r.index(g)>0?(v=!0,u=J.from(r.node(g).copy(u)),d++):l--;let h=J.empty,m=0;for(let g=s,v=!1;g>n;g--)v||o.after(g+1)<o.end(g)?(v=!0,h=J.from(o.node(g).copy(h)),m++):c++;t.step(new xt(l,c,i,a,new ae(u.append(h),d,m),u.size-d,!0))}function ny(t,e,n=null,r=t){let o=II(t,e),s=o&&DI(r,e);return s?o.map(mw).concat({type:e,attrs:n}).concat(s.map(mw)):null}function mw(t){return{type:t,attrs:null}}function II(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function DI(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function LI(t,e,n){let r=J.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=J.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new xt(o,s,o,s,new ae(r,0,0),n.length,!0))}function $I(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&FI(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?c=!1:!m&&g&&(c=!0)}c===!1&&Vk(t,i,a,s),ty(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+i.nodeSize,1);return t.step(new xt(d,h,d+1,h-1,new ae(J.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&Uk(t,i,a,s),!1}})}function Uk(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Vk(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function FI(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function zI(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new xt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ae(J.from(i),0,0),1,!0))}function Gi(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let d=o.node(c),h=o.index(c);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(h,d.childCount),g=r&&r[u+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let v=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!v.type.validContent(m))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function BI(t,e,n=1,r){let o=t.doc.resolve(e),s=J.empty,i=J.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=J.from(o.node(a).copy(s));let u=r&&r[c];i=J.from(u?u.type.create(u.attrs,i):o.node(a).copy(i))}t.step(new vt(e,e,new ae(s.append(i),n,n),!0))}function Jo(t,e){let n=t.resolve(e),r=n.index();return Wk(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function HI(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function Wk(t,e){return!!(t&&e&&!t.isLeaf&&HI(t,e))}function Af(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&Wk(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function UI(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let u=i.whitespace=="pre",d=!!i.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Vk(t,u.node(),u.before(),a)}i.inlineContent&&ty(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new vt(c,l.map(e+n,-1),ae.empty,!0)),r===!0){let u=t.doc.resolve(c);Uk(t,u.node(),u.before(),t.steps.length)}return t}function VI(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function Kk(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function Of(t,e,n=e,r=ae.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return qk(o,s,r)?new vt(e,n,r):new WI(o,s,r).fit()}function qk(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class WI{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=J.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=J.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new ae(s,i,a);return e>-1?new xt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new vt(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=op(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(i?c.matchType(i.type)||(d=c.fillBefore(J.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=op(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new ae(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=op(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new ae(il(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ae(il(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let v=0;v<s.length;v++)this.openFrontierNode(s[v]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(o){for(let v=0;v<o.childCount;v++)u.push(o.child(v));d=d.matchFragment(o)}let m=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let v=a.child(c),x=d.matchType(v.type);if(!x)break;c++,(c>1||l==0||v.content.size)&&(d=x,u.push(Gk(v.mark(h.allowedMarks(v.marks)),c==1?l:0,c==a.childCount?m:-1)))}let g=c==a.childCount;g||(m=-1),this.placed=al(this.placed,n,J.from(u)),this.frontier[n].match=d,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,x=a;v<m;v++){let y=x.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),x=y.content}this.unplaced=g?e==0?ae.empty:new ae(il(i.content,e-1,1),e-1,m<0?i.openEnd:e-1):new ae(il(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!sp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=sp(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=sp(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=al(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=al(this.placed,this.depth,J.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(J.empty,!0);n.childCount&&(this.placed=al(this.placed,this.frontier.length,n))}}function il(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(il(t.firstChild.content,e-1,n)))}function al(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(al(t.lastChild.content,e-1,n)))}function op(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Gk(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Gk(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(J.empty,!0)))),t.copy(r)}function sp(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!KI(n,s.content,i)?a:null}function KI(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function qI(t){return t.spec.defining||t.spec.definingForContent}function GI(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(qk(o,s,r))return t.step(new vt(e,n,r));let i=Jk(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,m=o.pos-1;h>0;h--,m--){let g=o.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==m&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],u=r.openStart;for(let h=r.content,m=0;;m++){let g=h.firstChild;if(c.push(g),m==r.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let m=c[h],g=qI(m.type);if(g&&!m.sameMarkup(o.node(Math.abs(a)-1)))u=h;else if(g||!m.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let m=(h+u+1)%(r.openStart+1),g=c[m];if(g)for(let v=0;v<i.length;v++){let x=i[(v+l)%i.length],y=!0;x<0&&(y=!1,x=-x);let w=o.node(x-1),b=o.index(x-1);if(w.canReplaceWith(b,b,g.type,g.marks))return t.replace(o.before(x),y?s.after(x):n,new ae(Yk(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let m=i[h];m<0||(e=o.before(m),n=s.after(m))}}function Yk(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Yk(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(J.empty,!0))}return t}function YI(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=VI(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new ae(J.from(r),0,0))}function JI(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=Jk(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function Jk(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Yi extends $t{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return ut.fromReplace(e,this.pos,this.pos+1,new ae(J.from(o),0,n.isLeaf?0:1))}getMap(){return mn.empty}invert(e){return new Yi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Yi(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Yi(n.pos,n.attr,n.value)}}$t.jsonID("attr",Yi);class Ql extends $t{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ut.ok(r)}getMap(){return mn.empty}invert(e){return new Ql(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ql(n.attr,n.value)}}$t.jsonID("docAttr",Ql);let da=class extends Error{};da=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};da.prototype=Object.create(Error.prototype);da.prototype.constructor=da;da.prototype.name="TransformError";class XI{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new qi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new da(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ae.empty){let o=Of(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new ae(J.from(r),0,0))}delete(e,n){return this.replace(e,n,ae.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return GI(this,e,n,r),this}replaceRangeWith(e,n,r){return YI(this,e,n,r),this}deleteRange(e,n){return JI(this,e,n),this}lift(e,n){return jI(this,e,n),this}join(e,n=1){return UI(this,e,n),this}wrap(e,n){return LI(this,e,n),this}setBlockType(e,n=e,r,o=null){return $I(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return zI(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Yi(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ql(e,n)),this}addNodeMark(e,n){return this.step(new bo(e,n)),this}removeNodeMark(e,n){if(!(n instanceof He)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new ua(e,n)),this}split(e,n=1,r){return BI(this,e,n,r),this}addMark(e,n,r){return RI(this,e,n,r),this}removeMark(e,n,r){return AI(this,e,n,r),this}clearIncompatible(e,n,r){return ty(this,e,n,r),this}}const ip=Object.create(null);class Te{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new QI(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ae.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?ae.empty:n),a==0&&yw(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),yw(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new Se(e):Si(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?Si(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Si(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Rn(e.node(0))}static atStart(e){return Si(e,e,0,0,1)||new Rn(e)}static atEnd(e){return Si(e,e,e.content.size,e.childCount,-1)||new Rn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ip[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ip)throw new RangeError("Duplicate use of selection JSON ID "+e);return ip[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Se.between(this.$anchor,this.$head).getBookmark()}}Te.prototype.visible=!0;class QI{constructor(e,n){this.$from=e,this.$to=n}}let gw=!1;function vw(t){!gw&&!t.parent.inlineContent&&(gw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Se extends Te{constructor(e,n=e){vw(e),vw(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Te.near(r);let o=e.resolve(n.map(this.anchor));return new Se(o.parent.inlineContent?o:r,r)}replace(e,n=ae.empty){if(super.replace(e,n),n==ae.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Se&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new jf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Se(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Te.findFrom(n,r,!0)||Te.findFrom(n,-r,!0);if(s)n=s.$head;else return Te.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Te.findFrom(e,-r,!0)||Te.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new Se(e,n)}}Te.jsonID("text",Se);class jf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new jf(e.map(this.anchor),e.map(this.head))}resolve(e){return Se.between(e.resolve(this.anchor),e.resolve(this.head))}}class xe extends Te{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Te.near(s):new xe(s)}content(){return new ae(J.from(this.node),0,0)}eq(e){return e instanceof xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ry(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new xe(e.resolve(n.anchor))}static create(e,n){return new xe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}xe.prototype.visible=!1;Te.jsonID("node",xe);class ry{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new jf(r,r):new ry(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&xe.isSelectable(r)?new xe(n):Te.near(n)}}class Rn extends Te{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ae.empty){if(n==ae.empty){e.delete(0,e.doc.content.size);let r=Te.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Rn(e)}map(e){return new Rn(e)}eq(e){return e instanceof Rn}getBookmark(){return ZI}}Te.jsonID("all",Rn);const ZI={map(){return this},resolve(t){return new Rn(t)}};function Si(t,e,n,r,o,s=!1){if(e.inlineContent)return Se.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&xe.isSelectable(a))return xe.create(t,n-(o<0?a.nodeSize:0))}else{let l=Si(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function yw(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof vt||o instanceof xt))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,u)=>{i==null&&(i=u)}),t.setSelection(Te.near(t.doc.resolve(i),n))}const xw=1,yu=2,ww=4;class eD extends XI{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|xw)&~yu,this.storedMarks=null,this}get selectionSet(){return(this.updated&xw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=yu,this}ensureMarks(e){return He.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&yu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~yu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||He.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(Te.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ww,this}get scrolledIntoView(){return(this.updated&ww)>0}}function bw(t,e){return!e||!t?t:t.bind(e)}class ll{constructor(e,n,r){this.name=e,this.init=bw(n.init,r),this.apply=bw(n.apply,r)}}const tD=[new ll("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ll("selection",{init(t,e){return t.selection||Te.atStart(e.doc)},apply(t){return t.selection}}),new ll("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new ll("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ap{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=tD.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ll(r.key,r.spec.state,r))})}}class $i{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new $i(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new eD(this)}static create(e){let n=new ap(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new $i(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new ap(this.schema,e.plugins),r=n.fields,o=new $i(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new ap(e.schema,e.plugins),s=new $i(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=Ro.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=Te.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function Xk(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Xk(o,e,{})),n[r]=o}return n}class qt{constructor(e){this.spec=e,this.props={},e.props&&Xk(e.props,this,this.props),this.key=e.key?e.key.key:Qk("plugin")}getState(e){return e[this.key]}}const lp=Object.create(null);function Qk(t){return t in lp?t+"$"+ ++lp[t]:(lp[t]=0,t+"$")}class $n{constructor(e="key"){this.key=Qk(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Et=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let eg=null;const Tr=function(t,e,n){let r=eg||(eg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},nD=function(){eg=null},Fs=function(t,e,n,r){return n&&(Sw(t,e,n,r,-1)||Sw(t,e,n,r,1))},rD=/^(img|br|input|textarea|hr)$/i;function Sw(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Mn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Ec(t)||rD.test(t.nodeName)||t.contentEditable=="false")return!1;e=Et(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?Mn(t):0}else return!1}}function Mn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function oD(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Mn(t)}else if(t.parentNode&&!Ec(t))e=Et(t),t=t.parentNode;else return null}}function sD(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ec(t))e=Et(t)+1,t=t.parentNode;else return null}}function iD(t,e,n){for(let r=e==0,o=e==Mn(t);r||o;){if(t==n)return!0;let s=Et(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==Mn(t)}}function Ec(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const If=function(t){return t.focusNode&&Fs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ps(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function aD(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function lD(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Mn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Mn(r.startContainer),r.startOffset)}}}const pr=typeof navigator<"u"?navigator:null,Cw=typeof document<"u"?document:null,Xo=pr&&pr.userAgent||"",tg=/Edge\/(\d+)/.exec(Xo),Zk=/MSIE \d/.exec(Xo),ng=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xo),ln=!!(Zk||ng||tg),Oo=Zk?document.documentMode:ng?+ng[1]:tg?+tg[1]:0,Jn=!ln&&/gecko\/(\d+)/i.test(Xo);Jn&&+(/Firefox\/(\d+)/.exec(Xo)||[0,0])[1];const rg=!ln&&/Chrome\/(\d+)/.exec(Xo),Dt=!!rg,eE=rg?+rg[1]:0,Ht=!ln&&!!pr&&/Apple Computer/.test(pr.vendor),fa=Ht&&(/Mobile\/\w+/.test(Xo)||!!pr&&pr.maxTouchPoints>2),En=fa||(pr?/Mac/.test(pr.platform):!1),cD=pr?/Win/.test(pr.platform):!1,Rr=/Android \d/.test(Xo),Tc=!!Cw&&"webkitFontSmoothing"in Cw.documentElement.style,uD=Tc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function dD(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Cr(t,e){return typeof t=="number"?t:t[e]}function fD(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function kw(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;i=Zl(i)){if(i.nodeType!=1)continue;let a=i,l=a==s.body,c=l?dD(s):fD(a),u=0,d=0;if(e.top<c.top+Cr(r,"top")?d=-(c.top-e.top+Cr(o,"top")):e.bottom>c.bottom-Cr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Cr(o,"top")-c.top:e.bottom-c.bottom+Cr(o,"bottom")),e.left<c.left+Cr(r,"left")?u=-(c.left-e.left+Cr(o,"left")):e.right>c.right-Cr(r,"right")&&(u=e.right-c.right+Cr(o,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-h,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function hD(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:tE(t.dom)}}function tE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Zl(r));return e}function pD({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;nE(n,r==0?0:r-e)}function nE(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ci=null;function mD(t){if(t.setActive)return t.setActive();if(ci)return t.focus(ci);let e=tE(t);t.focus(ci==null?{get preventScroll(){return ci={preventScroll:!0},!0}}:void 0),ci||(ci=!1,nE(e,0))}function rE(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Tr(u).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.top<=i&&g.bottom>=a){i=Math.max(g.bottom,i),a=Math.min(g.top,a);let v=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(v<r){n=u,r=v,o=v&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&v&&(s=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!l&&g.left<=e.left&&g.right>=e.left&&(l=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(s=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?gD(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:rE(n,o)}function gD(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=no(r,1);if(s.top!=s.bottom&&oy(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function oy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function vD(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function yD(t,e,n){let{node:r,offset:o}=rE(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function xD(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function oE(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(oy(e,c))return oE(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function wD(t,e){let n=t.dom.ownerDocument,r,o=0,s=lD(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!oy(e,c)||(i=oE(t.dom,e,c),!i))return null}if(Ht)for(let c=i;r&&c;c=Zl(c))c.draggable&&(r=void 0);if(i=vD(i,e),r){if(Jn&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;Tc&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=xD(t,r,o,e))}a==null&&(a=yD(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Ew(t){return t.top<t.bottom||t.left<t.right}function no(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Ew(r))return r}return Array.prototype.find.call(n,Ew)||t.getBoundingClientRect()}const bD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function sE(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Tc||Jn;if(r.nodeType==3)if(i&&(bD.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=no(Tr(r,o,o),n);if(Jn&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=no(Tr(r,o-1,o-1),-1);if(c.top==l.top){let u=no(Tr(r,o,o+1),-1);if(u.top!=l.top)return Ga(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Ga(no(Tr(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==Mn(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return cp(l.getBoundingClientRect(),!1)}if(s==null&&o<Mn(r)){let l=r.childNodes[o];if(l.nodeType==1)return cp(l.getBoundingClientRect(),!0)}return cp(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==Mn(r))){let l=r.childNodes[o-1],c=l.nodeType==3?Tr(l,Mn(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ga(no(c,1),!1)}if(s==null&&o<Mn(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Tr(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Ga(no(c,-1),!0)}return Ga(no(r.nodeType==3?Tr(r):r,-n),n>=0)}function Ga(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function cp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function iE(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function SD(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return iE(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=sE(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Tr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const CD=/[\u0590-\u08ac]/;function kD(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!CD.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:iE(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:v}=t.domSelectionRange(),x=g&&!m.contains(g.nodeType==1?g:g.parentNode)||l==g&&c==v;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),x}):r.pos==r.start()||r.pos==r.end()}let Tw=null,Nw=null,Mw=!1;function ED(t,e,n){return Tw==e&&Nw==n?Mw:(Tw=e,Nw=n,Mw=n=="up"||n=="down"?SD(t,e,n):kD(t,e,n))}const An=0,Pw=1,bs=2,mr=3;class Nc{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=An,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Et(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof lE){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof aE&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Et(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Et(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let u=i+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=i;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=Et(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Et(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let m=0,g=0;m<this.children.length;m++){let v=this.children[m],x=g+v.size;if(s>g&&i<x)return v.setSelection(e-g-v.border,n-g-v.border,r,o);g=x}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Jn||Ht)&&e==n){let{node:m,offset:g}=a;if(m.nodeType==3){if(d=!!(g&&m.nodeValue[g-1]==`
`),d&&g==m.nodeValue.length)for(let v=m,x;v;v=v.parentNode){if(x=v.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:Et(x)+1});break}let y=v.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let v=m.childNodes[g-1];d=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Jn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||d&&Ht)&&Fs(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Fs(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let g=a;a=l,l=g}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?bs:Pw,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=mr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?bs:mr}r=i}this.dirty=bs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?bs:Pw;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class aE extends Nc{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==An&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class TD extends Nc{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class zs extends Nc{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=Xs.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new zs(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&mr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=mr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=An){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=An}}slice(e,n,r){let o=zs.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=sg(s,n,i,r)),e>0&&(s=sg(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class jo extends Nc{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Xs.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=dE(u,r,n),c?l=new ND(e,n,r,o,u,d||null,h,c,s,i+1):n.isText?new Df(e,n,r,o,u,h,s):new jo(e,n,r,o,u,d||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,n,r){return this.dirty==An&&e.eq(this.node)&&Bd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new PD(this,i&&i.node,e);AD(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?He.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let m;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(m=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,m,e)||l.updateNextNode(c,u,d,e,h,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==bs)&&(i&&this.protectLocalComposition(e,i),cE(this.contentDOM,this.children,e),fa&&OD(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof Se)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=jD(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new TD(this,s,n,o);e.input.compositionNodes.push(i),this.children=sg(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==mr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=An}updateOuterDeco(e){if(Bd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=uE(this.dom,this.nodeDOM,og(this.outerDeco,this.node,n),og(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function _w(t,e,n,r,o){dE(r,e,t);let s=new jo(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class Df extends jo{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==mr||this.dirty!=An&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=An||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=An,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new Df(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=mr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class lE extends Nc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==An&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ND extends jo{constructor(e,n,r,o,s,i,a,l,c,u){super(e,n,r,o,s,i,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==mr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function cE(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=Rw(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof zs){let l=r?r.previousSibling:t.lastChild;cE(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Rw(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const El=function(t){t&&(this.nodeName=t)};El.prototype=Object.create(null);const Ss=[new El];function og(t,e,n){if(t.length==0)return Ss;let r=n?Ss[0]:new El,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new El(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new El(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function uE(t,e,n,r){if(n==Ss&&r==Ss)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Ss[0]),o=l}MD(o,a||Ss[0],i)}return o}function MD(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function dE(t,e,n){return uE(t,t,Ss,og(e,n,t.nodeType!=1))}function Bd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Rw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class PD{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=_D(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=An,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=zs.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==mr&&i.dom==i.contentDOM&&(i.dirty=bs),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof jo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=mr&&Bd(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=bs,d.updateChildren(o,i+1),d.dirty=An),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Bd(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=jo.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=jo.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new aE(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof zs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Df)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ht||Dt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new lE(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function _D(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof zs)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function RD(t,e){return t.type.side-e.type.side}function AD(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(s,u),c),s+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,d;for(;i<o.length&&o[i].to==s;){let x=o[i++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(RD);for(let x=0;x<d.length;x++)n(d[x],c,!!l)}else n(u,c,!!l);let h,m;if(l)m=-1,h=l,l=null;else if(c<t.childCount)m=c,h=t.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=s&&a.splice(x--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let g=s+h.nodeSize;if(h.isText){let x=g;i<o.length&&o[i].from<x&&(x=o[i].from);for(let y=0;y<a.length;y++)a[y].to<x&&(x=a[y].to);x<g&&(l=h.cut(x-s),h=h.cut(0,x-s),g=x,m=-1)}else for(;i<o.length&&o[i].to<g;)i++;let v=h.isInline&&!h.isLeaf?a.filter(x=>!x.inline):a.slice();r(h,v,e.forChild(s,h),m),s=g}}function OD(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function jD(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function sg(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function sy(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(If(n)){for(l=i;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&xe.isSelectable(d)&&o.parent&&!(d.isInline&&iD(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new xe(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=i,h=i;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,i]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=iy(t,u,a,d)}return c}function fE(t){return t.editable?t.hasFocus():pE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Or(t,e=!1){let n=t.state.selection;if(hE(t,n),!!fE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Dt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Fs(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)DD(t);else{let{anchor:r,head:o}=n,s,i;Aw&&!(n instanceof Se)&&(n.$from.parent.inlineContent||(s=Ow(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=Ow(t,n.to))),t.docView.setSelection(r,o,t,e),Aw&&(s&&jw(s),i&&jw(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ID(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Aw=Ht||Dt&&eE<63;function Ow(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ht&&o&&o.contentEditable=="false")return up(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return up(o);if(s)return up(s)}}function up(t){return t.contentEditable="true",Ht&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function jw(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ID(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!fE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function DD(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Et(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&ln&&Oo<=11&&(r.disabled=!0,r.disabled=!1)}function hE(t,e){if(e instanceof xe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Iw(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Iw(t)}function Iw(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function iy(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||Se.between(e,n,r)}function Dw(t){return t.editable&&!t.hasFocus()?!1:pE(t)}function pE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function LD(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Fs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ig(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Te.findFrom(s,e)}function uo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Lw(t,e,n){let r=t.state.selection;if(r instanceof Se)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return uo(t,new Se(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=ig(t.state,e);return o&&o instanceof xe?uo(t,o):!1}else if(!(En&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?xe.isSelectable(s)?uo(t,new xe(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Tc?uo(t,new Se(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof xe&&r.node.isInline)return uo(t,new Se(e>0?r.$to:r.$from));{let o=ig(t.state,e);return o?uo(t,o):!1}}}function Hd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Tl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ui(t,e){return e<0?$D(t):FD(t)}function $D(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(Jn&&n.nodeType==1&&r<Hd(n)&&Tl(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Tl(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(mE(n))break;{let a=n.previousSibling;for(;a&&Tl(a,-1);)o=n.parentNode,s=Et(a),a=a.previousSibling;if(a)n=a,r=Hd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?ag(t,n,r):o&&ag(t,o,s)}function FD(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Hd(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Tl(a,1))s=n,i=++r;else break}else{if(mE(n))break;{let a=n.nextSibling;for(;a&&Tl(a,1);)s=a.parentNode,i=Et(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Hd(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&ag(t,s,i)}function mE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function zD(t,e){for(;t&&e==t.childNodes.length&&!Ec(t);)e=Et(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function BD(t,e){for(;t&&!e&&!Ec(t);)e=Et(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ag(t,e,n){if(e.nodeType!=3){let s,i;(i=zD(e,n))?(e=i,n=0):(s=BD(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(If(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Or(t)},50)}function $w(t,e){let n=t.state.doc.resolve(e);if(!(Dt||cD)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Fw(t,e,n){let r=t.state.selection;if(r instanceof Se&&!r.empty||n.indexOf("s")>-1||En&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=ig(t.state,e);if(i&&i instanceof xe)return uo(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof Rn?Te.near(i,e):Te.findFrom(i,e);return a?uo(t,a):!1}return!1}function zw(t,e){if(!(t.state.selection instanceof Se))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function Bw(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function HD(t){if(!Ht||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Bw(t,r,"true"),setTimeout(()=>Bw(t,r,"false"),20)}return!1}function UD(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function VD(t,e){let n=e.keyCode,r=UD(e);if(n==8||En&&n==72&&r=="c")return zw(t,-1)||ui(t,-1);if(n==46&&!e.shiftKey||En&&n==68&&r=="c")return zw(t,1)||ui(t,1);if(n==13||n==27)return!0;if(n==37||En&&n==66&&r=="c"){let o=n==37?$w(t,t.state.selection.from)=="ltr"?-1:1:-1;return Lw(t,o,r)||ui(t,o)}else if(n==39||En&&n==70&&r=="c"){let o=n==39?$w(t,t.state.selection.from)=="ltr"?1:-1:1;return Lw(t,o,r)||ui(t,o)}else{if(n==38||En&&n==80&&r=="c")return Fw(t,-1,r)||ui(t,-1);if(n==40||En&&n==78&&r=="c")return HD(t)||Fw(t,1,r)||ui(t,1);if(r==(En?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function ay(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let i=t.someProp("clipboardSerializer")||Xs.fromSchema(t.state.schema),a=bE(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=wE[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let g=a.createElement(u[m]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function gE(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new ae(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ae.empty;let d=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(d)a=d;else{let h=o.marks(),{schema:m}=t.state,g=Xs.fromSchema(m);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let x=i.appendChild(document.createElement("p"));v&&x.appendChild(g.serializeNode(m.text(v,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),i=GD(n),Tc&&YD(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ao.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!WD.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=JD(Hw(a,+u[1],+u[2]),u[4]);else if(a=ae.maxOpen(KD(a.content,o),!0),a.openStart||a.openEnd){let d=0,h=0;for(let m=a.content.firstChild;d<a.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=a.content.lastChild;h<a.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);a=Hw(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const WD=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function KD(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&yE(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=xE(i[i.length-1],s.length));let u=vE(a,l);i.push(u),o=o.matchType(u.type),s=l}}),i)return J.from(i)}return t}function vE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,J.from(t));return t}function yE(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=yE(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(J.from(vE(n,t,o+1))))}}function xE(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,xE(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(n.append(r))}function lg(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=lg(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function Hw(t,e,n){return e<t.openStart&&(t=new ae(lg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ae(lg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const wE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Uw=null;function bE(){return Uw||(Uw=document.implementation.createHTMLDocument("title"))}let dp=null;function qD(t){let e=window.trustedTypes;return e?(dp||(dp=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),dp.createHTML(t)):t}function GD(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=bE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&wE[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=qD(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function YD(t){let e=t.querySelectorAll(Dt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function JD(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=J.from(l.create(r[a+1],o)),s++,i++}return new ae(o,s,i)}const Ut={},Vt={},XD={touchstart:!0,touchmove:!0};class QD{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ZD(t){for(let e in Ut){let n=Ut[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{tL(t,r)&&!ly(t,r)&&(t.editable||!(r.type in Vt))&&n(t,r)},XD[e]?{passive:!0}:void 0)}Ht&&t.dom.addEventListener("input",()=>null),cg(t)}function So(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function eL(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function cg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ly(t,r))})}function ly(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function tL(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function nL(t,e){!ly(t,e)&&Ut[e.type]&&(t.editable||!(e.type in Vt))&&Ut[e.type](t,e)}Vt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!CE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Rr&&Dt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),fa&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,ps(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||VD(t,n)?n.preventDefault():So(t,"key")};Vt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Vt.keypress=(t,e)=>{let n=e;if(CE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||En&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Se)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function Lf(t){return{left:t.clientX,top:t.clientY}}function rL(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function cy(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Ji(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function oL(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&xe.isSelectable(r)?(Ji(t,new xe(n)),!0):!1}function sL(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof xe&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(xe.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Ji(t,xe.create(t.state.doc,o)),!0):!1}function iL(t,e,n,r,o){return cy(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?sL(t,n):oL(t,n))}function aL(t,e,n,r){return cy(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function lL(t,e,n,r){return cy(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||cL(t,n,r)}function cL(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ji(t,Se.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Ji(t,Se.create(r,a+1,a+1+i.content.size));else if(xe.isSelectable(i))Ji(t,xe.create(r,a));else continue;return!0}}function uy(t){return Ud(t)}const SE=En?"metaKey":"ctrlKey";Ut.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=uy(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&rL(n,t.input.lastClick)&&!n[SE]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let i=t.posAtCoords(Lf(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new uL(t,i,n,!!r)):(s=="doubleClick"?aL:lL)(t,i.pos,i.inside,n)?n.preventDefault():So(t,"pointer"))};class uL{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[SE],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,i=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof xe&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Jn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),So(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Or(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Lf(e))),this.updateAllowDefault(e),this.allowDefault||!n?So(this.view,"pointer"):iL(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ht&&this.mightDrag&&!this.mightDrag.node.isAtom||Dt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ji(this.view,Te.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):So(this.view,"pointer")}move(e){this.updateAllowDefault(e),So(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ut.touchstart=t=>{t.input.lastTouch=Date.now(),uy(t),So(t,"pointer")};Ut.touchmove=t=>{t.input.lastTouch=Date.now(),So(t,"pointer")};Ut.contextmenu=t=>uy(t);function CE(t,e){return t.composing?!0:Ht&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const dL=Rr?5e3:-1;Vt.compositionstart=Vt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Se&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Ud(t,!0),t.markCursor=null;else if(Ud(t,!e.selection.empty),Jn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}kE(t,dL)};Vt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,kE(t,20))};function kE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ud(t),e))}function EE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=hL());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function fL(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=oD(e.focusNode,e.focusOffset),r=sD(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function hL(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ud(t,e=!1){if(!(Rr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),EE(t),e||t.docView&&t.docView.dirty){let n=sy(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function pL(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const ec=ln&&Oo<15||fa&&uD<604;Ut.copy=Vt.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=ec?null:n.clipboardData,i=r.content(),{dom:a,text:l}=ay(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):pL(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function mL(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function gL(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?tc(t,r.value,null,o,e):tc(t,r.textContent,r.innerHTML,o,e)},50)}function tc(t,e,n,r,o){let s=gE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||ae.empty)))return!0;if(!s)return!1;let i=mL(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function TE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Vt.paste=(t,e)=>{let n=e;if(t.composing&&!Rr)return;let r=ec?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&tc(t,TE(r),r.getData("text/html"),o,n)?n.preventDefault():gL(t,n)};class NE{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const ME=En?"altKey":"ctrlKey";Ut.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Lf(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof xe?o.to-1:o.to))){if(r&&r.mightDrag)i=xe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(i=xe.create(t.state.doc,d.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:u}=ay(t,a);(!n.dataTransfer.files.length||!Dt||eE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ec?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",ec||n.dataTransfer.setData("text/plain",c),t.dragging=new NE(u,!n[ME],i)};Ut.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Vt.dragover=Vt.dragenter=(t,e)=>e.preventDefault();Vt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Lf(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",g=>{i=g(i,t)}):i=gE(t,TE(n.dataTransfer),ec?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[ME]);if(t.someProp("handleDrop",g=>g(t,n,i||ae.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?Kk(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(h))return;let m=c.doc.resolve(u);if(d&&xe.isSelectable(i.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new xe(m));else{let g=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((v,x,y,w)=>g=w),c.setSelection(iy(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Ut.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Or(t)},20))};Ut.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ut.beforeinput=(t,e)=>{if(Dt&&Rr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,ps(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Vt)Ut[t]=Vt[t];function nc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Vd{constructor(e,n){this.toDOM=e,this.spec=n||Ms,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new rn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Vd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&nc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Io{constructor(e,n){this.attrs=e,this.spec=n||Ms}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new rn(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Io&&nc(this.attrs,e.attrs)&&nc(this.spec,e.spec)}static is(e){return e.type instanceof Io}destroy(){}}class dy{constructor(e,n){this.attrs=e,this.spec=n||Ms}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new rn(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof dy&&nc(this.attrs,e.attrs)&&nc(this.spec,e.spec)}destroy(){}}class rn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new rn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new rn(e,e,new Vd(n,r))}static inline(e,n,r,o){return new rn(e,n,new Io(r,o))}static node(e,n,r,o){return new rn(e,n,new dy(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Io}get widget(){return this.type instanceof Vd}}const Ci=[],Ms={};class ot{constructor(e,n){this.local=e.length?e:Ci,this.children=n.length?n:Ci}static create(e,n){return n.length?Wd(n,e,0,Ms):jt}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==jt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ms)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?vL(this.children,i||[],e,n,r,o,s):i?new ot(i.sort(Ps),Ci):jt}add(e,n){return n.length?this==jt?ot.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=_E(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,Wd(u,a,c+1,Ms)),s+=3}});let i=PE(s?RE(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new ot(i.length?this.local.concat(i).sort(Ps):this.local,o||this.children)}remove(e){return e.length==0||this==jt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=jt?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new ot(o,r):jt}forChild(e,n){if(this==jt)return this;if(n.isLeaf)return ot.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof Io){let c=Math.max(s,l.from)-s,u=Math.min(i,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new ot(o.sort(Ps),Ci);return r?new go([a,r]):a}return r||jt}eq(e){if(this==e)return!0;if(!(e instanceof ot)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return fy(this.localsInner(e))}localsInner(e){if(this==jt)return Ci;if(e.inlineContent||!this.local.some(Io.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Io||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ot.empty=new ot([],[]);ot.removeOverlap=fy;const jt=ot.empty;class go{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Ms));return go.from(r)}forChild(e,n){if(n.isLeaf)return ot.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=jt&&(s instanceof go?r=r.concat(s.members):r.push(s))}return go.from(r)}eq(e){if(!(e instanceof go)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?fy(r?n:n.sort(Ps)):Ci}static from(e){switch(e.length){case 0:return jt;case 1:return e[0];default:return new go(e.every(n=>n instanceof ot)?e:e.reduce((n,r)=>n.concat(r instanceof ot?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function vL(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,m,g,v)=>{let x=v-g-(m-h);for(let y=0;y<a.length;y+=3){let w=a[y+1];if(w<0||h>w+u-d)continue;let b=a[y]+u-d;m>=b?a[y+1]=h<=b?-2:-1:h>=u&&x&&(a[y]+=x,a[y+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),m=h-o,{index:g,offset:v}=r.content.findIndex(d),x=r.maybeChild(g);if(x&&v==d&&v+x.nodeSize==m){let y=a[c+2].mapInner(n,x,u+1,t[c]+s+1,i);y!=jt?(a[c]=d,a[c+1]=m,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=yL(a,t,e,n,o,s,i),u=Wd(c,r,0,i);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let m=u.children[d];for(;h<a.length&&a[h]<m;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ot(e.sort(Ps),a)}function PE(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new rn(o.from+e,o.to+e,o.type))}return n}function yL(t,e,n,r,o,s,i){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function _E(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function RE(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Wd(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=_E(t,a,l+n);if(c){s=!0;let u=Wd(c,a,n+l+1,r);u!=jt&&o.push(l,l+a.nodeSize,u)}});let i=PE(s?RE(t):t,-n).sort(Ps);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new ot(i,o):jt}function Ps(t,e){return t.from-e.from||t.to-e.to}function fy(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),Vw(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Vw(e,o,r.copy(s.from,r.to)));break}}}return e}function Vw(t,e,n){for(;e<t.length&&Ps(n,t[e])>0;)e++;t.splice(e,0,n)}function fp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=jt&&e.push(r)}),t.cursorWrapper&&e.push(ot.create(t.state.doc,[t.cursorWrapper.deco])),go.from(e)}const xL={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},wL=ln&&Oo<=11;class bL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class SL{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new bL,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);ln&&Oo<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),wL&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,xL)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Dw(this.view)){if(this.suppressingSelectionUpdates)return Or(this.view);if(ln&&Oo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Fs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Zl(s))n.add(s);for(let s=e.anchorNode;s;s=Zl(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Dw(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(a=!0))}if(Jn&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let m=h.parentNode;m&&m.nodeName=="LI"&&(!d||EL(e,d)!=m)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&If(r)&&(c=sy(e))&&c.eq(Te.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Or(e),this.currentSelection.set(r)):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),CL(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Or(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(ln&&Oo<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?Et(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?Et(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Ww=new WeakMap,Kw=!1;function CL(t){if(!Ww.has(t)&&(Ww.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Jn,Kw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Kw=!0}}function qw(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return Fs(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function kL(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return qw(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?qw(t,n):null}function EL(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function TL(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],If(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Dt&&t.input.lastKeyCode===8)for(let x=s;x>o;x--){let y=r.childNodes[x-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){s=x;break}if(!w||w.size)break}let d=t.state.doc,h=t.someProp("domParser")||Ao.fromSchema(t.state.schema),m=d.resolve(i),g=null,v=h.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:NL,context:m});if(c&&c[0].pos!=null){let x=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=x),g={anchor:x+i,head:y+i}}return{doc:v,sel:g,from:i,to:a}}function NL(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ht&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ht&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ML=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function PL(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let j=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=sy(t,j);if(I&&!t.state.selection.eq(I)){if(Dt&&Rr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",U=>U(t,ps(13,"Enter"))))return;let V=t.state.tr.setSelection(I);j=="pointer"?V.setMeta("pointer",!0):j=="key"&&V.scrollIntoView(),s&&V.setMeta("composition",s),t.dispatch(V)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=TL(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,m="end"):(h=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=AL(d.content,c.doc.content,c.from,h,m);if(g&&t.input.domChangeCount++,(fa&&t.input.lastIOSEnter>Date.now()-225||Rr)&&o.some(j=>j.nodeType==1&&!ML.test(j.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",j=>j(t,ps(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof Se&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let j=Gw(t,t.state.doc,c.sel);if(j&&!j.eq(t.state.selection)){let I=t.state.tr.setSelection(j);s&&I.setMeta("composition",s),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof Se&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),ln&&Oo<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let v=c.doc.resolveNoCache(g.start-c.from),x=c.doc.resolveNoCache(g.endB-c.from),y=u.resolve(g.start),w=v.sameParent(x)&&v.parent.inlineContent&&y.end()>=g.endA,b;if((fa&&t.input.lastIOSEnter>Date.now()-225&&(!w||o.some(j=>j.nodeName=="DIV"||j.nodeName=="P"))||!w&&v.pos<c.doc.content.size&&!v.sameParent(x)&&(b=Te.findFrom(c.doc.resolve(v.pos+1),1,!0))&&b.head==x.pos)&&t.someProp("handleKeyDown",j=>j(t,ps(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&RL(u,g.start,g.endA,v,x)&&t.someProp("handleKeyDown",j=>j(t,ps(8,"Backspace")))){Rr&&Dt&&t.domObserver.suppressSelectionUpdates();return}Dt&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),Rr&&!w&&v.start()!=x.start()&&x.parentOffset==0&&v.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,x=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(j){return j(t,ps(13,"Enter"))})},20));let S=g.start,C=g.endA,E,k,T;if(w){if(v.pos==x.pos)ln&&Oo<=11&&v.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Or(t),20)),E=t.state.tr.delete(S,C),k=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(T=_L(v.parent.content.cut(v.parentOffset,x.parentOffset),y.parent.content.cut(y.parentOffset,g.endA-y.start()))))E=t.state.tr,T.type=="add"?E.addMark(S,C,T.mark):E.removeMark(S,C,T.mark);else if(v.parent.child(v.index()).isText&&v.index()==x.index()-(x.textOffset?0:1)){let j=v.parent.textBetween(v.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",I=>I(t,S,C,j)))return;E=t.state.tr.insertText(j,S,C)}}if(E||(E=t.state.tr.replace(S,C,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let j=Gw(t,E.doc,c.sel);j&&!(Dt&&t.composing&&j.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(j.head==S||j.head==E.mapping.map(C)-1)||ln&&j.empty&&j.head==S)&&E.setSelection(j)}k&&E.ensureMarks(k),s&&E.setMeta("composition",s),t.dispatch(E.scrollIntoView())}function Gw(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:iy(t,e.resolve(n.anchor),e.resolve(n.head))}function _L(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(J.from(c).eq(t))return{mark:a,type:i}}function RL(t,e,n,r,o){if(n-e<=o.pos-r.pos||hp(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(hp(s,!0,!0));return!i.parent.isTextblock||i.pos>n||hp(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function hp(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function AL(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&Yw(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Yw(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function Yw(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class OL{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new QD,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(eb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Qw(this),Xw(this),this.nodeViews=Zw(this),this.docView=_w(this.state.doc,Jw(this),fp(this),this.dom,this),this.domObserver=new SL(this,(r,o,s,i)=>PL(this,r,o,s,i)),this.domObserver.start(),ZD(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&cg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(eb),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(EE(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=Zw(this);IL(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&cg(this),this.editable=Qw(this),Xw(this);let l=fp(this),c=Jw(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(o.selection))&&(i=!0);let h=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&hD(this);if(i){this.domObserver.stop();let m=d&&(ln||Dt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&jL(o.selection,e.selection);if(d){let g=Dt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=fL(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=_w(e.doc,c,l,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&LD(this))?Or(this,m):(hE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&pD(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof xe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&kw(this,n.getBoundingClientRect(),e)}else kw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new NE(e.slice,e.move,o<0?void 0:xe.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(ln){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&mD(this.dom),Or(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return wD(this,e)}coordsAtPos(e,n=1){return sE(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return ED(this,n||this.state,e)}pasteHTML(e,n){return tc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return tc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return ay(this,e)}destroy(){this.docView&&(eL(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],fp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,nD())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return nL(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ht&&this.root.nodeType===11&&aD(this.dom.ownerDocument)==this.dom&&kL(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Jw(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[rn.node(0,t.state.doc.content.size,e)]}function Xw(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:rn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Qw(t){return!t.someProp("editable",e=>e(t.state)===!1)}function jL(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Zw(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function IL(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function eb(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Fo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Kd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},DL=typeof navigator<"u"&&/Mac/.test(navigator.platform),LL=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Tt=0;Tt<10;Tt++)Fo[48+Tt]=Fo[96+Tt]=String(Tt);for(var Tt=1;Tt<=24;Tt++)Fo[Tt+111]="F"+Tt;for(var Tt=65;Tt<=90;Tt++)Fo[Tt]=String.fromCharCode(Tt+32),Kd[Tt]=String.fromCharCode(Tt);for(var pp in Fo)Kd.hasOwnProperty(pp)||(Kd[pp]=Fo[pp]);function $L(t){var e=DL&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||LL&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Kd:Fo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const FL=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function zL(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))FL?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function BL(t){let e=Object.create(null);for(let n in t)e[zL(n)]=t[n];return e}function mp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function HL(t){return new qt({props:{handleKeyDown:AE(t)}})}function AE(t){let e=BL(t);return function(n,r){let o=$L(r),s,i=e[mp(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[mp(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=Fo[r.keyCode])&&s!=o){let a=e[mp(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const UL=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function OE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const VL=(t,e,n)=>{let r=OE(t,n);if(!r)return!1;let o=hy(r);if(!o){let i=r.blockRange(),a=i&&Ea(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(LE(t,o,e,-1))return!0;if(r.parent.content.size==0&&(ha(s,"end")||xe.isSelectable(s)))for(let i=r.depth;;i--){let a=Of(t.doc,r.before(i),r.after(i),ae.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(ha(s,"end")?Te.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):xe.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},WL=(t,e,n)=>{let r=OE(t,n);if(!r)return!1;let o=hy(r);return o?jE(t,o,e):!1},KL=(t,e,n)=>{let r=IE(t,n);if(!r)return!1;let o=py(r);return o?jE(t,o,e):!1};function jE(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Of(t.doc,s,l,ae.empty);if(!c||c.from!=s||c instanceof vt&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Se.create(u.doc,s)),n(u.scrollIntoView())}return!0}function ha(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const qL=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=hy(r)}let i=s&&s.nodeBefore;return!i||!xe.isSelectable(i)?!1:(e&&e(t.tr.setSelection(xe.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function hy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function IE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const GL=(t,e,n)=>{let r=IE(t,n);if(!r)return!1;let o=py(r);if(!o)return!1;let s=o.nodeAfter;if(LE(t,o,e,1))return!0;if(r.parent.content.size==0&&(ha(s,"start")||xe.isSelectable(s))){let i=Of(t.doc,r.before(),r.after(),ae.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(ha(s,"start")?Te.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):xe.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},YL=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=py(r)}let i=s&&s.nodeAfter;return!i||!xe.isSelectable(i)?!1:(e&&e(t.tr.setSelection(xe.create(t.doc,s.pos)).scrollIntoView()),!0)};function py(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const JL=(t,e)=>{let n=t.selection,r=n instanceof xe,o;if(r){if(n.node.isTextblock||!Jo(t.doc,n.from))return!1;o=n.from}else if(o=Af(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(xe.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},XL=(t,e)=>{let n=t.selection,r;if(n instanceof xe){if(n.node.isTextblock||!Jo(t.doc,n.to))return!1;r=n.to}else if(r=Af(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},QL=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Ea(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},ZL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function DE(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const e$=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=DE(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Te.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},t$=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Rn||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=DE(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(Se.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},n$=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Gi(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Ea(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},r$=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(xe.create(t.doc,o))),!0)};function o$(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||Jo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function LE(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&o$(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let m=e.pos+s.nodeSize,g=J.empty;for(let y=i.length-1;y>=0;y--)g=J.from(i[y].create(null,g));g=J.from(o.copy(g));let v=t.tr.step(new xt(e.pos-1,m,e.pos,m,new ae(g,1,0),i.length,!0)),x=v.doc.resolve(m+2*i.length);x.nodeAfter&&x.nodeAfter.type==o.type&&Jo(v.doc,x.pos)&&v.join(x.pos),n(v.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Te.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&Ea(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&ha(s,"start",!0)&&ha(o,"end")){let m=o,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let v=s,x=1;for(;!v.isTextblock;v=v.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,v.content)){if(n){let y=J.empty;for(let b=g.length-1;b>=0;b--)y=J.from(g[b].copy(y));let w=t.tr.step(new xt(e.pos-g.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new ae(y,g.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function $E(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(Se.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const s$=$E(-1),i$=$E(1);function a$(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&ny(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function tb(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function l$(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return c$(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function c$(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new Fd(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Fd(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=ny(s,n,r,e);return a?(t&&u$(t,e,a,o,n),!0):!1}function u$(t,e,n,r,o){let s=J.empty;for(let u=n.length-1;u>=0;u--)s=J.from(n[u].type.create(n[u].attrs,s));t.step(new xt(e.start-(r?2:0),e.end,e.start,e.end,new ae(s,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==o&&(i=u+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Gi(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function d$(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?f$(e,n,t,s):h$(e,n,s):!0:!1}}function f$(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new xt(s-1,i,s,i,new ae(J.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Fd(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Ea(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(s,-1)-1;return Jo(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function h$(t,e,n){let r=t.tr,o=n.parent;for(let m=n.end,g=n.endIndex-1,v=n.startIndex;g>v;g--)m-=o.child(g).nodeSize,r.delete(m-1,m+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?J.empty:J.from(o))))return!1;let d=s.pos,h=d+i.nodeSize;return r.step(new xt(d-(a?1:0),h+(l?1:0),d+1,h-1,new ae((a?J.empty:J.from(o.copy(J.empty))).append(l?J.empty:J.from(o.copy(J.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function p$(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=J.from(c?t.create():null),d=new ae(J.from(t.create(null,J.from(a.type.create(null,u)))),c?3:1,0),h=s.start,m=s.end;n(e.tr.step(new xt(h-(c?3:1),m,h,m,d,1,!0)).scrollIntoView())}return!0}}function $f(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class Ff{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,m])=>[h,(...v)=>{const x=this.buildProps(c,n),y=m(...v)(x);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a={tr:e,editor:o,view:i,state:$f({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class m${constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function he(t,e,n){return t.config[e]===void 0&&t.parent?he(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?he(t.parent,e,n):null}):t.config[e]}function zf(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function FE(t){const e=[],{nodeExtensions:n,markExtensions:r}=zf(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=he(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,m])=>{e.push({type:d,name:h,attribute:{...s,...m}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=he(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:u,attribute:h})})}),e}function St(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function nt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),r[o]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[o]=s}),r},{})}function ug(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>nt(n,r),{})}function zE(t){return typeof t=="function"}function Me(t,e=void 0,...n){return zE(t)?e?t.bind(e)(...n):t(...n):t}function g$(t={}){return Object.keys(t).length===0&&t.constructor===Object}function v$(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function nb(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):v$(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function rb(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&g$(n)?!1:n!=null))}function y$(t,e){var n;const r=FE(t),{nodeExtensions:o,markExtensions:s}=zf(t),i=(n=o.find(c=>he(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,w)=>{const b=he(w,"extendNodeSchema",d);return{...y,...b?b(c):{}}},{}),m=rb({...h,content:Me(he(c,"content",d)),marks:Me(he(c,"marks",d)),group:Me(he(c,"group",d)),inline:Me(he(c,"inline",d)),atom:Me(he(c,"atom",d)),selectable:Me(he(c,"selectable",d)),draggable:Me(he(c,"draggable",d)),code:Me(he(c,"code",d)),whitespace:Me(he(c,"whitespace",d)),linebreakReplacement:Me(he(c,"linebreakReplacement",d)),defining:Me(he(c,"defining",d)),isolating:Me(he(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var w;return[y.name,{default:(w=y==null?void 0:y.attribute)===null||w===void 0?void 0:w.default}]}))}),g=Me(he(c,"parseHTML",d));g&&(m.parseDOM=g.map(y=>nb(y,u)));const v=he(c,"renderHTML",d);v&&(m.toDOM=y=>v({node:y,HTMLAttributes:ug(y,u)}));const x=he(c,"renderText",d);return x&&(m.toText=x),[c.name,m]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((x,y)=>{const w=he(y,"extendMarkSchema",d);return{...x,...w?w(c):{}}},{}),m=rb({...h,inclusive:Me(he(c,"inclusive",d)),excludes:Me(he(c,"excludes",d)),group:Me(he(c,"group",d)),spanning:Me(he(c,"spanning",d)),code:Me(he(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var y;return[x.name,{default:(y=x==null?void 0:x.attribute)===null||y===void 0?void 0:y.default}]}))}),g=Me(he(c,"parseHTML",d));g&&(m.parseDOM=g.map(x=>nb(x,u)));const v=he(c,"renderHTML",d);return v&&(m.toDOM=x=>v({mark:x,HTMLAttributes:ug(x,u)})),[c.name,m]}));return new Ik({topNode:i,nodes:a,marks:l})}function gp(t,e){return e.nodes[t]||e.marks[t]||null}function ob(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function my(t,e){const n=Xs.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const x$=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-s))}),n};function gy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Bf{constructor(e){this.find=e.find,this.handler=e.handler}}const w$=(t,e)=>{if(gy(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function xu(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=x$(c)+s;return i.forEach(h=>{if(u)return;const m=w$(d,h.find);if(!m)return;const g=l.state.tr,v=$f({state:l.state,transaction:g}),x={from:r-(m[0].length-s.length),to:o},{commands:y,chain:w,can:b}=new Ff({editor:n,state:v});h.handler({state:v,range:x,match:m,commands:y,chain:w,can:b})===null||!g.steps.length||(g.setMeta(a,{transform:g,from:r,to:o,text:s}),l.dispatch(g),u=!0)}),u}function b$(t){const{editor:e,rules:n}=t,r=new qt({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=my(J.from(u),i.schema);const{from:d}=l,h=d+u.length;xu({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return xu({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&xu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?xu({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function S$(t){return Object.prototype.toString.call(t).slice(8,-1)}function wu(t){return S$(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Hf(t,e){const n={...t};return wu(t)&&wu(e)&&Object.keys(e).forEach(r=>{wu(e[r])&&wu(t[r])?n[r]=Hf(t[r],e[r]):n[r]=e[r]}),n}class Pt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Me(he(this,"addOptions",{name:this.name}))),this.storage=Me(he(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Hf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Pt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Me(he(n,"addOptions",{name:n.name})),n.storage=Me(he(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function C$(t){return typeof t=="number"}class k${constructor(e){this.find=e.find,this.handler=e.handler}}const E$=(t,e,n)=>{if(gy(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function T$(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Ff({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const v=Math.max(r,g),x=Math.min(o,g+m.content.size),y=m.textBetween(v-g,x-g,void 0,"");E$(y,s.find,i).forEach(b=>{if(b.index===void 0)return;const S=v+b.index+1,C=S+b[0].length,E={from:n.tr.mapping.map(S),to:n.tr.mapping.map(C)},k=s.handler({state:n,range:E,match:b,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});d.push(k)})}),d.every(m=>m!==null)}let bu=null;const N$=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function M$(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:m,pasteEvt:g})=>{const v=u.tr,x=$f({state:u,transaction:v});if(!(!T$({editor:e,state:x,from:Math.max(d-1,0),to:h.b-1,rule:m,pasteEvent:g,dropEvent:a})||!v.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(u=>new qt({view(d){const h=g=>{var v;r=!((v=d.dom.parentElement)===null||v===void 0)&&v.contains(g.target)?d.dom.parentElement:null,r&&(bu=e)},m=()=>{bu&&(bu=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const m=bu;m&&setTimeout(()=>{const g=m.state.selection;g&&m.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,h)=>{var m;const g=(m=h.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return i=h,o=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,m)=>{const g=d[0],v=g.getMeta("uiEvent")==="paste"&&!o,x=g.getMeta("uiEvent")==="drop"&&!s,y=g.getMeta("applyPasteRules"),w=!!y;if(!v&&!x&&!w)return;if(w){let{text:C}=y;typeof C=="string"?C=C:C=my(J.from(C),m.schema);const{from:E}=y,k=E+C.length,T=N$(C);return l({rule:u,state:m,from:E,to:{b:k},pasteEvt:T})}const b=h.doc.content.findDiffStart(m.doc.content),S=h.doc.content.findDiffEnd(m.doc.content);if(!(!C$(b)||!S||b===S.b))return l({rule:u,state:m,from:b,to:S,pasteEvt:i})}}))}function P$(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Fi{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Fi.resolve(e),this.schema=y$(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Fi.sort(Fi.flatten(e)),r=P$(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=he(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=he(r,"priority")||100,i=he(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:gp(n.name,this.schema)},o=he(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=Fi.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:gp(i.name,this.schema)},l=[],c=he(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&he(i,"exitable",a)&&(u.ArrowRight=()=>Pt.handleExit({editor:e,mark:i})),c){const v=Object.fromEntries(Object.entries(c()).map(([x,y])=>[x,()=>y({editor:e})]));u={...u,...v}}const d=HL(u);l.push(d);const h=he(i,"addInputRules",a);ob(i,e.options.enableInputRules)&&h&&r.push(...h());const m=he(i,"addPasteRules",a);ob(i,e.options.enablePasteRules)&&m&&o.push(...m());const g=he(i,"addProseMirrorPlugins",a);if(g){const v=g();l.push(...v)}return l}).flat();return[b$({editor:e,rules:r}),...M$({editor:e,rules:o}),...s]}get attributes(){return FE(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=zf(this.extensions);return Object.fromEntries(n.filter(r=>!!he(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:St(r.name,this.schema)},i=he(r,"addNodeView",s);if(!i)return[];const a=(l,c,u,d,h)=>{const m=ug(l,o);return i()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:m})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:gp(e.name,this.schema)};e.type==="mark"&&(!((n=Me(he(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=he(e,"onBeforeCreate",r),s=he(e,"onCreate",r),i=he(e,"onUpdate",r),a=he(e,"onSelectionUpdate",r),l=he(e,"onTransaction",r),c=he(e,"onFocus",r),u=he(e,"onBlur",r),d=he(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class _t{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Me(he(this,"addOptions",{name:this.name}))),this.storage=Me(he(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _t(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Hf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new _t({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Me(he(n,"addOptions",{name:n.name})),n.storage=Me(he(n,"addStorage",{name:n.name,options:n.options})),n}}function BE(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const m=i==null?void 0:i[l.type.name];if(m)return u&&(a+=m({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function HE(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const _$=_t.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qt({key:new $n("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=HE(n);return BE(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),R$=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),A$=(t=!1)=>({commands:e})=>e.setContent("",t),O$=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),m=d.blockRange(h);if(!m)return;const g=Ea(m);if(a.type.isTextblock){const{defaultType:v}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,v)}(g||g===0)&&e.lift(m,g)})}),!0},j$=t=>e=>t(e),I$=()=>({state:t,dispatch:e})=>t$(t,e),D$=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new Se(r.doc.resolve(i-1))),!0},L$=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},$$=t=>({tr:e,state:n,dispatch:r})=>{const o=St(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},F$=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},z$=()=>({state:t,dispatch:e})=>UL(t,e),B$=()=>({commands:t})=>t.keyboardShortcut("Enter"),H$=()=>({state:t,dispatch:e})=>e$(t,e);function qd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:gy(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function UE(t,e,n={}){return t.find(r=>r.type===e&&qd(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function sb(t,e,n={}){return!!UE(t,e,n)}function vy(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!UE([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&sb([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&sb([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Qo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const U$=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=Qo(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const d=vy(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=Se.create(i,d.from,d.to);n.setSelection(h)}}return!0},V$=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function VE(t){return t instanceof Se}function Cs(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function WE(t,e=null){if(!e)return null;const n=Te.atStart(t),r=Te.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?Se.create(t,Cs(0,o,s),Cs(t.content.size,o,s)):Se.create(t,Cs(e,o,s),Cs(e,o,s))}function W$(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function yy(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const K$=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(yy()||W$())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!VE(n.state.selection))return i(),!0;const a=WE(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},q$=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),G$=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),KE=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&KE(r)}return t};function Su(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return KE(n)}function Gd(t,e,n){if(t instanceof Ro||t instanceof J)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return J.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Gd("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new Ik({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Ao.fromSchema(l).parseSlice(Su(t),n.parseOptions):Ao.fromSchema(l).parse(Su(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Ao.fromSchema(e);return n.slice?s.parseSlice(Su(t),n.parseOptions).content:s.parse(Su(t),n.parseOptions)}return Gd("",e,n)}function Y$(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof vt||o instanceof xt))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,u)=>{i===0&&(i=u)}),t.setSelection(Te.near(t.doc.resolve(i),n))}const J$=t=>!("type"in t),X$=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Gd(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:s.options.enableContentCheck})}catch(g){return s.emit("contentError",{editor:s,error:g,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((J$(a)?a:[a]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),l===c&&d){const{parent:g}=r.doc.resolve(l);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(l-=1,c+=1)}let m;if(u){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof J){let g="";e.forEach(v=>{v.text&&(g+=v.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,l,c)}else m=a,r.replaceWith(l,c,m);n.updateSelection&&Y$(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:m})}return!0},Q$=()=>({state:t,dispatch:e})=>JL(t,e),Z$=()=>({state:t,dispatch:e})=>XL(t,e),e3=()=>({state:t,dispatch:e})=>VL(t,e),t3=()=>({state:t,dispatch:e})=>GL(t,e),n3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Af(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},r3=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Af(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},o3=()=>({state:t,dispatch:e})=>WL(t,e),s3=()=>({state:t,dispatch:e})=>KL(t,e);function qE(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function i3(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))yy()||qE()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const a3=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=i3(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function rc(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?St(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(d,h)=>{if(d.isText)return;const m=Math.max(r,h),g=Math.min(o,h+d.nodeSize);a.push({node:d,from:m,to:g})});const l=o-r,c=a.filter(d=>i?i.name===d.node.type.name:!0).filter(d=>qd(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const l3=(t,e={})=>({state:n,dispatch:r})=>{const o=St(t,n.schema);return rc(n,o,e)?QL(n,r):!1},c3=()=>({state:t,dispatch:e})=>n$(t,e),u3=t=>({state:e,dispatch:n})=>{const r=St(t,e.schema);return d$(r)(e,n)},d3=()=>({state:t,dispatch:e})=>ZL(t,e);function Uf(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function ib(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const f3=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Uf(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=St(t,r.schema)),a==="mark"&&(i=Qo(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,ib(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(d=>{i===d.type&&n.addMark(u,u+c.nodeSize,i.create(ib(d.attrs,e)))})})}),!0):!1},h3=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),p3=()=>({tr:t,dispatch:e})=>{if(e){const n=new Rn(t.doc);t.setSelection(n)}return!0},m3=()=>({state:t,dispatch:e})=>qL(t,e),g3=()=>({state:t,dispatch:e})=>YL(t,e),v3=()=>({state:t,dispatch:e})=>r$(t,e),y3=()=>({state:t,dispatch:e})=>i$(t,e),x3=()=>({state:t,dispatch:e})=>s$(t,e);function dg(t,e,n={},r={}){return Gd(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const w3=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=dg(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return i&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return i&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function GE(t,e){const n=Qo(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function b3(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function S3(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function xy(t){return e=>S3(e.$from,t)}function C3(t,e){const n={from:0,to:t.content.size};return BE(t,n,e)}function k3(t,e){const n=St(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function E3(t,e){const n=Uf(typeof e=="string"?e:e.name,t.schema);return n==="node"?k3(t,e):n==="mark"?GE(t,e):{}}function YE(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=vy(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function od(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function fg(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?Qo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>qd(d.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:d,$to:h})=>{const m=d.pos,g=h.pos;t.doc.nodesBetween(m,g,(v,x)=>{if(!v.isText&&!v.marks.length)return;const y=Math.max(m,x),w=Math.min(g,x+v.nodeSize),b=w-y;i+=b,a.push(...v.marks.map(S=>({mark:S,from:y,to:w})))})}),i===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>qd(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=i}function T3(t,e,n={}){if(!e)return rc(t,null,n)||fg(t,null,n);const r=Uf(e,t.schema);return r==="node"?rc(t,e,n):r==="mark"?fg(t,e,n):!1}function ab(t,e){const{nodeExtensions:n}=zf(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=Me(he(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function wy(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(wy(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function N3(t){return t instanceof xe}function M3(t,e,n){var r;const{selection:o}=e;let s=null;if(VE(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const m=!h||h.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(v=>v.type.excludes(n));c=m&&g}return!c}),c})}const P3=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=Qo(t,r.schema);if(o)if(i){const c=GE(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,m)=>{const g=Math.max(m,u),v=Math.min(m+h.nodeSize,d);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(g,v,l.create({...y.attrs,...e}))}):n.addMark(g,v,l.create(e))})});return M3(r,n,l)},_3=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),R3=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=St(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>tb(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>tb(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},A3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Cs(t,0,r.content.size),s=xe.create(r,o);e.setSelection(s)}return!0},O3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=Se.atStart(r).from,a=Se.atEnd(r).to,l=Cs(o,i,a),c=Cs(s,i,a),u=Se.create(r,l,c);e.setSelection(u)}return!0},j3=t=>({state:e,dispatch:n})=>{const r=St(t,e.schema);return p$(r)(e,n)};function lb(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const I3=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,u=od(c,a.node().type.name,a.node().attrs);if(s instanceof xe&&s.node.isBlock)return!a.parentOffset||!Gi(i,a.pos)?!1:(r&&(t&&lb(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:b3(a.node(-1).contentMatchAt(a.indexAfter(-1)));let m=d&&h?[{type:h,attrs:u}]:void 0,g=Gi(e.doc,e.mapping.map(a.pos),1,m);if(!m&&!g&&Gi(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:u}]:void 0),r){if(g&&(s instanceof Se&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,m),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const v=e.mapping.map(a.before()),x=e.doc.resolve(v);a.node(-1).canReplaceWith(x.index(),x.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&lb(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return g},D3=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=St(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let y=J.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let T=l.depth-w;T>=l.depth-3;T-=1)y=J.from(l.node(T).copy(y));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...od(h,l.node().type.name,l.node().attrs),...e},C=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(S))||void 0;y=y.append(J.from(a.createAndFill(null,C)||void 0));const E=l.before(l.depth-(w-1));n.replace(E,l.after(-b),new ae(y,4-w,0));let k=-1;n.doc.nodesBetween(E,n.doc.content.size,(T,j)=>{if(k>-1)return!1;T.isTextblock&&T.content.size===0&&(k=j+1)}),k>-1&&n.setSelection(Se.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const m=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...od(h,d.type.name,d.attrs),...e},v={...od(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=m?[{type:a,attrs:g},{type:m,attrs:v}]:[{type:a,attrs:g}];if(!Gi(n.doc,l.pos,2))return!1;if(o){const{selection:y,storedMarks:w}=r,{splittableMarks:b}=s.extensionManager,S=w||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!S||!o)return!0;const C=S.filter(E=>b.includes(E.type.name));n.ensureMarks(C)}return!0},vp=(t,e)=>{const n=xy(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Jo(t.doc,n.pos)&&t.join(n.pos),!0},yp=(t,e)=>{const n=xy(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Jo(t.doc,r)&&t.join(r),!0},L3=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=o.extensionManager,m=St(t,i.schema),g=St(e,i.schema),{selection:v,storedMarks:x}=i,{$from:y,$to:w}=v,b=y.blockRange(w),S=x||v.$to.parentOffset&&v.$from.marks();if(!b)return!1;const C=xy(E=>ab(E.type.name,d))(v);if(b.depth>=1&&C&&b.depth-C.depth<=1){if(C.node.type===m)return c.liftListItem(g);if(ab(C.node.type.name,d)&&m.validContent(C.node.content)&&a)return l().command(()=>(s.setNodeMarkup(C.pos,m),!0)).command(()=>vp(s,m)).command(()=>yp(s,m)).run()}return!n||!S||!a?l().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>vp(s,m)).command(()=>yp(s,m)).run():l().command(()=>{const E=u().wrapInList(m,r),k=S.filter(T=>h.includes(T.type.name));return s.ensureMarks(k),E?!0:c.clearNodes()}).wrapInList(m,r).command(()=>vp(s,m)).command(()=>yp(s,m)).run()},$3=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=Qo(t,r.schema);return fg(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},F3=(t,e,n={})=>({state:r,commands:o})=>{const s=St(t,r.schema),i=St(e,r.schema),a=rc(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},z3=(t,e={})=>({state:n,commands:r})=>{const o=St(t,n.schema);return rc(n,o,e)?r.lift(o):r.wrapIn(o,e)},B3=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},H3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},U3=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=Qo(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&i){let{from:h,to:m}=a;const g=(s=c.marks().find(x=>x.type===l))===null||s===void 0?void 0:s.attrs,v=vy(c,l,g);v&&(h=v.from,m=v.to),n.removeMark(h,m,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},V3=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=Uf(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=St(t,r.schema)),a==="mark"&&(i=Qo(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,m,g;n.selection.empty?r.doc.nodesBetween(c,u,(v,x)=>{s&&s===v.type&&(m=Math.max(x,c),g=Math.min(x+v.nodeSize,u),d=x,h=v)}):r.doc.nodesBetween(c,u,(v,x)=>{x<c&&s&&s===v.type&&(m=Math.max(x,c),g=Math.min(x+v.nodeSize,u),d=x,h=v),x>=c&&x<=u&&(s&&s===v.type&&n.setNodeMarkup(x,void 0,{...v.attrs,...e}),i&&v.marks.length&&v.marks.forEach(y=>{if(i===y.type){const w=Math.max(x,c),b=Math.min(x+v.nodeSize,u);n.addMark(w,b,i.create({...y.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(v=>{i===v.type&&n.addMark(m,g,i.create({...v.attrs,...e}))}))}),!0):!1},W3=(t,e={})=>({state:n,dispatch:r})=>{const o=St(t,n.schema);return a$(o,e)(n,r)},K3=(t,e={})=>({state:n,dispatch:r})=>{const o=St(t,n.schema);return l$(o,e)(n,r)};var q3=Object.freeze({__proto__:null,blur:R$,clearContent:A$,clearNodes:O$,command:j$,createParagraphNear:I$,cut:D$,deleteCurrentNode:L$,deleteNode:$$,deleteRange:F$,deleteSelection:z$,enter:B$,exitCode:H$,extendMarkRange:U$,first:V$,focus:K$,forEach:q$,insertContent:G$,insertContentAt:X$,joinBackward:e3,joinDown:Z$,joinForward:t3,joinItemBackward:n3,joinItemForward:r3,joinTextblockBackward:o3,joinTextblockForward:s3,joinUp:Q$,keyboardShortcut:a3,lift:l3,liftEmptyBlock:c3,liftListItem:u3,newlineInCode:d3,resetAttributes:f3,scrollIntoView:h3,selectAll:p3,selectNodeBackward:m3,selectNodeForward:g3,selectParentNode:v3,selectTextblockEnd:y3,selectTextblockStart:x3,setContent:w3,setMark:P3,setMeta:_3,setNode:R3,setNodeSelection:A3,setTextSelection:O3,sinkListItem:j3,splitBlock:I3,splitListItem:D3,toggleList:L3,toggleMark:$3,toggleNode:F3,toggleWrap:z3,undoInputRule:B3,unsetAllMarks:H3,unsetMark:U3,updateAttributes:V3,wrapIn:W3,wrapInList:K3});const G3=_t.create({name:"commands",addCommands(){return{...q3}}}),Y3=_t.create({name:"drop",addProseMirrorPlugins(){return[new qt({key:new $n("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),J3=_t.create({name:"editable",addProseMirrorPlugins(){return[new qt({key:new $n("editable"),props:{editable:()=>this.editor.options.editable}})]}}),X3=new $n("focusEvents"),Q3=_t.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qt({key:X3,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Z3=_t.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:m}=d,g=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,v=g.parent.type.spec.isolating,x=d.pos-d.parentOffset,y=v&&g.parent.childCount===1?x===d.pos:Te.atStart(c).from===h;return!u||!m.type.isTextblock||m.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return yy()||qE()?s:o},addProseMirrorPlugins(){return[new qt({key:new $n("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(v=>v.getMeta("composition")))return;const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),o=t.some(v=>v.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=Te.atStart(e.doc).from,c=Te.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!wy(n.doc))return;const h=n.tr,m=$f({state:n,transaction:h}),{commands:g}=new Ff({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),eF=_t.create({name:"paste",addProseMirrorPlugins(){return[new qt({key:new $n("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),tF=_t.create({name:"tabindex",addProseMirrorPlugins(){return[new qt({key:new $n("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ms{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ms(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ms(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ms(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new ms(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new ms(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const nF=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function rF(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}let oF=class extends m${constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=rF(nF,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=zE(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=n.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[J3,_$.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),G3,Q3,Z3,tF,Y3,eF].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Fi(o,this)}createCommandManager(){this.commandManager=new Ff({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=dg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=dg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=WE(n,this.options.autofocus);this.view=new OL(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:$i.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return E3(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return T3(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return my(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return C3(this.state.doc,{blockSeparator:n,textSerializers:{...HE(this.schema),...r}})}get isEmpty(){return wy(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new ms(n,this)}get $doc(){return this.$pos(0)}};function Bs(t){return new Bf({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Me(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(YE(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function sF(t){return new Bf({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Me(t.getAttributes,void 0,r)||{},{tr:s}=e,i=n.from;let a=n.to;const l=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,i+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?i:i-1;s.insert(c,t.type.create(o)).delete(s.mapping.map(i),s.mapping.map(a))}s.scrollIntoView()}})}function hg(t){return new Bf({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=Me(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function oc(t){return new Bf({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const s=Me(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&ny(l,t.type,s);if(!c)return null;if(i.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:m}=t.editor.extensionManager,g=h||d.$to.parentOffset&&d.$from.marks();if(g){const v=g.filter(x=>m.includes(x.type.name));i.ensureMarks(v)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(d,s).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Jo(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&i.join(n.from-1)}})}let er=class pg{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Me(he(this,"addOptions",{name:this.name}))),this.storage=Me(he(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pg(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Hf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new pg(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Me(he(n,"addOptions",{name:n.name})),n.storage=Me(he(n,"addStorage",{name:n.name,options:n.options})),n}};function Hs(t){return new k$({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=Me(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(YE(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(x=>x===t.type&&x!==g.mark.type)).filter(g=>g.to>d).length)return null;h<n.to&&i.delete(h,n.to),d>n.from&&i.delete(n.from+u,d),c=n.from+u+a.length,i.addMark(n.from+u,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}function iF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var JE={exports:{}},xp={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function aF(){if(cb)return xp;cb=1;var t=X;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function a(d,h){var m=h(),g=r({inst:{value:m,getSnapshot:h}}),v=g[0].inst,x=g[1];return s(function(){v.value=m,v.getSnapshot=h,l(v)&&x({inst:v})},[d,m,h]),o(function(){return l(v)&&x({inst:v}),d(function(){l(v)&&x({inst:v})})},[d]),i(m),m}function l(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!n(d,m)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return xp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,xp}JE.exports=aF();var by=JE.exports;const lF=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},cF=({contentComponent:t})=>{const e=by.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return X.createElement(X.Fragment,null,Object.values(e))};function uF(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:kc.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class dF extends X.Component{constructor(e){var n;super(e),this.editorContentRef=X.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=uF(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return X.createElement(X.Fragment,null,X.createElement("div",{ref:lF(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&X.createElement(cF,{contentComponent:e.contentComponent}))}}const fF=p.forwardRef((t,e)=>{const n=X.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return X.createElement(dF,{key:n,innerRef:e,...t})}),hF=X.memo(fF);var pF=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;for(o of e.entries())if(!t(o[1],n.get(o[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(e[o]!==n[o])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!(i==="_owner"&&e.$$typeof)&&!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n},mF=iF(pF),XE={exports:{}},wp={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function gF(){if(ub)return wp;ub=1;var t=X,e=by;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return wp.useSyncExternalStoreWithSelector=function(c,u,d,h,m){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=a(function(){function y(E){if(!w){if(w=!0,b=E,E=h(E),m!==void 0&&v.hasValue){var k=v.value;if(m(k,E))return S=k}return S=E}if(k=S,r(b,E))return k;var T=h(E);return m!==void 0&&m(k,T)?k:(b=E,S=T)}var w=!1,b,S,C=d===void 0?null:d;return[function(){return y(u())},C===null?void 0:function(){return y(C())}]},[u,d,h,m]);var x=o(c,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),l(x),x},wp}XE.exports=gF();var vF=XE.exports;const yF=typeof window<"u"?p.useLayoutEffect:p.useEffect;class xF{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function wF(t){var e;const[n]=p.useState(()=>new xF(t.editor)),r=vF.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:mF);return yF(()=>n.watch(t.editor),[t.editor,n]),p.useDebugValue(r),r}const bF=!1,mg=typeof window>"u",SF=mg||!!(typeof window<"u"&&window.next);class Sy{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return mg||SF?null:this.createEditor();if(this.options.current.immediatelyRender&&mg&&bF)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(o,...r)},onBlur:(...r)=>{var o,s;return(s=(o=this.options.current).onBlur)===null||s===void 0?void 0:s.call(o,...r)},onCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onCreate)===null||s===void 0?void 0:s.call(o,...r)},onDestroy:(...r)=>{var o,s;return(s=(o=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(o,...r)},onFocus:(...r)=>{var o,s;return(s=(o=this.options.current).onFocus)===null||s===void 0?void 0:s.call(o,...r)},onSelectionUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(o,...r)},onTransaction:(...r)=>{var o,s;return(s=(o=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(o,...r)},onUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(o,...r)},onContentError:(...r)=>{var o,s;return(s=(o=this.options.current).onContentError)===null||s===void 0?void 0:s.call(o,...r)},onDrop:(...r)=>{var o,s;return(s=(o=this.options.current).onDrop)===null||s===void 0?void 0:s.call(o,...r)},onPaste:(...r)=>{var o,s;return(s=(o=this.options.current).onPaste)===null||s===void 0?void 0:s.call(o,...r)}};return new oF(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((o,s)=>{var i;return o===((i=n.extensions)===null||i===void 0?void 0:i[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Sy.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function CF(t={},e=[]){const n=p.useRef(t);n.current=t;const[r]=p.useState(()=>new Sy(n)),o=by.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return p.useDebugValue(o),p.useEffect(r.onRender(e)),wF({editor:o,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),o}const kF=p.createContext({editor:null});kF.Consumer;const EF=p.createContext({onDragStart:void 0}),TF=()=>p.useContext(EF);X.forwardRef((t,e)=>{const{onDragStart:n}=TF(),r=t.as||"div";return X.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const NF=/^\s*>\s$/,MF=er.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[oc({find:NF,type:this.type})]}}),PF=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_F=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,RF=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,AF=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,OF=Pt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Bs({find:PF,type:this.type}),Bs({find:RF,type:this.type})]},addPasteRules(){return[Hs({find:_F,type:this.type}),Hs({find:AF,type:this.type})]}}),jF="listItem",db="textStyle",fb=/^\s*([-+*])\s$/,IF=er.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jF,this.editor.getAttributes(db)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=oc({find:fb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=oc({find:fb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(db),editor:this.editor})),[t]}}),DF=/(^|[^`])`([^`]+)`(?!`)/,LF=/(^|[^`])`([^`]+)`(?!`)/g,$F=Pt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Bs({find:DF,type:this.type})]},addPasteRules(){return[Hs({find:LF,type:this.type})]}}),FF=/^```([a-z]+)?[\s\n]$/,zF=/^~~~([a-z]+)?[\s\n]$/,BF=er.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",nt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!s||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Te.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[hg({find:FF,type:this.type,getAttributes:t=>({language:t[1]})}),hg({find:zF,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new qt({key:new $n("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:i,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:s},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(Se.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),HF=er.create({name:"doc",topNode:!0,content:"block+"});function UF(t={}){return new qt({view(e){return new VF(e,t)}})}class VF{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,i;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,i=-pageYOffset;else{let a=o.getBoundingClientRect();s=a.left-o.scrollLeft,i=a.top-o.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Kk(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const WF=_t.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[UF(this.options)]}});class st extends Te{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return st.valid(r)?new st(r):Te.near(r)}content(){return ae.empty}eq(e){return e instanceof st&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new st(e.resolve(n.pos))}getBookmark(){return new Cy(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!KF(e)||!qF(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&st.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(st.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!xe.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(st.valid(a))return a}return null}}}st.prototype.visible=!1;st.findFrom=st.findGapCursorFrom;Te.jsonID("gapcursor",st);class Cy{constructor(e){this.pos=e}map(e){return new Cy(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return st.valid(n)?new st(n):Te.near(n)}}function KF(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function qF(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function GF(){return new qt({props:{decorations:QF,createSelectionBetween(t,e,n){return e.pos==n.pos&&st.valid(n)?new st(n):null},handleClick:JF,handleKeyDown:YF,handleDOMEvents:{beforeinput:XF}}})}const YF=AE({ArrowLeft:Cu("horiz",-1),ArrowRight:Cu("horiz",1),ArrowUp:Cu("vert",-1),ArrowDown:Cu("vert",1)});function Cu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof Se){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=st.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new st(c))),!0):!1}}function JF(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!st.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&xe.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new st(r))),!0)}function XF(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof st))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=J.empty;for(let i=r.length-1;i>=0;i--)o=J.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new ae(o,0,0));return s.setSelection(Se.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function QF(t){if(!(t.selection instanceof st))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ot.create(t.doc,[rn.widget(t.selection.head,e,{key:"gapcursor"})])}const ZF=_t.create({name:"gapCursor",addProseMirrorPlugins(){return[GF()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Me(he(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),e5=er.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",nt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),t5=er.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,nt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>hg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Yd=200,wt=function(){};wt.prototype.append=function(e){return e.length?(e=wt.from(e),!this.length&&e||e.length<Yd&&this.leafAppend(e)||this.length<Yd&&e.leafPrepend(this)||this.appendInner(e)):this};wt.prototype.prepend=function(e){return e.length?wt.from(e).append(this):this};wt.prototype.appendInner=function(e){return new n5(this,e)};wt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?wt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};wt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};wt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};wt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};wt.from=function(e){return e instanceof wt?e:e&&e.length?new QE(e):wt.empty};var QE=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Yd)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Yd)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(wt);wt.empty=new QE([]);var n5=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(wt);const r5=500;class Kn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,u.push(d);return}if(o){u.push(new Qr(d.map));let m=d.step.map(o.slice(s)),g;m&&i.maybeStep(m).doc&&(g=i.mapping.maps[i.mapping.maps.length-1],c.push(new Qr(g,void 0,void 0,c.length+u.length))),s--,g&&o.appendMap(g,s)}else i.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(s)):d.selection,l=new Kn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new Qr(e.mapping.maps[u],d,n),m;(m=l&&l.merge(h))&&(h=m,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>s5&&(a=o5(a,c),i-=c),new Kn(a.append(s),i)}remapping(e,n){let r=new qi;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Kn(this.items.append(e.map(n=>new Qr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let m=s.getMirror(--l);if(m==null)return;i=Math.min(i,m);let g=s.maps[m];if(h.step){let v=e.steps[m].invert(e.docs[m]),x=h.selection&&h.selection.map(s.slice(l+1,m));x&&a++,r.push(new Qr(g,v,x))}else r.push(new Qr(g))},o);let c=[];for(let h=n;h<i;h++)c.push(new Qr(s.maps[h]));let u=this.items.slice(0,o).append(c).append(r),d=new Kn(u,a);return d.emptyItemCount()>r5&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&s++;let d=new Qr(c.invert(),l,u),h,m=o.length-1;(h=o.length&&o[m].merge(d))?o[m]=h:o.push(d)}}else i.map&&r--},this.items.length,0),new Kn(wt.from(o.reverse()),s)}}Kn.empty=new Kn(wt.empty,0);function o5(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Qr=class ZE{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ZE(n.getMap().invert(),n,this.selection)}}};class fo{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const s5=20;function i5(t,e,n,r){let o=n.getMeta(_s),s;if(o)return o.historyState;n.getMeta(c5)&&(t=new fo(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(_s))return i.getMeta(_s).redo?new fo(t.done.addTransform(n,void 0,r,sd(e)),t.undone,hb(n.mapping.maps),t.prevTime,t.prevComposition):new fo(t.done,t.undone.addTransform(n,void 0,r,sd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!a5(n,t.prevRanges)),c=i?bp(t.prevRanges,n.mapping):hb(n.mapping.maps);return new fo(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,sd(e)),Kn.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new fo(t.done.rebased(n,s),t.undone.rebased(n,s),bp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new fo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),bp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function a5(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function hb(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function bp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function l5(t,e,n){let r=sd(e),o=_s.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new fo(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(_s,{redo:n,historyState:l})}let Sp=!1,pb=null;function sd(t){let e=t.plugins;if(pb!=e){Sp=!1,pb=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Sp=!0;break}}return Sp}const _s=new $n("history"),c5=new $n("closeHistory");function u5(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new qt({key:_s,state:{init(){return new fo(Kn.empty,Kn.empty,null,0,-1)},apply(e,n,r){return i5(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?tT:r=="historyRedo"?nT:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function eT(t,e){return(n,r)=>{let o=_s.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=l5(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const tT=eT(!1,!0),nT=eT(!0,!0),d5=_t.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>tT(t,e),redo:()=>({state:t,dispatch:e})=>nT(t,e)}},addProseMirrorPlugins(){return[u5(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),f5=er.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",nt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:o}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):N3(n)?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:i,dispatch:a})=>{var l;if(a){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(Se.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(xe.create(i.doc,c.pos)):i.setSelection(Se.create(i.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(i.insert(u,d),i.setSelection(Se.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[sF({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),h5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,p5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,m5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,g5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,v5=Pt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Bs({find:h5,type:this.type}),Bs({find:m5,type:this.type})]},addPasteRules(){return[Hs({find:p5,type:this.type}),Hs({find:g5,type:this.type})]}}),y5=er.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",nt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),x5="listItem",mb="textStyle",gb=/^(\d+)\.\s$/,w5=er.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",nt(this.options.HTMLAttributes,n),0]:["ol",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(x5,this.editor.getAttributes(mb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=oc({find:gb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=oc({find:gb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(mb)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),b5=er.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),S5=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,C5=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,k5=Pt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Bs({find:S5,type:this.type})]},addPasteRules(){return[Hs({find:C5,type:this.type})]}}),E5=er.create({name:"text",group:"inline"}),T5=_t.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(OF.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(MF.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(IF.configure(this.options.bulletList)),this.options.code!==!1&&t.push($F.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(BF.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(HF.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(WF.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(ZF.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(e5.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(t5.configure(this.options.heading)),this.options.history!==!1&&t.push(d5.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(f5.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(v5.configure(this.options.italic)),this.options.listItem!==!1&&t.push(y5.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(w5.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(b5.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(k5.configure(this.options.strike)),this.options.text!==!1&&t.push(E5.configure(this.options.text)),t}}),N5=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,M5=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,P5=Pt.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Bs({find:N5,type:this.type})]},addPasteRules(){return[Hs({find:M5,type:this.type})]}}),_5=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,o;const s=n.getAttribute("style"),i=(o=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||o===void 0?void 0:o.getAttribute("style");n.setAttribute("style",`${i};${s}`)})},R5=Pt.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&_5(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(o=>o.type===this.type).some(o=>Object.values(o.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),A5=_t.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),O5=Pt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function rT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=rT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function j5(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=rT(t))&&(r&&(r+=" "),r+=e);return r}const ky="-",I5=t=>{const e=L5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(ky);return a[0]===""&&a.length!==1&&a.shift(),oT(a,e)||D5(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},oT=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?oT(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const s=t.join(ky);return(i=e.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},vb=/^\[(.+)\]$/,D5=t=>{if(vb.test(t)){const e=vb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},L5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return F5(Object.entries(t.classGroups),n).forEach(([s,i])=>{gg(i,r,s,e)}),r},gg=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const s=o===""?e:yb(e,o);s.classGroupId=n;return}if(typeof o=="function"){if($5(o)){gg(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{gg(i,yb(e,s),n,r)})})},yb=(t,e)=>{let n=t;return e.split(ky).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$5=t=>t.isThemeGetter,F5=(t,e)=>e?t.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[e+i,a])):s);return[n,o]}):t,z5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},sT="!",B5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],s=e.length,i=a=>{const l=[];let c=0,u=0,d;for(let x=0;x<a.length;x++){let y=a[x];if(c===0){if(y===o&&(r||a.slice(x,x+s)===e)){l.push(a.slice(u,x)),u=x+s;continue}if(y==="/"){d=x;continue}}y==="["?c++:y==="]"&&c--}const h=l.length===0?a:a.substring(u),m=h.startsWith(sT),g=m?h.substring(1):h,v=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:i}):i},H5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},U5=t=>({cache:z5(t.cacheSize),parseClassName:B5(t),...I5(t)}),V5=/\s+/,W5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,s=[],i=t.trim().split(V5);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(c);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){a=c+(a.length>0?" "+a:a);continue}if(v=r(h),!v){a=c+(a.length>0?" "+a:a);continue}g=!1}const x=H5(u).join(":"),y=d?x+sT:x,w=y+v;if(s.includes(w))continue;s.push(w);const b=o(v,g);for(let S=0;S<b.length;++S){const C=b[S];s.push(y+C)}a=c+(a.length>0?" "+a:a)}return a};function K5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=iT(e))&&(r&&(r+=" "),r+=n);return r}const iT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=iT(t[r]))&&(n&&(n+=" "),n+=e);return n};function q5(t,...e){let n,r,o,s=i;function i(l){const c=e.reduce((u,d)=>d(u),t());return n=U5(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=W5(l,n);return o(l,u),u}return function(){return s(K5.apply(null,arguments))}}const qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},aT=/^\[(?:([a-z-]+):)?(.+)\]$/i,G5=/^\d+\/\d+$/,Y5=new Set(["px","full","screen"]),J5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,X5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Z5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,e4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kr=t=>Xi(t)||Y5.has(t)||G5.test(t),Zr=t=>Ta(t,"length",l4),Xi=t=>!!t&&!Number.isNaN(Number(t)),Cp=t=>Ta(t,"number",Xi),Ya=t=>!!t&&Number.isInteger(Number(t)),t4=t=>t.endsWith("%")&&Xi(t.slice(0,-1)),ke=t=>aT.test(t),eo=t=>J5.test(t),n4=new Set(["length","size","percentage"]),r4=t=>Ta(t,n4,lT),o4=t=>Ta(t,"position",lT),s4=new Set(["image","url"]),i4=t=>Ta(t,s4,u4),a4=t=>Ta(t,"",c4),Ja=()=>!0,Ta=(t,e,n)=>{const r=aT.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},l4=t=>X5.test(t)&&!Q5.test(t),lT=()=>!1,c4=t=>Z5.test(t),u4=t=>e4.test(t),d4=()=>{const t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),o=qe("borderColor"),s=qe("borderRadius"),i=qe("borderSpacing"),a=qe("borderWidth"),l=qe("contrast"),c=qe("grayscale"),u=qe("hueRotate"),d=qe("invert"),h=qe("gap"),m=qe("gradientColorStops"),g=qe("gradientColorStopPositions"),v=qe("inset"),x=qe("margin"),y=qe("opacity"),w=qe("padding"),b=qe("saturate"),S=qe("scale"),C=qe("sepia"),E=qe("skew"),k=qe("space"),T=qe("translate"),j=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",ke,e],U=()=>[ke,e],B=()=>["",kr,Zr],W=()=>["auto",Xi,ke],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],N=()=>["","0",ke],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Xi,ke];return{cacheSize:500,separator:":",theme:{colors:[Ja],spacing:[kr,Zr],blur:["none","",eo,ke],brightness:L(),borderColor:[t],borderRadius:["none","","full",eo,ke],borderSpacing:U(),borderWidth:B(),contrast:L(),grayscale:N(),hueRotate:L(),invert:N(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[t4,Zr],inset:V(),margin:V(),opacity:L(),padding:U(),saturate:L(),scale:L(),sepia:N(),skew:L(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[eo]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),ke]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ya,ke]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",Ya,ke]}],"grid-cols":[{"grid-cols":[Ja]}],"col-start-end":[{col:["auto",{span:["full",Ya,ke]},ke]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Ja]}],"row-start-end":[{row:["auto",{span:[Ya,ke]},ke]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ke,e]}],"min-w":[{"min-w":[ke,e,"min","max","fit"]}],"max-w":[{"max-w":[ke,e,"none","full","min","max","fit","prose",{screen:[eo]},eo]}],h:[{h:[ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",eo,Zr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cp]}],"font-family":[{font:[Ja]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",Xi,Cp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",kr,ke]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",kr,Zr]}],"underline-offset":[{"underline-offset":["auto",kr,ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),o4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",r4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},i4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:H()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[kr,ke]}],"outline-w":[{outline:[kr,Zr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[kr,Zr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",eo,a4]}],"shadow-color":[{shadow:[Ja]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",eo,ke]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ya,ke]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[kr,Zr,Cp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},f4=q5(d4);function ie(...t){return f4(j5(t))}/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cT=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>p.createElement("svg",{ref:l,...p4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:cT("lucide",o),...a},[...i.map(([c,u])=>p.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,e)=>{const n=p.forwardRef(({className:r,...o},s)=>p.createElement(m4,{ref:s,iconNode:e,className:cT(`lucide-${h4(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=we("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=we("ArrowRightToLine",[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=we("BookCheck",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=we("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=we("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=we("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=we("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=we("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=we("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=we("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=we("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=we("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=we("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=we("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=we("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=we("ListRestart",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M7 12H3",key:"13ou7f"}],["path",{d:"M7 18H3",key:"1sijw9"}],["path",{d:"M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14",key:"qth677"}],["path",{d:"M11 10v4h4",key:"172dkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=we("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=we("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=we("PencilOff",[["path",{d:"m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982",key:"bjo8r8"}],["path",{d:"m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353",key:"16h5ne"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=we("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=we("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=we("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=we("RectangleEllipsis",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=we("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=we("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=we("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=we("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=we("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function U4(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Wf(...t){return e=>t.forEach(n=>U4(n,e))}function ze(...t){return p.useCallback(Wf(...t),t)}var Bo=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),s=o.find(V4);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return f.jsx(yg,{...r,ref:e,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return f.jsx(yg,{...r,ref:e,children:n})});Bo.displayName="Slot";var yg=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const o=K4(n);return p.cloneElement(n,{...W4(r,n.props),ref:e?Wf(e,o):o})}return p.Children.count(n)>1?p.Children.only(null):null});yg.displayName="SlotClone";var vT=({children:t})=>f.jsx(f.Fragment,{children:t});function V4(t){return p.isValidElement(t)&&t.type===vT}function W4(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function K4(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function yT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=yT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function q4(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=yT(t))&&(r&&(r+=" "),r+=e);return r}const Cb=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,kb=q4,xT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return kb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=e,i=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const h=Cb(u)||Cb(d);return o[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...a}[v]):{...s,...a}[v]===x})?[...c,d,h]:c},[]);return kb(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},G4=xT("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ve=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},s)=>{const i=r?Bo:"button";return f.jsx(i,{className:ie(G4({variant:e,size:n,className:t})),ref:s,...o})});ve.displayName="Button";const fr=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:ie("rounded-xl border bg-card text-card-foreground shadow",t),...e}));fr.displayName="Card";const Ml=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:ie("flex flex-col space-y-1.5 p-6",t),...e}));Ml.displayName="CardHeader";const Pl=p.forwardRef(({className:t,...e},n)=>f.jsx("h3",{ref:n,className:ie("font-semibold leading-none tracking-tight",t),...e}));Pl.displayName="CardTitle";const wT=p.forwardRef(({className:t,...e},n)=>f.jsx("p",{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));wT.displayName="CardDescription";const hr=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:ie("p-6 pt-0",t),...e}));hr.displayName="CardContent";const bT=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:ie("flex items-center p-6 pt-0",t),...e}));bT.displayName="CardFooter";function Y4({onSubmit:t,onClose:e,onBackToMenu:n,title:r="AI Writing Assistant",placeholder:o="Ask AI to help with your selected text..."}){const[s,i]=p.useState(""),a=()=>{s.trim()&&(t(s.trim()),i(""))},l=c=>{c.key==="Enter"&&!c.shiftKey?(c.preventDefault(),a()):c.key==="Escape"&&e()};return f.jsx(fr,{className:"w-[300px] shadow-lg select-none",children:f.jsx(hr,{className:"p-3",children:f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-grab active:cursor-grabbing",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Ny,{className:"h-4 w-4"}),f.jsx("span",{className:"text-sm font-medium",children:r})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[n&&f.jsx(ve,{variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0",title:"Back to Context Menu",children:f.jsx(pT,{className:"h-4 w-4"})}),f.jsx(ve,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0",children:f.jsx(Mc,{className:"h-4 w-4"})})]})]}),f.jsx("div",{className:"relative",children:f.jsx("textarea",{value:s,onChange:c=>i(c.target.value),onKeyDown:l,placeholder:o,className:"w-full h-24 p-2 text-sm resize-none rounded-md border border-input bg-background focus:outline-none",autoFocus:!0})}),f.jsxs("div",{className:"flex items-center justify-between mt-2",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Press Enter to send"}),f.jsx(ve,{size:"sm",onClick:a,disabled:!s.trim(),className:"h-6 px-2 text-xs",children:"Send"})]})]})})})}function J4({response:t,suggestedText:e,onClose:n,onInsert:r,onBackToMenu:o}){const[s,i]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState({x:0,y:0}),d=p.useRef({startX:0,startY:0,startMouseX:0,startMouseY:0}),h=()=>{navigator.clipboard.writeText(e)},m=x=>{x.target.closest("button")||(l(!0),d.current={startX:c.x,startY:c.y,startMouseX:x.clientX,startMouseY:x.clientY},x.preventDefault())},g=x=>{if(!a)return;const y=x.clientX-d.current.startMouseX,w=x.clientY-d.current.startMouseY;u({x:d.current.startX+y,y:d.current.startY+w})},v=()=>{l(!1)};return p.useEffect(()=>{if(a)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v)}},[a]),f.jsx(fr,{className:"w-[350px] shadow-lg select-none",style:{transform:`translate(${c.x}px, ${c.y}px)`,cursor:a?"grabbing":"default"},children:f.jsx(hr,{className:"p-3",children:f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-grab active:cursor-grabbing",onMouseDown:m,children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Ny,{className:"h-4 w-4"}),f.jsx("span",{className:"text-sm font-medium",children:"AI Response"})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[o&&f.jsx(ve,{variant:"ghost",size:"sm",onClick:o,className:"h-6 w-6 p-0",title:"Back to Context Menu",children:f.jsx(pT,{className:"h-4 w-4"})}),f.jsx(ve,{variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0",children:f.jsx(Mc,{className:"h-4 w-4"})})]})]}),f.jsx("div",{className:"p-2 bg-muted rounded-md text-sm max-h-32 overflow-y-auto",children:t}),f.jsxs("div",{className:"p-2 border border-primary rounded-md text-sm relative",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[f.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Suggested Text:"}),f.jsx("div",{className:"max-h-24 overflow-y-auto pr-6",children:e}),s&&f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx(ve,{variant:"ghost",size:"sm",onClick:h,className:"h-6 w-6 p-0",children:f.jsx(Ey,{className:"h-3 w-3"})})})]}),f.jsxs("div",{className:"flex justify-between mt-2",children:[f.jsx(ve,{variant:"outline",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Dismiss"}),f.jsxs(ve,{size:"sm",onClick:()=>r(e),className:"h-6 px-2 text-xs bg-blue-500 text-white",children:[f.jsx(pa,{className:"h-3 w-3 mr-1"}),"Insert"]})]})]})})})}const Qs="http://localhost:5000";async function X4(t){try{console.log("Sending refresh feedback request:",JSON.stringify(t,null,2));const e=await fetch(`${Qs}/api/refresh-feedback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw console.error("Server response error:",n),new Error(n.error||"Failed to refresh feedback")}return await e.json()}catch(e){throw console.error("Error refreshing feedback:",e),e}}async function xg(t){try{console.log("Sending analysis request:",JSON.stringify(t,null,2));const e=await fetch(`${Qs}/api/analyze-context`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw console.error("Server response error:",n),new Error(n.error||"Failed to analyze text with context")}return await e.json()}catch(e){throw console.error("Error analyzing text with context:",e),e}}async function Q4(t){try{console.log("Sending regenerate suggestion request:",JSON.stringify(t,null,2));const e=await fetch(`${Qs}/api/regenerate-suggestion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw console.error("Server response error:",n),new Error(n.error||"Failed to regenerate suggestion")}return await e.json()}catch(e){throw console.error("Error regenerating suggestion:",e),e}}async function Z4(t){try{const e=await fetch(`${Qs}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const r=await e.json();throw new Error(r.error||"Failed to send chat message")}return await e.json()}catch(e){throw console.error("Error sending chat message:",e),e}}async function e9(t){try{const e=await fetch(`${Qs}/api/custom-prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to process custom prompt")}return await e.json()}catch(e){throw console.error("Error processing custom prompt:",e),e}}async function t9(t){if(!t.sentence.trim()||!t.documentContext.trim())throw new Error("Empty sentence or document context");console.log("Sending explain connection request for sentence:",t.sentence.substring(0,50)+"...");try{const e=await fetch(`${Qs}/api/explain-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw console.error("Server response error:",await e.json()),new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error explaining connection:",e),e}}async function Eb(t){console.log(" Sending sentence flow analysis request for:",t.sentence.substring(0,50)+"...");try{const e=await fetch(`${Qs}/api/analyze-sentence-flow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw console.error("Server response error:",await e.json()),new Error(`HTTP error! status: ${e.status}`);const n=await e.json();return console.log(" Sentence flow analysis result:",n),n}catch(e){throw console.error(" Error analyzing sentence flow:",e),e}}function je(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function n9(t,e){const n=p.createContext(e),r=s=>{const{children:i,...a}=s,l=p.useMemo(()=>a,Object.values(a));return f.jsx(n.Provider,{value:l,children:i})};r.displayName=t+"Provider";function o(s){const i=p.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,o]}function Sn(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];const c=d=>{var y;const{scope:h,children:m,...g}=d,v=((y=h==null?void 0:h[t])==null?void 0:y[l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})};c.displayName=s+"Provider";function u(d,h){var v;const m=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,r9(o,...e)]}function r9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Tb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function My(...t){return e=>{let n=!1;const r=t.map(o=>{const s=Tb(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():Tb(t[o],null)}}}}function cn(...t){return p.useCallback(My(...t),t)}var sc=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),s=o.find(s9);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return f.jsx(wg,{...r,ref:e,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return f.jsx(wg,{...r,ref:e,children:n})});sc.displayName="Slot";var wg=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const o=a9(n);return p.cloneElement(n,{...i9(r,n.props),ref:e?My(e,o):o})}return p.Children.count(n)>1?p.Children.only(null):null});wg.displayName="SlotClone";var o9=({children:t})=>f.jsx(f.Fragment,{children:t});function s9(t){return p.isValidElement(t)&&t.type===o9}function i9(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function a9(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var l9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gt=l9.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?sc:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function ST(t,e){t&&Yo.flushSync(()=>t.dispatchEvent(e))}function CT(t){const e=t+"CollectionProvider",[n,r]=Sn(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:g,children:v}=m,x=X.useRef(null),y=X.useRef(new Map).current;return f.jsx(o,{scope:g,itemMap:y,collectionRef:x,children:v})};i.displayName=e;const a=t+"CollectionSlot",l=X.forwardRef((m,g)=>{const{scope:v,children:x}=m,y=s(a,v),w=cn(g,y.collectionRef);return f.jsx(sc,{ref:w,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=X.forwardRef((m,g)=>{const{scope:v,children:x,...y}=m,w=X.useRef(null),b=cn(g,w),S=s(c,v);return X.useEffect(()=>(S.itemMap.set(w,{ref:w,...y}),()=>void S.itemMap.delete(w))),f.jsx(sc,{[u]:"",ref:b,children:x})});d.displayName=c;function h(m){const g=s(t+"CollectionConsumer",m);return X.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,C)=>y.indexOf(S.ref.current)-y.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},h,r]}var c9=p.createContext(void 0);function Pc(t){const e=p.useContext(c9);return t||e||"ltr"}function Ke(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Py(t,e=globalThis==null?void 0:globalThis.document){const n=Ke(t);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var u9="DismissableLayer",bg="dismissableLayer.update",d9="dismissableLayer.pointerDownOutside",f9="dismissableLayer.focusOutside",Nb,kT=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ET=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=p.useContext(kT),[u,d]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=cn(e,k=>d(k)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,C=m9(k=>{const T=k.target,j=[...c.branches].some(I=>I.contains(T));!S||j||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),E=g9(k=>{const T=k.target;[...c.branches].some(I=>I.contains(T))||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return Py(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Nb=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Mb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Nb)}},[u,h,n,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Mb())},[u,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(bg,k),()=>document.removeEventListener(bg,k)},[]),f.jsx(Gt.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:je(t.onFocusCapture,E.onFocusCapture),onBlurCapture:je(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:je(t.onPointerDownCapture,C.onPointerDownCapture)})});ET.displayName=u9;var h9="DismissableLayerBranch",p9=p.forwardRef((t,e)=>{const n=p.useContext(kT),r=p.useRef(null),o=cn(e,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(Gt.div,{...t,ref:o})});p9.displayName=h9;function m9(t,e=globalThis==null?void 0:globalThis.document){const n=Ke(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){TT(d9,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function g9(t,e=globalThis==null?void 0:globalThis.document){const n=Ke(t),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&TT(f9,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Mb(){const t=new CustomEvent(bg);document.dispatchEvent(t)}function TT(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?ST(o,s):o.dispatchEvent(s)}var kp=0;function _c(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Pb()),document.body.insertAdjacentElement("beforeend",t[1]??Pb()),kp++,()=>{kp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),kp--}},[])}function Pb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ep="focusScope.autoFocusOnMount",Tp="focusScope.autoFocusOnUnmount",_b={bubbles:!1,cancelable:!0},v9="FocusScope",NT=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=p.useState(null),c=Ke(o),u=Ke(s),d=p.useRef(null),h=cn(e,v=>l(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:ro(d.current,{select:!0})},x=function(b){if(m.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||ro(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&ro(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,m.paused]),p.useEffect(()=>{if(a){Ab.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(Ep,_b);a.addEventListener(Ep,c),a.dispatchEvent(y),y.defaultPrevented||(y9(C9(MT(a)),{select:!0}),document.activeElement===v&&ro(a))}return()=>{a.removeEventListener(Ep,c),setTimeout(()=>{const y=new CustomEvent(Tp,_b);a.addEventListener(Tp,u),a.dispatchEvent(y),y.defaultPrevented||ro(v??document.body,{select:!0}),a.removeEventListener(Tp,u),Ab.remove(m)},0)}}},[a,c,u,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,S]=x9(w);b&&S?!v.shiftKey&&y===S?(v.preventDefault(),n&&ro(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&ro(S,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return f.jsx(Gt.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});NT.displayName=v9;function y9(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ro(r,{select:e}),document.activeElement!==n)return}function x9(t){const e=MT(t),n=Rb(e,t),r=Rb(e.reverse(),t);return[n,r]}function MT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Rb(t,e){for(const n of t)if(!w9(n,{upTo:e}))return n}function w9(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function b9(t){return t instanceof HTMLInputElement&&"select"in t}function ro(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&b9(t)&&e&&t.select()}}var Ab=S9();function S9(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Ob(t,e),t.unshift(e)},remove(e){var n;t=Ob(t,e),(n=t[0])==null||n.resume()}}}function Ob(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function C9(t){return t.filter(e=>e.tagName!=="A")}var Je=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},k9=v2.useId||(()=>{}),E9=0;function bt(t){const[e,n]=p.useState(k9());return Je(()=>{n(r=>r??String(E9++))},[t]),e?`radix-${e}`:""}const T9=["top","right","bottom","left"],Ho=Math.min,pn=Math.max,Xd=Math.round,ku=Math.floor,Uo=t=>({x:t,y:t}),N9={left:"right",right:"left",bottom:"top",top:"bottom"},M9={start:"end",end:"start"};function Sg(t,e,n){return pn(t,Ho(e,n))}function Fr(t,e){return typeof t=="function"?t(e):t}function zr(t){return t.split("-")[0]}function Na(t){return t.split("-")[1]}function _y(t){return t==="x"?"y":"x"}function Ry(t){return t==="y"?"height":"width"}function Vo(t){return["top","bottom"].includes(zr(t))?"y":"x"}function Ay(t){return _y(Vo(t))}function P9(t,e,n){n===void 0&&(n=!1);const r=Na(t),o=Ay(t),s=Ry(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(i=Qd(i)),[i,Qd(i)]}function _9(t){const e=Qd(t);return[Cg(t),e,Cg(e)]}function Cg(t){return t.replace(/start|end/g,e=>M9[e])}function R9(t,e,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?s:i;default:return[]}}function A9(t,e,n,r){const o=Na(t);let s=R9(zr(t),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),e&&(s=s.concat(s.map(Cg)))),s}function Qd(t){return t.replace(/left|right|bottom|top/g,e=>N9[e])}function O9(t){return{top:0,right:0,bottom:0,left:0,...t}}function PT(t){return typeof t!="number"?O9(t):{top:t,right:t,bottom:t,left:t}}function Zd(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function jb(t,e,n){let{reference:r,floating:o}=t;const s=Vo(e),i=Ay(e),a=Ry(i),l=zr(e),c=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-o.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-o.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Na(e)){case"start":m[i]-=h*(n&&c?-1:1);break;case"end":m[i]+=h*(n&&c?-1:1);break}return m}const j9=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:d}=jb(c,r,l),h=r,m={},g=0;for(let v=0;v<a.length;v++){const{name:x,fn:y}=a[v],{x:w,y:b,data:S,reset:C}=await y({x:u,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:m,rects:c,platform:i,elements:{reference:t,floating:e}});u=w??u,d=b??d,m={...m,[x]:{...m[x],...S}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(c=C.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):C.rects),{x:u,y:d}=jb(c,h,l)),v=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:m}};async function ic(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Fr(e,t),g=PT(m),x=a[h?d==="floating"?"reference":"floating":d],y=Zd(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},C=Zd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(y.top-C.top+g.top)/S.y,bottom:(C.bottom-y.bottom+g.bottom)/S.y,left:(y.left-C.left+g.left)/S.x,right:(C.right-y.right+g.right)/S.x}}const I9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Fr(t,e)||{};if(c==null)return{};const d=PT(u),h={x:n,y:r},m=Ay(o),g=Ry(m),v=await i.getDimensions(c),x=m==="y",y=x?"top":"left",w=x?"bottom":"right",b=x?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[m]-h[m]-s.floating[g],C=h[m]-s.reference[m],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let k=E?E[b]:0;(!k||!await(i.isElement==null?void 0:i.isElement(E)))&&(k=a.floating[b]||s.floating[g]);const T=S/2-C/2,j=k/2-v[g]/2-1,I=Ho(d[y],j),V=Ho(d[w],j),U=I,B=k-v[g]-V,W=k/2-v[g]/2+T,oe=Sg(U,W,B),H=!l.arrow&&Na(o)!=null&&W!==oe&&s.reference[g]/2-(W<U?I:V)-v[g]/2<0,te=H?W<U?W-U:W-B:0;return{[m]:h[m]+te,data:{[m]:oe,centerOffset:W-oe-te,...H&&{alignmentOffset:te}},reset:H}}}),D9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=Fr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=zr(o),w=Vo(a),b=zr(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=h||(b||!v?[Qd(a)]:_9(a)),E=g!=="none";!h&&E&&C.push(...A9(a,v,g,S));const k=[a,...C],T=await ic(e,x),j=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&j.push(T[y]),d){const W=P9(o,i,S);j.push(T[W[0]],T[W[1]])}if(I=[...I,{placement:o,overflows:j}],!j.every(W=>W<=0)){var V,U;const W=(((V=s.flip)==null?void 0:V.index)||0)+1,oe=k[W];if(oe)return{data:{index:W,overflows:I},reset:{placement:oe}};let H=(U=I.filter(te=>te.overflows[0]<=0).sort((te,R)=>te.overflows[1]-R.overflows[1])[0])==null?void 0:U.placement;if(!H)switch(m){case"bestFit":{var B;const te=(B=I.filter(R=>{if(E){const N=Vo(R.placement);return N===w||N==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(N=>N>0).reduce((N,$)=>N+$,0)]).sort((R,N)=>R[1]-N[1])[0])==null?void 0:B[0];te&&(H=te);break}case"initialPlacement":H=a;break}if(o!==H)return{reset:{placement:H}}}return{}}}};function Ib(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Db(t){return T9.some(e=>t[e]>=0)}const L9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Fr(t,e);switch(r){case"referenceHidden":{const s=await ic(e,{...o,elementContext:"reference"}),i=Ib(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Db(i)}}}case"escaped":{const s=await ic(e,{...o,altBoundary:!0}),i=Ib(s,n.floating);return{data:{escapedOffsets:i,escaped:Db(i)}}}default:return{}}}}};async function $9(t,e){const{placement:n,platform:r,elements:o}=t,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=zr(n),a=Na(n),l=Vo(n)==="y",c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,d=Fr(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:h*c}:{x:h*c,y:m*u}}const F9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=e,l=await $9(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},z9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:x=>{let{x:y,y:w}=x;return{x:y,y:w}}},...l}=Fr(t,e),c={x:n,y:r},u=await ic(e,l),d=Vo(zr(o)),h=_y(d);let m=c[h],g=c[d];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=m+u[x],b=m-u[y];m=Sg(w,m,b)}if(i){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=g+u[x],b=g-u[y];g=Sg(w,g,b)}const v=a.fn({...e,[h]:m,[d]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[d]:i}}}}}},B9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Fr(t,e),u={x:n,y:r},d=Vo(o),h=_y(d);let m=u[h],g=u[d];const v=Fr(a,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=h==="y"?"height":"width",S=s.reference[h]-s.floating[b]+x.mainAxis,C=s.reference[h]+s.reference[b]-x.mainAxis;m<S?m=S:m>C&&(m=C)}if(c){var y,w;const b=h==="y"?"width":"height",S=["top","left"].includes(zr(o)),C=s.reference[d]-s.floating[b]+(S&&((y=i.offset)==null?void 0:y[d])||0)+(S?0:x.crossAxis),E=s.reference[d]+s.reference[b]+(S?0:((w=i.offset)==null?void 0:w[d])||0)-(S?x.crossAxis:0);g<C?g=C:g>E&&(g=E)}return{[h]:m,[d]:g}}}},H9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:s,platform:i,elements:a}=e,{apply:l=()=>{},...c}=Fr(t,e),u=await ic(e,c),d=zr(o),h=Na(o),m=Vo(o)==="y",{width:g,height:v}=s.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const w=v-u.top-u.bottom,b=g-u.left-u.right,S=Ho(v-u[x],w),C=Ho(g-u[y],b),E=!e.middlewareData.shift;let k=S,T=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=w),E&&!h){const I=pn(u.left,0),V=pn(u.right,0),U=pn(u.top,0),B=pn(u.bottom,0);m?T=g-2*(I!==0||V!==0?I+V:pn(u.left,u.right)):k=v-2*(U!==0||B!==0?U+B:pn(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:k});const j=await i.getDimensions(a.floating);return g!==j.width||v!==j.height?{reset:{rects:!0}}:{}}}};function Kf(){return typeof window<"u"}function Ma(t){return _T(t)?(t.nodeName||"").toLowerCase():"#document"}function yn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vr(t){var e;return(e=(_T(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _T(t){return Kf()?t instanceof Node||t instanceof yn(t).Node:!1}function Xn(t){return Kf()?t instanceof Element||t instanceof yn(t).Element:!1}function gr(t){return Kf()?t instanceof HTMLElement||t instanceof yn(t).HTMLElement:!1}function Lb(t){return!Kf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yn(t).ShadowRoot}function Rc(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Qn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function U9(t){return["table","td","th"].includes(Ma(t))}function qf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Oy(t){const e=jy(),n=Xn(t)?Qn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function V9(t){let e=Wo(t);for(;gr(e)&&!ma(e);){if(Oy(e))return e;if(qf(e))return null;e=Wo(e)}return null}function jy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ma(t){return["html","body","#document"].includes(Ma(t))}function Qn(t){return yn(t).getComputedStyle(t)}function Gf(t){return Xn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Wo(t){if(Ma(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Lb(t)&&t.host||vr(t);return Lb(e)?e.host:e}function RT(t){const e=Wo(t);return ma(e)?t.ownerDocument?t.ownerDocument.body:t.body:gr(e)&&Rc(e)?e:RT(e)}function ac(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=RT(t),s=o===((r=t.ownerDocument)==null?void 0:r.body),i=yn(o);if(s){const a=kg(i);return e.concat(i,i.visualViewport||[],Rc(o)?o:[],a&&n?ac(a):[])}return e.concat(o,ac(o,[],n))}function kg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function AT(t){const e=Qn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=gr(t),s=o?t.offsetWidth:n,i=o?t.offsetHeight:r,a=Xd(n)!==s||Xd(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function Iy(t){return Xn(t)?t:t.contextElement}function Qi(t){const e=Iy(t);if(!gr(e))return Uo(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:s}=AT(e);let i=(s?Xd(n.width):n.width)/r,a=(s?Xd(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const W9=Uo(0);function OT(t){const e=yn(t);return!jy()||!e.visualViewport?W9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function K9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yn(t)?!1:e}function Us(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),s=Iy(t);let i=Uo(1);e&&(r?Xn(r)&&(i=Qi(r)):i=Qi(t));const a=K9(s,n,r)?OT(s):Uo(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const h=yn(s),m=r&&Xn(r)?yn(r):r;let g=h,v=kg(g);for(;v&&r&&m!==g;){const x=Qi(v),y=v.getBoundingClientRect(),w=Qn(v),b=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*x.x,S=y.top+(v.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=b,c+=S,g=yn(v),v=kg(g)}}return Zd({width:u,height:d,x:l,y:c})}function q9(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const s=o==="fixed",i=vr(r),a=e?qf(e.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Uo(1);const u=Uo(0),d=gr(r);if((d||!d&&!s)&&((Ma(r)!=="body"||Rc(i))&&(l=Gf(r)),gr(r))){const h=Us(r);c=Qi(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function G9(t){return Array.from(t.getClientRects())}function Eg(t,e){const n=Gf(t).scrollLeft;return e?e.left+n:Us(vr(t)).left+n}function Y9(t){const e=vr(t),n=Gf(t),r=t.ownerDocument.body,o=pn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=pn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Eg(t);const a=-n.scrollTop;return Qn(r).direction==="rtl"&&(i+=pn(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function J9(t,e){const n=yn(t),r=vr(t),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=jy();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function X9(t,e){const n=Us(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,s=gr(t)?Qi(t):Uo(1),i=t.clientWidth*s.x,a=t.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function $b(t,e,n){let r;if(e==="viewport")r=J9(t,n);else if(e==="document")r=Y9(vr(t));else if(Xn(e))r=X9(e,n);else{const o=OT(t);r={...e,x:e.x-o.x,y:e.y-o.y}}return Zd(r)}function jT(t,e){const n=Wo(t);return n===e||!Xn(n)||ma(n)?!1:Qn(n).position==="fixed"||jT(n,e)}function Q9(t,e){const n=e.get(t);if(n)return n;let r=ac(t,[],!1).filter(a=>Xn(a)&&Ma(a)!=="body"),o=null;const s=Qn(t).position==="fixed";let i=s?Wo(t):t;for(;Xn(i)&&!ma(i);){const a=Qn(i),l=Oy(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Rc(i)&&!l&&jT(t,i))?r=r.filter(u=>u!==i):o=a,i=Wo(i)}return e.set(t,r),r}function Z9(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?qf(e)?[]:Q9(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const d=$b(e,u,o);return c.top=pn(d.top,c.top),c.right=Ho(d.right,c.right),c.bottom=Ho(d.bottom,c.bottom),c.left=pn(d.left,c.left),c},$b(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function e8(t){const{width:e,height:n}=AT(t);return{width:e,height:n}}function t8(t,e,n){const r=gr(e),o=vr(e),s=n==="fixed",i=Us(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Uo(0);if(r||!r&&!s)if((Ma(e)!=="body"||Rc(o))&&(a=Gf(e)),r){const m=Us(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else o&&(l.x=Eg(o));let c=0,u=0;if(o&&!r&&!s){const m=o.getBoundingClientRect();u=m.top+a.scrollTop,c=m.left+a.scrollLeft-Eg(o,m)}const d=i.left+a.scrollLeft-l.x-c,h=i.top+a.scrollTop-l.y-u;return{x:d,y:h,width:i.width,height:i.height}}function Np(t){return Qn(t).position==="static"}function Fb(t,e){if(!gr(t)||Qn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return vr(t)===n&&(n=n.ownerDocument.body),n}function IT(t,e){const n=yn(t);if(qf(t))return n;if(!gr(t)){let o=Wo(t);for(;o&&!ma(o);){if(Xn(o)&&!Np(o))return o;o=Wo(o)}return n}let r=Fb(t,e);for(;r&&U9(r)&&Np(r);)r=Fb(r,e);return r&&ma(r)&&Np(r)&&!Oy(r)?n:r||V9(t)||n}const n8=async function(t){const e=this.getOffsetParent||IT,n=this.getDimensions,r=await n(t.floating);return{reference:t8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function r8(t){return Qn(t).direction==="rtl"}const o8={convertOffsetParentRelativeRectToViewportRelativeRect:q9,getDocumentElement:vr,getClippingRect:Z9,getOffsetParent:IT,getElementRects:n8,getClientRects:G9,getDimensions:e8,getScale:Qi,isElement:Xn,isRTL:r8};function s8(t,e){let n=null,r;const o=vr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const m=ku(u),g=ku(o.clientWidth-(c+d)),v=ku(o.clientHeight-(u+h)),x=ku(c),w={rootMargin:-m+"px "+-g+"px "+-v+"px "+-x+"px",threshold:pn(0,Ho(1,l))||1};let b=!0;function S(C){const E=C[0].intersectionRatio;if(E!==l){if(!b)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(S,{...w,root:o.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(t)}return i(!0),s}function DT(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Iy(t),u=o||s?[...c?ac(c):[],...ac(e)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?s8(c,n):null;let h=-1,m=null;i&&(m=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,v=l?Us(t):null;l&&x();function x(){const y=Us(t);v&&(y.x!==v.x||y.y!==v.y||y.width!==v.width||y.height!==v.height)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;u.forEach(w=>{o&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const i8=F9,a8=z9,l8=D9,c8=H9,u8=L9,zb=I9,d8=B9,f8=(t,e,n)=>{const r=new Map,o={platform:o8,...n},s={...o.platform,_c:r};return j9(t,e,{...o,platform:s})};var ad=typeof document<"u"?p.useLayoutEffect:p.useEffect;function ef(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ef(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!ef(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function LT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Bb(t,e){const n=LT(t);return Math.round(e*n)/n}function Mp(t){const e=p.useRef(t);return ad(()=>{e.current=t}),e}function $T(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(r);ef(h,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),w=p.useCallback(R=>{R!==E.current&&(E.current=R,v(R))},[]),b=p.useCallback(R=>{R!==k.current&&(k.current=R,y(R))},[]),S=s||g,C=i||x,E=p.useRef(null),k=p.useRef(null),T=p.useRef(u),j=l!=null,I=Mp(l),V=Mp(o),U=Mp(c),B=p.useCallback(()=>{if(!E.current||!k.current)return;const R={placement:e,strategy:n,middleware:h};V.current&&(R.platform=V.current),f8(E.current,k.current,R).then(N=>{const $={...N,isPositioned:U.current!==!1};W.current&&!ef(T.current,$)&&(T.current=$,Yo.flushSync(()=>{d($)}))})},[h,e,n,V,U]);ad(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(R=>({...R,isPositioned:!1})))},[c]);const W=p.useRef(!1);ad(()=>(W.current=!0,()=>{W.current=!1}),[]),ad(()=>{if(S&&(E.current=S),C&&(k.current=C),S&&C){if(I.current)return I.current(S,C,B);B()}},[S,C,B,I,j]);const oe=p.useMemo(()=>({reference:E,floating:k,setReference:w,setFloating:b}),[w,b]),H=p.useMemo(()=>({reference:S,floating:C}),[S,C]),te=p.useMemo(()=>{const R={position:n,left:0,top:0};if(!H.floating)return R;const N=Bb(H.floating,u.x),$=Bb(H.floating,u.y);return a?{...R,transform:"translate("+N+"px, "+$+"px)",...LT(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:N,top:$}},[n,a,H.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:B,refs:oe,elements:H,floatingStyles:te}),[u,B,oe,H,te])}const h8=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?zb({element:r.current,padding:o}).fn(n):{}:r?zb({element:r,padding:o}).fn(n):{}}}},FT=(t,e)=>({...i8(t),options:[t,e]}),zT=(t,e)=>({...a8(t),options:[t,e]}),BT=(t,e)=>({...d8(t),options:[t,e]}),HT=(t,e)=>({...l8(t),options:[t,e]}),UT=(t,e)=>({...c8(t),options:[t,e]}),VT=(t,e)=>({...u8(t),options:[t,e]}),WT=(t,e)=>({...h8(t),options:[t,e]});var p8="Arrow",KT=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return f.jsx(Gt.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});KT.displayName=p8;var m8=KT;function qT(t){const[e,n]=p.useState(void 0);return Je(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Dy="Popper",[GT,YT]=Sn(Dy),[g8,JT]=GT(Dy),XT=t=>{const{__scopePopper:e,children:n}=t,[r,o]=p.useState(null);return f.jsx(g8,{scope:e,anchor:r,onAnchorChange:o,children:n})};XT.displayName=Dy;var QT="PopperAnchor",ZT=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=JT(QT,n),i=p.useRef(null),a=cn(e,i);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:f.jsx(Gt.div,{...o,ref:a})});ZT.displayName=QT;var Ly="PopperContent",[v8,y8]=GT(Ly),eN=p.forwardRef((t,e)=>{var D,re,z,G,se,ne;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,x=JT(Ly,n),[y,w]=p.useState(null),b=cn(e,pe=>w(pe)),[S,C]=p.useState(null),E=qT(S),k=(E==null?void 0:E.width)??0,T=(E==null?void 0:E.height)??0,j=r+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},V=Array.isArray(c)?c:[c],U=V.length>0,B={padding:I,boundary:V.filter(w8),altBoundary:U},{refs:W,floatingStyles:oe,placement:H,isPositioned:te,middlewareData:R}=$T({strategy:"fixed",placement:j,whileElementsMounted:(...pe)=>DT(...pe,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[FT({mainAxis:o+T,alignmentAxis:i}),l&&zT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?BT():void 0,...B}),l&&HT({...B}),UT({...B,apply:({elements:pe,rects:_,availableWidth:Ne,availableHeight:Pe})=>{const{width:De,height:Re}=_.reference,be=pe.floating.style;be.setProperty("--radix-popper-available-width",`${Ne}px`),be.setProperty("--radix-popper-available-height",`${Pe}px`),be.setProperty("--radix-popper-anchor-width",`${De}px`),be.setProperty("--radix-popper-anchor-height",`${Re}px`)}}),S&&WT({element:S,padding:a}),b8({arrowWidth:k,arrowHeight:T}),h&&VT({strategy:"referenceHidden",...B})]}),[N,$]=rN(H),L=Ke(g);Je(()=>{te&&(L==null||L())},[te,L]);const P=(D=R.arrow)==null?void 0:D.x,q=(re=R.arrow)==null?void 0:re.y,Z=((z=R.arrow)==null?void 0:z.centerOffset)!==0,[M,O]=p.useState();return Je(()=>{y&&O(window.getComputedStyle(y).zIndex)},[y]),f.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:te?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:M,"--radix-popper-transform-origin":[(G=R.transformOrigin)==null?void 0:G.x,(se=R.transformOrigin)==null?void 0:se.y].join(" "),...((ne=R.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(v8,{scope:n,placedSide:N,onArrowChange:C,arrowX:P,arrowY:q,shouldHideArrow:Z,children:f.jsx(Gt.div,{"data-side":N,"data-align":$,...v,ref:b,style:{...v.style,animation:te?void 0:"none"}})})})});eN.displayName=Ly;var tN="PopperArrow",x8={top:"bottom",right:"left",bottom:"top",left:"right"},nN=p.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=y8(tN,r),i=x8[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(m8,{...o,ref:n,style:{...o.style,display:"block"}})})});nN.displayName=tN;function w8(t){return t!==null}var b8=t=>({name:"transformOrigin",options:t,fn(e){var x,y,w;const{placement:n,rects:r,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,u]=rN(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=o.arrow)==null?void 0:y.x)??0)+a/2,m=(((w=o.arrow)==null?void 0:w.y)??0)+l/2;let g="",v="";return c==="bottom"?(g=i?d:`${h}px`,v=`${-l}px`):c==="top"?(g=i?d:`${h}px`,v=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,v=i?d:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,v=i?d:`${m}px`),{data:{x:g,y:v}}}});function rN(t){const[e,n="center"]=t.split("-");return[e,n]}var S8=XT,C8=ZT,k8=eN,E8=nN,T8="Portal",oN=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=p.useState(!1);Je(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?kc.createPortal(f.jsx(Gt.div,{...r,ref:e}),i):null});oN.displayName=T8;function N8(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Ac=t=>{const{present:e,children:n}=t,r=M8(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=cn(r.ref,P8(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};Ac.displayName="Presence";function M8(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),s=p.useRef("none"),i=t?"mounted":"unmounted",[a,l]=N8(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Eu(r.current);s.current=a==="mounted"?c:"none"},[a]),Je(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,m=Eu(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Je(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const v=Eu(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=m=>{m.target===e&&(s.current=Eu(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Eu(t){return(t==null?void 0:t.animationName)||"none"}function P8(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Br({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=_8({defaultProp:e,onChange:n}),s=t!==void 0,i=s?t:r,a=Ke(n),l=p.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else o(c)},[s,t,o,a]);return[i,l]}function _8({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,o=p.useRef(r),s=Ke(e);return p.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var Pp="rovingFocusGroup.onEntryFocus",R8={bubbles:!1,cancelable:!0},Yf="RovingFocusGroup",[Tg,sN,A8]=CT(Yf),[O8,iN]=Sn(Yf,[A8]),[j8,I8]=O8(Yf),aN=p.forwardRef((t,e)=>f.jsx(Tg.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Tg.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(D8,{...t,ref:e})})}));aN.displayName=Yf;var D8=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=p.useRef(null),m=cn(e,h),g=Pc(s),[v=null,x]=Br({prop:i,defaultProp:a,onChange:l}),[y,w]=p.useState(!1),b=Ke(c),S=sN(n),C=p.useRef(!1),[E,k]=p.useState(0);return p.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(Pp,b),()=>T.removeEventListener(Pp,b)},[b]),f.jsx(j8,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:v,onItemFocus:p.useCallback(T=>x(T),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>k(T=>T-1),[]),children:f.jsx(Gt.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:je(t.onMouseDown,()=>{C.current=!0}),onFocus:je(t.onFocus,T=>{const j=!C.current;if(T.target===T.currentTarget&&j&&!y){const I=new CustomEvent(Pp,R8);if(T.currentTarget.dispatchEvent(I),!I.defaultPrevented){const V=S().filter(H=>H.focusable),U=V.find(H=>H.active),B=V.find(H=>H.id===v),oe=[U,B,...V].filter(Boolean).map(H=>H.ref.current);uN(oe,u)}}C.current=!1}),onBlur:je(t.onBlur,()=>w(!1))})})}),lN="RovingFocusGroupItem",cN=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=bt(),l=s||a,c=I8(lN,n),u=c.currentTabStopId===l,d=sN(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=c;return p.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),f.jsx(Tg.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:f.jsx(Gt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:je(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:je(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:je(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=F8(g,c.orientation,c.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const w=y.indexOf(g.currentTarget);y=c.loop?z8(y,w+1):y.slice(w+1)}setTimeout(()=>uN(y))}})})})});cN.displayName=lN;var L8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function F8(t,e,n){const r=$8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return L8[r]}function uN(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function z8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var B8=aN,H8=cN,U8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},di=new WeakMap,Tu=new WeakMap,Nu={},_p=0,dN=function(t){return t&&(t.host||dN(t.parentNode))},V8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=dN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},W8=function(t,e,n,r){var o=V8(e,Array.isArray(t)?t:[t]);Nu[n]||(Nu[n]=new WeakMap);var s=Nu[n],i=[],a=new Set,l=new Set(o),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(di.get(h)||0)+1,x=(s.get(h)||0)+1;di.set(h,v),s.set(h,x),i.push(h),v===1&&g&&Tu.set(h,!0),x===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),_p++,function(){i.forEach(function(d){var h=di.get(d)-1,m=s.get(d)-1;di.set(d,h),s.set(d,m),h||(Tu.has(d)||d.removeAttribute(r),Tu.delete(d)),m||d.removeAttribute(n)}),_p--,_p||(di=new WeakMap,di=new WeakMap,Tu=new WeakMap,Nu={})}},Oc=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=U8(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),W8(r,o,n,"aria-hidden")):function(){return null}},it=function(){return it=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},it.apply(this,arguments)};function Jf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function $y(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Zi="right-scroll-bar-position",ea="width-before-scroll-bar",K8="with-scroll-bars-hidden",q8="--removed-body-scroll-bar-size";function Rp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function G8(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var Y8=typeof window<"u"?p.useLayoutEffect:p.useEffect,Hb=new WeakMap;function Fy(t,e){var n=G8(null,function(r){return t.forEach(function(o){return Rp(o,r)})});return Y8(function(){var r=Hb.get(n);if(r){var o=new Set(r),s=new Set(t),i=n.current;o.forEach(function(a){s.has(a)||Rp(a,null)}),s.forEach(function(a){o.has(a)||Rp(a,i)})}Hb.set(n,t)},[t]),n}function J8(t){return t}function X8(t,e){e===void 0&&(e=J8);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var i=e(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var u=i;i=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return o}function zy(t){t===void 0&&(t={});var e=X8(null);return e.options=it({async:!0,ssr:!1},t),e}var fN=function(t){var e=t.sideCar,n=Jf(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,it({},n))};fN.isSideCarExport=!0;function By(t,e){return t.useMedium(e),fN}var hN=zy(),Ap=function(){},Xf=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Ap,onWheelCapture:Ap,onTouchMoveCapture:Ap}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,b=Jf(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,C=Fy([n,e]),E=it(it({},b),o);return p.createElement(p.Fragment,null,u&&p.createElement(S,{sideCar:hN,removeScrollBar:c,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?p.cloneElement(p.Children.only(a),it(it({},E),{ref:C})):p.createElement(y,it({},E,{className:l,ref:C}),a))});Xf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xf.classNames={fullWidth:ea,zeroRight:Zi};var Q8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Z8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Q8();return e&&t.setAttribute("nonce",e),t}function ez(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function tz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var nz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Z8())&&(ez(e,n),tz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},rz=function(){var t=nz();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Qf=function(){var t=rz(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},oz={left:0,top:0,right:0,gap:0},Op=function(t){return parseInt(t||"",10)||0},sz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[Op(n),Op(r),Op(o)]},iz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return oz;var e=sz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},az=Qf(),ta="data-scroll-locked",lz=function(t,e,n,r){var o=t.left,s=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(K8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ta,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zi,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ea,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Zi," .").concat(Zi,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ea," .").concat(ea,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ta,`] {
    `).concat(q8,": ").concat(a,`px;
  }
`)},Ub=function(){var t=parseInt(document.body.getAttribute(ta)||"0",10);return isFinite(t)?t:0},cz=function(){p.useEffect(function(){return document.body.setAttribute(ta,(Ub()+1).toString()),function(){var t=Ub()-1;t<=0?document.body.removeAttribute(ta):document.body.setAttribute(ta,t.toString())}},[])},Hy=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;cz();var s=p.useMemo(function(){return iz(o)},[o]);return p.createElement(az,{styles:lz(s,!e,o,n?"":"!important")})},Ng=!1;if(typeof window<"u")try{var Mu=Object.defineProperty({},"passive",{get:function(){return Ng=!0,!0}});window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{Ng=!1}var fi=Ng?{passive:!1}:!1,uz=function(t){return t.tagName==="TEXTAREA"},pN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!uz(t)&&n[e]==="visible")},dz=function(t){return pN(t,"overflowY")},fz=function(t){return pN(t,"overflowX")},Vb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=mN(t,r);if(o){var s=gN(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},pz=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},mN=function(t,e){return t==="v"?dz(e):fz(e)},gN=function(t,e){return t==="v"?hz(e):pz(e)},mz=function(t,e){return t==="h"&&e==="rtl"?-1:1},gz=function(t,e,n,r,o){var s=mz(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,h=0;do{var m=gN(t,a),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&mN(t,a)&&(d+=y,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(h)<1||!o))&&(c=!0),c},Pu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Wb=function(t){return[t.deltaX,t.deltaY]},Kb=function(t){return t&&"current"in t?t.current:t},vz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},yz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},xz=0,hi=[];function wz(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(xz++)[0],s=p.useState(Qf)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var v=$y([t.lockRef.current],(t.shards||[]).map(Kb),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var y=Pu(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],S="deltaY"in v?v.deltaY:w[1]-y[1],C,E=v.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&E.type==="range")return!1;var T=Vb(k,E);if(!T)return!0;if(T?C=k:(C=k==="v"?"h":"v",T=Vb(k,E)),!T)return!1;if(!r.current&&"changedTouches"in v&&(b||S)&&(r.current=C),!C)return!0;var j=r.current||C;return gz(j,x,v,j==="h"?b:S,!0)},[]),l=p.useCallback(function(v){var x=v;if(!(!hi.length||hi[hi.length-1]!==s)){var y="deltaY"in x?Wb(x):Pu(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&vz(C.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(Kb).filter(Boolean).filter(function(C){return C.contains(x.target)}),S=b.length>0?a(x,b[0]):!i.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),c=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:bz(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=p.useCallback(function(v){n.current=Pu(v),r.current=void 0},[]),d=p.useCallback(function(v){c(v.type,Wb(v),v.target,a(v,t.lockRef.current))},[]),h=p.useCallback(function(v){c(v.type,Pu(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return hi.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,fi),document.addEventListener("touchmove",l,fi),document.addEventListener("touchstart",u,fi),function(){hi=hi.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,fi),document.removeEventListener("touchmove",l,fi),document.removeEventListener("touchstart",u,fi)}},[]);var m=t.removeScrollBar,g=t.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:yz(o)}):null,m?p.createElement(Hy,{gapMode:t.gapMode}):null)}function bz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Sz=By(hN,wz);var vN=p.forwardRef(function(t,e){return p.createElement(Xf,it({},t,{ref:e,sideCar:Sz}))});vN.classNames=Xf.classNames;var Mg=["Enter"," "],Cz=["ArrowDown","PageUp","Home"],yN=["ArrowUp","PageDown","End"],kz=[...Cz,...yN],Ez={ltr:[...Mg,"ArrowRight"],rtl:[...Mg,"ArrowLeft"]},Tz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jc="Menu",[lc,Nz,Mz]=CT(jc),[Zs,xN]=Sn(jc,[Mz,YT,iN]),Zf=YT(),wN=iN(),[Pz,ei]=Zs(jc),[_z,Ic]=Zs(jc),bN=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=t,a=Zf(e),[l,c]=p.useState(null),u=p.useRef(!1),d=Ke(s),h=Pc(o);return p.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),f.jsx(S8,{...a,children:f.jsx(Pz,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:f.jsx(_z,{scope:e,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};bN.displayName=jc;var Rz="MenuAnchor",Uy=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Zf(n);return f.jsx(C8,{...o,...r,ref:e})});Uy.displayName=Rz;var Vy="MenuPortal",[Az,SN]=Zs(Vy,{forceMount:void 0}),CN=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,s=ei(Vy,e);return f.jsx(Az,{scope:e,forceMount:n,children:f.jsx(Ac,{present:n||s.open,children:f.jsx(oN,{asChild:!0,container:o,children:r})})})};CN.displayName=Vy;var On="MenuContent",[Oz,Wy]=Zs(On),kN=p.forwardRef((t,e)=>{const n=SN(On,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ei(On,t.__scopeMenu),i=Ic(On,t.__scopeMenu);return f.jsx(lc.Provider,{scope:t.__scopeMenu,children:f.jsx(Ac,{present:r||s.open,children:f.jsx(lc.Slot,{scope:t.__scopeMenu,children:i.modal?f.jsx(jz,{...o,ref:e}):f.jsx(Iz,{...o,ref:e})})})})}),jz=p.forwardRef((t,e)=>{const n=ei(On,t.__scopeMenu),r=p.useRef(null),o=cn(e,r);return p.useEffect(()=>{const s=r.current;if(s)return Oc(s)},[]),f.jsx(Ky,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:je(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Iz=p.forwardRef((t,e)=>{const n=ei(On,t.__scopeMenu);return f.jsx(Ky,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ky=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=t,x=ei(On,n),y=Ic(On,n),w=Zf(n),b=wN(n),S=Nz(n),[C,E]=p.useState(null),k=p.useRef(null),T=cn(e,k,x.onContentChange),j=p.useRef(0),I=p.useRef(""),V=p.useRef(0),U=p.useRef(null),B=p.useRef("right"),W=p.useRef(0),oe=g?vN:p.Fragment,H=g?{as:sc,allowPinchZoom:!0}:void 0,te=N=>{var D,re;const $=I.current+N,L=S().filter(z=>!z.disabled),P=document.activeElement,q=(D=L.find(z=>z.ref.current===P))==null?void 0:D.textValue,Z=L.map(z=>z.textValue),M=qz(Z,$,q),O=(re=L.find(z=>z.textValue===M))==null?void 0:re.ref.current;(function z(G){I.current=G,window.clearTimeout(j.current),G!==""&&(j.current=window.setTimeout(()=>z(""),1e3))})($),O&&setTimeout(()=>O.focus())};p.useEffect(()=>()=>window.clearTimeout(j.current),[]),_c();const R=p.useCallback(N=>{var L,P;return B.current===((L=U.current)==null?void 0:L.side)&&Yz(N,(P=U.current)==null?void 0:P.area)},[]);return f.jsx(Oz,{scope:n,searchRef:I,onItemEnter:p.useCallback(N=>{R(N)&&N.preventDefault()},[R]),onItemLeave:p.useCallback(N=>{var $;R(N)||(($=k.current)==null||$.focus(),E(null))},[R]),onTriggerLeave:p.useCallback(N=>{R(N)&&N.preventDefault()},[R]),pointerGraceTimerRef:V,onPointerGraceIntentChange:p.useCallback(N=>{U.current=N},[]),children:f.jsx(oe,{...H,children:f.jsx(NT,{asChild:!0,trapped:o,onMountAutoFocus:je(s,N=>{var $;N.preventDefault(),($=k.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:f.jsx(ET,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:f.jsx(B8,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:je(l,N=>{y.isUsingKeyboardRef.current||N.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(k8,{role:"menu","aria-orientation":"vertical","data-state":zN(x.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:je(v.onKeyDown,N=>{const L=N.target.closest("[data-radix-menu-content]")===N.currentTarget,P=N.ctrlKey||N.altKey||N.metaKey,q=N.key.length===1;L&&(N.key==="Tab"&&N.preventDefault(),!P&&q&&te(N.key));const Z=k.current;if(N.target!==Z||!kz.includes(N.key))return;N.preventDefault();const O=S().filter(D=>!D.disabled).map(D=>D.ref.current);yN.includes(N.key)&&O.reverse(),Wz(O)}),onBlur:je(t.onBlur,N=>{N.currentTarget.contains(N.target)||(window.clearTimeout(j.current),I.current="")}),onPointerMove:je(t.onPointerMove,cc(N=>{const $=N.target,L=W.current!==N.clientX;if(N.currentTarget.contains($)&&L){const P=N.clientX>W.current?"right":"left";B.current=P,W.current=N.clientX}}))})})})})})})});kN.displayName=On;var Dz="MenuGroup",qy=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Gt.div,{role:"group",...r,ref:e})});qy.displayName=Dz;var Lz="MenuLabel",EN=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Gt.div,{...r,ref:e})});EN.displayName=Lz;var tf="MenuItem",qb="menu.itemSelect",eh=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,s=p.useRef(null),i=Ic(tf,t.__scopeMenu),a=Wy(tf,t.__scopeMenu),l=cn(e,s),c=p.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(qb,{bubbles:!0,cancelable:!0});d.addEventListener(qb,m=>r==null?void 0:r(m),{once:!0}),ST(d,h),h.defaultPrevented?c.current=!1:i.onClose()}};return f.jsx(TN,{...o,ref:l,disabled:n,onClick:je(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:je(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:je(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||Mg.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});eh.displayName=tf;var TN=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=t,i=Wy(tf,n),a=wN(n),l=p.useRef(null),c=cn(e,l),[u,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[s.children]),f.jsx(lc.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:f.jsx(H8,{asChild:!0,...a,focusable:!r,children:f.jsx(Gt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:je(t.onPointerMove,cc(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:je(t.onPointerLeave,cc(g=>i.onItemLeave(g))),onFocus:je(t.onFocus,()=>d(!0)),onBlur:je(t.onBlur,()=>d(!1))})})})}),$z="MenuCheckboxItem",NN=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return f.jsx(AN,{scope:t.__scopeMenu,checked:n,children:f.jsx(eh,{role:"menuitemcheckbox","aria-checked":nf(n)?"mixed":n,...o,ref:e,"data-state":Yy(n),onSelect:je(o.onSelect,()=>r==null?void 0:r(nf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});NN.displayName=$z;var MN="MenuRadioGroup",[Fz,zz]=Zs(MN,{value:void 0,onValueChange:()=>{}}),PN=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,s=Ke(r);return f.jsx(Fz,{scope:t.__scopeMenu,value:n,onValueChange:s,children:f.jsx(qy,{...o,ref:e})})});PN.displayName=MN;var _N="MenuRadioItem",RN=p.forwardRef((t,e)=>{const{value:n,...r}=t,o=zz(_N,t.__scopeMenu),s=n===o.value;return f.jsx(AN,{scope:t.__scopeMenu,checked:s,children:f.jsx(eh,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":Yy(s),onSelect:je(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});RN.displayName=_N;var Gy="MenuItemIndicator",[AN,Bz]=Zs(Gy,{checked:!1}),ON=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,s=Bz(Gy,n);return f.jsx(Ac,{present:r||nf(s.checked)||s.checked===!0,children:f.jsx(Gt.span,{...o,ref:e,"data-state":Yy(s.checked)})})});ON.displayName=Gy;var Hz="MenuSeparator",jN=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Gt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});jN.displayName=Hz;var Uz="MenuArrow",IN=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Zf(n);return f.jsx(E8,{...o,...r,ref:e})});IN.displayName=Uz;var Vz="MenuSub",[pX,DN]=Zs(Vz),cl="MenuSubTrigger",LN=p.forwardRef((t,e)=>{const n=ei(cl,t.__scopeMenu),r=Ic(cl,t.__scopeMenu),o=DN(cl,t.__scopeMenu),s=Wy(cl,t.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(Uy,{asChild:!0,...c,children:f.jsx(TN,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":zN(n.open),...t,ref:My(e,o.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:je(t.onPointerMove,cc(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:je(t.onPointerLeave,cc(d=>{var m,g;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,w=h[x?"left":"right"],b=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:je(t.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||Ez[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});LN.displayName=cl;var $N="MenuSubContent",FN=p.forwardRef((t,e)=>{const n=SN(On,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ei(On,t.__scopeMenu),i=Ic(On,t.__scopeMenu),a=DN($N,t.__scopeMenu),l=p.useRef(null),c=cn(e,l);return f.jsx(lc.Provider,{scope:t.__scopeMenu,children:f.jsx(Ac,{present:r||s.open,children:f.jsx(lc.Slot,{scope:t.__scopeMenu,children:f.jsx(Ky,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:je(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:je(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:je(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=Tz[i.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});FN.displayName=$N;function zN(t){return t?"open":"closed"}function nf(t){return t==="indeterminate"}function Yy(t){return nf(t)?"indeterminate":t?"checked":"unchecked"}function Wz(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Kz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function qz(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=Kz(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function Gz(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function Yz(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Gz(n,e)}function cc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Jz=bN,Xz=Uy,Qz=CN,Zz=kN,e6=qy,t6=EN,n6=eh,r6=NN,o6=PN,s6=RN,i6=ON,a6=jN,l6=IN,c6=LN,u6=FN,Jy="ContextMenu",[d6,mX]=Sn(Jy,[xN]),Yt=xN(),[f6,BN]=d6(Jy),HN=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:o,modal:s=!0}=t,[i,a]=p.useState(!1),l=Yt(e),c=Ke(r),u=p.useCallback(d=>{a(d),c(d)},[c]);return f.jsx(f6,{scope:e,open:i,onOpenChange:u,modal:s,children:f.jsx(Jz,{...l,dir:o,open:i,onOpenChange:u,modal:s,children:n})})};HN.displayName=Jy;var UN="ContextMenuTrigger",VN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=t,s=BN(UN,n),i=Yt(n),a=p.useRef({x:0,y:0}),l=p.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=p.useRef(0),u=p.useCallback(()=>window.clearTimeout(c.current),[]),d=h=>{a.current={x:h.clientX,y:h.clientY},s.onOpenChange(!0)};return p.useEffect(()=>u,[u]),p.useEffect(()=>void(r&&u()),[r,u]),f.jsxs(f.Fragment,{children:[f.jsx(Xz,{...i,virtualRef:l}),f.jsx(Gt.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:je(t.onContextMenu,h=>{u(),d(h),h.preventDefault()}),onPointerDown:r?t.onPointerDown:je(t.onPointerDown,_u(h=>{u(),c.current=window.setTimeout(()=>d(h),700)})),onPointerMove:r?t.onPointerMove:je(t.onPointerMove,_u(u)),onPointerCancel:r?t.onPointerCancel:je(t.onPointerCancel,_u(u)),onPointerUp:r?t.onPointerUp:je(t.onPointerUp,_u(u))})]})});VN.displayName=UN;var h6="ContextMenuPortal",WN=t=>{const{__scopeContextMenu:e,...n}=t,r=Yt(e);return f.jsx(Qz,{...r,...n})};WN.displayName=h6;var KN="ContextMenuContent",qN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=BN(KN,n),s=Yt(n),i=p.useRef(!1);return f.jsx(Zz,{...s,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=t.onCloseAutoFocus)==null||l.call(t,a),!a.defaultPrevented&&i.current&&a.preventDefault(),i.current=!1},onInteractOutside:a=>{var l;(l=t.onInteractOutside)==null||l.call(t,a),!a.defaultPrevented&&!o.modal&&(i.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qN.displayName=KN;var p6="ContextMenuGroup",m6=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(e6,{...o,...r,ref:e})});m6.displayName=p6;var g6="ContextMenuLabel",GN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(t6,{...o,...r,ref:e})});GN.displayName=g6;var v6="ContextMenuItem",YN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(n6,{...o,...r,ref:e})});YN.displayName=v6;var y6="ContextMenuCheckboxItem",JN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(r6,{...o,...r,ref:e})});JN.displayName=y6;var x6="ContextMenuRadioGroup",w6=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(o6,{...o,...r,ref:e})});w6.displayName=x6;var b6="ContextMenuRadioItem",XN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(s6,{...o,...r,ref:e})});XN.displayName=b6;var S6="ContextMenuItemIndicator",QN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(i6,{...o,...r,ref:e})});QN.displayName=S6;var C6="ContextMenuSeparator",ZN=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(a6,{...o,...r,ref:e})});ZN.displayName=C6;var k6="ContextMenuArrow",E6=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(l6,{...o,...r,ref:e})});E6.displayName=k6;var T6="ContextMenuSubTrigger",eM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(c6,{...o,...r,ref:e})});eM.displayName=T6;var N6="ContextMenuSubContent",tM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(u6,{...o,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tM.displayName=N6;function _u(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var M6=HN,P6=VN,_6=WN,nM=qN,rM=GN,oM=YN,sM=JN,iM=XN,aM=QN,lM=ZN,cM=eM,uM=tM;function Vr(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var R6=["color"],A6=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,R6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),O6=["color"],Xy=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,O6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),j6=["color"],I6=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,j6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),D6=["color"],dM=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,D6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),L6=["color"],$6=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,L6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),F6=["color"],z6=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,F6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),B6=["color"],H6=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,B6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M3.29227 0.048984C3.47033 -0.032338 3.67946 -0.00228214 3.8274 0.125891L12.8587 7.95026C13.0134 8.08432 13.0708 8.29916 13.0035 8.49251C12.9362 8.68586 12.7578 8.81866 12.5533 8.82768L9.21887 8.97474L11.1504 13.2187C11.2648 13.47 11.1538 13.7664 10.9026 13.8808L8.75024 14.8613C8.499 14.9758 8.20255 14.8649 8.08802 14.6137L6.15339 10.3703L3.86279 12.7855C3.72196 12.934 3.50487 12.9817 3.31479 12.9059C3.1247 12.8301 3 12.6461 3 12.4414V0.503792C3 0.308048 3.11422 0.130306 3.29227 0.048984ZM4 1.59852V11.1877L5.93799 9.14425C6.05238 9.02363 6.21924 8.96776 6.38319 8.99516C6.54715 9.02256 6.68677 9.12965 6.75573 9.2809L8.79056 13.7441L10.0332 13.178L8.00195 8.71497C7.93313 8.56376 7.94391 8.38824 8.03072 8.24659C8.11753 8.10494 8.26903 8.01566 8.435 8.00834L11.2549 7.88397L4 1.59852Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),U6=["color"],fM=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,U6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),V6=["color"],W6=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Vr(t,V6);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M13.9 0.499976C13.9 0.279062 13.7209 0.0999756 13.5 0.0999756C13.2791 0.0999756 13.1 0.279062 13.1 0.499976V1.09998H12.5C12.2791 1.09998 12.1 1.27906 12.1 1.49998C12.1 1.72089 12.2791 1.89998 12.5 1.89998H13.1V2.49998C13.1 2.72089 13.2791 2.89998 13.5 2.89998C13.7209 2.89998 13.9 2.72089 13.9 2.49998V1.89998H14.5C14.7209 1.89998 14.9 1.72089 14.9 1.49998C14.9 1.27906 14.7209 1.09998 14.5 1.09998H13.9V0.499976ZM11.8536 3.14642C12.0488 3.34168 12.0488 3.65826 11.8536 3.85353L10.8536 4.85353C10.6583 5.04879 10.3417 5.04879 10.1465 4.85353C9.9512 4.65827 9.9512 4.34169 10.1465 4.14642L11.1464 3.14643C11.3417 2.95116 11.6583 2.95116 11.8536 3.14642ZM9.85357 5.14642C10.0488 5.34168 10.0488 5.65827 9.85357 5.85353L2.85355 12.8535C2.65829 13.0488 2.34171 13.0488 2.14645 12.8535C1.95118 12.6583 1.95118 12.3417 2.14645 12.1464L9.14646 5.14642C9.34172 4.95116 9.65831 4.95116 9.85357 5.14642ZM13.5 5.09998C13.7209 5.09998 13.9 5.27906 13.9 5.49998V6.09998H14.5C14.7209 6.09998 14.9 6.27906 14.9 6.49998C14.9 6.72089 14.7209 6.89998 14.5 6.89998H13.9V7.49998C13.9 7.72089 13.7209 7.89998 13.5 7.89998C13.2791 7.89998 13.1 7.72089 13.1 7.49998V6.89998H12.5C12.2791 6.89998 12.1 6.72089 12.1 6.49998C12.1 6.27906 12.2791 6.09998 12.5 6.09998H13.1V5.49998C13.1 5.27906 13.2791 5.09998 13.5 5.09998ZM8.90002 0.499976C8.90002 0.279062 8.72093 0.0999756 8.50002 0.0999756C8.2791 0.0999756 8.10002 0.279062 8.10002 0.499976V1.09998H7.50002C7.2791 1.09998 7.10002 1.27906 7.10002 1.49998C7.10002 1.72089 7.2791 1.89998 7.50002 1.89998H8.10002V2.49998C8.10002 2.72089 8.2791 2.89998 8.50002 2.89998C8.72093 2.89998 8.90002 2.72089 8.90002 2.49998V1.89998H9.50002C9.72093 1.89998 9.90002 1.72089 9.90002 1.49998C9.90002 1.27906 9.72093 1.09998 9.50002 1.09998H8.90002V0.499976Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Pg=M6,_g=P6,K6=p.forwardRef(({className:t,inset:e,children:n,...r},o)=>f.jsxs(cM,{ref:o,className:ie("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...r,children:[n,f.jsx(dM,{className:"ml-auto h-4 w-4"})]}));K6.displayName=cM.displayName;const q6=p.forwardRef(({className:t,...e},n)=>f.jsx(uM,{ref:n,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));q6.displayName=uM.displayName;const rf=p.forwardRef(({className:t,...e},n)=>f.jsx(_6,{children:f.jsx(nM,{ref:n,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e})}));rf.displayName=nM.displayName;const kn=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(oM,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));kn.displayName=oM.displayName;const G6=p.forwardRef(({className:t,children:e,checked:n,...r},o)=>f.jsxs(sM,{ref:o,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(aM,{children:f.jsx(Xy,{className:"h-4 w-4"})})}),e]}));G6.displayName=sM.displayName;const Y6=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(iM,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(aM,{children:f.jsx(fM,{className:"h-4 w-4 fill-current"})})}),e]}));Y6.displayName=iM.displayName;const J6=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(rM,{ref:r,className:ie("px-2 py-1.5 text-sm font-semibold text-foreground",e&&"pl-8",t),...n}));J6.displayName=rM.displayName;const ld=p.forwardRef(({className:t,...e},n)=>f.jsx(lM,{ref:n,className:ie("-mx-1 my-1 h-px bg-border",t),...e}));ld.displayName=lM.displayName;function X6({children:t,editor:e,onSelectAsParagraphTopic:n,onSelectAsEssayTopic:r,comments:o,setComments:s,activeCommentId:i,setActiveCommentId:a,onAddComment:l,runContextualAnalysis:c}){const[u,d]=p.useState(!1),[h,m]=p.useState({x:0,y:0}),[g,v]=p.useState(""),[x,y]=p.useState(!1),[w,b]=p.useState(null),[S,C]=p.useState(!1),[E,k]=p.useState({x:0,y:0}),[T,j]=p.useState(!1),[I,V]=p.useState(null),[U,B]=p.useState(!1),W=p.useRef(null),oe=p.useRef({startX:0,startY:0,startMouseX:0,startMouseY:0}),H=()=>{if(!e)return;const{from:z,to:G}=e.state.selection;if(z===G)return;const se=e.state.doc.textBetween(z,G);v(se),V({from:z,to:G});const ne=window.event;m({x:Math.max(20,Math.min(ne.clientX,window.innerWidth-420)),y:Math.max(20,ne.clientY-20)}),d(!0),b(null)},te=()=>{d(!1),b(null);const z=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,clientX:h.x,clientY:h.y});e==null||e.view.dom.dispatchEvent(z)},R=()=>{if(!e)return;const z=e.state.doc.textBetween(e.state.selection.from,e.state.selection.to);navigator.clipboard.writeText(z)},N=()=>{e&&navigator.clipboard.readText().then(z=>{e.commands.insertContent(z)})},$=async z=>{if(e){y(!0);try{const G=e.getHTML(),se=await e9({selectedText:g,prompt:z,fullContext:G});b({response:se.response,suggestedText:se.suggestedText})}catch(G){console.error("Error getting AI response:",G),b({response:"Sorry, I couldn't process your request properly.",suggestedText:g})}finally{y(!1)}}},L=z=>{if(!e)return;const{from:G,to:se}=e.state.selection;e.commands.deleteRange({from:G,to:se}),e.commands.insertContent(z),d(!1),b(null)},P=()=>{d(!1),b(null),k({x:0,y:0}),V(null),j(!1),B(!1),W.current&&(document.removeEventListener("mouseup",W.current),W.current=null)},q=()=>{if(!e||!I)return;W.current&&(document.removeEventListener("mouseup",W.current),W.current=null),B(!0),e.commands.setTextSelection({from:I.from,to:I.to}),e.commands.focus();const z=()=>{setTimeout(()=>{const{from:G,to:se}=e.state.selection;if(G!==se){const ne=e.state.doc.textBetween(G,se);ne!==g&&ne.trim().length>0&&(v(ne),V({from:G,to:se}),B(!1),document.removeEventListener("mouseup",z),W.current=null)}},50)};W.current=z,document.addEventListener("mouseup",z),setTimeout(()=>{W.current===z&&(document.removeEventListener("mouseup",z),W.current=null,B(!1))},1e4)},Z=z=>{z.target.closest("button, input, textarea")||(C(!0),oe.current={startX:E.x,startY:E.y,startMouseX:z.clientX,startMouseY:z.clientY},z.preventDefault())},M=z=>{if(!S)return;const G=z.clientX-oe.current.startMouseX,se=z.clientY-oe.current.startMouseY;k({x:oe.current.startX+G,y:oe.current.startY+se})},O=()=>{C(!1)};p.useEffect(()=>{if(S)return document.addEventListener("mousemove",M),document.addEventListener("mouseup",O),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",O)}},[S]);const D=z=>{if(!e)return;const G=e.state.doc;if(!G||G.nodeSize===0)return;const se=[];try{G.descendants((ne,pe)=>{if(!ne||!ne.marks)return;ne.marks.find(Ne=>Ne.type.name==="comment"&&Ne.attrs.commentId===z)&&se.push({from:pe,to:pe+ne.nodeSize})})}catch(ne){console.warn("AIContextMenu handleUpdateComment descendants error:",ne);return}if(se.length>0){const ne=se.map(({from:pe,to:_})=>e.state.doc.textBetween(pe,_)).join(" ");s(pe=>pe.map(_=>_.id===z?{..._,quotedText:ne}:_))}else s(ne=>ne.filter(pe=>pe.id!==z)),a(null)};p.useEffect(()=>{if(!e)return;const z=new MutationObserver(()=>{o.forEach(se=>D(se.id))}),G=e.view.dom;return z.observe(G,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),()=>z.disconnect()},[e,o]),p.useEffect(()=>{if(!e||!i)return;let z=!1;const G=()=>{if(!z){z=!0;try{const{from:ne,to:pe}=e.state.selection,_=e.state.doc;if(!_||_.nodeSize===0)return;const Ne=[];try{_.descendants((Pe,De)=>{if(!Pe||!Pe.marks)return;Pe.marks.find(be=>be.type.name==="comment"&&be.attrs.commentId===i)&&Ne.push({from:De,to:De+Pe.nodeSize})})}catch(Pe){console.warn("AIContextMenu descendants error:",Pe);return}if(Ne.length>0){const Pe=Ne.map(({from:Re,to:be})=>e.state.doc.textBetween(Re,be)).join(" ");s(Re=>Re.map(be=>be.id===i&&be.quotedText!==Pe?{...be,quotedText:Pe}:be)),Ne.some(({from:Re,to:be})=>ne>=Re&&pe<=be)&&e.commands.setTextSelection({from:ne,to:pe})}}finally{setTimeout(()=>{z=!1},10)}}},se=()=>{setTimeout(()=>{G()},50)};return e.on("transaction",se),()=>{e.off("transaction",se)}},[e,i]);const re=z=>{if(!e)return;const{from:G,to:se}=e.state.selection;G!==se&&z.preventDefault()};return f.jsxs(f.Fragment,{children:[f.jsx("div",{onContextMenu:re,children:f.jsxs(Pg,{children:[f.jsx(_g,{children:t}),f.jsxs(rf,{children:[f.jsxs(kn,{onSelect:R,className:"flex items-center",children:[f.jsx(Ey,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Copy"})]}),f.jsxs(kn,{onSelect:N,className:"flex items-center",children:[f.jsx(k4,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Paste"})]}),f.jsx(ld,{}),f.jsxs(kn,{onSelect:()=>c==null?void 0:c("all"),className:"flex items-center",children:[f.jsx(Ty,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Check Everything"})]}),f.jsxs(kn,{onSelect:()=>c==null?void 0:c("custom"),className:"flex items-center",children:[f.jsx(hT,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Check Custom Selection"})]}),f.jsxs(kn,{onSelect:H,className:"flex items-center",children:[f.jsx(Ny,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Get Instant AI Feedback"})]}),f.jsx(ld,{}),f.jsxs(kn,{onSelect:n,className:"flex items-center",children:[f.jsx(mT,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Set as Paragraph Topic"})]}),f.jsxs(kn,{onSelect:r,className:"flex items-center",children:[f.jsx(Jd,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Set as Essay Topic"})]}),f.jsx(ld,{}),f.jsxs(kn,{onSelect:l,className:"flex items-center",children:[f.jsx(Rs,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Add Comment"})]})]})]})}),u&&f.jsx("div",{className:"select-none",style:{position:"fixed",left:`${h.x+E.x}px`,top:`${h.y+E.y}px`,zIndex:100,cursor:S?"grabbing":"grab"},onMouseDown:Z,children:f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsxs("div",{className:`text-xs text-gray-600 mb-2 p-2 bg-blue-50 border border-blue-200 rounded max-w-[300px] min-h-fit relative${U?" border-blue-400 bg-blue-100":""}`,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[f.jsxs("span",{className:"italic break-words",children:['"',g,'"']}),U&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-blue-50/80 rounded",children:f.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Select new text in editor..."})}),T&&!U&&f.jsx(ve,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border shadow-md hover:shadow-lg transition-all duration-200",onClick:z=>{z.stopPropagation(),q()},title:"Reselect this text in editor",children:f.jsx(j4,{className:"h-3 w-3"})})]}),x?f.jsx(fr,{className:"w-[300px] shadow-lg",children:f.jsx(hr,{className:"p-3 flex justify-center items-center h-16",children:f.jsx("div",{className:"text-sm",children:"Analyzing your request..."})})}):w?f.jsx(J4,{response:w.response,suggestedText:w.suggestedText,onClose:P,onInsert:L,onBackToMenu:te}):f.jsx(Y4,{onSubmit:$,onClose:P,onBackToMenu:te,title:"AI Writing Assistant",placeholder:"Ask AI to help with your selected text..."})]})})]})}function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}var Q6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ce=Q6.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?Bo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function hM(t,e){t&&Yo.flushSync(()=>t.dispatchEvent(e))}function Z6(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[t][l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})}function u(d,h){const m=(h==null?void 0:h[t][l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,eB(o,...e)]}function eB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Qy(t){const e=t+"CollectionProvider",[n,r]=Z6(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:g,children:v}=m,x=X.useRef(null),y=X.useRef(new Map).current;return f.jsx(o,{scope:g,itemMap:y,collectionRef:x,children:v})};i.displayName=e;const a=t+"CollectionSlot",l=X.forwardRef((m,g)=>{const{scope:v,children:x}=m,y=s(a,v),w=ze(g,y.collectionRef);return f.jsx(Bo,{ref:w,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=X.forwardRef((m,g)=>{const{scope:v,children:x,...y}=m,w=X.useRef(null),b=ze(g,w),S=s(c,v);return X.useEffect(()=>(S.itemMap.set(w,{ref:w,...y}),()=>void S.itemMap.delete(w))),f.jsx(Bo,{[u]:"",ref:b,children:x})});d.displayName=c;function h(m){const g=s(t+"CollectionConsumer",m);return X.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,C)=>y.indexOf(S.ref.current)-y.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},h,r]}var tB="DismissableLayer",Rg="dismissableLayer.update",nB="dismissableLayer.pointerDownOutside",rB="dismissableLayer.focusOutside",Gb,pM=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pa=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=p.useContext(pM),[u,d]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=ze(e,k=>d(k)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,C=iB(k=>{const T=k.target,j=[...c.branches].some(I=>I.contains(T));!S||j||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),E=aB(k=>{const T=k.target;[...c.branches].some(I=>I.contains(T))||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return Py(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Gb=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Yb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Gb)}},[u,h,n,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Yb())},[u,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(Rg,k),()=>document.removeEventListener(Rg,k)},[]),f.jsx(Ce.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,E.onFocusCapture),onBlurCapture:le(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,C.onPointerDownCapture)})});Pa.displayName=tB;var oB="DismissableLayerBranch",sB=p.forwardRef((t,e)=>{const n=p.useContext(pM),r=p.useRef(null),o=ze(e,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(Ce.div,{...t,ref:o})});sB.displayName=oB;function iB(t,e=globalThis==null?void 0:globalThis.document){const n=Ke(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){mM(nB,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function aB(t,e=globalThis==null?void 0:globalThis.document){const n=Ke(t),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&mM(rB,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yb(){const t=new CustomEvent(Rg);document.dispatchEvent(t)}function mM(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?hM(o,s):o.dispatchEvent(s)}var jp="focusScope.autoFocusOnMount",Ip="focusScope.autoFocusOnUnmount",Jb={bubbles:!1,cancelable:!0},lB="FocusScope",th=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=p.useState(null),c=Ke(o),u=Ke(s),d=p.useRef(null),h=ze(e,v=>l(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:oo(d.current,{select:!0})},x=function(b){if(m.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||oo(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&oo(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,m.paused]),p.useEffect(()=>{if(a){Qb.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(jp,Jb);a.addEventListener(jp,c),a.dispatchEvent(y),y.defaultPrevented||(cB(pB(gM(a)),{select:!0}),document.activeElement===v&&oo(a))}return()=>{a.removeEventListener(jp,c),setTimeout(()=>{const y=new CustomEvent(Ip,Jb);a.addEventListener(Ip,u),a.dispatchEvent(y),y.defaultPrevented||oo(v??document.body,{select:!0}),a.removeEventListener(Ip,u),Qb.remove(m)},0)}}},[a,c,u,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,S]=uB(w);b&&S?!v.shiftKey&&y===S?(v.preventDefault(),n&&oo(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&oo(S,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return f.jsx(Ce.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});th.displayName=lB;function cB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(oo(r,{select:e}),document.activeElement!==n)return}function uB(t){const e=gM(t),n=Xb(e,t),r=Xb(e.reverse(),t);return[n,r]}function gM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Xb(t,e){for(const n of t)if(!dB(n,{upTo:e}))return n}function dB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function fB(t){return t instanceof HTMLInputElement&&"select"in t}function oo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&fB(t)&&e&&t.select()}}var Qb=hB();function hB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Zb(t,e),t.unshift(e)},remove(e){var n;t=Zb(t,e),(n=t[0])==null||n.resume()}}}function Zb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function pB(t){return t.filter(e=>e.tagName!=="A")}var mB="Arrow",vM=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return f.jsx(Ce.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});vM.displayName=mB;var gB=vM;function vB(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[t][l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})}function u(d,h){const m=(h==null?void 0:h[t][l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,yB(o,...e)]}function yB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Zy="Popper",[yM,yr]=vB(Zy),[xB,xM]=yM(Zy),wM=t=>{const{__scopePopper:e,children:n}=t,[r,o]=p.useState(null);return f.jsx(xB,{scope:e,anchor:r,onAnchorChange:o,children:n})};wM.displayName=Zy;var bM="PopperAnchor",SM=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=xM(bM,n),i=p.useRef(null),a=ze(e,i);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:f.jsx(Ce.div,{...o,ref:a})});SM.displayName=bM;var e0="PopperContent",[wB,bB]=yM(e0),CM=p.forwardRef((t,e)=>{var D,re,z,G,se,ne;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,x=xM(e0,n),[y,w]=p.useState(null),b=ze(e,pe=>w(pe)),[S,C]=p.useState(null),E=qT(S),k=(E==null?void 0:E.width)??0,T=(E==null?void 0:E.height)??0,j=r+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},V=Array.isArray(c)?c:[c],U=V.length>0,B={padding:I,boundary:V.filter(CB),altBoundary:U},{refs:W,floatingStyles:oe,placement:H,isPositioned:te,middlewareData:R}=$T({strategy:"fixed",placement:j,whileElementsMounted:(...pe)=>DT(...pe,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[FT({mainAxis:o+T,alignmentAxis:i}),l&&zT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?BT():void 0,...B}),l&&HT({...B}),UT({...B,apply:({elements:pe,rects:_,availableWidth:Ne,availableHeight:Pe})=>{const{width:De,height:Re}=_.reference,be=pe.floating.style;be.setProperty("--radix-popper-available-width",`${Ne}px`),be.setProperty("--radix-popper-available-height",`${Pe}px`),be.setProperty("--radix-popper-anchor-width",`${De}px`),be.setProperty("--radix-popper-anchor-height",`${Re}px`)}}),S&&WT({element:S,padding:a}),kB({arrowWidth:k,arrowHeight:T}),h&&VT({strategy:"referenceHidden",...B})]}),[N,$]=TM(H),L=Ke(g);Je(()=>{te&&(L==null||L())},[te,L]);const P=(D=R.arrow)==null?void 0:D.x,q=(re=R.arrow)==null?void 0:re.y,Z=((z=R.arrow)==null?void 0:z.centerOffset)!==0,[M,O]=p.useState();return Je(()=>{y&&O(window.getComputedStyle(y).zIndex)},[y]),f.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:te?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:M,"--radix-popper-transform-origin":[(G=R.transformOrigin)==null?void 0:G.x,(se=R.transformOrigin)==null?void 0:se.y].join(" "),...((ne=R.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(wB,{scope:n,placedSide:N,onArrowChange:C,arrowX:P,arrowY:q,shouldHideArrow:Z,children:f.jsx(Ce.div,{"data-side":N,"data-align":$,...v,ref:b,style:{...v.style,animation:te?void 0:"none"}})})})});CM.displayName=e0;var kM="PopperArrow",SB={top:"bottom",right:"left",bottom:"top",left:"right"},EM=p.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=bB(kM,r),i=SB[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(gB,{...o,ref:n,style:{...o.style,display:"block"}})})});EM.displayName=kM;function CB(t){return t!==null}var kB=t=>({name:"transformOrigin",options:t,fn(e){var x,y,w;const{placement:n,rects:r,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,u]=TM(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=o.arrow)==null?void 0:y.x)??0)+a/2,m=(((w=o.arrow)==null?void 0:w.y)??0)+l/2;let g="",v="";return c==="bottom"?(g=i?d:`${h}px`,v=`${-l}px`):c==="top"?(g=i?d:`${h}px`,v=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,v=i?d:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,v=i?d:`${m}px`),{data:{x:g,y:v}}}});function TM(t){const[e,n="center"]=t.split("-");return[e,n]}var Dc=wM,_a=SM,Lc=CM,$c=EM,EB="Portal",Fc=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=p.useState(!1);Je(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?kc.createPortal(f.jsx(Ce.div,{...r,ref:e}),i):null});Fc.displayName=EB;function TB(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var xr=t=>{const{present:e,children:n}=t,r=NB(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=ze(r.ref,MB(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};xr.displayName="Presence";function NB(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),s=p.useRef("none"),i=t?"mounted":"unmounted",[a,l]=TB(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Ru(r.current);s.current=a==="mounted"?c:"none"},[a]),Je(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,m=Ru(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Je(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const v=Ru(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=m=>{m.target===e&&(s.current=Ru(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Ru(t){return(t==null?void 0:t.animationName)||"none"}function MB(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function PB(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[t][l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})}function u(d,h){const m=(h==null?void 0:h[t][l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,_B(o,...e)]}function _B(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Dp="rovingFocusGroup.onEntryFocus",RB={bubbles:!1,cancelable:!0},nh="RovingFocusGroup",[Ag,NM,AB]=Qy(nh),[OB,MM]=PB(nh,[AB]),[jB,IB]=OB(nh),PM=p.forwardRef((t,e)=>f.jsx(Ag.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Ag.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(DB,{...t,ref:e})})}));PM.displayName=nh;var DB=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=p.useRef(null),m=ze(e,h),g=Pc(s),[v=null,x]=Br({prop:i,defaultProp:a,onChange:l}),[y,w]=p.useState(!1),b=Ke(c),S=NM(n),C=p.useRef(!1),[E,k]=p.useState(0);return p.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(Dp,b),()=>T.removeEventListener(Dp,b)},[b]),f.jsx(jB,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:v,onItemFocus:p.useCallback(T=>x(T),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>k(T=>T-1),[]),children:f.jsx(Ce.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{C.current=!0}),onFocus:le(t.onFocus,T=>{const j=!C.current;if(T.target===T.currentTarget&&j&&!y){const I=new CustomEvent(Dp,RB);if(T.currentTarget.dispatchEvent(I),!I.defaultPrevented){const V=S().filter(H=>H.focusable),U=V.find(H=>H.active),B=V.find(H=>H.id===v),oe=[U,B,...V].filter(Boolean).map(H=>H.ref.current);AM(oe,u)}}C.current=!1}),onBlur:le(t.onBlur,()=>w(!1))})})}),_M="RovingFocusGroupItem",RM=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=bt(),l=s||a,c=IB(_M,n),u=c.currentTabStopId===l,d=NM(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=c;return p.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),f.jsx(Ag.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:f.jsx(Ce.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:le(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:le(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:le(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=FB(g,c.orientation,c.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const w=y.indexOf(g.currentTarget);y=c.loop?zB(y,w+1):y.slice(w+1)}setTimeout(()=>AM(y))}})})})});RM.displayName=_M;var LB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $B(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function FB(t,e,n){const r=$B(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return LB[r]}function AM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function zB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var BB=PM,HB=RM,OM=zy(),Lp=function(){},rh=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Lp,onWheelCapture:Lp,onTouchMoveCapture:Lp}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,b=Jf(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,C=Fy([n,e]),E=it(it({},b),o);return p.createElement(p.Fragment,null,u&&p.createElement(S,{sideCar:OM,removeScrollBar:c,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?p.cloneElement(p.Children.only(a),it(it({},E),{ref:C})):p.createElement(y,it({},E,{className:l,ref:C}),a))});rh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rh.classNames={fullWidth:ea,zeroRight:Zi};var Og=!1;if(typeof window<"u")try{var Au=Object.defineProperty({},"passive",{get:function(){return Og=!0,!0}});window.addEventListener("test",Au,Au),window.removeEventListener("test",Au,Au)}catch{Og=!1}var pi=Og?{passive:!1}:!1,UB=function(t){return t.tagName==="TEXTAREA"},jM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!UB(t)&&n[e]==="visible")},VB=function(t){return jM(t,"overflowY")},WB=function(t){return jM(t,"overflowX")},e1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=IM(t,r);if(o){var s=DM(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},KB=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},qB=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},IM=function(t,e){return t==="v"?VB(e):WB(e)},DM=function(t,e){return t==="v"?KB(e):qB(e)},GB=function(t,e){return t==="h"&&e==="rtl"?-1:1},YB=function(t,e,n,r,o){var s=GB(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,h=0;do{var m=DM(t,a),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&IM(t,a)&&(d+=y,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(h)<1||!o))&&(c=!0),c},Ou=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},t1=function(t){return[t.deltaX,t.deltaY]},n1=function(t){return t&&"current"in t?t.current:t},JB=function(t,e){return t[0]===e[0]&&t[1]===e[1]},XB=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},QB=0,mi=[];function ZB(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(QB++)[0],s=p.useState(Qf)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var v=$y([t.lockRef.current],(t.shards||[]).map(n1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var y=Ou(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],S="deltaY"in v?v.deltaY:w[1]-y[1],C,E=v.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&E.type==="range")return!1;var T=e1(k,E);if(!T)return!0;if(T?C=k:(C=k==="v"?"h":"v",T=e1(k,E)),!T)return!1;if(!r.current&&"changedTouches"in v&&(b||S)&&(r.current=C),!C)return!0;var j=r.current||C;return YB(j,x,v,j==="h"?b:S,!0)},[]),l=p.useCallback(function(v){var x=v;if(!(!mi.length||mi[mi.length-1]!==s)){var y="deltaY"in x?t1(x):Ou(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&JB(C.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(n1).filter(Boolean).filter(function(C){return C.contains(x.target)}),S=b.length>0?a(x,b[0]):!i.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),c=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:eH(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=p.useCallback(function(v){n.current=Ou(v),r.current=void 0},[]),d=p.useCallback(function(v){c(v.type,t1(v),v.target,a(v,t.lockRef.current))},[]),h=p.useCallback(function(v){c(v.type,Ou(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return mi.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,pi),document.addEventListener("touchmove",l,pi),document.addEventListener("touchstart",u,pi),function(){mi=mi.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,pi),document.removeEventListener("touchmove",l,pi),document.removeEventListener("touchstart",u,pi)}},[]);var m=t.removeScrollBar,g=t.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:XB(o)}):null,m?p.createElement(Hy,{gapMode:t.gapMode}):null)}function eH(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const tH=By(OM,ZB);var oh=p.forwardRef(function(t,e){return p.createElement(rh,it({},t,{ref:e,sideCar:tH}))});oh.classNames=rh.classNames;var jg=["Enter"," "],nH=["ArrowDown","PageUp","Home"],LM=["ArrowUp","PageDown","End"],rH=[...nH,...LM],oH={ltr:[...jg,"ArrowRight"],rtl:[...jg,"ArrowLeft"]},sH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zc="Menu",[uc,iH,aH]=Qy(zc),[ti,$M]=Sn(zc,[aH,yr,MM]),sh=yr(),FM=MM(),[lH,ni]=ti(zc),[cH,Bc]=ti(zc),zM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=t,a=sh(e),[l,c]=p.useState(null),u=p.useRef(!1),d=Ke(s),h=Pc(o);return p.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),f.jsx(Dc,{...a,children:f.jsx(lH,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:f.jsx(cH,{scope:e,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};zM.displayName=zc;var uH="MenuAnchor",t0=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=sh(n);return f.jsx(_a,{...o,...r,ref:e})});t0.displayName=uH;var n0="MenuPortal",[dH,BM]=ti(n0,{forceMount:void 0}),HM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,s=ni(n0,e);return f.jsx(dH,{scope:e,forceMount:n,children:f.jsx(xr,{present:n||s.open,children:f.jsx(Fc,{asChild:!0,container:o,children:r})})})};HM.displayName=n0;var jn="MenuContent",[fH,r0]=ti(jn),UM=p.forwardRef((t,e)=>{const n=BM(jn,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ni(jn,t.__scopeMenu),i=Bc(jn,t.__scopeMenu);return f.jsx(uc.Provider,{scope:t.__scopeMenu,children:f.jsx(xr,{present:r||s.open,children:f.jsx(uc.Slot,{scope:t.__scopeMenu,children:i.modal?f.jsx(hH,{...o,ref:e}):f.jsx(pH,{...o,ref:e})})})})}),hH=p.forwardRef((t,e)=>{const n=ni(jn,t.__scopeMenu),r=p.useRef(null),o=ze(e,r);return p.useEffect(()=>{const s=r.current;if(s)return Oc(s)},[]),f.jsx(o0,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pH=p.forwardRef((t,e)=>{const n=ni(jn,t.__scopeMenu);return f.jsx(o0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),o0=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=t,x=ni(jn,n),y=Bc(jn,n),w=sh(n),b=FM(n),S=iH(n),[C,E]=p.useState(null),k=p.useRef(null),T=ze(e,k,x.onContentChange),j=p.useRef(0),I=p.useRef(""),V=p.useRef(0),U=p.useRef(null),B=p.useRef("right"),W=p.useRef(0),oe=g?oh:p.Fragment,H=g?{as:Bo,allowPinchZoom:!0}:void 0,te=N=>{var D,re;const $=I.current+N,L=S().filter(z=>!z.disabled),P=document.activeElement,q=(D=L.find(z=>z.ref.current===P))==null?void 0:D.textValue,Z=L.map(z=>z.textValue),M=TH(Z,$,q),O=(re=L.find(z=>z.textValue===M))==null?void 0:re.ref.current;(function z(G){I.current=G,window.clearTimeout(j.current),G!==""&&(j.current=window.setTimeout(()=>z(""),1e3))})($),O&&setTimeout(()=>O.focus())};p.useEffect(()=>()=>window.clearTimeout(j.current),[]),_c();const R=p.useCallback(N=>{var L,P;return B.current===((L=U.current)==null?void 0:L.side)&&MH(N,(P=U.current)==null?void 0:P.area)},[]);return f.jsx(fH,{scope:n,searchRef:I,onItemEnter:p.useCallback(N=>{R(N)&&N.preventDefault()},[R]),onItemLeave:p.useCallback(N=>{var $;R(N)||(($=k.current)==null||$.focus(),E(null))},[R]),onTriggerLeave:p.useCallback(N=>{R(N)&&N.preventDefault()},[R]),pointerGraceTimerRef:V,onPointerGraceIntentChange:p.useCallback(N=>{U.current=N},[]),children:f.jsx(oe,{...H,children:f.jsx(th,{asChild:!0,trapped:o,onMountAutoFocus:le(s,N=>{var $;N.preventDefault(),($=k.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:f.jsx(Pa,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:f.jsx(BB,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:le(l,N=>{y.isUsingKeyboardRef.current||N.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(Lc,{role:"menu","aria-orientation":"vertical","data-state":sP(x.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:le(v.onKeyDown,N=>{const L=N.target.closest("[data-radix-menu-content]")===N.currentTarget,P=N.ctrlKey||N.altKey||N.metaKey,q=N.key.length===1;L&&(N.key==="Tab"&&N.preventDefault(),!P&&q&&te(N.key));const Z=k.current;if(N.target!==Z||!rH.includes(N.key))return;N.preventDefault();const O=S().filter(D=>!D.disabled).map(D=>D.ref.current);LM.includes(N.key)&&O.reverse(),kH(O)}),onBlur:le(t.onBlur,N=>{N.currentTarget.contains(N.target)||(window.clearTimeout(j.current),I.current="")}),onPointerMove:le(t.onPointerMove,dc(N=>{const $=N.target,L=W.current!==N.clientX;if(N.currentTarget.contains($)&&L){const P=N.clientX>W.current?"right":"left";B.current=P,W.current=N.clientX}}))})})})})})})});UM.displayName=jn;var mH="MenuGroup",s0=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Ce.div,{role:"group",...r,ref:e})});s0.displayName=mH;var gH="MenuLabel",VM=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Ce.div,{...r,ref:e})});VM.displayName=gH;var of="MenuItem",r1="menu.itemSelect",ih=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,s=p.useRef(null),i=Bc(of,t.__scopeMenu),a=r0(of,t.__scopeMenu),l=ze(e,s),c=p.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(r1,{bubbles:!0,cancelable:!0});d.addEventListener(r1,m=>r==null?void 0:r(m),{once:!0}),hM(d,h),h.defaultPrevented?c.current=!1:i.onClose()}};return f.jsx(WM,{...o,ref:l,disabled:n,onClick:le(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:le(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:le(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||jg.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ih.displayName=of;var WM=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=t,i=r0(of,n),a=FM(n),l=p.useRef(null),c=ze(e,l),[u,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[s.children]),f.jsx(uc.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:f.jsx(HB,{asChild:!0,...a,focusable:!r,children:f.jsx(Ce.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:le(t.onPointerMove,dc(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(t.onPointerLeave,dc(g=>i.onItemLeave(g))),onFocus:le(t.onFocus,()=>d(!0)),onBlur:le(t.onBlur,()=>d(!1))})})})}),vH="MenuCheckboxItem",KM=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return f.jsx(XM,{scope:t.__scopeMenu,checked:n,children:f.jsx(ih,{role:"menuitemcheckbox","aria-checked":sf(n)?"mixed":n,...o,ref:e,"data-state":a0(n),onSelect:le(o.onSelect,()=>r==null?void 0:r(sf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});KM.displayName=vH;var qM="MenuRadioGroup",[yH,xH]=ti(qM,{value:void 0,onValueChange:()=>{}}),GM=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,s=Ke(r);return f.jsx(yH,{scope:t.__scopeMenu,value:n,onValueChange:s,children:f.jsx(s0,{...o,ref:e})})});GM.displayName=qM;var YM="MenuRadioItem",JM=p.forwardRef((t,e)=>{const{value:n,...r}=t,o=xH(YM,t.__scopeMenu),s=n===o.value;return f.jsx(XM,{scope:t.__scopeMenu,checked:s,children:f.jsx(ih,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":a0(s),onSelect:le(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});JM.displayName=YM;var i0="MenuItemIndicator",[XM,wH]=ti(i0,{checked:!1}),QM=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,s=wH(i0,n);return f.jsx(xr,{present:r||sf(s.checked)||s.checked===!0,children:f.jsx(Ce.span,{...o,ref:e,"data-state":a0(s.checked)})})});QM.displayName=i0;var bH="MenuSeparator",ZM=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Ce.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});ZM.displayName=bH;var SH="MenuArrow",eP=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=sh(n);return f.jsx($c,{...o,...r,ref:e})});eP.displayName=SH;var CH="MenuSub",[gX,tP]=ti(CH),ul="MenuSubTrigger",nP=p.forwardRef((t,e)=>{const n=ni(ul,t.__scopeMenu),r=Bc(ul,t.__scopeMenu),o=tP(ul,t.__scopeMenu),s=r0(ul,t.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(t0,{asChild:!0,...c,children:f.jsx(WM,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":sP(n.open),...t,ref:Wf(e,o.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(t.onPointerMove,dc(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:le(t.onPointerLeave,dc(d=>{var m,g;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,w=h[x?"left":"right"],b=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:le(t.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||oH[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});nP.displayName=ul;var rP="MenuSubContent",oP=p.forwardRef((t,e)=>{const n=BM(jn,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ni(jn,t.__scopeMenu),i=Bc(jn,t.__scopeMenu),a=tP(rP,t.__scopeMenu),l=p.useRef(null),c=ze(e,l);return f.jsx(uc.Provider,{scope:t.__scopeMenu,children:f.jsx(xr,{present:r||s.open,children:f.jsx(uc.Slot,{scope:t.__scopeMenu,children:f.jsx(o0,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:le(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:le(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:le(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=sH[i.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});oP.displayName=rP;function sP(t){return t?"open":"closed"}function sf(t){return t==="indeterminate"}function a0(t){return sf(t)?"indeterminate":t?"checked":"unchecked"}function kH(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function EH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function TH(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=EH(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function NH(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function MH(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return NH(n,e)}function dc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var PH=zM,_H=t0,RH=HM,AH=UM,OH=s0,jH=VM,IH=ih,DH=KM,LH=GM,$H=JM,FH=QM,zH=ZM,BH=eP,HH=nP,UH=oP,l0="DropdownMenu",[VH,vX]=Sn(l0,[$M]),Jt=$M(),[WH,iP]=VH(l0),aP=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=Jt(e),c=p.useRef(null),[u=!1,d]=Br({prop:o,defaultProp:s,onChange:i});return f.jsx(WH,{scope:e,triggerId:bt(),triggerRef:c,contentId:bt(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:a,children:f.jsx(PH,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};aP.displayName=l0;var lP="DropdownMenuTrigger",cP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,s=iP(lP,n),i=Jt(n);return f.jsx(_H,{asChild:!0,...i,children:f.jsx(Ce.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Wf(e,s.triggerRef),onPointerDown:le(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:le(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});cP.displayName=lP;var KH="DropdownMenuPortal",uP=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Jt(e);return f.jsx(RH,{...r,...n})};uP.displayName=KH;var dP="DropdownMenuContent",fP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=iP(dP,n),s=Jt(n),i=p.useRef(!1);return f.jsx(AH,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:e,onCloseAutoFocus:le(t.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:le(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fP.displayName=dP;var qH="DropdownMenuGroup",GH=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(OH,{...o,...r,ref:e})});GH.displayName=qH;var YH="DropdownMenuLabel",hP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(jH,{...o,...r,ref:e})});hP.displayName=YH;var JH="DropdownMenuItem",pP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(IH,{...o,...r,ref:e})});pP.displayName=JH;var XH="DropdownMenuCheckboxItem",mP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(DH,{...o,...r,ref:e})});mP.displayName=XH;var QH="DropdownMenuRadioGroup",ZH=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(LH,{...o,...r,ref:e})});ZH.displayName=QH;var e7="DropdownMenuRadioItem",gP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx($H,{...o,...r,ref:e})});gP.displayName=e7;var t7="DropdownMenuItemIndicator",vP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(FH,{...o,...r,ref:e})});vP.displayName=t7;var n7="DropdownMenuSeparator",yP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(zH,{...o,...r,ref:e})});yP.displayName=n7;var r7="DropdownMenuArrow",o7=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(BH,{...o,...r,ref:e})});o7.displayName=r7;var s7="DropdownMenuSubTrigger",xP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(HH,{...o,...r,ref:e})});xP.displayName=s7;var i7="DropdownMenuSubContent",wP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(UH,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wP.displayName=i7;var a7=aP,l7=cP,c7=uP,bP=fP,SP=hP,CP=pP,kP=mP,EP=gP,TP=vP,NP=yP,MP=xP,PP=wP;const c0=a7,u0=l7,u7=p.forwardRef(({className:t,inset:e,children:n,...r},o)=>f.jsxs(MP,{ref:o,className:ie("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,f.jsx(dM,{className:"ml-auto h-4 w-4"})]}));u7.displayName=MP.displayName;const d7=p.forwardRef(({className:t,...e},n)=>f.jsx(PP,{ref:n,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out",t),...e}));d7.displayName=PP.displayName;const ah=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(c7,{children:f.jsx(bP,{ref:r,sideOffset:e,className:ie("z-50 min-w-[10rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out",t),...n})}));ah.displayName=bP.displayName;const fc=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(CP,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent",e&&"pl-8",t),...n}));fc.displayName=CP.displayName;const f7=p.forwardRef(({className:t,children:e,checked:n,...r},o)=>f.jsxs(kP,{ref:o,className:ie("z-50 min-w-[12rem] text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[f.jsx("span",{className:"absolute left-2 flex h-4 w-4 items-center justify-center",children:f.jsx(TP,{children:f.jsx(Xy,{className:"h-4 w-4"})})}),f.jsx("span",{className:"ml-2 flex-grow",children:e})]}));f7.displayName=kP.displayName;const h7=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(EP,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-10 pr-2 text-sm outline-none transition-colors focus:bg-accent",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-4 w-4 items-center justify-center",children:f.jsx(TP,{children:f.jsx(fM,{className:"h-4 w-4 fill-current"})})}),f.jsx("span",{className:"flex-grow",children:e})]}));h7.displayName=EP.displayName;const _P=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(SP,{ref:r,className:ie("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));_P.displayName=SP.displayName;const RP=p.forwardRef(({className:t,...e},n)=>f.jsx(NP,{ref:n,className:ie("-mx-1 my-1 h-px bg-muted",t),...e}));RP.displayName=NP.displayName;var p7="VisuallyHidden",d0=p.forwardRef((t,e)=>f.jsx(Ce.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));d0.displayName=p7;var m7=d0,[lh,yX]=Sn("Tooltip",[yr]),ch=yr(),AP="TooltipProvider",g7=700,Ig="tooltip.open",[v7,f0]=lh(AP),OP=t=>{const{__scopeTooltip:e,delayDuration:n=g7,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=t,[i,a]=p.useState(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),f.jsx(v7,{scope:e,isOpenDelayed:i,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:o,children:s})};OP.displayName=AP;var uh="Tooltip",[y7,Hc]=lh(uh),jP=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o=!1,onOpenChange:s,disableHoverableContent:i,delayDuration:a}=t,l=f0(uh,t.__scopeTooltip),c=ch(e),[u,d]=p.useState(null),h=bt(),m=p.useRef(0),g=i??l.disableHoverableContent,v=a??l.delayDuration,x=p.useRef(!1),[y=!1,w]=Br({prop:r,defaultProp:o,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(Ig))):l.onClose(),s==null||s(k)}}),b=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),S=p.useCallback(()=>{window.clearTimeout(m.current),x.current=!1,w(!0)},[w]),C=p.useCallback(()=>{window.clearTimeout(m.current),w(!1)},[w]),E=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,w(!0)},v)},[v,w]);return p.useEffect(()=>()=>window.clearTimeout(m.current),[]),f.jsx(Dc,{...c,children:f.jsx(y7,{scope:e,contentId:h,open:y,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:p.useCallback(()=>{l.isOpenDelayed?E():S()},[l.isOpenDelayed,E,S]),onTriggerLeave:p.useCallback(()=>{g?C():window.clearTimeout(m.current)},[C,g]),onOpen:S,onClose:C,disableHoverableContent:g,children:n})})};jP.displayName=uh;var Dg="TooltipTrigger",IP=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Hc(Dg,n),s=f0(Dg,n),i=ch(n),a=p.useRef(null),l=ze(e,a,o.onTriggerChange),c=p.useRef(!1),u=p.useRef(!1),d=p.useCallback(()=>c.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),f.jsx(_a,{asChild:!0,...i,children:f.jsx(Ce.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:le(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:le(t.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:le(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:le(t.onFocus,()=>{c.current||o.onOpen()}),onBlur:le(t.onBlur,o.onClose),onClick:le(t.onClick,o.onClose)})})});IP.displayName=Dg;var h0="TooltipPortal",[x7,w7]=lh(h0,{forceMount:void 0}),DP=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:o}=t,s=Hc(h0,e);return f.jsx(x7,{scope:e,forceMount:n,children:f.jsx(xr,{present:n||s.open,children:f.jsx(Fc,{asChild:!0,container:o,children:r})})})};DP.displayName=h0;var ga="TooltipContent",LP=p.forwardRef((t,e)=>{const n=w7(ga,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=t,i=Hc(ga,t.__scopeTooltip);return f.jsx(xr,{present:r||i.open,children:i.disableHoverableContent?f.jsx($P,{side:o,...s,ref:e}):f.jsx(b7,{side:o,...s,ref:e})})}),b7=p.forwardRef((t,e)=>{const n=Hc(ga,t.__scopeTooltip),r=f0(ga,t.__scopeTooltip),o=p.useRef(null),s=ze(e,o),[i,a]=p.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:d}=r,h=p.useCallback(()=>{a(null),d(!1)},[d]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},w=E7(y,x.getBoundingClientRect()),b=T7(y,w),S=N7(v.getBoundingClientRect()),C=P7([...b,...S]);a(C),d(!0)},[d]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(l&&u){const g=x=>m(x,u),v=x=>m(x,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[l,u,m,h]),p.useEffect(()=>{if(i){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(x))||(u==null?void 0:u.contains(x)),b=!M7(y,i);w?h():b&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,i,c,h]),f.jsx($P,{...t,ref:s})}),[S7,C7]=lh(uh,{isInside:!1}),$P=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=t,l=Hc(ga,n),c=ch(n),{onClose:u}=l;return p.useEffect(()=>(document.addEventListener(Ig,u),()=>document.removeEventListener(Ig,u)),[u]),p.useEffect(()=>{if(l.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),f.jsx(Pa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:f.jsxs(Lc,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(vT,{children:r}),f.jsx(S7,{scope:n,isInside:!0,children:f.jsx(m7,{id:l.contentId,role:"tooltip",children:o||r})})]})})});LP.displayName=ga;var FP="TooltipArrow",k7=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=ch(n);return C7(FP,n).isInside?null:f.jsx($c,{...o,...r,ref:e})});k7.displayName=FP;function E7(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function T7(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function N7(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function M7(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function P7(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),_7(e)}function _7(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const s=e[e.length-1],i=e[e.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var R7=OP,A7=jP,O7=IP,j7=DP,zP=LP;const I7=R7,ju=A7,Iu=O7,dl=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(j7,{children:f.jsx(zP,{ref:r,sideOffset:e,className:ie("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));dl.displayName=zP.displayName;const o1={Small:"9pt",Normal:"11pt",Large:"14pt",Huge:"18pt"};function D7({editor:t,hasSelection:e=!1,onAddComment:n,showParagraphTopics:r=!1,showEssayTopics:o=!1,onToggleParagraphTopics:s,onToggleEssayTopics:i}){const a=()=>{var d;if(!t)return"Normal";const u=t.getAttributes("textStyle").fontSize||"11pt";return((d=Object.entries(o1).find(([h,m])=>m===u))==null?void 0:d[0])||"Normal"},l=c=>{t&&t.chain().focus().setMark("textStyle",{fontSize:c}).run()};return f.jsx(I7,{delayDuration:150,children:f.jsx("div",{className:"flex items-center px-4 py-2 h-12 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:f.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center space-x-4",children:[f.jsxs(c0,{children:[f.jsx(u0,{asChild:!0,children:f.jsxs(ve,{variant:"ghost",size:"sm",className:"h-8 px-3 text-xs flex items-center space-x-1",children:[f.jsx("span",{children:a()}),f.jsx(Vf,{className:"h-3.5 w-3.5 ml-1"})]})}),f.jsx(ah,{align:"start",className:"w-32",children:Object.entries(o1).map(([c,u])=>f.jsxs(fc,{onClick:()=>l(u),className:"flex items-center justify-between",children:[f.jsx("span",{children:c}),a()===c&&f.jsx(pa,{className:"h-4 w-4"})]},u))})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsxs(ju,{children:[f.jsx(Iu,{asChild:!0,children:f.jsx(ve,{variant:t!=null&&t.isActive("bold")?"secondary":"ghost",size:"sm",onClick:()=>t==null?void 0:t.chain().focus().toggleBold().run(),className:"h-8 w-8 p-0",children:f.jsx("span",{className:"font-bold",children:"B"})})}),f.jsx(dl,{side:"bottom",children:f.jsx("p",{children:"Bold"})})]}),f.jsxs(ju,{children:[f.jsx(Iu,{asChild:!0,children:f.jsx(ve,{variant:t!=null&&t.isActive("italic")?"secondary":"ghost",size:"sm",onClick:()=>t==null?void 0:t.chain().focus().toggleItalic().run(),className:"h-8 w-8 p-0",children:f.jsx("span",{className:"italic",children:"I"})})}),f.jsx(dl,{side:"bottom",children:f.jsx("p",{children:"Italic"})})]}),f.jsxs(ju,{children:[f.jsx(Iu,{asChild:!0,children:f.jsx(ve,{variant:t!=null&&t.isActive("underline")?"secondary":"ghost",size:"sm",onClick:()=>t==null?void 0:t.chain().focus().toggleUnderline().run(),className:"h-8 w-8 p-0",children:f.jsx("span",{className:"underline",children:"U"})})}),f.jsx(dl,{side:"bottom",children:f.jsx("p",{children:"Underline"})})]})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"}),f.jsxs(ju,{children:[f.jsx(Iu,{asChild:!0,children:f.jsx(ve,{variant:"ghost",size:"sm",onClick:n,disabled:!e,className:"h-8 w-8 p-0",children:f.jsx(Rs,{className:"h-4 w-4"})})}),f.jsx(dl,{side:"bottom",children:f.jsx("p",{children:"Add Comment"})})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsxs(ve,{variant:r?"secondary":"ghost",size:"sm",onClick:s,className:`h-8 px-3 text-xs flex items-center space-x-1 transition-all duration-200 ${r?"bg-blue-100 text-blue-800 border-blue-300 hover:bg-blue-200":"hover:bg-gray-100 text-gray-600"}`,children:[f.jsx(mT,{className:"h-3.5 w-3.5"}),f.jsxs("span",{children:[r?"Hide":"Show"," Paragraph Topics"]}),r&&f.jsx("div",{className:"ml-1 w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),f.jsxs(ve,{variant:o?"secondary":"ghost",size:"sm",onClick:i,className:`h-8 px-3 text-xs flex items-center space-x-1 transition-all duration-200 ${o?"bg-purple-100 text-purple-800 border-purple-300 hover:bg-purple-200":"hover:bg-gray-100 text-gray-600"}`,children:[f.jsx(Jd,{className:"h-3.5 w-3.5"}),f.jsxs("span",{children:[o?"Hide":"Show"," Essay Topics"]}),o&&f.jsx("div",{className:"ml-1 w-2 h-2 bg-purple-500 rounded-full animate-pulse"})]})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"})]})})})}const L7=Pt.create({name:"comment"}).extend({inclusive:!1,addOptions(){return{HTMLAttributes:{},onCommentActivated:()=>{},onCommentClicked:()=>{}}},addAttributes(){return{commentId:{default:null,parseHTML:t=>t.getAttribute("data-comment-id")||"",renderHTML:t=>({"data-comment-id":t.commentId})},content:{default:"",parseHTML:t=>t.getAttribute("data-comment-content")||"",renderHTML:t=>({"data-comment-content":t.content})}}},parseHTML(){return[{tag:"span[data-comment-id]",getAttrs:t=>{const e=t.getAttribute("data-comment-id");return e!=null&&e.trim()?{commentId:e}:!1}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t),0]},onSelectionUpdate(){const{$from:t}=this.editor.state.selection,e=t.marks();if(!e.length){this.storage.activeCommentId=null,this.options.onCommentActivated(this.storage.activeCommentId);return}const n=this.editor.schema.marks.comment,r=e.find(o=>o.type===n);this.storage.activeCommentId=(r==null?void 0:r.attrs.commentId)||null,this.options.onCommentActivated(this.storage.activeCommentId)},addStorage(){return{activeCommentId:null}},onCreate(){const t=e=>{const n=e.target;console.log("Comment click detected on:",n);let r=n.closest("[data-comment-id]");if(r||(r=n.hasAttribute("data-comment-id")?n:null),r){const o=r.getAttribute("data-comment-id");console.log("Found comment ID:",o),o&&this.options.onCommentClicked&&(e.preventDefault(),e.stopPropagation(),console.log("Triggering onCommentClicked for:",o),this.options.onCommentClicked(o))}else console.log("No comment element found for click")};this.editor.view.dom.addEventListener("click",t),this.commentClickHandler=t},onDestroy(){this.commentClickHandler&&this.editor.view.dom.removeEventListener("click",this.commentClickHandler)},addCommands(){return{setComment:t=>({commands:e})=>t?e.setMark("comment",{commentId:t,content:""}):!1,unsetComment:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name==="comment"&&a.attrs.commentId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}});function Wr(){}Wr.prototype={diff:function(e,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.callback;typeof o=="function"&&(s=o,o={}),this.options=o;var i=this;function a(S){return s?(setTimeout(function(){s(void 0,S)},0),!0):S}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,u=1,d=l+c;o.maxEditLength&&(d=Math.min(d,o.maxEditLength));var h=(r=o.timeout)!==null&&r!==void 0?r:1/0,m=Date.now()+h,g=[{oldPos:-1,lastComponent:void 0}],v=this.extractCommon(g[0],n,e,0);if(g[0].oldPos+1>=c&&v+1>=l)return a([{value:this.join(n),count:n.length}]);var x=-1/0,y=1/0;function w(){for(var S=Math.max(x,-u);S<=Math.min(y,u);S+=2){var C=void 0,E=g[S-1],k=g[S+1];E&&(g[S-1]=void 0);var T=!1;if(k){var j=k.oldPos-S;T=k&&0<=j&&j<l}var I=E&&E.oldPos+1<c;if(!T&&!I){g[S]=void 0;continue}if(!I||T&&E.oldPos+1<k.oldPos?C=i.addToPath(k,!0,void 0,0):C=i.addToPath(E,void 0,!0,1),v=i.extractCommon(C,n,e,S),C.oldPos+1>=c&&v+1>=l)return a($7(i,C.lastComponent,n,e,i.useLongestToken));g[S]=C,C.oldPos+1>=c&&(y=Math.min(y,S-1)),v+1>=l&&(x=Math.max(x,S+1))}u++}if(s)(function S(){setTimeout(function(){if(u>d||Date.now()>m)return s();w()||S()},0)})();else for(;u<=d&&Date.now()<=m;){var b=w();if(b)return b}},addToPath:function(e,n,r,o){var s=e.lastComponent;return s&&s.added===n&&s.removed===r?{oldPos:e.oldPos+o,lastComponent:{count:s.count+1,added:n,removed:r,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:r,previousComponent:s}}},extractCommon:function(e,n,r,o){for(var s=n.length,i=r.length,a=e.oldPos,l=a-o,c=0;l+1<s&&a+1<i&&this.equals(n[l+1],r[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function $7(t,e,n,r,o){for(var s=[],i;e;)s.push(e),i=e.previousComponent,delete e.previousComponent,e=i;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var d=s[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&s[a-1].added){var m=s[a-1];s[a-1]=s[a],s[a]=m}}else{if(!d.added&&o){var h=n.slice(c,c+d.count);h=h.map(function(v,x){var y=r[u+x];return y.length>v.length?y:v}),d.value=t.join(h)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var g=s[l-1];return l>1&&typeof g.value=="string"&&(g.added||g.removed)&&t.equals("",g.value)&&(s[l-2].value+=g.value,s.pop()),s}var F7=new Wr;function z7(t,e,n){return F7.diff(t,e,n)}var s1=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,i1=/\S/,BP=new Wr;BP.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!i1.test(t)&&!i1.test(e)};BP.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&s1.test(e[n])&&s1.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var HP=new Wr;HP.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),e.push(o))}return e};var B7=new Wr;B7.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var H7=new Wr;H7.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function cd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cd=function(e){return typeof e}:cd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cd(t)}var U7=Object.prototype.toString,hc=new Wr;hc.useLongestToken=!0;hc.tokenize=HP.tokenize;hc.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,o=r===void 0?function(s,i){return typeof i>"u"?n:i}:r;return typeof t=="string"?t:JSON.stringify(Lg(t,null,null,o),o,"  ")};hc.equals=function(t,e){return Wr.prototype.equals.call(hc,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Lg(t,e,n,r,o){e=e||[],n=n||[],r&&(t=r(o,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var i;if(U7.call(t)==="[object Array]"){for(e.push(t),i=new Array(t.length),n.push(i),s=0;s<t.length;s+=1)i[s]=Lg(t[s],e,n,r,o);return e.pop(),n.pop(),i}if(t&&t.toJSON&&(t=t.toJSON()),cd(t)==="object"&&t!==null){e.push(t),i={},n.push(i);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],i[l]=Lg(t[l],e,n,r,l);e.pop(),n.pop()}else i=t;return i}var $g=new Wr;$g.tokenize=function(t){return t.slice()};$g.join=$g.removeEmpty=function(t){return t};const V7=Pt.create({name:"suggestEditMark",addAttributes(){return{id:{default:null},suggestion:{default:null}}},parseHTML(){return[{tag:"span[data-suggest-edit-id]",getAttrs:t=>t instanceof HTMLElement?{id:t.getAttribute("data-suggest-edit-id"),suggestion:t.getAttribute("data-suggestion")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),W7=_t.create({name:"suggestEdit",addOptions(){return{HTMLAttributes:{},onSuggestEdit:()=>{}}},addExtensions(){return[V7]},addCommands(){return{setSuggestEdit:t=>({chain:e,state:n})=>{var a,l;const{from:r,to:o}=n.selection,s=n.doc.textBetween(r,o);if(r===o)return!1;const i=`suggest-${Date.now()}`;return(l=(a=this.options).onSuggestEdit)==null||l.call(a,s,t),e().setMark("suggestEditMark",{id:i,suggestion:t}).run()},removeSuggestEdit:()=>({chain:t})=>t().unsetMark("suggestEditMark").run()}},addProseMirrorPlugins(){return[new qt({key:new $n("suggestEditPlugin"),props:{decorations(t){const e=[],n=t.doc;if(!n||n.nodeSize===0)return ot.empty;try{return n.descendants((r,o)=>{if(!r||!r.marks)return;const s=r.marks.find(u=>u.type.name==="suggestEditMark");if(!s||!r.isText)return;const i=r.text||"",a=s.attrs.suggestion||"";if(!i&&!a)return;const l=z7(i,a);let c=o;l.forEach(u=>{if(u.added)e.push(rn.widget(c,()=>{const d=document.createElement("span");return d.className="suggest-edit-addition",d.textContent=u.value,d},{side:1}));else if(u.removed){const d=c+u.value.length;d<=n.nodeSize-2&&e.push(rn.inline(c,d,{class:"suggest-edit-deletion"})),c+=u.value.length}else c+=u.value.length})}),ot.create(n,e)}catch(r){return console.warn("SuggestEdit decorations error:",r),ot.empty}}}})]}}),K7=Pt.create({name:"commentMode",addOptions(){return{HTMLAttributes:{},onCommentActivated:()=>{},onCommentClicked:()=>{}}},addStorage(){return{activeCommentId:null}},addAttributes(){return{commentId:{default:null,parseHTML:t=>t.getAttribute("data-comment-id")||"",renderHTML:t=>({"data-comment-id":t.commentId})},commentType:{default:"general",parseHTML:t=>t.getAttribute("data-comment-type")||"general",renderHTML:t=>({"data-comment-type":t.commentType})},severity:{default:"medium",parseHTML:t=>t.getAttribute("data-severity")||"medium",renderHTML:t=>({"data-severity":t.severity})}}},parseHTML(){return[{tag:"span[data-comment-id]",getAttrs:t=>{const e=t;return{commentId:e.getAttribute("data-comment-id"),commentType:e.getAttribute("data-comment-type")||"general",severity:e.getAttribute("data-severity")||"medium"}}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t,{class:"comment-mode-highlight"}),0]},addCommands(){return{setCommentHighlight:(t,e="general",n="medium")=>({commands:r})=>t?r.setMark(this.name,{commentId:t,commentType:e,severity:n}):!1,unsetCommentHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.commentId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}});Pt.create({name:"referencesMode",addOptions(){return{HTMLAttributes:{},onReferenceActivated:()=>{},onReferenceClicked:()=>{}}},addStorage(){return{activeReferenceId:null}},addAttributes(){return{referenceId:{default:null,parseHTML:t=>t.getAttribute("data-reference-id")||"",renderHTML:t=>({"data-reference-id":t.referenceId})},referenceType:{default:"citation",parseHTML:t=>t.getAttribute("data-reference-type")||"citation",renderHTML:t=>({"data-reference-type":t.referenceType})},sourceText:{default:"",parseHTML:t=>t.getAttribute("data-source-text")||"",renderHTML:t=>({"data-source-text":t.sourceText})},targetSentence:{default:"",parseHTML:t=>t.getAttribute("data-target-sentence")||"",renderHTML:t=>({"data-target-sentence":t.targetSentence})}}},parseHTML(){return[{tag:"span[data-reference-id]",getAttrs:t=>{const e=t;return{referenceId:e.getAttribute("data-reference-id"),referenceType:e.getAttribute("data-reference-type")||"citation",sourceText:e.getAttribute("data-source-text")||"",targetSentence:e.getAttribute("data-target-sentence")||""}}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t,{class:"references-mode-highlight"}),0]},addCommands(){return{setReferenceHighlight:(t,e="citation",n="",r="")=>({commands:o})=>t?o.setMark(this.name,{referenceId:t,referenceType:e,sourceText:n,targetSentence:r}):!1,unsetReferenceHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.referenceId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}});const q7=Pt.create({name:"flowMode",addOptions(){return{HTMLAttributes:{},onConnectionActivated:()=>{},onConnectionClicked:()=>{}}},addStorage(){return{activeConnectionId:null}},addAttributes(){return{sentenceId:{default:null,parseHTML:t=>t.getAttribute("data-sentence-id")||"",renderHTML:t=>({"data-sentence-id":t.sentenceId})},connectionStrength:{default:0,parseHTML:t=>{const e=t.getAttribute("data-connection-strength");return e?parseFloat(e):0},renderHTML:t=>({"data-connection-strength":String(t.connectionStrength)})},connectedSentences:{default:"[]",parseHTML:t=>t.getAttribute("data-connected-sentences")||"[]",renderHTML:t=>({"data-connected-sentences":t.connectedSentences})}}},parseHTML(){return[{tag:"span[data-sentence-id]",getAttrs:t=>{const e=t;return{sentenceId:e.getAttribute("data-sentence-id"),connectionStrength:parseFloat(e.getAttribute("data-connection-strength")||"0"),connectedSentences:e.getAttribute("data-connected-sentences")||"[]"}}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t,{class:"flow-mode-highlight"}),0]},addCommands(){return{setSentenceHighlight:(t,e=0,n=[])=>({commands:r})=>t?r.setMark(this.name,{sentenceId:t,connectionStrength:e,connectedSentences:JSON.stringify(n)}):!1,unsetSentenceHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.sentenceId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}}),G7=Pt.create({name:"sentenceConnectionMode",addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{connectionId:{default:null,parseHTML:t=>t.getAttribute("data-connection-id")||"",renderHTML:t=>({"data-connection-id":t.connectionId})},connectionStrength:{default:0,parseHTML:t=>{const e=t.getAttribute("data-connection-strength");return e?parseFloat(e):0},renderHTML:t=>({"data-connection-strength":String(t.connectionStrength)})},reason:{default:"",parseHTML:t=>t.getAttribute("data-connection-reason")||"",renderHTML:t=>({"data-connection-reason":t.reason})}}},parseHTML(){return[{tag:"span[data-connection-id]",getAttrs:t=>{const e=t;return{connectionId:e.getAttribute("data-connection-id"),connectionStrength:parseFloat(e.getAttribute("data-connection-strength")||"0"),reason:e.getAttribute("data-connection-reason")||""}}}]},renderHTML({HTMLAttributes:t,mark:e}){const n=e.attrs.connectionStrength;let r="sentence-connection-weak";return n>=.7?r="sentence-connection-strong":n>=.4&&(r="sentence-connection-moderate"),["span",nt(this.options.HTMLAttributes,t,{class:`sentence-connection ${r}`}),0]},addCommands(){return{setSentenceConnectionHighlight:(t,e=0,n="")=>({commands:r})=>t?r.setMark(this.name,{connectionId:t,connectionStrength:e,reason:n}):!1,unsetSentenceConnectionHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.connectionId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)},clearAllSentenceConnectionHighlights:()=>({tr:t,dispatch:e})=>{const n=[];return t.doc.descendants((r,o)=>{const s=r.marks.find(i=>i.type.name===this.name);s&&n.push({mark:s,range:{from:o,to:o+r.nodeSize}})}),n.forEach(({mark:r,range:o})=>{t.removeMark(o.from,o.to,r)}),e==null?void 0:e(t)}}}}),Y7="modulepreload",J7=function(t){return"/Ripple/"+t},a1={},va=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=J7(l),l in a1)return;a1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Y7,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},X7=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>va(async()=>{const{default:r}=await Promise.resolve().then(()=>Ra);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class p0 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Q7 extends p0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Z7 extends p0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class eU extends p0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fg||(Fg={}));var tU=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class nU{constructor(e,{headers:n={},customFetch:r,region:o=Fg.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=X7(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return tU(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=i):typeof i=="string"?(a["Content-Type"]="text/plain",c=i):typeof FormData<"u"&&i instanceof FormData?c=i:(a["Content-Type"]="application/json",c=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:c}).catch(g=>{throw new Q7(g)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Z7(u);if(!u.ok)throw new eU(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield u.json():h==="application/octet-stream"?m=yield u.blob():h==="text/event-stream"?m=u:h==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(o){return{data:null,error:o}}})}}var tn={},m0={},dh={},Uc={},fh={},hh={},rU=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ya=rU();const oU=ya.fetch,UP=ya.fetch.bind(ya),VP=ya.Headers,sU=ya.Request,iU=ya.Response,Ra=Object.freeze(Object.defineProperty({__proto__:null,Headers:VP,Request:sU,Response:iU,default:UP,fetch:oU},Symbol.toStringTag,{value:"Module"})),aU=t2(Ra);var ph={};Object.defineProperty(ph,"__esModule",{value:!0});let lU=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ph.default=lU;var WP=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hh,"__esModule",{value:!0});const cU=WP(aU),uU=WP(ph);let dU=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=cU.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,a,l;let c=null,u=null,d=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const v=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),x=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await s.text();try{c=JSON.parse(v),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,m="OK")}catch{s.status===404&&v===""?(h=204,m="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,m="OK"),c&&this.shouldThrowOnError)throw new uU.default(c)}return{error:c,data:u,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(o=o.catch(s=>{var i,a,l;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};hh.default=dU;var fU=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fh,"__esModule",{value:!0});const hU=fU(hh);let pU=class extends hU.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fh.default=pU;var mU=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uc,"__esModule",{value:!0});const gU=mU(fh);let vU=class extends gU.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Uc.default=vU;var yU=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dh,"__esModule",{value:!0});const Xa=yU(Uc);let xU=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=n,this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new Xa.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const o="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const i=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Xa.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){const i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Xa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),this.headers.Prefer=o.join(","),new Xa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Xa.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};dh.default=xU;var mh={},gh={};Object.defineProperty(gh,"__esModule",{value:!0});gh.version=void 0;gh.version="0.0.0-automated";Object.defineProperty(mh,"__esModule",{value:!0});mh.DEFAULT_HEADERS=void 0;const wU=gh;mh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wU.version}`};var KP=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(m0,"__esModule",{value:!0});const bU=KP(dh),SU=KP(Uc),CU=mh;let kU=class qP{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},CU.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new bU.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qP(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){let i;const a=new URL(`${this.url}/rpc/${e}`);let l;r||o?(i=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(i="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new SU.default({method:i,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};m0.default=kU;var Aa=In&&In.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tn,"__esModule",{value:!0});tn.PostgrestError=tn.PostgrestBuilder=tn.PostgrestTransformBuilder=tn.PostgrestFilterBuilder=tn.PostgrestQueryBuilder=tn.PostgrestClient=void 0;const GP=Aa(m0);tn.PostgrestClient=GP.default;const YP=Aa(dh);tn.PostgrestQueryBuilder=YP.default;const JP=Aa(Uc);tn.PostgrestFilterBuilder=JP.default;const XP=Aa(fh);tn.PostgrestTransformBuilder=XP.default;const QP=Aa(hh);tn.PostgrestBuilder=QP.default;const ZP=Aa(ph);tn.PostgrestError=ZP.default;var EU=tn.default={PostgrestClient:GP.default,PostgrestQueryBuilder:YP.default,PostgrestFilterBuilder:JP.default,PostgrestTransformBuilder:XP.default,PostgrestBuilder:QP.default,PostgrestError:ZP.default};const{PostgrestClient:TU,PostgrestQueryBuilder:kX,PostgrestFilterBuilder:EX,PostgrestTransformBuilder:TX,PostgrestBuilder:NX,PostgrestError:MX}=EU,NU="2.11.2",MU={"X-Client-Info":`realtime-js/${NU}`},PU="1.0.0",e_=1e4,_U=1e3;var na;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(na||(na={}));var dn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(dn||(dn={}));var Vn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vn||(Vn={}));var zg;(function(t){t.websocket="websocket"})(zg||(zg={}));var gs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(gs||(gs={}));class RU{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),s=n.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+o));i=i+o;const l=r.decode(e.slice(i,i+s));i=i+s;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class t_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ve||(Ve={}));const l1=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=AU(i,t,e,o),s),{})},AU=(t,e,n,r)=>{const o=e.find(a=>a.name===t),s=o==null?void 0:o.type,i=n[t];return s&&!r.includes(s)?n_(s,i):Bg(i)},n_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return DU(e,n)}switch(t){case Ve.bool:return OU(e);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return jU(e);case Ve.json:case Ve.jsonb:return IU(e);case Ve.timestamp:return LU(e);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return Bg(e);default:return Bg(e)}},Bg=t=>t,OU=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},jU=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},IU=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},DU=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>n_(e,a))}return t},LU=t=>typeof t=="string"?t.replace(" ","T"):t,r_=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class $p{constructor(e,n,r={},o=e_){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var c1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(c1||(c1={}));class _l{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_l.syncState(this.state,o,s,i),this.pendingDiffs.forEach(l=>{this.state=_l.syncDiff(this.state,l,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=_l.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const s=this.cloneDeep(e),i=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{i[c]||(l[c]=u)}),this.map(i,(c,u)=>{const d=s[c];if(d){const h=u.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=u.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(a[c]=g),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,o)}static syncDiff(e,n,r,o){const{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(m=>m.presence_ref),h=u.filter(m=>d.indexOf(m.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(i,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,o(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var u1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(u1||(u1={}));var d1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(d1||(d1={}));var Nr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Nr||(Nr={}));class g0{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new $p(this,Vn.join,this.params,this.timeout),this.rejoinTimer=new t_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vn.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new _l(this),this.broadcastEndpointURL=r_(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Nr.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Nr.CLOSED));const l={},c={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Nr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,g=[];for(let v=0;v<m;v++){const x=h[v],{filter:{event:y,schema:w,table:b,filter:S}}=x,C=u&&u[v];if(C&&C.event===y&&C.schema===w&&C.table===b&&C.filter===S)g.push(Object.assign(Object.assign({},x),{id:C.id}));else{this.unsubscribe(),e==null||e(Nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Nr.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=c.body)===null||o===void 0?void 0:o.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new $p(this,Vn.leave,{},e);o.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new $p(this,e,n,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;const i=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Vn;if(r&&[a,l,c,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(m=>m.callback(h,r)):(s=this.bindings[i])===null||s===void 0||s.filter(m=>{var g,v,x,y,w,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const S=m.id,C=(g=m.filter)===null||g===void 0?void 0:g.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(w=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&g0.isEqual(o.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vn.close,{},e)}_onError(e){this._on(Vn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=l1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=l1(e.columns,e.old_record)),n}}const $U=()=>{},FU=typeof WebSocket<"u",zU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class BU{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=MU,this.params={},this.timeout=e_,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=$U,this.conn=null,this.sendBuffer=[],this.serializer=new RU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>va(async()=>{const{default:l}=await Promise.resolve().then(()=>Ra);return{default:l}},void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${zg.websocket}`,this.httpEndpoint=r_(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,i)=>i(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new t_(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(FU){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new HU(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),va(async()=>{const{default:e}=await import("./browser-Bx37KiWI.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:PU}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case na.connecting:return gs.Connecting;case na.open:return gs.Open;case na.closing:return gs.Closing;default:return gs.Closed}}isConnected(){return this.connectionState()===gs.Open}channel(e,n={config:{}}){const r=new g0(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(o=>{n&&o.updateJoinPayload({access_token:n}),o.joinedOnce&&o._isJoined()&&o._push(Vn.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(_U,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:o,payload:s,ref:i}=n;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([zU],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class HU{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=na.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class v0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class UU extends v0{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hg extends v0{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var VU=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const o_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>va(async()=>{const{default:r}=await Promise.resolve().then(()=>Ra);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},WU=()=>VU(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield va(()=>Promise.resolve().then(()=>Ra),void 0)).Response:Response}),Ug=t=>{if(Array.isArray(t))return t.map(n=>Ug(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=Ug(r)}),e};var ri=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Fp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),KU=(t,e,n)=>ri(void 0,void 0,void 0,function*(){const r=yield WU();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{e(new UU(Fp(o),t.status||500))}).catch(o=>{e(new Hg(Fp(o),o))}):e(new Hg(Fp(t),t))}),qU=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))};function Vc(t,e,n,r,o,s){return ri(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(n,qU(e,r,o,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>KU(l,a,r))})})}function af(t,e,n,r){return ri(this,void 0,void 0,function*(){return Vc(t,"GET",e,n,r)})}function ho(t,e,n,r,o){return ri(this,void 0,void 0,function*(){return Vc(t,"POST",e,r,o,n)})}function GU(t,e,n,r,o){return ri(this,void 0,void 0,function*(){return Vc(t,"PUT",e,r,o,n)})}function YU(t,e,n,r){return ri(this,void 0,void 0,function*(){return Vc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function s_(t,e,n,r,o){return ri(this,void 0,void 0,function*(){return Vc(t,"DELETE",e,r,o,n)})}var Zt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const JU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},f1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class XU{constructor(e,n={},r,o){this.url=e,this.headers=n,this.bucketId=r,this.fetch=o_(o)}uploadOrUpdate(e,n,r,o){return Zt(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},f1),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Zt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:f1.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(pt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Zt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const s=yield ho(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new v0("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Zt(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Zt(this,void 0,void 0,function*(){try{return{data:{path:(yield ho(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Zt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield ho(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Zt(this,void 0,void 0,function*(){try{const o=yield ho(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}download(e,n){return Zt(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield af(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(pt(a))return{data:null,error:a};throw a}})}info(e){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield af(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ug(r),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}exists(e){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield YU(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(pt(r)&&r instanceof Hg){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&o.push(l);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Zt(this,void 0,void 0,function*(){try{return{data:yield s_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Zt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},JU),n),{prefix:e||""});return{data:yield ho(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const QU="2.7.1",ZU={"X-Client-Info":`storage-js/${QU}`};var gi=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class eV{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},ZU),n),this.fetch=o_(r)}listBuckets(){return gi(this,void 0,void 0,function*(){try{return{data:yield af(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pt(e))return{data:null,error:e};throw e}})}getBucket(e){return gi(this,void 0,void 0,function*(){try{return{data:yield af(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return gi(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return gi(this,void 0,void 0,function*(){try{return{data:yield GU(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return gi(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return gi(this,void 0,void 0,function*(){try{return{data:yield s_(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}}class tV extends eV{constructor(e,n={},r){super(e,n,r)}from(e){return new XU(this.url,this.headers,e,this.fetch)}}const nV="2.49.4";let fl="";typeof Deno<"u"?fl="deno":typeof document<"u"?fl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fl="react-native":fl="node";const rV={"X-Client-Info":`supabase-js-${fl}/${nV}`},oV={headers:rV},sV={schema:"public"},iV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aV={};var lV=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const cV=t=>{let e;return t?e=t:typeof fetch>"u"?e=UP:e=fetch,(...n)=>e(...n)},uV=()=>typeof Headers>"u"?VP:Headers,dV=(t,e,n)=>{const r=cV(n),o=uV();return(s,i)=>lV(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new o(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},i),{headers:c}))})};var fV=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function hV(t){return t.replace(/\/$/,"")}function pV(t,e){const{db:n,auth:r,realtime:o,global:s}=t,{db:i,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),o),global:Object.assign(Object.assign({},c),s),accessToken:()=>fV(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const i_="2.69.1",ki=30*1e3,Vg=3,zp=Vg*ki,mV="http://localhost:9999",gV="supabase.auth.token",vV={"X-Client-Info":`gotrue-js/${i_}`},Wg="X-Supabase-Api-Version",a_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xV=6e5;class y0 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class wV extends y0{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function bV(t){return Ee(t)&&t.name==="AuthApiError"}class l_ extends y0{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zo extends y0{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class so extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function SV(t){return Ee(t)&&t.name==="AuthSessionMissingError"}class Bp extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Du extends Zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lu extends Zo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CV(t){return Ee(t)&&t.name==="AuthImplicitGrantRedirectError"}class h1 extends Zo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kg extends Zo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Hp(t){return Ee(t)&&t.name==="AuthRetryableFetchError"}class p1 extends Zo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Rl extends Zo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const m1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),g1=` 	
\r=`.split(""),kV=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<g1.length;e+=1)t[g1[e].charCodeAt(0)]=-2;for(let e=0;e<m1.length;e+=1)t[m1[e].charCodeAt(0)]=e;return t})();function c_(t,e,n){const r=kV[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function v1(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{NV(i,r,n)};for(let i=0;i<t.length;i+=1)c_(t.charCodeAt(i),o,s);return e.join("")}function EV(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function TV(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}EV(r,e)}}function NV(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function MV(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)c_(t.charCodeAt(o),n,r);return new Uint8Array(e)}function PV(t){const e=[];return TV(t,n=>e.push(n)),new Uint8Array(e)}function _V(t){return Math.round(Date.now()/1e3)+t}function RV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ir=()=>typeof window<"u"&&typeof document<"u",ls={tested:!1,writable:!1},Al=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ls.tested)return ls.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ls.tested=!0,ls.writable=!0}catch{ls.tested=!0,ls.writable=!1}return ls.writable};function AV(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const u_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>va(async()=>{const{default:r}=await Promise.resolve().then(()=>Ra);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},OV=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",d_=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},$u=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fu=async(t,e)=>{await t.removeItem(e)};class vh{constructor(){this.promise=new vh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}vh.promiseConstructor=Promise;function Up(t){const e=t.split(".");if(e.length!==3)throw new Rl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yV.test(e[r]))throw new Rl("JWT not in base64url format");return{header:JSON.parse(v1(e[0])),payload:JSON.parse(v1(e[1])),signature:MV(e[2]),raw:{header:e[0],payload:e[1]}}}async function jV(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function IV(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function DV(t){return("0"+t.toString(16)).substr(-2)}function LV(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,DV).join("")}async function $V(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function FV(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await $V(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vi(t,e,n=!1){const r=LV();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await d_(t,`${e}-code-verifier`,o);const s=await FV(r);return[s,r===s?"plain":"s256"]}const zV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BV(t){const e=t.headers.get(Wg);if(!e||!e.match(zV))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function HV(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function UV(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var VV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ds=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WV=[502,503,504];async function y1(t){var e;if(!OV(t))throw new Kg(ds(t),0);if(WV.includes(t.status))throw new Kg(ds(t),t.status);let n;try{n=await t.json()}catch(s){throw new l_(ds(s),s)}let r;const o=BV(t);if(o&&o.getTime()>=a_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new p1(ds(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new so}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new p1(ds(n),t.status,n.weak_password.reasons);throw new wV(ds(n),t.status||500,r)}const KV=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function Oe(t,e,n,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[Wg]||(s[Wg]=a_["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await qV(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function qV(t,e,n,r,o,s){const i=KV(e,r,o,s);let a;try{a=await t(n,Object.assign({},i))}catch(l){throw console.error(l),new Kg(ds(l),0)}if(a.ok||await y1(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await y1(l)}}function io(t){var e;let n=null;XV(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=_V(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function x1(t){const e=io(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function vo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function GV(t){return{data:t,error:null}}function YV(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=VV(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function JV(t){return t}function XV(t){return t.access_token&&t.refresh_token&&t.expires_in}var QV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class ZV{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=u_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:vo})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=QV(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:YV,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ee(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:vo})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,s,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:JV});if(u.error)throw u.error;const d=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);c[`${x}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Ee(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:vo})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:vo})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:vo})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}}const eW={getItem:t=>Al()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Al()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Al()&&globalThis.localStorage.removeItem(t)}};function w1(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function tW(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yi={debug:!!(globalThis&&Al()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class f_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nW extends f_{}async function rW(t,e,n){yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),yi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new nW(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(yi.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}tW();const oW={url:mV,storageKey:gV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function b1(t,e,n){return await n()}class pc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pc.nextInstanceID,pc.nextInstanceID+=1,this.instanceID>0&&ir()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},oW),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new ZV({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=u_(o.fetch),this.lock=o.lock||b1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:ir()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=rW:this.lock=b1,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:Al()?this.storage=eW:(this.memoryStorage={},this.storage=w1(this.memoryStorage)):(this.memoryStorage={},this.storage=w1(this.memoryStorage)),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${i_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=AV(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ir()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),CV(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ee(n)?{error:n}:{error:new l_("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:io}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ee(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,o;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await vi(this.storage,this.storageKey)),s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:io})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:io})}else throw new Du("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:i,options:a}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:x1})}else if("phone"in e){const{phone:s,password:i,options:a}=e;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:x1})}else throw new Du("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Bp}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await $u(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:s,error:i}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:io});if(await Fu(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Bp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(Ee(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:s,nonce:i}=e,a=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:io}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Bp}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,s,i;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await vi(this.storage,this.storageKey));const{error:d}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=l==null?void 0:l.data)!==null&&o!==void 0?o:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Du("You must provide either an email or phone number.")}catch(a){if(Ee(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let o,s;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:io});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Ee(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await vi(this.storage,this.storageKey)),await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:GV})}catch(s){if(Ee(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new so;const{error:o}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Ee(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:a}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Du("You must provide either an email or phone number and a type")}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $u(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<zp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:vo}):await this._useSession(async n=>{var r,o,s;const{data:i,error:a}=n;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new so}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:vo})})}catch(n){if(Ee(n))return SV(n)&&(await this._removeSession(),await Fu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new so;const i=o.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vi(this.storage,this.storageKey));const{data:c,error:u}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:vo});if(u)throw u;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new so;const n=Date.now()/1e3;let r=n,o=!0,s=null;const{payload:i}=Up(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ee(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:a}=n;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new so;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ir())throw new Lu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new h1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new h1("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!i||!c)throw new Lu("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const m=h-u;m*1e3<=ki&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:d,expires_at:h,refresh_token:i,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(Ee(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $u(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(bV(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Fu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=RV(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:s},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await vi(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ee(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async s=>{var i,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(o)throw o;return ir()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ee(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)throw i;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await IV(async o=>(o>0&&await jV(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:io})),(o,s)=>{const i=200*Math.pow(2,o);return s&&Hp(s)&&Date.now()+i-r<ki})}catch(r){if(this._debug(n,"error",r),Ee(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ir()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await $u(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<zp;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${zp}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Hp(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new so;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new vh;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new so;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),Ee(s)){const i={session:null,error:s};return Hp(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await d_(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Fu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ir()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ki);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/ki);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ki}ms, refresh threshold is ${Vg} ticks`),o<=Vg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof f_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ir()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await vi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((o=l==null?void 0:l.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const{data:i,error:a}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Up(o.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(i=>i.kid===e);if(r||(r=this.jwks.keys.find(i=>i.kid===e),r&&this.jwks_cached_at+xV>Date.now()))return r;const{data:o,error:s}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!o.keys||o.keys.length===0)throw new Rl("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),r=o.keys.find(i=>i.kid===e),!r)throw new Rl("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:o,payload:s,signature:i,raw:{header:a,payload:l}}=Up(r);if(HV(s.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:o,signature:i},error:null}}const c=UV(o.alg),u=await this.fetchJwk(o.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,i,PV(`${a}.${l}`)))throw new Rl("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}}pc.nextInstanceID=0;const sW=pc;class iW extends sW{constructor(e){super(e)}}var aW=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class lW{constructor(e,n,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=hV(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:sV,realtime:aV,auth:Object.assign(Object.assign({},iV),{storageKey:l}),global:oV},u=pV(r??{},c);this.storageKey=(o=u.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=dV(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new TU(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new nU(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tV(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return aW(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iW({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new BU(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cW=(t,e,n)=>new lW(t,e,n),h_="https://xkatypsllhdujlbtcjno.supabase.co",p_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhrYXR5cHNsbGhkdWpsYnRjam5vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ2OTgzODgsImV4cCI6MjA2MDI3NDM4OH0.zvlh3wLQXiBPMnRvx7zFgrTR3dE6k_65a9DdnLh0NnI";console.log("Supabase URL exists:",!!h_);console.log("Supabase Anon Key exists:",!!p_);const dt=cW(h_,p_);var Be=(t=>(t.LOGIN="login",t.LOGOUT="logout",t.FILE_SAVE="file_save",t.FILE_OPEN="file_open",t.EDITOR_CHANGE="editor_change",t.TEXT_SELECTION="text_selection",t.TOOLBAR_ACTION="toolbar_action",t.COMMENT_ADD="comment_add",t.COMMENT_EDIT="comment_edit",t.COMMENT_DELETE="comment_delete",t.INSIGHT_VIEW="insight_view",t.AI_INTERACTION="ai_interaction",t.FEEDBACK_REQUEST="feedback_request",t.FEEDBACK_ANALYSIS_START="feedback_analysis_start",t.FEEDBACK_ANALYSIS_COMPLETE="feedback_analysis_complete",t.FLOW_SENTENCE_HOVER="flow_sentence_hover",t.FLOW_SENTENCE_CLICK="flow_sentence_click",t.ERROR="error",t))(Be||{});async function gt(t,e,n={},r){if(!t){console.warn("Attempted to log event without user ID");return}!r&&n.file_id&&(r=n.file_id),console.log(" Logging event:",{eventType:e,userId:t.substring(0,8)+"...",fileId:r?r.substring(0,8)+"...":"none",eventData:{...n,sentence_text:n.sentence_text?n.sentence_text.toString().substring(0,50)+"...":void 0,sentence_preview:n.sentence_preview?n.sentence_preview.toString().substring(0,30)+"...":void 0}});try{const{error:o}=await dt.from("user_events").insert([{user_id:t,file_id:r,event_type:e,event_data:n}]);o?(console.error(" Error logging event:",o),console.error("Event details:",{eventType:e,userId:t,fileId:r,eventData:n})):console.log(" Event logged successfully:",e)}catch(o){console.error(" Failed to log event:",o),console.error("Event details:",{eventType:e,userId:t,fileId:r,eventData:n})}}class uW{constructor(e,n=10,r=5e3){Ue(this,"userId");Ue(this,"batchedEvents",[]);Ue(this,"batchSize");Ue(this,"flushInterval");Ue(this,"timer",null);this.userId=e,this.batchSize=n,this.flushInterval=r,this.startTimer()}addEvent(e,n={},r){!r&&n.file_id&&(r=n.file_id),this.batchedEvents.push({event_type:e,event_data:n,file_id:r,timestamp:Date.now()}),this.batchedEvents.length>=this.batchSize&&this.flush()}async flush(){if(this.batchedEvents.length===0)return;const e=[...this.batchedEvents];this.batchedEvents=[];try{const{error:n}=await dt.from("user_events").insert(e.map(r=>({user_id:this.userId,file_id:r.file_id,event_type:r.event_type,event_data:{...r.event_data,timestamp:r.timestamp}})));n&&(console.error("Error logging batch of events:",n),this.batchedEvents=[...e,...this.batchedEvents])}catch(n){console.error("Failed to log batch of events:",n),this.batchedEvents=[...e,...this.batchedEvents]}}updateUserId(e){this.flush(),this.userId=e}startTimer(){this.timer=setInterval(()=>{this.flush()},this.flushInterval)}dispose(){this.timer&&(clearInterval(this.timer),this.timer=null),this.flush()}}function dW(t="test-user-id",e="test-file-id"){console.log(" Testing event logging..."),gt(t,"flow_sentence_hover",{sentence_text:"This is a test sentence for hover logging.",sentence_id:"test-sentence-123",connection_strength:.75,hover_time:new Date().toISOString(),sentence_length:42,sentence_preview:"This is a test sentence for hover..."},e),setTimeout(()=>{gt(t,"flow_sentence_click",{sentence_text:"This is a test sentence for click logging.",sentence_id:"test-sentence-456",connection_strength:.85,click_time:new Date().toISOString(),sentence_length:43,sentence_preview:"This is a test sentence for click...",action:"enter_flow_sentence_mode"},e)},1e3),console.log(" Test events sent! Check console and database.")}async function fW(t=10){console.log(" Checking recent events...");try{const{data:e,error:n}=await dt.from("user_events").select(`
        id,
        event_type,
        event_data,
        created_at,
        users!inner(prolific_id)
      `).order("created_at",{ascending:!1}).limit(t);if(n){console.error(" Error fetching events:",n);return}return console.table(e==null?void 0:e.map(r=>{var o,s,i;return{time:new Date(r.created_at).toLocaleTimeString(),type:r.event_type,user:((o=r.users)==null?void 0:o.prolific_id)||"unknown",data_preview:((s=r.event_data)==null?void 0:s.sentence_preview)||((i=r.event_data)==null?void 0:i.analysis_type)||JSON.stringify(r.event_data).substring(0,50)+"..."}})),console.log(" Full event data:",e),e}catch(e){console.error(" Failed to fetch events:",e)}}typeof window<"u"&&(window.testEventLogging=dW,window.checkRecentEvents=fW,window.logEvent=gt,window.EventType=Be);class hW{constructor(){Ue(this,"explanationCache",new Map);Ue(this,"loadingStates",new Set);Ue(this,"documentContext","");Ue(this,"paragraphTopics",{});Ue(this,"essayTopic","")}setDocumentContext(e){this.documentContext=e,this.explanationCache.clear()}setTopics(e,n){this.paragraphTopics=e,this.essayTopic=n,this.explanationCache.clear()}async handleHover(e,n){if(this.explanationCache.has(e))return this.explanationCache.get(e)||null;if(this.loadingStates.has(e))return null;this.loadingStates.add(e);try{const r=this.findParagraphTopicForSentence(e),s=(await t9({sentence:e,documentContext:this.documentContext,connectionStrength:n,paragraphTopic:r,essayTopic:this.essayTopic||void 0})).explanation;return this.explanationCache.set(e,s),s}catch(r){console.error("Failed to get hover explanation:",r);let o;return n>=.8?o="Strong thematic and vocabulary connections":n>=.4?o="Moderate lexical overlap with main themes":o="Limited connections to main document themes",this.explanationCache.set(e,o),o}finally{this.loadingStates.delete(e)}}findParagraphTopicForSentence(e){const r=this.documentContext.split(/\n\s*\n/).filter(o=>o.trim());for(let o=0;o<r.length;o++)if(r[o].includes(e)){const i=`paragraph-${o}`,a=this.paragraphTopics[i];if(a)return console.log(` Found paragraph topic for sentence: "${a}"`),a;break}console.log(" No paragraph topic found for this sentence")}isLoading(e){return this.loadingStates.has(e)}clearCache(){this.explanationCache.clear(),this.loadingStates.clear()}}class pW{constructor(e,n,r,o){Ue(this,"editor");Ue(this,"state");Ue(this,"onModeChange");Ue(this,"flowHoverManager");Ue(this,"sentenceConnectionHighlights",new Map);Ue(this,"lastAnalyzedSentence",null);Ue(this,"userId");Ue(this,"fileId");Ue(this,"selectedSentenceTracker",null);Ue(this,"paragraphTopics",{});Ue(this,"sentenceFlowPopoverState",{isVisible:!1,position:{x:0,y:0},sentenceData:null});Ue(this,"sentenceFlowActionPanelState",{isVisible:!1,sentenceData:null});Ue(this,"popoverTimeout",null);Ue(this,"popoverHideTimeout",null);this.editor=e,this.onModeChange=n,this.userId=r,this.fileId=o,this.state={currentMode:"comments",commentHighlights:new Map,referenceHighlights:new Map,flowHighlights:new Map},this.flowHoverManager=new hW,this.setupPopoverEventListeners()}switchMode(e){var r;this.state.currentMode=e;const n=this.editor.view.dom.closest(".editor-container");n&&n.setAttribute("data-highlighting-mode",e),(r=this.onModeChange)==null||r.call(this,e)}getCurrentMode(){return this.state.currentMode}updateUserContext(e,n){this.userId=e,this.fileId=n}exitFlowSentenceMode(){this.hideSentenceFlowPopover(),this.hideSentenceFlowActionPanel(),this.editor.view.dom.querySelectorAll(".flow-sentence-selected").forEach(n=>{n.classList.remove("flow-sentence-selected")}),this.clearSentenceConnectionHighlights(),this.switchMode("flow")}showSentenceFlowPopover(e,n){this.popoverTimeout&&(clearTimeout(this.popoverTimeout),this.popoverTimeout=null),this.sentenceFlowPopoverState={isVisible:!0,position:e,sentenceData:n},this.onModeChange&&this.onModeChange(this.state.currentMode)}hideSentenceFlowPopover(){this.popoverTimeout&&(clearTimeout(this.popoverTimeout),this.popoverTimeout=null),this.popoverHideTimeout&&(clearTimeout(this.popoverHideTimeout),this.popoverHideTimeout=null),this.sentenceFlowPopoverState={isVisible:!1,position:{x:0,y:0},sentenceData:null},this.onModeChange&&this.onModeChange(this.state.currentMode)}getSentenceFlowPopoverState(){return this.sentenceFlowPopoverState}showSentenceFlowActionPanel(e){this.sentenceFlowActionPanelState={isVisible:!0,sentenceData:e},this.onModeChange&&this.onModeChange(this.state.currentMode)}hideSentenceFlowActionPanel(){this.sentenceFlowActionPanelState={isVisible:!1,sentenceData:null},this.onModeChange&&this.onModeChange(this.state.currentMode)}getSentenceFlowActionPanelState(){return this.sentenceFlowActionPanelState}addCommentHighlights(e){this.clearCommentHighlights(),e.forEach(n=>{if(n.from!==void 0&&n.to!==void 0){const r=n.issueType||"general",o=this.determineSeverity(n);this.editor.commands.setTextSelection({from:n.from,to:n.to}),this.editor.commands.setCommentHighlight(n.id,r,o),this.state.commentHighlights.set(n.id,{commentId:n.id,commentType:r,severity:o,position:{from:n.from,to:n.to},content:n.content})}})}clearCommentHighlights(){this.state.commentHighlights.forEach((e,n)=>{this.editor.commands.unsetCommentHighlight(n)}),this.state.commentHighlights.clear()}addReferenceHighlights(e){this.clearReferenceHighlights(),e.forEach(n=>{this.editor.commands.setTextSelection(n.position),this.editor.commands.setReferenceHighlight(n.id,n.type,n.sourceText,n.targetSentence),this.state.referenceHighlights.set(n.id,{referenceId:n.id,referenceType:n.type,sourceText:n.sourceText,targetSentence:n.targetSentence,position:n.position,content:this.editor.state.doc.textBetween(n.position.from,n.position.to)})})}clearReferenceHighlights(){this.state.referenceHighlights.forEach((e,n)=>{this.editor.commands.unsetReferenceHighlight(n)}),this.state.referenceHighlights.clear()}addFlowHighlights(e){this.clearFlowHighlights(),e.forEach(n=>{this.editor.commands.setTextSelection(n.position),this.editor.commands.setSentenceHighlight(n.id,n.connectionStrength,n.connectedSentences),this.state.flowHighlights.set(n.id,{sentenceId:n.id,connectionStrength:n.connectionStrength,connectedSentences:n.connectedSentences,position:n.position,content:this.editor.state.doc.textBetween(n.position.from,n.position.to)})})}clearFlowHighlights(){this.state.flowHighlights.forEach((e,n)=>{this.editor.commands.unsetSentenceHighlight(n)}),this.state.flowHighlights.clear()}setDocumentContext(e){this.flowHoverManager.setDocumentContext(e)}updateTopicsForHover(e,n){this.flowHoverManager.setTopics(e,n)}async handleFlowHover(e,n){return await this.flowHoverManager.handleHover(e,n)}isFlowHoverLoading(e){return this.flowHoverManager.isLoading(e)}clearFlowHoverCache(){this.flowHoverManager.clearCache()}setupFlowHoverListeners(){this.cleanupFlowHoverListeners();const e=this.editor.view.dom;e.addEventListener("mouseenter",this.handleFlowMouseEnter.bind(this),!0),e.addEventListener("mouseleave",this.handleFlowMouseLeave.bind(this),!0),e.addEventListener("click",this.handleFlowClick.bind(this),!0),document.addEventListener("keydown",this.handleKeyDown.bind(this))}cleanupFlowHoverListeners(){const e=this.editor.view.dom;e.removeEventListener("mouseenter",this.handleFlowMouseEnter.bind(this),!0),e.removeEventListener("mouseleave",this.handleFlowMouseLeave.bind(this),!0),e.removeEventListener("click",this.handleFlowClick.bind(this),!0),document.removeEventListener("keydown",this.handleKeyDown.bind(this))}setupPopoverEventListeners(){document.addEventListener("popover-mouse-enter",this.handlePopoverMouseEnter.bind(this)),document.addEventListener("popover-mouse-leave",this.handlePopoverMouseLeave.bind(this))}handlePopoverMouseEnter(){console.log(" Popover mouse enter - canceling hide timeout"),this.popoverHideTimeout&&(clearTimeout(this.popoverHideTimeout),this.popoverHideTimeout=null)}handlePopoverMouseLeave(){this.popoverHideTimeout=setTimeout(()=>{this.hideSentenceFlowPopover()},500)}handleKeyDown(e){e.key==="Escape"&&this.state.currentMode==="flow-sentence"&&(console.log(" Escape pressed, exiting flow-sentence mode"),e.preventDefault(),this.exitFlowSentenceMode())}async handleFlowMouseEnter(e){const n=e.target;if(n.classList.contains("flow-sentence-selected")&&this.state.currentMode==="flow-sentence"){const r=n.getAttribute("data-sentence-id")||"",o=parseFloat(n.getAttribute("data-connection-strength")||"0"),s=n.getAttribute("data-connected-sentences")||"[]";let i=n.textContent||"";const a=this.state.flowHighlights.get(r);a?(i=a.content,console.log(" Using stored complete sentence for popover:",i.substring(0,50))):console.warn(" No stored highlight found for popover, using DOM text:",i.substring(0,50));let l=[];try{l=JSON.parse(s)}catch(h){console.warn("Failed to parse connected sentences:",h)}const c=e,u=n.getBoundingClientRect(),d={x:Math.min(c.clientX+10,window.innerWidth-320),y:Math.min(u.bottom+5,window.innerHeight-180)};this.popoverTimeout=setTimeout(()=>{this.showSentenceFlowPopover(d,{text:i,connectionStrength:o,connectedSentences:l})},500)}else if(n.classList.contains("flow-mode-highlight")&&this.state.currentMode==="flow"){const r=n.getAttribute("data-sentence-id")||"",o=parseFloat(n.getAttribute("data-connection-strength")||"0");let s=n.textContent||"";const i=this.state.flowHighlights.get(r);i?(s=i.content,console.log(" Using stored complete sentence for hover:",s.substring(0,50))):console.warn(" No stored highlight found, using DOM text:",s.substring(0,50)),this.userId?(console.log(" Flow hover detected - logging event...",{sentencePreview:s.substring(0,50),connectionStrength:o,userId:this.userId.substring(0,8)+"...",fileId:this.fileId?this.fileId.substring(0,8)+"...":"none"}),await gt(this.userId,Be.FLOW_SENTENCE_HOVER,{sentence_text:s,sentence_id:r,connection_strength:o,hover_time:new Date().toISOString(),sentence_length:s.length,sentence_preview:s.substring(0,100)},this.fileId)):console.warn(" Flow hover detected but no userId available for logging");try{const a=await this.flowHoverManager.handleHover(s,o);a?(n.setAttribute("data-explanation",a),console.log(" Explanation loaded:",a)):console.log(" No explanation returned")}catch(a){console.error("Failed to load hover explanation:",a)}}}handleFlowMouseLeave(e){e.target.classList.contains("flow-sentence-selected")&&this.state.currentMode==="flow-sentence"&&(console.log(" Flow-sentence-selected mouse leave detected, scheduling popover hide"),this.popoverTimeout&&(clearTimeout(this.popoverTimeout),this.popoverTimeout=null),this.popoverHideTimeout=setTimeout(()=>{this.hideSentenceFlowPopover()},300))}async handleFlowClick(e){var r,o,s;const n=e.target;if(console.log(" Click detected on element:",{tagName:n.tagName,classList:Array.from(n.classList),attributes:{"data-sentence-id":n.getAttribute("data-sentence-id"),"data-connection-strength":n.getAttribute("data-connection-strength")},currentMode:this.state.currentMode,textContent:(r=n.textContent)==null?void 0:r.substring(0,50)}),n.classList.contains("flow-mode-highlight")&&this.state.currentMode==="flow"){console.log(" Flow sentence clicked, entering flow-sentence mode"),e.preventDefault(),e.stopPropagation();let i=n.textContent||"",a=n.getAttribute("data-sentence-id")||"";const l=parseFloat(n.getAttribute("data-connection-strength")||"0"),c=this.state.flowHighlights.get(a);c?(i=c.content,console.log(" Using stored complete sentence for analysis:",i.substring(0,50))):console.warn(" No stored highlight found for analysis, using DOM text:",i.substring(0,50)),this.userId?(console.log(" Flow click detected - logging event...",{sentencePreview:i.substring(0,50),connectionStrength:l,userId:this.userId.substring(0,8)+"...",fileId:this.fileId?this.fileId.substring(0,8)+"...":"none"}),await gt(this.userId,Be.FLOW_SENTENCE_CLICK,{sentence_text:i,sentence_id:a,connection_strength:l,click_time:new Date().toISOString(),sentence_length:i.length,sentence_preview:i.substring(0,100),action:"enter_flow_sentence_mode"},this.fileId)):console.warn(" Flow click detected but no userId available for logging");const u=this.editor.getText();if(console.log(" Sentence ID found:",a),!a){for(const[h,m]of this.state.flowHighlights)if(m.content===i){a=h,console.log(" Found sentence ID from stored highlights:",a);break}a||(a=`selected-${Date.now()}`,console.log(" Generated new sentence ID:",a))}const d=this.editor.view.dom.querySelector(".flow-sentence-selected");d&&(d.classList.remove("flow-sentence-selected"),console.log(" Removed previous selection")),n.classList.add("flow-sentence-selected"),console.log(" Added flow-sentence-selected class to element"),console.log(" Element classes after adding:",Array.from(n.classList)),this.switchMode("flow-sentence"),this.setAnalyzing(!0),this.lastAnalyzedSentence=i,this.selectedSentenceTracker=this.initializeSentenceTracker(i,a);try{console.log(" Making sentence flow analysis API call..."),console.log(" API call parameters:",{sentence:i.substring(0,100),documentLength:u.length,prompt:"Analyze this sentence in the context of the document"});const h=this.findParagraphTopicForSentence(i,u),m=await Eb({sentence:i,document:u,prompt:"Analyze this sentence in the context of the document",paragraphTopic:h});if(console.log(" API call successful! Full result:",m),console.log(" Result.result type:",typeof m.result),console.log(" Result.result length:",(o=m.result)==null?void 0:o.length),console.log(" Result.result content:",m.result),m.result&&Array.isArray(m.result)&&m.result.length>0){console.log(" About to apply connection highlights..."),console.log(" Connection data:",m.result);const g=m.result.map(v=>({...v,reason:`Connection strength: ${v.connectionStrength.toFixed(2)}`}));this.addSentenceConnectionHighlights(g),this.showSentenceFlowActionPanel({text:i,connectionStrength:m.result.length>0?m.result[0].connectionStrength:0,connectedSentences:m.result.map(v=>v.text),paragraphCohesion:m.paragraphCohesion,documentCohesion:m.documentCohesion})}else console.log(" No connections found or invalid result format"),console.log(" Result structure:",{hasResult:!!m.result,isArray:Array.isArray(m.result),length:(s=m.result)==null?void 0:s.length,type:typeof m.result}),this.showSentenceFlowActionPanel({text:i,connectionStrength:0,connectedSentences:[],paragraphCohesion:m.paragraphCohesion,documentCohesion:m.documentCohesion})}catch(h){console.error(" API call failed:",h),h instanceof Error&&console.error(" Error details:",h.message,h.stack)}finally{this.setAnalyzing(!1)}}else this.state.currentMode==="flow-sentence"?console.log(" Already in flow-sentence mode, ignoring click (panel stays persistent)"):console.log(" Click conditions not met:",{hasFlowClass:n.classList.contains("flow-mode-highlight"),isFlowMode:this.state.currentMode==="flow",currentMode:this.state.currentMode})}addSentenceConnectionHighlights(e){var n;console.log(" Adding sentence connection highlights:",e.length),console.log(" Current mode:",this.state.currentMode),console.log(" Editor container mode:",(n=this.editor.view.dom.closest(".editor-container"))==null?void 0:n.getAttribute("data-highlighting-mode")),console.log(" Available commands:",Object.keys(this.editor.commands)),console.log(" setSentenceConnectionHighlight available:",typeof this.editor.commands.setSentenceConnectionHighlight),this.clearSentenceConnectionHighlights(),e.forEach((r,o)=>{const s=`connection-${Date.now()}-${o}`;console.log(` Processing connection ${o+1}:`,{text:r.text.substring(0,50)+"...",position:r.position,connectionStrength:r.connectionStrength,connectionId:s});try{console.log(` Setting text selection for connection ${o+1}...`),this.editor.commands.setTextSelection(r.position),console.log(` Applying setSentenceConnectionHighlight for connection ${o+1}...`);const i=this.editor.commands.setSentenceConnectionHighlight(s,r.connectionStrength,r.reason);console.log(` Mark application ${i?"succeeded":"FAILED"} for connection ${o+1}`),i||console.error(` Failed to apply mark for connection ${o+1}`,{connectionId:s,connectionStrength:r.connectionStrength,reason:r.reason,position:r.position})}catch(i){console.error(` Exception while applying mark for connection ${o+1}:`,i),i instanceof Error&&console.error(" Error details:",i.message,i.stack)}this.sentenceConnectionHighlights.set(s,{connectionId:s,position:r.position,connectionStrength:r.connectionStrength,reason:r.reason,text:r.text}),console.log(` Added connection highlight: ${r.text.substring(0,30)}... (strength: ${r.connectionStrength})`)}),setTimeout(()=>{const r=this.editor.view.dom.querySelectorAll(".sentence-connection");console.log(" DOM Check: Found sentence-connection elements:",r.length),r.forEach((s,i)=>{var a;console.log(` Element ${i+1}:`,{classList:Array.from(s.classList),attributes:{"data-connection-id":s.getAttribute("data-connection-id"),"data-connection-strength":s.getAttribute("data-connection-strength"),"data-connection-reason":s.getAttribute("data-connection-reason")},computedStyle:{backgroundColor:window.getComputedStyle(s).backgroundColor,borderBottom:window.getComputedStyle(s).borderBottom},textContent:((a=s.textContent)==null?void 0:a.substring(0,30))+"..."})});const o=this.editor.view.dom.closest(".editor-container");console.log(" Editor container mode attribute:",o==null?void 0:o.getAttribute("data-highlighting-mode"))},100)}clearSentenceConnectionHighlights(){console.log(" Clearing sentence connection highlights"),this.editor.commands.clearAllSentenceConnectionHighlights(),this.sentenceConnectionHighlights.clear()}updateAnalyzedSentence(e){var n;console.log(" Updating analyzed sentence:",{oldSentence:((n=this.lastAnalyzedSentence)==null?void 0:n.substring(0,50))+"...",newSentence:e.substring(0,50)+"..."}),this.lastAnalyzedSentence=e}async redoSentenceFlowAnalysis(){if(!this.lastAnalyzedSentence){console.warn(" No previous sentence to reanalyze");return}console.log(" Redoing sentence flow analysis for:",this.lastAnalyzedSentence.substring(0,50)+"...");const e=this.editor.getText(),n=this.getCurrentTrackedSentenceText(),r=n||this.lastAnalyzedSentence;console.log(" Original sentence:",this.lastAnalyzedSentence.substring(0,50)+"..."),console.log(" Current sentence:",r.substring(0,50)+"..."),n&&n!==this.lastAnalyzedSentence&&console.log(" Sentence has been modified since original analysis"),this.clearSentenceConnectionHighlights(),this.setAnalyzing(!0);try{console.log(" Making redo sentence flow analysis API call..."),console.log(" Updated document length:",e.length);const o=this.findParagraphTopicForSentence(r,e),s=await Eb({sentence:r,document:e,prompt:"Analyze this sentence in the context of the updated document",paragraphTopic:o});if(s.result&&Array.isArray(s.result)&&s.result.length>0){console.log(" Applying updated connection highlights...");const i=s.result.map(a=>({...a,reason:`Connection strength: ${a.connectionStrength.toFixed(2)}`}));this.addSentenceConnectionHighlights(i),this.showSentenceFlowActionPanel({text:r,connectionStrength:s.result.length>0?s.result[0].connectionStrength:0,connectedSentences:s.result.map(a=>a.text),paragraphCohesion:s.paragraphCohesion,documentCohesion:s.documentCohesion})}else console.log(" No connections found in updated analysis"),this.showSentenceFlowActionPanel({text:r,connectionStrength:0,connectedSentences:[],paragraphCohesion:s.paragraphCohesion,documentCohesion:s.documentCohesion})}catch(o){console.error(" Redo API call failed:",o),o instanceof Error&&console.error(" Error details:",o.message,o.stack)}finally{this.setAnalyzing(!1)}}determineSeverity(e){return e.content.toLowerCase().includes("critical")||e.content.toLowerCase().includes("major")?"high":e.content.toLowerCase().includes("minor")||e.content.toLowerCase().includes("suggestion")?"low":"medium"}onTextChange(){this.updatePositionsAfterEdit()}updatePositionsAfterEdit(){console.log("Text changed, may need to update highlight positions")}getHighlightData(e){switch(e){case"comments":return this.state.commentHighlights;case"flow":case"flow-sentence":return this.state.flowHighlights;default:return new Map}}clearAllHighlights(){this.clearCommentHighlights(),this.clearReferenceHighlights(),this.clearFlowHighlights()}cycleMode(){const e=["comments","flow","flow-sentence"],r=(e.indexOf(this.state.currentMode)+1)%e.length;this.switchMode(e[r])}exportState(){return JSON.parse(JSON.stringify({currentMode:this.state.currentMode,commentHighlights:Array.from(this.state.commentHighlights.entries()),referenceHighlights:Array.from(this.state.referenceHighlights.entries()),flowHighlights:Array.from(this.state.flowHighlights.entries())}))}importState(e){this.state.currentMode=e.currentMode||"none",this.state.commentHighlights=new Map(e.commentHighlights||[]),this.state.referenceHighlights=new Map(e.referenceHighlights||[]),this.state.flowHighlights=new Map(e.flowHighlights||[]),this.reapplyAllHighlights()}reapplyAllHighlights(){this.state.commentHighlights.forEach(e=>{this.editor.commands.setTextSelection(e.position),this.editor.commands.setCommentHighlight(e.commentId,e.commentType,e.severity)}),this.state.referenceHighlights.forEach(e=>{this.editor.commands.setTextSelection(e.position),this.editor.commands.setReferenceHighlight(e.referenceId,e.referenceType,e.sourceText,e.targetSentence)}),this.state.flowHighlights.forEach(e=>{this.editor.commands.setTextSelection(e.position),this.editor.commands.setSentenceHighlight(e.sentenceId,e.connectionStrength,e.connectedSentences)}),this.switchMode(this.state.currentMode)}setAnalyzing(e){const n=this.editor.view.dom.closest(".editor-container");n&&n.setAttribute("data-analyzing",e.toString())}initializeSentenceTracker(e,n){let r=null;const o=this.state.flowHighlights.get(n);if(o)r=o.position;else{const i=this.editor.getText().indexOf(e);i!==-1&&(r={from:i,to:i+e.length})}return console.log(" Initialized sentence tracker:",{originalText:e.substring(0,50)+"...",sentenceId:n,position:r}),{originalText:e,selectedSentenceId:n,position:r}}getCurrentTrackedSentenceText(){if(!this.selectedSentenceTracker)return console.warn(" No sentence tracker initialized"),null;if(this.selectedSentenceTracker.selectedSentenceId){const i=this.state.flowHighlights.get(this.selectedSentenceTracker.selectedSentenceId);if(i){const a=this.editor.state.doc.textBetween(i.position.from,i.position.to);if(a.trim())return console.log(" Found current sentence via flow highlight:",a.substring(0,50)+"..."),a}}if(this.selectedSentenceTracker.position)try{const i=this.editor.state.doc.textBetween(this.selectedSentenceTracker.position.from,this.selectedSentenceTracker.position.to);if(i.trim())return console.log(" Found current sentence via stored position:",i.substring(0,50)+"..."),i}catch{console.warn(" Position out of bounds, trying fallback methods")}const e=this.editor.getText(),n=this.selectedSentenceTracker.originalText.toLowerCase().split(/\s+/).filter(i=>i.length>2),r=e.split(/[.!?]+/).filter(i=>i.trim().length>10);let o=null,s=0;for(const i of r){const a=i.toLowerCase().split(/\s+/),l=n.filter(u=>a.some(d=>d.includes(u)||u.includes(d))).length,c=n.length>0?l/n.length:0;c>s&&c>.6&&(s=c,o=i.trim())}return o?(console.log(` Found current sentence via fuzzy matching (${(s*100).toFixed(1)}% similarity):`,o.substring(0,50)+"..."),o):(console.warn(" Could not find updated sentence, using original text"),this.selectedSentenceTracker.originalText)}setParagraphTopics(e){this.paragraphTopics={...e},console.log(" Updated paragraph topics in HighlightingManager:",this.paragraphTopics)}findParagraphTopicForSentence(e,n){const r=n.split(/\n\s*\n/).filter(o=>o.trim());for(let o=0;o<r.length;o++)if(r[o].includes(e.trim())){const i=`paragraph-${o}`,a=this.paragraphTopics[i];if(a)return console.log(` Found paragraph topic for sentence: "${a}"`),a;break}console.log(" No paragraph topic found for this sentence")}}function mW({sentenceText:t,connectedSentences:e,paragraphCohesion:n,documentCohesion:r,onClose:o,onUpdateSentence:s,editor:i,isAnalyzing:a=!1}){const[l,c]=p.useState({x:70,y:window.innerHeight*.15}),[u,d]=p.useState(!1),[h,m]=p.useState({x:0,y:0}),g=p.useRef(null),[v,x]=p.useState(!0),[y,w]=p.useState(!0),[b,S]=p.useState(!1),[C,E]=p.useState(!1),[k,T]=p.useState(""),j=B=>{if(g.current){const W=g.current.getBoundingClientRect();m({x:B.clientX-W.left,y:B.clientY-W.top}),d(!0)}};p.useEffect(()=>{const B=oe=>{if(u){const H=oe.clientX-h.x,te=oe.clientY-h.y,R=window.innerWidth-288,N=window.innerHeight-300;c({x:Math.max(0,Math.min(H,R)),y:Math.max(0,Math.min(te,N))})}},W=()=>{d(!1)};return u&&(document.addEventListener("mousemove",B),document.addEventListener("mouseup",W)),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",W)}},[u,h]),p.useEffect(()=>{if(!i||!C)return;const B=()=>{const{selection:oe}=i.state,{from:H,to:te}=oe;if(H!==te){const R=i.state.doc.textBetween(H,te);T(R)}else T("")};i.on("selectionUpdate",B),i.setEditable(!1);const W=i.view.dom.closest(".ProseMirror")||i.view.dom;return W&&W.classList.add("text-selection-mode"),()=>{i.off("selectionUpdate",B),i.setEditable(!0),W&&W.classList.remove("text-selection-mode")}},[i,C]);const I=()=>{E(!0),T(""),ge.info("Selection mode active",{description:"Select text from the editor, then click Done",duration:3e3})},V=()=>{E(!1),T(""),ge.info("Selection mode cancelled",{duration:2e3})},U=()=>{if(!k.trim()){ge.error("No text selected",{description:"Please select text from the editor before clicking Done",duration:3e3}),E(!1),T("");return}if(k.trim()===t.trim()){ge.info("No changes needed",{description:"Selected text is the same as current sentence",duration:2e3}),E(!1),T("");return}E(!1),T(""),s&&(s(k),ge.success("Updating flow analysis",{description:"Re-analyzing with selected text",duration:2e3}))};return f.jsx("div",{ref:g,style:{position:"fixed",left:`${l.x}px`,top:`${l.y}px`,zIndex:1e3,pointerEvents:"auto",cursor:u?"grabbing":"auto"},children:f.jsx(fr,{className:"w-72 bg-white dark:bg-background border border-border/40 backdrop-blur-sm max-h-[80vh] flex flex-col",children:f.jsxs(hr,{className:"p-4 flex flex-col h-full overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200 cursor-grab active:cursor-grabbing flex-shrink-0",onMouseDown:j,children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(P4,{className:"h-4 w-4 text-gray-600"}),f.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Flow Analysis"})]}),f.jsx(ve,{variant:"ghost",size:"sm",onClick:o,className:"h-6 w-6 p-0 text-gray-600 hover:text-gray-800",onMouseDown:B=>B.stopPropagation(),children:f.jsx(Mc,{className:"h-4 w-4"})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[f.jsxs("div",{className:"mb-4 pb-3 border-b border-gray-100",children:[f.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Selected Sentence:"}),f.jsxs("div",{className:"text-xs text-gray-700 max-h-20 overflow-y-auto bg-white/50 p-2 rounded border relative",onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:[t.length>150?`${t.substring(0,150)}...`:t,b&&!C&&i&&f.jsx(ve,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border shadow-md hover:shadow-lg transition-all duration-200",onClick:B=>{B.stopPropagation(),I()},title:"Select new text from editor",children:f.jsx(Nl,{className:"h-3 w-3"})})]}),C&&f.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Text Selection Mode"})}),f.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mb-3",children:"Select text from the editor above, then click Done to update the sentence and re-run flow analysis."}),k&&f.jsxs("div",{className:"mb-3 p-2 bg-white dark:bg-gray-800 rounded border",children:[f.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Selected text:"}),f.jsx("div",{className:"text-sm",children:k.length>100?`${k.substring(0,100)}...`:k})]}),f.jsxs("div",{className:"flex justify-end space-x-2",children:[f.jsx(ve,{variant:"outline",size:"sm",onClick:B=>{B.stopPropagation(),V()},className:"h-8 px-3",children:"Cancel"}),f.jsx(ve,{variant:"default",size:"sm",onClick:B=>{B.stopPropagation(),U()},className:"h-8 px-4 bg-blue-600 hover:bg-blue-700 text-white",disabled:!k.trim(),children:"Done"})]})]}),f.jsx("div",{className:"flex items-center gap-2 mt-3",children:f.jsxs("div",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded font-medium",children:[e.length," Connections"]})})]}),a&&f.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-50 flex items-center justify-center",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-lg flex items-center gap-3",children:[f.jsx(zo,{className:"h-5 w-5 animate-spin text-blue-600"}),f.jsx("span",{className:"text-sm font-medium",children:"Updating flow analysis..."})]})}),n?f.jsxs("div",{className:`rounded-lg border-l-2 border-blue-400 bg-blue-50/60 p-3 mb-4 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(!v),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(xb,{className:"h-4 w-4 text-blue-500"}),f.jsx("span",{className:"font-semibold text-blue-700 text-xs uppercase tracking-wide",children:"Paragraph Cohesion"})]}),f.jsx(zi,{className:`h-4 w-4 text-blue-500 transition-transform duration-300 ease-in-out ${v?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${v?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-700 mt-2 [&_b]:font-semibold",dangerouslySetInnerHTML:{__html:n.analysis}})})]}):f.jsxs("div",{className:`rounded-lg border-l-2 border-gray-300 bg-gray-50/60 p-3 mb-4 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(!v),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(xb,{className:"h-4 w-4 text-gray-400"}),f.jsx("span",{className:"font-semibold text-gray-500 text-xs uppercase tracking-wide",children:"Paragraph Cohesion"})]}),f.jsx(zi,{className:`h-4 w-4 text-gray-400 transition-transform duration-300 ease-in-out ${v?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${v?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"No data"})})]}),f.jsx("div",{className:"h-2"}),r?f.jsxs("div",{className:`rounded-lg border-l-2 border-purple-400 bg-purple-50/60 p-3 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>w(!y),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Jd,{className:"h-4 w-4 text-purple-500"}),f.jsx("span",{className:"font-semibold text-purple-700 text-xs uppercase tracking-wide",children:"Document Cohesion"})]}),f.jsx(zi,{className:`h-4 w-4 text-purple-500 transition-transform duration-300 ease-in-out ${y?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${y?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-700 mt-2 [&_b]:font-semibold",dangerouslySetInnerHTML:{__html:r.analysis}})})]}):f.jsxs("div",{className:`rounded-lg border-l-2 border-gray-300 bg-gray-50/60 p-3 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>w(!y),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Jd,{className:"h-4 w-4 text-gray-400"}),f.jsx("span",{className:"font-semibold text-gray-500 text-xs uppercase tracking-wide",children:"Document Cohesion"})]}),f.jsx(zi,{className:`h-4 w-4 text-gray-400 transition-transform duration-300 ease-in-out ${y?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${y?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"No data"})})]})]}),!C&&f.jsx("div",{className:"mt-4 space-y-2 flex-shrink-0",children:f.jsxs(ve,{variant:"default",size:"sm",onClick:o,className:"w-full flex items-center gap-2 text-xs h-9 bg-blue-500 hover:bg-blue-700 text-white border-blue-600 shadow-sm",onMouseDown:B=>B.stopPropagation(),disabled:a,children:[f.jsx(E4,{className:"h-3 w-3 text-white-400"}),"Return to Flow Mode"]})})]})})})}function gW({isOpen:t,onClose:e,className:n,selectedText:r="",documentContext:o=""}){const[s,i]=p.useState([]),[a,l]=p.useState(""),[c,u]=p.useState(!1),d=p.useRef(null);p.useEffect(()=>{t&&d.current&&setTimeout(()=>{var g;(g=d.current)==null||g.focus()},100)},[t]),p.useEffect(()=>{r&&t&&l(r)},[r,t]);const h=async()=>{if(a.trim()){const g=a.trim();i(v=>[...v,{role:"user",content:g}]),l(""),u(!0);try{const v=await Z4({message:g,documentContext:o});i(x=>[...x,{role:"assistant",content:v.message}])}catch(v){console.error("Chat error:",v),i(x=>[...x,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{u(!1)}}},m=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),h())};return f.jsxs("div",{className:ie("fixed right-4 top-[80px] bottom-4 w-[300px] bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60","border border-border/40 transition-transform duration-200 ease-in-out z-50 rounded-lg overflow-hidden",t?"translate-x-0":"translate-x-[316px]",n),children:[f.jsxs("div",{className:"flex items-center h-12 px-4 border-b border-border/40",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Rs,{className:"h-4 w-4"}),f.jsx("h2",{className:"text-sm font-medium",children:"Chat"})]}),f.jsx("div",{className:"flex-grow"}),f.jsx(ve,{variant:"ghost",size:"icon",onClick:e,className:"h-7 w-7 ml-2 text-muted-foreground hover:text-foreground",children:f.jsx(zi,{className:"h-4 w-4"})})]}),f.jsxs("div",{className:"flex flex-col h-[calc(100%-3rem)]",children:[f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 text-muted-foreground",children:[f.jsx(Rs,{className:"h-8 w-8 mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"No messages yet"}),f.jsx("p",{className:"text-xs mt-1",children:"Ask anything about your writing!"})]}):s.map((g,v)=>f.jsx(fr,{className:ie("w-full",g.role==="assistant"&&"bg-muted"),children:f.jsx(hr,{className:"p-3",children:f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx(Rs,{className:"h-4 w-4 mt-0.5"}),f.jsx("p",{className:"text-sm whitespace-pre-wrap",children:g.content})]})})},v)),c&&f.jsx("div",{className:"flex items-center justify-center p-2",children:f.jsx(zo,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]}),f.jsx("div",{className:"p-4 border-t border-border/40",children:f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{ref:d,value:a,onChange:g=>l(g.target.value),onKeyDown:m,placeholder:"Ask anything...",className:"w-full h-24 p-2 text-sm resize-none rounded-md border border-input bg-background focus:outline-none",disabled:c}),f.jsxs("div",{className:"absolute right-2 bottom-2 flex items-center space-x-2",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Press Enter to send"}),f.jsx(ve,{size:"sm",onClick:h,disabled:!a.trim()||c,className:"h-7 text-xs",children:c?f.jsx(zo,{className:"h-3.5 w-3.5 animate-spin"}):"Send"})]})]})})]})]})}function vW({isOpen:t,onClose:e}){const[n,r]=p.useState(null),o=p.useRef({}),[s,i]=p.useState(!1),[a,l]=p.useState("-translate-x-full");if(p.useEffect(()=>{if(t){i(!0);const h=setTimeout(()=>{l("translate-x-0")},50);return()=>clearTimeout(h)}else{l("-translate-x-full");const h=setTimeout(()=>{i(!1)},300);return()=>clearTimeout(h)}},[t]),!s)return null;const c=[{id:"doc-feedback",title:"Checking for General Feedback",description:"Get feedback on everything in the editor. Click the 'Check for Feedback' button and then select 'Check document'.",thumbnailUrl:"/tutorial-thumbnails/getting-started.jpg",videoUrl:"https://example.com/videos/getting-started.mp4",icon:f.jsx(x4,{className:"h-5 w-5"})},{id:"custom-feedback",title:"Checking for Custom Feedback",description:"Highlight the text you want to check, click the 'Check for Feedback' button, and then select 'Check custom selection'.",thumbnailUrl:"/tutorial-thumbnails/getting-started.jpg",videoUrl:"https://example.com/videos/getting-started.mp4",icon:f.jsx(Ty,{className:"h-5 w-5"})},{id:"flow-mode",title:"Using Flow Mode",description:"Flow mode is a tool that visalizes how strongly connected each sentence is to other sentences in the document. The darker the shade of blue, the more connected the sentences are. View the flow of your writing after checking for feedback.",thumbnailUrl:"/tutorial-thumbnails/ai-features.jpg",videoUrl:"https://example.com/videos/ai-features.mp4",icon:f.jsx(vg,{className:"h-5 w-5"})},{id:"flow-analysis",title:"Viewing Flow Analysis",description:"Flow analysis is a tool that visualizes which sentences are most strongly conencted to other sentences in the document. The darker the shade of blue, the more connected the sentences are. Flow analysis also gives an explanation of how the sentence is connected to its paragraph and overall document.",thumbnailUrl:"/tutorial-thumbnails/topics.jpg",videoUrl:"https://example.com/videos/topics.mp4",icon:f.jsx(H4,{className:"h-5 w-5"})},{id:"set-topics",title:"Selecting Paragraph and Essay Topics",description:"Right click and select 'Set Paragraph Topic' or 'Set Essay Topic' to specify the main ideas of your writing. This will improve the system feedback.",thumbnailUrl:"/tutorial-thumbnails/comments.jpg",videoUrl:"https://example.com/videos/comments.mp4",icon:f.jsx(H6,{className:"h-5 w-5"})},{id:"writing-mode",title:"Entering Writing Feedback Mode",description:"After checking for feedback, new suggestions will appear in the right sidebar. You can right click on the suggestions to generate new suggestions. You can also press the refresh button to get updated feedback.",thumbnailUrl:"/tutorial-thumbnails/ai-features.jpg",videoUrl:"https://example.com/videos/ai-features.mp4",icon:f.jsx(vg,{className:"h-5 w-5"})},{id:"instant-ai-feedback",title:"Getting Instant AI Feedback",description:"Quickly ask an AI for sentence-specific feedback by right clicking and selecting 'Ask AI' then typing your question.",thumbnailUrl:"/tutorial-thumbnails/ai-feedback.jpg",videoUrl:"https://example.com/videos/ai-feedback.mp4",icon:f.jsx(W6,{className:"h-5 w-5"})}],u=h=>{r(h);const m=o.current[h];m&&m.play().catch(g=>{console.error("Error playing video:",g)})},d=h=>{r(null);const m=o.current[h];m&&(m.pause(),m.currentTime=0)};return f.jsxs("div",{className:ie("fixed left-0 top-0 h-screen bg-background border-r border-border/40","transition-all duration-300 ease-in-out","z-50 w-[440px] shadow-lg overflow-hidden",a),children:[f.jsxs("div",{className:"border-b border-border/40 p-3 flex justify-between items-center bg-muted/30",children:[f.jsx("h2",{className:"text-lg font-semibold",children:"Get Started with Ripple"}),f.jsx(ve,{variant:"ghost",size:"icon",onClick:e,children:f.jsx(Mc,{className:"h-4 w-4"})})]}),f.jsx("div",{className:"overflow-auto h-[calc(100vh-56px)]",children:f.jsxs("div",{className:"p-3",children:[f.jsx("p",{className:"text-sm text-muted-foreground mb-5",children:"Hover over any tutorial to preview the video."}),f.jsx("div",{className:"space-y-5",children:c.map(h=>f.jsxs("div",{className:"relative rounded-lg overflow-hidden shadow-md border border-border/40 hover:shadow-lg transition-all",onMouseEnter:()=>u(h.id),onMouseLeave:()=>d(h.id),children:[f.jsxs("div",{className:"aspect-video relative",children:[n!==h.id&&f.jsxs(f.Fragment,{children:[f.jsx("img",{src:h.thumbnailUrl,alt:h.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:f.jsx("div",{className:"bg-white/90 dark:bg-black/90 rounded-full p-3",children:f.jsx(D4,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})})]}),f.jsx("video",{ref:m=>o.current[h.id]=m,src:h.videoUrl,className:ie("absolute inset-0 w-full h-full object-cover transition-opacity",n===h.id?"opacity-100":"opacity-0"),muted:!0,playsInline:!0,loop:!0})]}),f.jsxs("div",{className:"p-3 bg-card",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("div",{className:"p-1 rounded-full bg-blue-100 dark:bg-blue-900/30",children:h.icon}),f.jsx("h3",{className:"font-medium text-sm",children:h.title})]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:h.description})]})]},h.id))})]})})]})}function m_(){const{theme:t,setTheme:e}=_j(),n=()=>{e(t==="light"?"dark":"light")};return f.jsxs(ve,{variant:"ghost",size:"icon",onClick:n,children:[f.jsx(F4,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),f.jsx(O4,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),f.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function S1({checked:t,onCheckedChange:e,label:n,onIcon:r,offIcon:o,disabled:s=!1,size:i="sm",activeColor:a="bg-primary",className:l}){const u={sm:{track:"h-5 w-9",thumb:"h-4 w-4",translate:"translate-x-4",icon:"h-2.5 w-2.5"},default:{track:"h-6 w-11",thumb:"h-5 w-5",translate:"translate-x-5",icon:"h-3 w-3"}}[i],d=t?r:o;return f.jsxs("div",{className:ie("flex items-center space-x-2",l),children:[f.jsx("button",{type:"button",role:"switch","aria-checked":t,"aria-label":n,disabled:s,onClick:()=>!s&&e(!t),className:ie("relative inline-flex shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",u.track,t?a:"bg-muted-foreground/20 dark:bg-muted-foreground/30",s&&"opacity-50 cursor-not-allowed"),children:f.jsx("span",{className:ie("pointer-events-none inline-block rounded-full bg-background shadow-lg ring-0 transition duration-200 ease-in-out flex items-center justify-center",u.thumb,t?u.translate:"translate-x-0"),children:d&&f.jsx("span",{className:ie("flex items-center justify-center transition-colors duration-200",u.icon,t?"text-blue-500":"text-muted-foreground/60"),children:d})})}),n&&f.jsx("span",{className:ie("text-xs font-medium",s?"opacity-50":"text-gray-700 dark:text-gray-300"),children:n})]})}var x0="Popover",[g_,PX]=Sn(x0,[yr]),Wc=yr(),[yW,es]=g_(x0),v_=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=t,a=Wc(e),l=p.useRef(null),[c,u]=p.useState(!1),[d=!1,h]=Br({prop:r,defaultProp:o,onChange:s});return f.jsx(Dc,{...a,children:f.jsx(yW,{scope:e,contentId:bt(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:c,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:i,children:n})})};v_.displayName=x0;var y_="PopoverAnchor",xW=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=es(y_,n),s=Wc(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=o;return p.useEffect(()=>(i(),()=>a()),[i,a]),f.jsx(_a,{...s,...r,ref:e})});xW.displayName=y_;var x_="PopoverTrigger",w_=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=es(x_,n),s=Wc(n),i=ze(e,o.triggerRef),a=f.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":E_(o.open),...r,ref:i,onClick:le(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:f.jsx(_a,{asChild:!0,...s,children:a})});w_.displayName=x_;var w0="PopoverPortal",[wW,bW]=g_(w0,{forceMount:void 0}),b_=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,s=es(w0,e);return f.jsx(wW,{scope:e,forceMount:n,children:f.jsx(xr,{present:n||s.open,children:f.jsx(Fc,{asChild:!0,container:o,children:r})})})};b_.displayName=w0;var xa="PopoverContent",S_=p.forwardRef((t,e)=>{const n=bW(xa,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,s=es(xa,t.__scopePopover);return f.jsx(xr,{present:r||s.open,children:s.modal?f.jsx(SW,{...o,ref:e}):f.jsx(CW,{...o,ref:e})})});S_.displayName=xa;var SW=p.forwardRef((t,e)=>{const n=es(xa,t.__scopePopover),r=p.useRef(null),o=ze(e,r),s=p.useRef(!1);return p.useEffect(()=>{const i=r.current;if(i)return Oc(i)},[]),f.jsx(oh,{as:Bo,allowPinchZoom:!0,children:f.jsx(C_,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),CW=p.forwardRef((t,e)=>{const n=es(xa,t.__scopePopover),r=p.useRef(!1),o=p.useRef(!1);return f.jsx(C_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),C_=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=es(xa,n),m=Wc(n);return _c(),f.jsx(th,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:f.jsx(Pa,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:f.jsx(Lc,{"data-state":E_(h.open),role:"dialog",id:h.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),k_="PopoverClose",kW=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=es(k_,n);return f.jsx(Ce.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>o.onOpenChange(!1))})});kW.displayName=k_;var EW="PopoverArrow",TW=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Wc(n);return f.jsx($c,{...o,...r,ref:e})});TW.displayName=EW;function E_(t){return t?"open":"closed"}var NW=v_,MW=w_,PW=b_,T_=S_;const _W=NW,RW=MW,N_=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},o)=>f.jsx(PW,{children:f.jsx(T_,{ref:o,align:e,sideOffset:n,className:ie("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));N_.displayName=T_.displayName;var C1=1,AW=.9,OW=.8,jW=.17,Vp=.1,Wp=.999,IW=.9999,DW=.99,LW=/[\\\/_+.#"@\[\(\{&]/,$W=/[\\\/_+.#"@\[\(\{&]/g,FW=/[\s-]/,M_=/[\s-]/g;function qg(t,e,n,r,o,s,i){if(s===e.length)return o===t.length?C1:DW;var a=`${o},${s}`;if(i[a]!==void 0)return i[a];for(var l=r.charAt(s),c=n.indexOf(l,o),u=0,d,h,m,g;c>=0;)d=qg(t,e,n,r,c+1,s+1,i),d>u&&(c===o?d*=C1:LW.test(t.charAt(c-1))?(d*=OW,m=t.slice(o,c-1).match($W),m&&o>0&&(d*=Math.pow(Wp,m.length))):FW.test(t.charAt(c-1))?(d*=AW,g=t.slice(o,c-1).match(M_),g&&o>0&&(d*=Math.pow(Wp,g.length))):(d*=jW,o>0&&(d*=Math.pow(Wp,c-o))),t.charAt(c)!==e.charAt(s)&&(d*=IW)),(d<Vp&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(h=qg(t,e,n,r,c+1,s+2,i),h*Vp>d&&(d=h*Vp)),d>u&&(u=d),c=n.indexOf(l,c+1);return i[a]=u,u}function k1(t){return t.toLowerCase().replace(M_," ")}function zW(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,qg(t,e,k1(t),k1(e),0,0,{})}function Do(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function E1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function P_(...t){return e=>{let n=!1;const r=t.map(o=>{const s=E1(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():E1(t[o],null)}}}}function oi(...t){return p.useCallback(P_(...t),t)}var b0=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),s=o.find(HW);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return f.jsx(Gg,{...r,ref:e,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return f.jsx(Gg,{...r,ref:e,children:n})});b0.displayName="Slot";var Gg=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const o=VW(n);return p.cloneElement(n,{...UW(r,n.props),ref:e?P_(e,o):o})}return p.Children.count(n)>1?p.Children.only(null):null});Gg.displayName="SlotClone";var BW=({children:t})=>f.jsx(f.Fragment,{children:t});function HW(t){return p.isValidElement(t)&&t.type===BW}function UW(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function VW(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var WW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Kr=WW.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?b0:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function KW(t,e){t&&Yo.flushSync(()=>t.dispatchEvent(e))}var qW="DismissableLayer",Yg="dismissableLayer.update",GW="dismissableLayer.pointerDownOutside",YW="dismissableLayer.focusOutside",T1,__=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),R_=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=p.useContext(__),[u,d]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=oi(e,k=>d(k)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,C=QW(k=>{const T=k.target,j=[...c.branches].some(I=>I.contains(T));!S||j||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),E=ZW(k=>{const T=k.target;[...c.branches].some(I=>I.contains(T))||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return Py(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(T1=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),N1(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=T1)}},[u,h,n,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),N1())},[u,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(Yg,k),()=>document.removeEventListener(Yg,k)},[]),f.jsx(Kr.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:Do(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Do(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Do(t.onPointerDownCapture,C.onPointerDownCapture)})});R_.displayName=qW;var JW="DismissableLayerBranch",XW=p.forwardRef((t,e)=>{const n=p.useContext(__),r=p.useRef(null),o=oi(e,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(Kr.div,{...t,ref:o})});XW.displayName=JW;function QW(t,e=globalThis==null?void 0:globalThis.document){const n=Ke(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){A_(GW,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function ZW(t,e=globalThis==null?void 0:globalThis.document){const n=Ke(t),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&A_(YW,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function N1(){const t=new CustomEvent(Yg);document.dispatchEvent(t)}function A_(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?KW(o,s):o.dispatchEvent(s)}var Kp="focusScope.autoFocusOnMount",qp="focusScope.autoFocusOnUnmount",M1={bubbles:!1,cancelable:!0},eK="FocusScope",O_=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=p.useState(null),c=Ke(o),u=Ke(s),d=p.useRef(null),h=oi(e,v=>l(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:ao(d.current,{select:!0})},x=function(b){if(m.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||ao(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&ao(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,m.paused]),p.useEffect(()=>{if(a){_1.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(Kp,M1);a.addEventListener(Kp,c),a.dispatchEvent(y),y.defaultPrevented||(tK(iK(j_(a)),{select:!0}),document.activeElement===v&&ao(a))}return()=>{a.removeEventListener(Kp,c),setTimeout(()=>{const y=new CustomEvent(qp,M1);a.addEventListener(qp,u),a.dispatchEvent(y),y.defaultPrevented||ao(v??document.body,{select:!0}),a.removeEventListener(qp,u),_1.remove(m)},0)}}},[a,c,u,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,S]=nK(w);b&&S?!v.shiftKey&&y===S?(v.preventDefault(),n&&ao(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&ao(S,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return f.jsx(Kr.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});O_.displayName=eK;function tK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ao(r,{select:e}),document.activeElement!==n)return}function nK(t){const e=j_(t),n=P1(e,t),r=P1(e.reverse(),t);return[n,r]}function j_(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function P1(t,e){for(const n of t)if(!rK(n,{upTo:e}))return n}function rK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function oK(t){return t instanceof HTMLInputElement&&"select"in t}function ao(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&oK(t)&&e&&t.select()}}var _1=sK();function sK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=R1(t,e),t.unshift(e)},remove(e){var n;t=R1(t,e),(n=t[0])==null||n.resume()}}}function R1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function iK(t){return t.filter(e=>e.tagName!=="A")}var aK="Portal",I_=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=p.useState(!1);Je(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?kc.createPortal(f.jsx(Kr.div,{...r,ref:e}),i):null});I_.displayName=aK;function lK(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var yh=t=>{const{present:e,children:n}=t,r=cK(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=oi(r.ref,uK(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};yh.displayName="Presence";function cK(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),s=p.useRef("none"),i=t?"mounted":"unmounted",[a,l]=lK(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=zu(r.current);s.current=a==="mounted"?c:"none"},[a]),Je(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,m=zu(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Je(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const v=zu(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=m=>{m.target===e&&(s.current=zu(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function zu(t){return(t==null?void 0:t.animationName)||"none"}function uK(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var D_=zy(),Gp=function(){},xh=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Gp,onWheelCapture:Gp,onTouchMoveCapture:Gp}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,b=Jf(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,C=Fy([n,e]),E=it(it({},b),o);return p.createElement(p.Fragment,null,u&&p.createElement(S,{sideCar:D_,removeScrollBar:c,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?p.cloneElement(p.Children.only(a),it(it({},E),{ref:C})):p.createElement(y,it({},E,{className:l,ref:C}),a))});xh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xh.classNames={fullWidth:ea,zeroRight:Zi};var Jg=!1;if(typeof window<"u")try{var Bu=Object.defineProperty({},"passive",{get:function(){return Jg=!0,!0}});window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{Jg=!1}var xi=Jg?{passive:!1}:!1,dK=function(t){return t.tagName==="TEXTAREA"},L_=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!dK(t)&&n[e]==="visible")},fK=function(t){return L_(t,"overflowY")},hK=function(t){return L_(t,"overflowX")},A1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=$_(t,r);if(o){var s=F_(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},pK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},mK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$_=function(t,e){return t==="v"?fK(e):hK(e)},F_=function(t,e){return t==="v"?pK(e):mK(e)},gK=function(t,e){return t==="h"&&e==="rtl"?-1:1},vK=function(t,e,n,r,o){var s=gK(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,h=0;do{var m=F_(t,a),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&$_(t,a)&&(d+=y,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(h)<1||!o))&&(c=!0),c},Hu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},O1=function(t){return[t.deltaX,t.deltaY]},j1=function(t){return t&&"current"in t?t.current:t},yK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},xK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},wK=0,wi=[];function bK(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(wK++)[0],s=p.useState(Qf)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var v=$y([t.lockRef.current],(t.shards||[]).map(j1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var y=Hu(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],S="deltaY"in v?v.deltaY:w[1]-y[1],C,E=v.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&E.type==="range")return!1;var T=A1(k,E);if(!T)return!0;if(T?C=k:(C=k==="v"?"h":"v",T=A1(k,E)),!T)return!1;if(!r.current&&"changedTouches"in v&&(b||S)&&(r.current=C),!C)return!0;var j=r.current||C;return vK(j,x,v,j==="h"?b:S,!0)},[]),l=p.useCallback(function(v){var x=v;if(!(!wi.length||wi[wi.length-1]!==s)){var y="deltaY"in x?O1(x):Hu(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&yK(C.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(j1).filter(Boolean).filter(function(C){return C.contains(x.target)}),S=b.length>0?a(x,b[0]):!i.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),c=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:SK(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=p.useCallback(function(v){n.current=Hu(v),r.current=void 0},[]),d=p.useCallback(function(v){c(v.type,O1(v),v.target,a(v,t.lockRef.current))},[]),h=p.useCallback(function(v){c(v.type,Hu(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return wi.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,xi),document.addEventListener("touchmove",l,xi),document.addEventListener("touchstart",u,xi),function(){wi=wi.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,xi),document.removeEventListener("touchmove",l,xi),document.removeEventListener("touchstart",u,xi)}},[]);var m=t.removeScrollBar,g=t.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:xK(o)}):null,m?p.createElement(Hy,{gapMode:t.gapMode}):null)}function SK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const CK=By(D_,bK);var z_=p.forwardRef(function(t,e){return p.createElement(xh,it({},t,{ref:e,sideCar:CK}))});z_.classNames=xh.classNames;var S0="Dialog",[B_,_X]=Sn(S0),[kK,tr]=B_(S0),H_=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=t,a=p.useRef(null),l=p.useRef(null),[c=!1,u]=Br({prop:r,defaultProp:o,onChange:s});return f.jsx(kK,{scope:e,triggerRef:a,contentRef:l,contentId:bt(),titleId:bt(),descriptionId:bt(),open:c,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};H_.displayName=S0;var U_="DialogTrigger",EK=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tr(U_,n),s=oi(e,o.triggerRef);return f.jsx(Kr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":E0(o.open),...r,ref:s,onClick:Do(t.onClick,o.onOpenToggle)})});EK.displayName=U_;var C0="DialogPortal",[TK,V_]=B_(C0,{forceMount:void 0}),W_=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,s=tr(C0,e);return f.jsx(TK,{scope:e,forceMount:n,children:p.Children.map(r,i=>f.jsx(yh,{present:n||s.open,children:f.jsx(I_,{asChild:!0,container:o,children:i})}))})};W_.displayName=C0;var lf="DialogOverlay",K_=p.forwardRef((t,e)=>{const n=V_(lf,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=tr(lf,t.__scopeDialog);return s.modal?f.jsx(yh,{present:r||s.open,children:f.jsx(NK,{...o,ref:e})}):null});K_.displayName=lf;var NK=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tr(lf,n);return f.jsx(z_,{as:b0,allowPinchZoom:!0,shards:[o.contentRef],children:f.jsx(Kr.div,{"data-state":E0(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Vs="DialogContent",q_=p.forwardRef((t,e)=>{const n=V_(Vs,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=tr(Vs,t.__scopeDialog);return f.jsx(yh,{present:r||s.open,children:s.modal?f.jsx(MK,{...o,ref:e}):f.jsx(PK,{...o,ref:e})})});q_.displayName=Vs;var MK=p.forwardRef((t,e)=>{const n=tr(Vs,t.__scopeDialog),r=p.useRef(null),o=oi(e,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return Oc(s)},[]),f.jsx(G_,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Do(t.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Do(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:Do(t.onFocusOutside,s=>s.preventDefault())})}),PK=p.forwardRef((t,e)=>{const n=tr(Vs,t.__scopeDialog),r=p.useRef(!1),o=p.useRef(!1);return f.jsx(G_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),G_=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=t,a=tr(Vs,n),l=p.useRef(null),c=oi(e,l);return _c(),f.jsxs(f.Fragment,{children:[f.jsx(O_,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:f.jsx(R_,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":E0(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(_K,{titleId:a.titleId}),f.jsx(AK,{contentRef:l,descriptionId:a.descriptionId})]})]})}),k0="DialogTitle",Y_=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tr(k0,n);return f.jsx(Kr.h2,{id:o.titleId,...r,ref:e})});Y_.displayName=k0;var J_="DialogDescription",X_=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tr(J_,n);return f.jsx(Kr.p,{id:o.descriptionId,...r,ref:e})});X_.displayName=J_;var Q_="DialogClose",Z_=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tr(Q_,n);return f.jsx(Kr.button,{type:"button",...r,ref:e,onClick:Do(t.onClick,()=>o.onOpenChange(!1))})});Z_.displayName=Q_;function E0(t){return t?"open":"closed"}var eR="DialogTitleWarning",[RX,tR]=n9(eR,{contentName:Vs,titleName:k0,docsSlug:"dialog"}),_K=({titleId:t})=>{const e=tR(eR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},RK="DialogDescriptionWarning",AK=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tR(RK).contentName}}.`;return p.useEffect(()=>{var s;const o=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},nR=H_,rR=W_,T0=K_,N0=q_,oR=Y_,sR=X_,OK=Z_,iR={exports:{}},aR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wa=p;function jK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var IK=typeof Object.is=="function"?Object.is:jK,DK=wa.useState,LK=wa.useEffect,$K=wa.useLayoutEffect,FK=wa.useDebugValue;function zK(t,e){var n=e(),r=DK({inst:{value:n,getSnapshot:e}}),o=r[0].inst,s=r[1];return $K(function(){o.value=n,o.getSnapshot=e,Yp(o)&&s({inst:o})},[t,n,e]),LK(function(){return Yp(o)&&s({inst:o}),t(function(){Yp(o)&&s({inst:o})})},[t]),FK(n),n}function Yp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!IK(t,n)}catch{return!0}}function BK(t,e){return e()}var HK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BK:zK;aR.useSyncExternalStore=wa.useSyncExternalStore!==void 0?wa.useSyncExternalStore:HK;iR.exports=aR;var UK=iR.exports,Qa='[cmdk-group=""]',Jp='[cmdk-group-items=""]',VK='[cmdk-group-heading=""]',M0='[cmdk-item=""]',I1=`${M0}:not([aria-disabled="true"])`,Xg="cmdk-item-select",vs="data-value",WK=(t,e,n)=>zW(t,e,n),lR=p.createContext(void 0),Kc=()=>p.useContext(lR),cR=p.createContext(void 0),P0=()=>p.useContext(cR),uR=p.createContext(void 0),dR=p.forwardRef((t,e)=>{let n=Ei(()=>{var P,q;return{search:"",value:(q=(P=t.value)!=null?P:t.defaultValue)!=null?q:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Ei(()=>new Set),o=Ei(()=>new Map),s=Ei(()=>new Map),i=Ei(()=>new Set),a=fR(t),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=t,w=bt(),b=bt(),S=bt(),C=p.useRef(null),E=nq();Ws(()=>{if(u!==void 0){let P=u.trim();n.current.value=P,k.emit()}},[u]),Ws(()=>{E(6,B)},[]);let k=p.useMemo(()=>({subscribe:P=>(i.current.add(P),()=>i.current.delete(P)),snapshot:()=>n.current,setState:(P,q,Z)=>{var M,O,D;if(!Object.is(n.current[P],q)){if(n.current[P]=q,P==="search")U(),I(),E(1,V);else if(P==="value"&&(Z||E(5,B),((M=a.current)==null?void 0:M.value)!==void 0)){let re=q??"";(D=(O=a.current).onValueChange)==null||D.call(O,re);return}k.emit()}},emit:()=>{i.current.forEach(P=>P())}}),[]),T=p.useMemo(()=>({value:(P,q,Z)=>{var M;q!==((M=s.current.get(P))==null?void 0:M.value)&&(s.current.set(P,{value:q,keywords:Z}),n.current.filtered.items.set(P,j(q,Z)),E(2,()=>{I(),k.emit()}))},item:(P,q)=>(r.current.add(P),q&&(o.current.has(q)?o.current.get(q).add(P):o.current.set(q,new Set([P]))),E(3,()=>{U(),I(),n.current.value||V(),k.emit()}),()=>{s.current.delete(P),r.current.delete(P),n.current.filtered.items.delete(P);let Z=W();E(4,()=>{U(),(Z==null?void 0:Z.getAttribute("id"))===P&&V(),k.emit()})}),group:P=>(o.current.has(P)||o.current.set(P,new Set),()=>{s.current.delete(P),o.current.delete(P)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:w,inputId:S,labelId:b,listInnerRef:C}),[]);function j(P,q){var Z,M;let O=(M=(Z=a.current)==null?void 0:Z.filter)!=null?M:WK;return P?O(P,n.current.search,q):0}function I(){if(!n.current.search||a.current.shouldFilter===!1)return;let P=n.current.filtered.items,q=[];n.current.filtered.groups.forEach(M=>{let O=o.current.get(M),D=0;O.forEach(re=>{let z=P.get(re);D=Math.max(z,D)}),q.push([M,D])});let Z=C.current;oe().sort((M,O)=>{var D,re;let z=M.getAttribute("id"),G=O.getAttribute("id");return((D=P.get(G))!=null?D:0)-((re=P.get(z))!=null?re:0)}).forEach(M=>{let O=M.closest(Jp);O?O.appendChild(M.parentElement===O?M:M.closest(`${Jp} > *`)):Z.appendChild(M.parentElement===Z?M:M.closest(`${Jp} > *`))}),q.sort((M,O)=>O[1]-M[1]).forEach(M=>{var O;let D=(O=C.current)==null?void 0:O.querySelector(`${Qa}[${vs}="${encodeURIComponent(M[0])}"]`);D==null||D.parentElement.appendChild(D)})}function V(){let P=oe().find(Z=>Z.getAttribute("aria-disabled")!=="true"),q=P==null?void 0:P.getAttribute(vs);k.setState("value",q||void 0)}function U(){var P,q,Z,M;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let O=0;for(let D of r.current){let re=(q=(P=s.current.get(D))==null?void 0:P.value)!=null?q:"",z=(M=(Z=s.current.get(D))==null?void 0:Z.keywords)!=null?M:[],G=j(re,z);n.current.filtered.items.set(D,G),G>0&&O++}for(let[D,re]of o.current)for(let z of re)if(n.current.filtered.items.get(z)>0){n.current.filtered.groups.add(D);break}n.current.filtered.count=O}function B(){var P,q,Z;let M=W();M&&(((P=M.parentElement)==null?void 0:P.firstChild)===M&&((Z=(q=M.closest(Qa))==null?void 0:q.querySelector(VK))==null||Z.scrollIntoView({block:"nearest"})),M.scrollIntoView({block:"nearest"}))}function W(){var P;return(P=C.current)==null?void 0:P.querySelector(`${M0}[aria-selected="true"]`)}function oe(){var P;return Array.from(((P=C.current)==null?void 0:P.querySelectorAll(I1))||[])}function H(P){let q=oe()[P];q&&k.setState("value",q.getAttribute(vs))}function te(P){var q;let Z=W(),M=oe(),O=M.findIndex(re=>re===Z),D=M[O+P];(q=a.current)!=null&&q.loop&&(D=O+P<0?M[M.length-1]:O+P===M.length?M[0]:M[O+P]),D&&k.setState("value",D.getAttribute(vs))}function R(P){let q=W(),Z=q==null?void 0:q.closest(Qa),M;for(;Z&&!M;)Z=P>0?eq(Z,Qa):tq(Z,Qa),M=Z==null?void 0:Z.querySelector(I1);M?k.setState("value",M.getAttribute(vs)):te(P)}let N=()=>H(oe().length-1),$=P=>{P.preventDefault(),P.metaKey?N():P.altKey?R(1):te(1)},L=P=>{P.preventDefault(),P.metaKey?H(0):P.altKey?R(-1):te(-1)};return p.createElement(Ce.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:P=>{var q;if((q=y.onKeyDown)==null||q.call(y,P),!P.defaultPrevented)switch(P.key){case"n":case"j":{x&&P.ctrlKey&&$(P);break}case"ArrowDown":{$(P);break}case"p":case"k":{x&&P.ctrlKey&&L(P);break}case"ArrowUp":{L(P);break}case"Home":{P.preventDefault(),H(0);break}case"End":{P.preventDefault(),N();break}case"Enter":if(!P.nativeEvent.isComposing&&P.keyCode!==229){P.preventDefault();let Z=W();if(Z){let M=new Event(Xg);Z.dispatchEvent(M)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:oq},l),wh(t,P=>p.createElement(cR.Provider,{value:k},p.createElement(lR.Provider,{value:T},P))))}),KK=p.forwardRef((t,e)=>{var n,r;let o=bt(),s=p.useRef(null),i=p.useContext(uR),a=Kc(),l=fR(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Ws(()=>{if(!c)return a.item(o,i==null?void 0:i.id)},[c]);let u=hR(o,s,[t.value,t.children,s],t.keywords),d=P0(),h=Ks(E=>E.value&&E.value===u.current),m=Ks(E=>c||a.filter()===!1?!0:E.search?E.filtered.items.get(o)>0:!0);p.useEffect(()=>{let E=s.current;if(!(!E||t.disabled))return E.addEventListener(Xg,g),()=>E.removeEventListener(Xg,g)},[m,t.onSelect,t.disabled]);function g(){var E,k;v(),(k=(E=l.current).onSelect)==null||k.call(E,u.current)}function v(){d.setState("value",u.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:w,forceMount:b,keywords:S,...C}=t;return p.createElement(Ce.div,{ref:mc([s,e]),...C,id:o,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||a.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},t.children)}),qK=p.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:o,...s}=t,i=bt(),a=p.useRef(null),l=p.useRef(null),c=bt(),u=Kc(),d=Ks(m=>o||u.filter()===!1?!0:m.search?m.filtered.groups.has(i):!0);Ws(()=>u.group(i),[]),hR(i,a,[t.value,t.heading,l]);let h=p.useMemo(()=>({id:i,forceMount:o}),[o]);return p.createElement(Ce.div,{ref:mc([a,e]),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&p.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),wh(t,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},p.createElement(uR.Provider,{value:h},m))))}),GK=p.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,o=p.useRef(null),s=Ks(i=>!i.search);return!n&&!s?null:p.createElement(Ce.div,{ref:mc([o,e]),...r,"cmdk-separator":"",role:"separator"})}),YK=p.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,o=t.value!=null,s=P0(),i=Ks(u=>u.search),a=Ks(u=>u.value),l=Kc(),c=p.useMemo(()=>{var u;let d=(u=l.listInnerRef.current)==null?void 0:u.querySelector(`${M0}[${vs}="${encodeURIComponent(a)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return p.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),p.createElement(Ce.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:o?t.value:i,onChange:u=>{o||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),JK=p.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...o}=t,s=p.useRef(null),i=p.useRef(null),a=Kc();return p.useEffect(()=>{if(i.current&&s.current){let l=i.current,c=s.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let h=l.offsetHeight;c.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return d.observe(l),()=>{cancelAnimationFrame(u),d.unobserve(l)}}},[]),p.createElement(Ce.div,{ref:mc([s,e]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:a.listId},wh(t,l=>p.createElement("div",{ref:mc([i,a.listInnerRef]),"cmdk-list-sizer":""},l)))}),XK=p.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:s,container:i,...a}=t;return p.createElement(nR,{open:n,onOpenChange:r},p.createElement(rR,{container:i},p.createElement(T0,{"cmdk-overlay":"",className:o}),p.createElement(N0,{"aria-label":t.label,"cmdk-dialog":"",className:s},p.createElement(dR,{ref:e,...a}))))}),QK=p.forwardRef((t,e)=>Ks(n=>n.filtered.count===0)?p.createElement(Ce.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),ZK=p.forwardRef((t,e)=>{let{progress:n,children:r,label:o="Loading...",...s}=t;return p.createElement(Ce.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},wh(t,i=>p.createElement("div",{"aria-hidden":!0},i)))}),un=Object.assign(dR,{List:JK,Item:KK,Input:YK,Group:qK,Separator:GK,Dialog:XK,Empty:QK,Loading:ZK});function eq(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function tq(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function fR(t){let e=p.useRef(t);return Ws(()=>{e.current=t}),e}var Ws=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Ei(t){let e=p.useRef();return e.current===void 0&&(e.current=t()),e}function mc(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Ks(t){let e=P0(),n=()=>t(e.snapshot());return UK.useSyncExternalStore(e.subscribe,n,n)}function hR(t,e,n,r=[]){let o=p.useRef(),s=Kc();return Ws(()=>{var i;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():o.current}})(),l=r.map(c=>c.trim());s.value(t,a,l),(i=e.current)==null||i.setAttribute(vs,a),o.current=a}),o}var nq=()=>{let[t,e]=p.useState(),n=Ei(()=>new Map);return Ws(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,o)=>{n.current.set(r,o),e({})}};function rq(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function wh({asChild:t,children:e},n){return t&&p.isValidElement(e)?p.cloneElement(rq(e),{ref:e.ref},n(e.props.children)):n(e)}var oq={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const sq=nR,iq=rR,pR=p.forwardRef(({className:t,...e},n)=>f.jsx(T0,{ref:n,className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));pR.displayName=T0.displayName;const mR=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(iq,{children:[f.jsx(pR,{}),f.jsxs(N0,{ref:r,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,f.jsxs(OK,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(z6,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mR.displayName=N0.displayName;const gR=({className:t,...e})=>f.jsx("div",{className:ie("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});gR.displayName="DialogHeader";const vR=({className:t,...e})=>f.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});vR.displayName="DialogFooter";const yR=p.forwardRef(({className:t,...e},n)=>f.jsx(oR,{ref:n,className:ie("text-lg font-semibold leading-none tracking-tight",t),...e}));yR.displayName=oR.displayName;const xR=p.forwardRef(({className:t,...e},n)=>f.jsx(sR,{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));xR.displayName=sR.displayName;const wR=p.forwardRef(({className:t,...e},n)=>f.jsx(un,{ref:n,className:ie("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));wR.displayName=un.displayName;const aq=p.forwardRef(({className:t,...e},n)=>f.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[f.jsx(L4,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),f.jsx(un.Input,{ref:n,className:ie("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));aq.displayName=un.Input.displayName;const bR=p.forwardRef(({className:t,...e},n)=>f.jsx(un.List,{ref:n,className:ie("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));bR.displayName=un.List.displayName;const SR=p.forwardRef((t,e)=>f.jsx(un.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));SR.displayName=un.Empty.displayName;const CR=p.forwardRef(({className:t,...e},n)=>f.jsx(un.Group,{ref:n,className:ie("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));CR.displayName=un.Group.displayName;const lq=p.forwardRef(({className:t,...e},n)=>f.jsx(un.Separator,{ref:n,className:ie("-mx-1 h-px bg-border",t),...e}));lq.displayName=un.Separator.displayName;const cq=p.forwardRef(({className:t,...e},n)=>f.jsx(un.Item,{ref:n,className:ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...e}));cq.displayName=un.Item.displayName;function uq({options:t,selected:e,onChange:n,className:r,disabled:o=!1,label:s,emptyText:i="No options found"}){const[a,l]=p.useState(!1),c=p.useRef(null),u=m=>{l(m)},d=m=>{console.log("Selecting value:",m),setTimeout(()=>{e.includes(m)?n(e.filter(g=>g!==m)):n([...e,m])},0)},h=e.length>0;return f.jsxs(_W,{open:a,onOpenChange:u,children:[f.jsx(RW,{asChild:!0,children:f.jsxs(ve,{variant:h?"default":"outline",size:"sm",role:"combobox","aria-expanded":a,className:ie("h-8 px-3 text-xs flex items-center justify-between",h&&"bg-accent text-accent-foreground",r),disabled:o,onClick:m=>{m.stopPropagation(),l(!a)},children:[f.jsxs("span",{className:"flex items-center",children:[s,e.length===t.length?"All":e.length===0?"None":e.length<=2?e.map(m=>{var g;return((g=t.find(v=>v.value===m))==null?void 0:g.label)||m}).join(", "):e.slice(0,2).map(m=>{var g;return((g=t.find(v=>v.value===m))==null?void 0:g.label)||m}).join(", ")+` +${e.length-2}`&&f.jsx("span",{className:"ml-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:e.length})]}),f.jsx(Vf,{className:"ml-2 h-3.5 w-3.5 shrink-0 opacity-50"})]})}),f.jsx(N_,{className:"w-52 p-0",align:"start",sideOffset:5,children:f.jsx(wR,{ref:c,children:f.jsx(bR,{children:t.length===0?f.jsx(SR,{children:i}):f.jsx(CR,{children:t.map(m=>{const g=e.includes(m.value);return f.jsxs("div",{className:ie("relative flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-primary/10 hover:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",g&&"bg-accent text-accent-foreground",m.disabled&&"pointer-events-none opacity-50"),onClick:v=>{m.disabled||(v.preventDefault(),v.stopPropagation(),d(m.value))},children:[f.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",children:f.jsx(pa,{className:ie("h-4 w-4",g?"opacity-100":"opacity-0")})}),f.jsxs("span",{className:"flex items-center",children:[m.icon&&f.jsx("span",{className:"mr-2",children:m.icon}),m.label]})]},m.value)})})})})})]})}function dq({items:t,className:e,label:n,emptyText:r="No options found"}){const[o,s]=p.useState(!1),i=a=>{try{typeof a.action=="function"&&a.action()}catch(l){console.error("Error executing action:",l)}finally{s(!1)}};return f.jsxs(c0,{open:o,onOpenChange:s,children:[f.jsx(u0,{asChild:!0,children:f.jsxs(ve,{variant:"outline",size:"sm",className:ie("h-8 px-3 text-xs flex items-center justify-between pointer-events-auto",e),children:[f.jsx("span",{children:n}),f.jsx(Vf,{className:"ml-2 h-3.5 w-3.5 shrink-0 opacity-50"})]})}),f.jsx(ah,{align:"start",className:"w-64",children:t.length===0?f.jsx("div",{className:"text-sm py-2 px-3 text-muted-foreground",children:r}):t.map(a=>f.jsxs(fc,{onClick:()=>i(a),className:`flex flex-col items-start py-2 cursor-pointer ${a.className}`,children:[f.jsxs("div",{className:"flex items-center w-full",children:[a.icon&&f.jsx("span",{className:"mr-2",children:a.icon}),f.jsx("span",{className:"font-medium",children:a.label})]}),a.description&&f.jsx("p",{className:"text-xs text-muted-foreground mt-1 ml-6",children:a.description})]},a.value))})]})}class fq{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&!(this.regexp&&!yq(this.search)),this.wholeWord=!!e.wholeWord,this.filter=e.filter||null,this.impl=this.valid?this.regexp?new mq(this):new pq(this):hq}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}findNext(e,n=0,r=e.doc.content.size){for(;;){if(n>=r)return null;let o=this.impl.findNext(e,n,r);if(!o||this.checkResult(e,o))return o;n=o.from+1}}findPrev(e,n=e.doc.content.size,r=0){for(;;){if(n<=r)return null;let o=this.impl.findPrev(e,n,r);if(!o||this.checkResult(e,o))return o;n=o.to-1}}checkResult(e,n){return(!this.wholeWord||L1(e,n.from)&&L1(e,n.to))&&(!this.filter||this.filter(e,n))}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}getReplacements(e,n){let o=e.doc.resolve(n.from).marksAcross(e.doc.resolve(n.to)),s=[],i=J.empty,a=n.from,{match:l}=n,c=l?gq(l):[[0,n.to-n.from]],u=vq(this.unquote(this.replace)),d;for(let h of u)if(typeof h=="string")i=i.addToEnd(e.schema.text(h,o));else if(d=c[h.group]){let m=n.matchStart+d[0],g=n.matchStart+d[1];h.copy?i=i.append(e.doc.slice(m,g).content):((i!=J.empty||m>a)&&(s.push({from:a,to:m,insert:new ae(i,0,0)}),i=J.empty),a=g)}return(i!=J.empty||a<n.to)&&s.push({from:a,to:n.to,insert:new ae(i,0,0)}),s}}const hq=new class{findNext(){return null}findPrev(){return null}};class pq{constructor(e){this.query=e;let n=e.unquote(e.search);e.caseSensitive||(n=n.toLowerCase()),this.string=n}findNext(e,n,r){return ba(e.doc,n,r,(o,s)=>{let i=Math.max(n,s),a=gc(o).slice(i-s,Math.min(o.content.size,r-s)),l=(this.query.caseSensitive?a:a.toLowerCase()).indexOf(this.string);return l<0?null:{from:i+l,to:i+l+this.string.length,match:null,matchStart:s}})}findPrev(e,n,r){return ba(e.doc,n,r,(o,s)=>{let i=Math.max(s,r),a=gc(o).slice(i-s,Math.min(o.content.size,n-s));this.query.caseSensitive||(a=a.toLowerCase());let l=a.lastIndexOf(this.string);return l<0?null:{from:i+l,to:i+l+this.string.length,match:null,matchStart:s}})}}const kR="g"+(/x/.unicode==null?"":"u")+(/x/.hasIndices==null?"":"d");class mq{constructor(e){this.query=e,this.regexp=new RegExp(e.search,kR+(e.caseSensitive?"":"i"))}findNext(e,n,r){return ba(e.doc,n,r,(o,s)=>{let i=gc(o).slice(0,Math.min(o.content.size,r-s));this.regexp.lastIndex=n-s;let a=this.regexp.exec(i);return a?{from:s+a.index,to:s+a.index+a[0].length,match:a,matchStart:s}:null})}findPrev(e,n,r){return ba(e.doc,n,r,(o,s)=>{let i=gc(o).slice(0,Math.min(o.content.size,n-s)),a;for(let l=0;;){this.regexp.lastIndex=l;let c=this.regexp.exec(i);if(!c)break;a=c,l=c.index+1}return a?{from:s+a.index,to:s+a.index+a[0].length,match:a,matchStart:s}:null})}}function gq(t){if(t.indices)return t.indices;let e=[[0,t[0].length]];for(let n=1,r=0;n<t.length;n++){let o=t[n]?t[0].indexOf(t[n],r):-1;e.push(o<0?void 0:[o,r=o+t[n].length])}return e}function vq(t){let e=[],n=-1;function r(o){let s=e.length-1;s>-1&&typeof e[s]=="string"?e[s]+=o:e.push(o)}for(;t.length;){let o=/\$([$&\d+])/.exec(t);if(!o)return r(t),e;if(o.index>0&&r(t.slice(0,o.index+(o[1]=="$"?1:0))),o[1]!="$"){let s=o[1]=="&"?0:+o[1];n>=s?e.push({group:s,copy:!0}):(n=s||1e3,e.push({group:s,copy:!1}))}t=t.slice(o.index+o[0].length)}return e}function yq(t){try{return new RegExp(t,kR),!0}catch{return!1}}const D1=new WeakMap;function gc(t){let e=D1.get(t);if(e)return e;let n="";for(let r=0;r<t.childCount;r++){let o=t.child(r);o.isText?n+=o.text:o.isLeaf?n+="":n+=" "+gc(o)+" "}return D1.set(t,n),n}function ba(t,e,n,r,o=0){if(t.inlineContent)return r(t,o);if(!t.isLeaf)if(e>n)for(let s=t.childCount-1,i=o+t.content.size;s>=0&&i>n;s--){let a=t.child(s);if(i-=a.nodeSize,i<e){let l=ba(a,e,n,r,i+1);if(l!=null)return l}}else for(let s=0,i=o;s<t.childCount&&i<n;s++){let a=t.child(s),l=i;if(i+=a.nodeSize,i>e){let c=ba(a,e,n,r,l+1);if(c!=null)return c}}return null}function L1(t,e){let n=t.doc.resolve(e),r=n.nodeBefore,o=n.nodeAfter;return!r||!o||!r.isText||!o.isText?!0:!new RegExp("\\p{L}$","u").test(r.text)||!new RegExp("^\\p{L}","u").test(o.text)}new $n("search");function bh(t,e){try{const r=new fq({search:e,caseSensitive:!0,literal:!0}).findNext(t.state,0);return r?(console.log(" ProseMirror search found text:",{searchText:e.substring(0,50),foundAt:{from:r.from,to:r.to},actualText:t.state.doc.textBetween(r.from,r.to).substring(0,50)}),{from:r.from,to:r.to}):(console.warn(" ProseMirror search: text not found:",e.substring(0,50)),null)}catch(n){return console.error(" ProseMirror search error:",n),null}}function xq(t,e,n){try{let r=e,o=e;for(;o>0;){const a=o-1,l=Math.max(0,a-2),c=Math.min(t.content.size,a+2),u=t.textBetween(l,c),d=a-l;if(d>=0&&d<u.length){const h=u[d],m=d+1<u.length?u[d+1]:"";if(/[.!?]/.test(h)&&/[\s\n]/.test(m)||h===`
`&&d>0&&u[d-1]===`
`)break}r=a,o=a}let s=n;for(o=n;o<t.content.size;){const a=Math.max(0,o-1),l=Math.min(t.content.size,o+3),c=t.textBetween(a,l),u=o-a;if(u>=0&&u<c.length){const d=c[u];if(/[.!?]/.test(d)){s=o+1;break}if(d===`
`&&u+1<c.length&&c[u+1]===`
`){s=o;break}}o++}for(r=Math.max(0,r),s=Math.min(t.content.size,s);r<s;){const a=t.textBetween(r,r+1);if(!/\s/.test(a))break;r++}const i=t.textBetween(r,s);return console.log(" Sentence boundary expansion:",{original:{from:e,to:n},expanded:{from:r,to:s},originalText:t.textBetween(e,n).substring(0,50),expandedText:i.substring(0,50),expansionStats:{expandedBackward:e-r,expandedForward:s-n,finalLength:i.length}}),{from:r,to:s}}catch(r){return console.error(" Sentence expansion error:",r),{from:e,to:n}}}function cf(t,e){const n=bh(t,e);if(!n)return null;const r=xq(t.state.doc,n.from,n.to);return console.log(" Complete find and expand result:",{searchText:e.substring(0,50),foundPosition:n,expandedPosition:r,finalText:t.state.doc.textBetween(r.from,r.to).substring(0,100)}),r}function wq(t,e){let n=null;return t.state.doc.descendants((r,o)=>{const s=r.textContent;if(s.includes(e)){const i=o+s.indexOf(e),a=i+e.length;return n={from:i,to:a},!1}}),n&&console.log(" Fallback search found text:",{searchText:e.substring(0,50),position:n}),n}function _0(t,e){let n=bh(t,e);return n||(console.log(" ProseMirror search failed, trying fallback approach..."),n=wq(t,e)),n}function bq({editor:t,setComments:e,setIsInsightsOpen:n,highlightingManager:r,isAnalysisRunning:o,setIsAnalysisRunning:s,userId:i,fileId:a}){const[l,c]=p.useState(!1),[,u]=p.useState(null),[d,h]=p.useState(null),[m]=p.useState("Highlight important arguments with high emphasis, supporting details with medium emphasis, and transitions with low emphasis"),g=o!==void 0?o:l,v=s||c,x=S=>S?S.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"",y=p.useCallback(async S=>{var C,E,k,T,j,I,V,U,B,W,oe;if(t){i&&await gt(i,Be.FEEDBACK_REQUEST,{analysis_type:S,request_time:new Date().toISOString()},a),v(!0);try{i&&await gt(i,Be.FEEDBACK_ANALYSIS_START,{analysis_type:S,start_time:new Date().toISOString()},a);let H="",te="all";switch(S){case"all":t.chain().focus().selectAll().run(),H=t.state.doc.textContent;break;case"custom":if(H=t.state.doc.textBetween(t.state.selection.from,t.state.selection.to),!H){ge.warning("Please make a Custom Selection first.");return}break;case"paragraph":{ge.warning("Paragraph analysis is not yet supported.");return}}if(!H){console.error("No content selected for analysis");return}const R=t.state.doc.textContent;console.log(" Running analysis with flow highlighting for:",S);const N=await xg({content:H,fullContext:R,targetType:te,flowPrompt:m});if(u(N.data),h(new Date),console.log(" Analysis response received:",{hasComments:!!((E=(C=N.data)==null?void 0:C.comments)!=null&&E.length),commentsCount:((T=(k=N.data)==null?void 0:k.comments)==null?void 0:T.length)||0,hasFlowHighlights:!!((I=(j=N.data)==null?void 0:j.flowHighlights)!=null&&I.length),flowHighlightsCount:((U=(V=N.data)==null?void 0:V.flowHighlights)==null?void 0:U.length)||0}),N.data.flowHighlights&&N.data.flowHighlights.length>0&&r){console.log(" Processing flow highlights as part of regular analysis:",N.data.flowHighlights.length,"highlights"),r.setDocumentContext(R);const $=[];N.data.flowHighlights.forEach((L,P)=>{const q=L.text,Z=cf(t,q);if(Z){const M={id:`flow-${Date.now()}-${P}`,connectionStrength:L.connectionStrength,connectedSentences:[],position:Z};$.push(M);const O=t.state.doc.textBetween(Z.from,Z.to);console.log(` Flow highlight ${P+1} - ProseMirror search success:`,{original:q.substring(0,50),actualHighlighted:O.substring(0,50),position:Z,strength:L.connectionStrength})}else console.warn(" ProseMirror search could not find position for flow highlight text:",q.substring(0,100))}),$.length>0&&(S==="all"?(r.addFlowHighlights($),console.log(" Flow highlights replaced for full document analysis")):console.log(" Skipping flow highlights for custom analysis - will generate full flow next"),console.log(" Flow highlights details:",$.map(L=>({text:L.position?t.state.doc.textBetween(L.position.from,L.position.to):"no position",strength:L.connectionStrength,position:L.position}))))}else console.log(" No flow highlights returned or HighlightingManager not available");if(((B=N.data.comments)==null?void 0:B.length)>0){const $=[];N.data.comments.forEach(L=>{const P=L.highlightedText,q=_0(t,P);if(q){const Z=`comment-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,M={id:Z,content:L.text,createdAt:new Date,createdAtTime:new Date,quotedText:L.highlightedText,isAIFeedback:!0,issueType:L.issueType||"general",...L.suggestedEdit?{suggestedEdit:{original:L.suggestedEdit.original,suggested:L.suggestedEdit.suggested,explanation:L.suggestedEdit.explanation,references:L.suggestedEdit.references||[]}}:{}};t.chain().setTextSelection(q).setComment(Z).run(),$.push(M)}}),e(L=>[...L,...$]),n(!0)}S==="custom"&&(console.log(" Custom analysis complete, generating full document flow highlights..."),await w()),i&&await gt(i,Be.FEEDBACK_ANALYSIS_COMPLETE,{analysis_type:S,completion_time:new Date().toISOString(),comments_generated:((W=N.data.comments)==null?void 0:W.length)||0,flow_highlights_generated:((oe=N.data.flowHighlights)==null?void 0:oe.length)||0,success:!0},a),t&&t.commands.focus("end")}catch(H){console.error("Error running contextual analysis:",H),ge.error("Analysis failed. Please try again."),u(null),i&&await gt(i,Be.FEEDBACK_ANALYSIS_COMPLETE,{analysis_type:S,completion_time:new Date().toISOString(),success:!1,error:H instanceof Error?H.message:"Unknown error"},a)}finally{v(!1)}}},[t,e,n,m,r,v]),w=p.useCallback(async()=>{if(!(!t||!r))try{console.log(" Generating full document flow highlights...");const S=t.state.doc.textContent,C=await xg({content:S,fullContext:S,targetType:"flow",flowPrompt:m});if(C.data.flowHighlights&&C.data.flowHighlights.length>0){console.log(" Processing full document flow highlights:",C.data.flowHighlights.length,"highlights"),r.setDocumentContext(S);const E=[];C.data.flowHighlights.forEach((k,T)=>{const j=k.text,I=cf(t,j);if(I){const V={id:`flow-full-${Date.now()}-${T}`,connectionStrength:k.connectionStrength,connectedSentences:[],position:I};E.push(V)}}),E.length>0&&(r.addFlowHighlights(E),console.log(" Full document flow highlights generated and applied"))}}catch(S){console.error("Error generating full flow highlights:",S)}},[t,r,m]),b=[{value:"all",label:"Check everything",icon:f.jsx(fT,{className:"h-3.5 w-3.5 text-blue-500"}),className:"flex items-center cursor-pointer border-b border-gray-200 border-solid pt-2 pb-2",description:"Get comprehensive feedback for the entire document",action:()=>y("all")},{value:"custom",label:"Check custom selection",description:"Get feedback for the selected text",icon:f.jsx(hT,{className:"h-3.5 w-3.5 text-purple-500"}),action:()=>y("custom")}];return f.jsxs("div",{className:"flex items-center space-x-3",children:[d&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-xs text-muted-foreground flex items-center",children:[f.jsx(dT,{className:"h-3 w-3 mr-1.5"}),f.jsxs("span",{children:["Feedback last updated at ",x(d)]})]}),f.jsx("div",{className:"w-[1px] h-5 bg-border/40 dark:bg-zinc-800 rounded-full"})]}),f.jsx("div",{className:"flex space-x-1 text-sm",children:g?f.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 ",children:[f.jsx(zo,{className:"h-3.5 w-3.5 animate-spin"}),f.jsx("span",{children:"Checking..."})]}):f.jsx(dq,{label:"Check for Feedback",items:b})})]})}const ER=p.createContext(void 0);function Sq({children:t}){const[e,n]=p.useState(null),[r,o]=p.useState(!0);p.useEffect(()=>{(async()=>{const u=localStorage.getItem("coherence-user");if(u)try{const d=JSON.parse(u);n(d)}catch(d){console.error("Error parsing stored user:",d),localStorage.removeItem("coherence-user")}o(!1)})()},[]);const s=async c=>{try{o(!0);const{data:u,error:d}=await dt.from("users").select("*").eq("prolific_id",c).single();if(d&&d.code!=="PGRST116")return console.error("Error fetching user:",d),{error:d};let h;if(u)h=u.id;else{const{data:g,error:v}=await dt.from("users").insert([{prolific_id:c}]).select().single();if(v)return console.error("Error creating user:",v),{error:v};h=g.id}const m={id:h,prolificId:c};return n(m),localStorage.setItem("coherence-user",JSON.stringify(m)),await l(h,"login",{prolificId:c}),{data:m}}catch(u){return console.error("Unexpected error during login:",u),{error:u}}finally{o(!1)}},i=async()=>{e&&await l(e.id,"logout",{}),localStorage.removeItem("coherence-user"),n(null)},a=async()=>{try{const c=crypto.randomUUID(),u=`test_${Date.now()}`,d={id:c,prolificId:u};n(d),localStorage.setItem("coherence-user",JSON.stringify(d));try{await l(c,"login",{prolificId:u,bypass:!0})}catch{console.warn("Could not log bypass login event, but continuing anyway")}return{data:d}}catch(c){return console.error("Error in bypass login:",c),{error:c}}finally{o(!1)}},l=async(c,u,d)=>{try{await dt.from("user_events").insert([{user_id:c,event_type:u,event_data:d}])}catch(h){console.error(`Error logging ${u} event:`,h)}};return f.jsx(ER.Provider,{value:{user:e,loading:r,login:s,logout:i,bypassLogin:a},children:t})}function si(){const t=p.useContext(ER);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Cq(t,e,n){var i;let r;typeof t.createdAt=="object"&&t.createdAt instanceof Date?r=t.createdAt.toISOString():typeof t.createdAt=="string"?r=t.createdAt:r=new Date().toISOString();let o="";t.content!==void 0&&t.content!==null?o=String(t.content):t.text?o=String(t.text):(i=t.suggestedEdit)!=null&&i.explanation?o=t.suggestedEdit.explanation:t.quotedText&&(o=`Comment on: ${t.quotedText}`),console.log("Processing comment for DB:",{id:t.id,originalContent:t.content,processedContent:o,hasText:!!t.text,hasSuggestedEdit:!!t.suggestedEdit});const s={id:t.id.includes("-")&&t.id.length===36?t.id:crypto.randomUUID(),file_id:e,user_id:n,content:o,position_start:t.from||0,position_end:t.to||0,created_at:r,updated_at:new Date().toISOString(),resolved:t.resolved||!1,is_ai_feedback:t.isAIFeedback||!!t.suggestedEdit,issue_type:t.issueType,completion_info:t.completionInfo||[]};return t.suggestedEdit&&(s.original_text=t.suggestedEdit.original||t.quotedText||"",s.suggested_text=t.suggestedEdit.suggested||"",s.explanation=t.suggestedEdit.explanation||""),s}function $1(t){try{console.log("Converting DB comment to UI format:",t);let e,n=t.content;if(t.is_ai_feedback||t.original_text||t.suggested_text||t.explanation)e={original:t.original_text||"",suggested:t.suggested_text||"",explanation:t.explanation||""},t.is_ai_feedback&&(n="AI Suggestion");else try{const o=JSON.parse(t.content);o&&typeof o=="object"&&o.suggestedEdit&&(e=o.suggestedEdit,n="AI Suggestion")}catch{}const r={id:t.id,content:n,from:t.position_start,to:t.position_end,createdAt:new Date(t.created_at),updatedAt:t.updated_at,resolved:t.resolved||!1,quotedText:t.original_text||"",isAIFeedback:t.is_ai_feedback,issueType:t.issue_type,suggestedEdit:e,completionInfo:t.completion_info||[]};return console.log("DB comment converted to UI format:",r),r}catch(e){return console.error("Error converting DB comment to UI format:",e),{id:t.id,content:t.content||"(Error loading comment)",from:t.position_start,to:t.position_end,createdAt:new Date(t.created_at)}}}class R0{constructor(e){Ue(this,"userId");this.userId=e}updateUserId(e){this.userId=e}async saveFile(e,n,r){try{const o=new Date().toISOString();if(r){const{data:s,error:i}=await dt.from("files").update({title:e,content:n,updated_at:o}).eq("id",r).eq("user_id",this.userId).select().single();return i?(console.error("Error updating file:",i),null):(await gt(this.userId,Be.FILE_SAVE,{file_id:r,title:e,action:"update"}),s)}else{const{data:s,error:i}=await dt.from("files").insert([{user_id:this.userId,title:e,content:n,created_at:o,updated_at:o}]).select().single();return i?(console.error("Error creating file:",i),null):(await gt(this.userId,Be.FILE_SAVE,{file_id:s.id,title:e,action:"create"}),s)}}catch(o){return console.error("Failed to save file:",o),null}}async getFile(e){try{const{data:n,error:r}=await dt.from("files").select("*").eq("id",e).eq("user_id",this.userId).single();return r?(console.error("Error getting file:",r),null):(await gt(this.userId,Be.FILE_OPEN,{file_id:e,title:n.title}),n)}catch(n){return console.error("Failed to get file:",n),null}}async getAllFiles(){try{const{data:e,error:n}=await dt.from("files").select("*").eq("user_id",this.userId).order("updated_at",{ascending:!1});return n?(console.error("Error getting files:",n),[]):e||[]}catch(e){return console.error("Failed to get files:",e),[]}}async deleteFile(e){try{const{error:n}=await dt.from("files").delete().eq("id",e).eq("user_id",this.userId);return n?(console.error("Error deleting file:",n),!1):(await gt(this.userId,Be.FILE_SAVE,{file_id:e,action:"delete"}),!0)}catch(n){return console.error("Failed to delete file:",n),!1}}async getComments(e){try{if(console.log(`Getting comments for file ${e} with userId ${this.userId}`),!e||typeof e!="string")return console.error("Invalid fileId for getting comments:",e),[];const{data:n,error:r}=await dt.from("comments").select("*").eq("file_id",e).order("created_at",{ascending:!0});return r?(console.error("Error getting comments:",r),[]):(console.log(`Retrieved ${(n==null?void 0:n.length)||0} comments for file ${e}:`,n),n||[])}catch(n){return console.error("Failed to get comments:",n),[]}}async addComment(e,n,r,o){try{const s=new Date().toISOString(),{data:i,error:a}=await dt.from("comments").insert([{file_id:e,user_id:this.userId,content:n,position_start:r,position_end:o,created_at:s,updated_at:s,completion_info:[]}]).select().single();return a?(console.error("Error adding comment:",a),null):(await gt(this.userId,Be.COMMENT_ADD,{file_id:e,comment_id:i.id}),i)}catch(s){return console.error("Failed to add comment:",s),null}}async updateComment(e,n,r){try{const s={updated_at:new Date().toISOString()};n!==void 0&&(s.content=n),r!==void 0&&(s.resolved=r);const{data:i,error:a}=await dt.from("comments").update(s).eq("id",e).eq("user_id",this.userId).select().single();return a?(console.error("Error updating comment:",a),null):(await gt(this.userId,Be.COMMENT_EDIT,{comment_id:e,file_id:i.file_id}),i)}catch(o){return console.error("Failed to update comment:",o),null}}async deleteComment(e){try{const{data:n,error:r}=await dt.from("comments").select("file_id").eq("id",e).eq("user_id",this.userId).single();if(r)return console.error("Error fetching comment:",r),!1;const{error:o}=await dt.from("comments").delete().eq("id",e).eq("user_id",this.userId);return o?(console.error("Error deleting comment:",o),!1):(await gt(this.userId,Be.COMMENT_DELETE,{comment_id:e,file_id:n.file_id}),!0)}catch(n){return console.error("Failed to delete comment:",n),!1}}async saveComments(e,n){try{if(console.log(`Saving ${n.length} comments for file ${e}`),console.log("User ID for comment saving:",this.userId),!e||typeof e!="string"||e.length!==36)return console.error("Invalid fileId for saving comments:",e),!1;const{error:r}=await dt.from("comments").delete().eq("file_id",e);if(r)return console.error("Error deleting existing comments:",r),!1;if(n.length>0)try{const o=[];for(const i of n)try{if(!i||!i.id){console.warn("Skipping invalid comment (missing ID):",i);continue}const a=Cq(i,e,this.userId);a.content||(console.warn("Comment has null content, setting to empty string:",i),a.content=""),o.push(a)}catch(a){console.error("Error converting comment - skipping:",a,i)}if(console.log(`Inserting ${o.length} DB comments`),o.length===0)return console.warn("No valid comments to save after conversion"),!0;const s=20;for(let i=0;i<o.length;i+=s){const a=o.slice(i,i+s);console.log(`Inserting batch ${i/s+1} of ${Math.ceil(o.length/s)}`);const{error:l}=await dt.from("comments").insert(a);if(l){console.error("Error saving comments batch:",l);for(const c of a)try{await dt.from("comments").insert([c])}catch(u){console.error("Failed to insert single comment:",c,u)}}}}catch(o){return console.error("Error in comment insert process:",o),!1}return await gt(this.userId,Be.FILE_SAVE,{file_id:e,comment_count:n.length,action:"save_comments"}),console.log(`Successfully saved ${n.length} comments`),!0}catch(r){return console.error("Failed to save comments:",r),!1}}}function nr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function qs(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const TR=6048e5,kq=864e5;let Eq={};function Sh(){return Eq}function vc(t,e){var a,l,c,u;const n=Sh(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=nr(t),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function uf(t){return vc(t,{weekStartsOn:1})}function NR(t){const e=nr(t),n=e.getFullYear(),r=qs(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=uf(r),s=qs(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=uf(s);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function F1(t){const e=nr(t);return e.setHours(0,0,0,0),e}function z1(t){const e=nr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Tq(t,e){const n=F1(t),r=F1(e),o=+n-z1(n),s=+r-z1(r);return Math.round((o-s)/kq)}function Nq(t){const e=NR(t),n=qs(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),uf(n)}function Mq(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Pq(t){if(!Mq(t)&&typeof t!="number")return!1;const e=nr(t);return!isNaN(Number(e))}function _q(t){const e=nr(t),n=qs(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Rq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Aq=(t,e,n)=>{let r;const o=Rq[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Xp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Oq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Iq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Dq={date:Xp({formats:Oq,defaultWidth:"full"}),time:Xp({formats:jq,defaultWidth:"full"}),dateTime:Xp({formats:Iq,defaultWidth:"full"})},Lq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$q=(t,e,n,r)=>Lq[t];function Za(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const Fq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Uq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wq=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Kq={ordinalNumber:Wq,era:Za({values:Fq,defaultWidth:"wide"}),quarter:Za({values:zq,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Za({values:Bq,defaultWidth:"wide"}),day:Za({values:Hq,defaultWidth:"wide"}),dayPeriod:Za({values:Uq,defaultWidth:"wide",formattingValues:Vq,defaultFormattingWidth:"wide"})};function el(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Gq(a,d=>d.test(i)):qq(a,d=>d.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(i.length);return{value:c,rest:u}}}function qq(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Gq(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Yq(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const Jq=/^(\d+)(th|st|nd|rd)?/i,Xq=/\d+/i,Qq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zq={any:[/^b/i,/^(a|c)/i]},eG={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tG={any:[/1/i,/2/i,/3/i,/4/i]},nG={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oG={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sG={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iG={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aG={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lG={ordinalNumber:Yq({matchPattern:Jq,parsePattern:Xq,valueCallback:t=>parseInt(t,10)}),era:el({matchPatterns:Qq,defaultMatchWidth:"wide",parsePatterns:Zq,defaultParseWidth:"any"}),quarter:el({matchPatterns:eG,defaultMatchWidth:"wide",parsePatterns:tG,defaultParseWidth:"any",valueCallback:t=>t+1}),month:el({matchPatterns:nG,defaultMatchWidth:"wide",parsePatterns:rG,defaultParseWidth:"any"}),day:el({matchPatterns:oG,defaultMatchWidth:"wide",parsePatterns:sG,defaultParseWidth:"any"}),dayPeriod:el({matchPatterns:iG,defaultMatchWidth:"any",parsePatterns:aG,defaultParseWidth:"any"})},cG={code:"en-US",formatDistance:Aq,formatLong:Dq,formatRelative:$q,localize:Kq,match:lG,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uG(t){const e=nr(t);return Tq(e,_q(e))+1}function dG(t){const e=nr(t),n=+uf(e)-+Nq(e);return Math.round(n/TR)+1}function MR(t,e){var u,d,h,m;const n=nr(t),r=n.getFullYear(),o=Sh(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??o.firstWeekContainsDate??((m=(h=o.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,i=qs(t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=vc(i,e),l=qs(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=vc(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function fG(t,e){var a,l,c,u;const n=Sh(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,o=MR(t,e),s=qs(t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),vc(s,e)}function hG(t,e){const n=nr(t),r=+vc(n,e)-+fG(n,e);return Math.round(r/TR)+1}function $e(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const to={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return $e(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):$e(n+1,2)},d(t,e){return $e(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return $e(t.getHours()%12||12,e.length)},H(t,e){return $e(t.getHours(),e.length)},m(t,e){return $e(t.getMinutes(),e.length)},s(t,e){return $e(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return $e(o,e.length)}},bi={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},B1={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return to.y(t,e)},Y:function(t,e,n,r){const o=MR(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return $e(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):$e(s,e.length)},R:function(t,e){const n=NR(t);return $e(n,e.length)},u:function(t,e){const n=t.getFullYear();return $e(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return $e(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return $e(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return to.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return $e(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=hG(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):$e(o,e.length)},I:function(t,e,n){const r=dG(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):$e(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):to.d(t,e)},D:function(t,e,n){const r=uG(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):$e(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return $e(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return $e(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return $e(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=bi.noon:r===0?o=bi.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=bi.evening:r>=12?o=bi.afternoon:r>=4?o=bi.morning:o=bi.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return to.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):to.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):$e(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):$e(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):to.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):to.s(t,e)},S:function(t,e){return to.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return U1(r);case"XXXX":case"XX":return fs(r);case"XXXXX":case"XXX":default:return fs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return U1(r);case"xxxx":case"xx":return fs(r);case"xxxxx":case"xxx":default:return fs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+H1(r,":");case"OOOO":default:return"GMT"+fs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+H1(r,":");case"zzzz":default:return"GMT"+fs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return $e(r,e.length)},T:function(t,e,n){const r=t.getTime();return $e(r,e.length)}};function H1(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+$e(s,2)}function U1(t,e){return t%60===0?(t>0?"-":"+")+$e(Math.abs(t)/60,2):fs(t,e)}function fs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=$e(Math.trunc(r/60),2),s=$e(r%60,2);return n+o+e+s}const V1=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PR=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},pG=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return V1(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",V1(r,e)).replace("{{time}}",PR(o,e))},mG={p:PR,P:pG},gG=/^D+$/,vG=/^Y+$/,yG=["D","DD","YY","YYYY"];function xG(t){return gG.test(t)}function wG(t){return vG.test(t)}function bG(t,e,n){const r=SG(t,e,n);if(console.warn(r),yG.includes(t))throw new RangeError(r)}function SG(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const CG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EG=/^'([^]*?)'?$/,TG=/''/g,NG=/[a-zA-Z]/;function MG(t,e,n){var u,d,h,m;const r=Sh(),o=r.locale??cG,s=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=r.weekStartsOn??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,a=nr(t);if(!Pq(a))throw new RangeError("Invalid time value");let l=e.match(kG).map(g=>{const v=g[0];if(v==="p"||v==="P"){const x=mG[v];return x(g,o.formatLong)}return g}).join("").match(CG).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:PG(g)};if(B1[v])return{isToken:!0,value:g};if(v.match(NG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(g=>{if(!g.isToken)return g.value;const v=g.value;(wG(v)||xG(v))&&bG(v,e,String(t));const x=B1[v[0]];return x(a,v,o.localize,c)}).join("")}function PG(t){const e=t.match(EG);return e?e[1].replace(TG,"'"):t}function _G({isOpen:t,onClose:e,onFileSelect:n,eventBatcher:r}){const[o,s]=p.useState([]),[i,a]=p.useState(!0),{user:l}=si();p.useEffect(()=>{(async()=>{if(l&&t){a(!0);try{const m=await new R0(l.id).getAllFiles();s(m),r==null||r.addEvent(Be.FILE_OPEN,{action:"view_file_list",file_count:m.length})}catch(h){console.error("Error loading files:",h)}finally{a(!1)}}})()},[l,t,r]);const c=d=>{n(d),e()},u=d=>{try{const h=new Date(d);return MG(h,"MMM d, yyyy h:mm a")}catch{return d}};return f.jsx(sq,{open:t,onOpenChange:e,children:f.jsxs(mR,{className:"sm:max-w-[525px]",children:[f.jsxs(gR,{children:[f.jsx(yR,{children:"Your Documents"}),f.jsx(xR,{children:"Select a document to load"})]}),f.jsx("div",{className:"py-4",children:i?f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsx(zo,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.length===0?f.jsx("div",{className:"text-center py-8 text-muted-foreground",children:f.jsx("p",{children:"No saved documents found"})}):f.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2",children:o.map(d=>f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>c(d),children:[f.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-md",children:f.jsx(fT,{className:"h-5 w-5 text-blue-700 dark:text-blue-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h4",{className:"font-medium text-sm truncate",children:d.title}),f.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(w4,{className:"h-3 w-3"}),f.jsxs("span",{children:["Created: ",u(d.created_at)]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(dT,{className:"h-3 w-3"}),f.jsxs("span",{children:["Updated: ",u(d.updated_at)]})]})]})]})]},d.id))})}),f.jsx(vR,{children:f.jsx(ve,{variant:"outline",onClick:e,children:"Cancel"})})]})})}function RG({editor:t,documentTitle:e,setDocumentTitle:n,comments:r,isInsightsOpen:o,setIsInsightsOpen:s,setIsHelpOpen:i,isHelpOpen:a,setComments:l,eventBatcher:c,currentFileId:u,setCurrentFileId:d,onLoadFile:h,highlightingManager:m,isAnalysisRunning:g,setIsAnalysisRunning:v,userId:x}){const[y,w]=p.useState(!1),[b,S]=p.useState(!1),[C,E]=p.useState(!0),[k,T]=p.useState(!1),j=navigator.platform.toUpperCase().indexOf("MAC")>=0,{user:I}=si(),[V,U]=p.useState(null),B=()=>f.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M18.715 13.186C18.29 11.858 17.384 10.607 16 9.5c-2-1.6-3.5-4-4-6.5a10.7 10.7 0 0 1-.884 2.586"}),f.jsx("path",{d:"m2 2 20 20"}),f.jsx("path",{d:"M8.795 8.797A11 11 0 0 1 8 9.5C6 11.1 5 13 5 15a7 7 0 0 0 13.222 3.208"})]});p.useEffect(()=>{U(I?new R0(I.id):null)},[I]),p.useEffect(()=>{m&&C&&(console.log(" Syncing highlighting manager with initial flow mode state"),m.switchMode("flow"))},[m]);const W=p.useCallback(async()=>{if(!t||!I)return;w(!0);const $=t.getHTML();try{if(localStorage.setItem("ripple-doc",JSON.stringify({title:e,content:$,comments:r,lastSaved:new Date().toISOString()})),V){console.log("Comments to save:",r);const L=await V.saveFile(e,$,u||void 0);if(L&&d){d(L.id);try{await V.saveComments(L.id,r),ge.success("Document saved to cloud"),c==null||c.addEvent(Be.FILE_SAVE,{file_id:L.id,title:e,comment_count:r.length,success:!0})}catch(P){console.error("Error saving comments:",P),ge.error("File saved but failed to save comments"),c==null||c.addEvent(Be.FILE_SAVE,{file_id:L.id,title:e,success:!0,comments_success:!1,error:String(P)})}}else ge.success("Document saved locally")}else ge.success("Document saved locally")}catch(L){console.error("Error saving document:",L),ge.error("Failed to save document"),c==null||c.addEvent(Be.ERROR,{action:"save_document",error:String(L)})}finally{w(!1)}},[t,e,r,I,V,u,d,c]),oe=p.useCallback(async()=>{if(!t||!I)return;w(!0);const $=t.getHTML();try{const L=new Date().toISOString().split("T")[0],P=`${e} - ${L}`,q=`ripple-doc-${Date.now()}`;if(localStorage.setItem(q,JSON.stringify({title:P,content:$,comments:r,lastSaved:new Date().toISOString()})),V){const Z=await V.saveFile(P,$);if(Z&&d){d(Z.id);try{await V.saveComments(Z.id,r),n(P),ge.success("Saved as new document in cloud"),c==null||c.addEvent(Be.FILE_SAVE,{file_id:Z.id,title:P,comment_count:r.length,success:!0,action:"save_as"})}catch(M){console.error("Error saving comments:",M),n(P),ge.error("New file saved but failed to save comments"),c==null||c.addEvent(Be.FILE_SAVE,{file_id:Z.id,title:P,success:!0,comments_success:!1,error:String(M),action:"save_as"})}}else n(P),ge.error("Failed to save to cloud, but saved locally"),c==null||c.addEvent(Be.FILE_SAVE,{title:P,success:!1,error:"Database save failed",action:"save_as"})}else n(P),ge.success("Document saved as new copy locally")}catch(L){console.error("Error saving document:",L),ge.error("Failed to save document"),c==null||c.addEvent(Be.ERROR,{action:"save_as_document",error:String(L)})}finally{w(!1)}},[t,e,r,I,V,n,d,c]),H=()=>{S(!0)},te=$=>{h&&(h($),c==null||c.addEvent(Be.FILE_OPEN,{file_id:$.id,title:$.title,action:"load_file"}))},R=$=>{if(E($),m){if(k){console.log(" Flow mode state updated but Write Mode is active - keeping write mode");return}$?(console.log(" FLOW MODE ACTIVATED - Switching to flow highlights"),m.switchMode("flow"),m.getHighlightData("flow").size===0&&ge.info("No flow highlights yet. Check for feedback to generate them.",{duration:4e3})):m.switchMode("comments")}else console.warn("HighlightingManager not available for flow toggle");console.log("Flow mode:",$?"enabled":"disabled")},N=$=>{T($),m?$?(console.log(" WRITE MODE ACTIVATED - Switching to write mode, hiding all highlights"),m.switchMode("write"),ge.info("Write mode activated - Focus on your writing!",{duration:3e3})):(console.log(" WRITE MODE DEACTIVATED - Restoring normal mode"),C?m.switchMode("flow"):m.switchMode("comments"),ge.info("Write mode deactivated",{duration:2e3})):console.warn("HighlightingManager not available for write mode toggle"),console.log("Write mode:",$?"enabled":"disabled")};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"px-4 py-2 border-b border-border/40 bg-blue-100/60 dark:bg-blue-900/10 backdrop-blur supports-[backdrop-filter]:bg-blue-100/40 dark:supports-[backdrop-filter]:bg-blue-900/5",children:f.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"flex items-center space-x-2",children:f.jsx("span",{className:"text-sm font-semibold",children:"Ripple"})}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx("input",{type:"text",value:e,onChange:$=>n($.target.value),placeholder:"Untitled document",className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 p-0 h-6 text-stone-800 dark:text-zinc-100"}),f.jsx("div",{className:"bg-white dark:bg-transparent rounded-lg shadow-sm dark:shadow-none",children:f.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>i(!a),className:"h-7 px-3 text-xs flex items-center space-x-1",children:[f.jsx(uT,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Help"})]})}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx(m_,{}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsxs(ve,{variant:"ghost",size:"sm",onClick:H,className:"h-7 px-3 text-xs flex items-center space-x-2",children:[f.jsx(Sb,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Open"})]}),f.jsxs(ve,{variant:"ghost",size:"sm",onClick:W,disabled:y,className:"h-7 px-3 text-xs flex items-center space-x-2",children:[f.jsx(Sb,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Save"}),f.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:j?"S":"Ctrl+S"})]}),f.jsxs(ve,{variant:"ghost",size:"sm",onClick:oe,disabled:y,className:"h-7 px-3 text-xs flex items-center space-x-2",children:[f.jsx(M4,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Save As"})]})]})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{}),f.jsx(bq,{editor:t,setComments:l,setIsInsightsOpen:s,highlightingManager:m||void 0,isAnalysisRunning:g,setIsAnalysisRunning:v,userId:x,fileId:u||void 0}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx("div",{className:"flex items-center space-x-2 bg-white dark:bg-transparent rounded-lg px-3 py-1.5 shadow-sm dark:shadow-none",children:f.jsx(S1,{checked:C,onCheckedChange:R,label:"Flow Mode",onIcon:f.jsx(vg,{className:"h-2.5 w-2.5",strokeWidth:2.5}),offIcon:f.jsx(B,{}),activeColor:"bg-blue-500",size:"sm"})}),f.jsx("div",{className:"flex items-center space-x-2 bg-white dark:bg-transparent rounded-lg px-3 py-1.5 shadow-sm dark:shadow-none",children:f.jsx(S1,{checked:k,onCheckedChange:N,label:"Write Mode",onIcon:f.jsx(Nl,{className:"h-2.5 w-2.5",strokeWidth:2.5}),offIcon:f.jsx(I4,{}),activeColor:"bg-green-500",size:"sm"})}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx("div",{className:"bg-white dark:bg-transparent rounded-lg shadow-sm dark:shadow-none",children:f.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>s(!o),className:"h-7 px-3 text-xs flex items-center space-x-1",children:[f.jsx(Ty,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Toggle Suggestions"})]})})]})]})}),h&&f.jsx(_G,{isOpen:b,onClose:()=>S(!1),onFileSelect:te,eventBatcher:c})]})}function W1(t,[e,n]){return Math.min(n,Math.max(e,t))}function AG(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var OG=[" ","Enter","ArrowUp","ArrowDown"],jG=[" ","Enter"],qc="Select",[Ch,kh,IG]=Qy(qc),[Oa,AX]=Sn(qc,[IG,yr]),Eh=yr(),[DG,ts]=Oa(qc),[LG,$G]=Oa(qc),_R=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:o,onOpenChange:s,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:m,form:g}=t,v=Eh(e),[x,y]=p.useState(null),[w,b]=p.useState(null),[S,C]=p.useState(!1),E=Pc(c),[k=!1,T]=Br({prop:r,defaultProp:o,onChange:s}),[j,I]=Br({prop:i,defaultProp:a,onChange:l}),V=p.useRef(null),U=x?g||!!x.closest("form"):!0,[B,W]=p.useState(new Set),oe=Array.from(B).map(H=>H.props.value).join(";");return f.jsx(Dc,{...v,children:f.jsxs(DG,{required:m,scope:e,trigger:x,onTriggerChange:y,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:bt(),value:j,onValueChange:I,open:k,onOpenChange:T,dir:E,triggerPointerDownPosRef:V,disabled:h,children:[f.jsx(Ch.Provider,{scope:e,children:f.jsx(LG,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(H=>{W(te=>new Set(te).add(H))},[]),onNativeOptionRemove:p.useCallback(H=>{W(te=>{const R=new Set(te);return R.delete(H),R})},[]),children:n})}),U?f.jsxs(tA,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:d,value:j,onChange:H=>I(H.target.value),disabled:h,form:g,children:[j===void 0?f.jsx("option",{value:""}):null,Array.from(B)]},oe):null]})})};_R.displayName=qc;var RR="SelectTrigger",AR=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,s=Eh(n),i=ts(RR,n),a=i.disabled||r,l=ze(e,i.onTriggerChange),c=kh(n),u=p.useRef("touch"),[d,h,m]=nA(v=>{const x=c().filter(b=>!b.disabled),y=x.find(b=>b.value===i.value),w=rA(x,v,y);w!==void 0&&i.onValueChange(w.value)}),g=v=>{a||(i.onOpenChange(!0),m()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return f.jsx(_a,{asChild:!0,...s,children:f.jsx(Ce.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":eA(i.value)?"":void 0,...o,ref:l,onClick:le(o.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&g(v)}),onPointerDown:le(o.onPointerDown,v=>{u.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:le(o.onKeyDown,v=>{const x=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(x&&v.key===" ")&&OG.includes(v.key)&&(g(),v.preventDefault())})})})});AR.displayName=RR;var OR="SelectValue",jR=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...a}=t,l=ts(OR,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=ze(e,l.onValueNodeChange);return Je(()=>{c(u)},[c,u]),f.jsx(Ce.span,{...a,ref:d,style:{pointerEvents:"none"},children:eA(l.value)?f.jsx(f.Fragment,{children:i}):s})});jR.displayName=OR;var FG="SelectIcon",IR=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...o}=t;return f.jsx(Ce.span,{"aria-hidden":!0,...o,ref:e,children:r||""})});IR.displayName=FG;var zG="SelectPortal",DR=t=>f.jsx(Fc,{asChild:!0,...t});DR.displayName=zG;var Gs="SelectContent",LR=p.forwardRef((t,e)=>{const n=ts(Gs,t.__scopeSelect),[r,o]=p.useState();if(Je(()=>{o(new DocumentFragment)},[]),!n.open){const s=r;return s?Yo.createPortal(f.jsx($R,{scope:t.__scopeSelect,children:f.jsx(Ch.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),s):null}return f.jsx(FR,{...t,ref:e})});LR.displayName=Gs;var Bn=10,[$R,ns]=Oa(Gs),BG="SelectContentImpl",FR=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=t,w=ts(Gs,n),[b,S]=p.useState(null),[C,E]=p.useState(null),k=ze(e,D=>S(D)),[T,j]=p.useState(null),[I,V]=p.useState(null),U=kh(n),[B,W]=p.useState(!1),oe=p.useRef(!1);p.useEffect(()=>{if(b)return Oc(b)},[b]),_c();const H=p.useCallback(D=>{const[re,...z]=U().map(ne=>ne.ref.current),[G]=z.slice(-1),se=document.activeElement;for(const ne of D)if(ne===se||(ne==null||ne.scrollIntoView({block:"nearest"}),ne===re&&C&&(C.scrollTop=0),ne===G&&C&&(C.scrollTop=C.scrollHeight),ne==null||ne.focus(),document.activeElement!==se))return},[U,C]),te=p.useCallback(()=>H([T,b]),[H,T,b]);p.useEffect(()=>{B&&te()},[B,te]);const{onOpenChange:R,triggerPointerDownPosRef:N}=w;p.useEffect(()=>{if(b){let D={x:0,y:0};const re=G=>{var se,ne;D={x:Math.abs(Math.round(G.pageX)-(((se=N.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(G.pageY)-(((ne=N.current)==null?void 0:ne.y)??0))}},z=G=>{D.x<=10&&D.y<=10?G.preventDefault():b.contains(G.target)||R(!1),document.removeEventListener("pointermove",re),N.current=null};return N.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",z,{capture:!0})}}},[b,R,N]),p.useEffect(()=>{const D=()=>R(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[R]);const[$,L]=nA(D=>{const re=U().filter(se=>!se.disabled),z=re.find(se=>se.ref.current===document.activeElement),G=rA(re,D,z);G&&setTimeout(()=>G.ref.current.focus())}),P=p.useCallback((D,re,z)=>{const G=!oe.current&&!z;(w.value!==void 0&&w.value===re||G)&&(j(D),G&&(oe.current=!0))},[w.value]),q=p.useCallback(()=>b==null?void 0:b.focus(),[b]),Z=p.useCallback((D,re,z)=>{const G=!oe.current&&!z;(w.value!==void 0&&w.value===re||G)&&V(D)},[w.value]),M=r==="popper"?Qg:zR,O=M===Qg?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return f.jsx($R,{scope:n,content:b,viewport:C,onViewportChange:E,itemRefCallback:P,selectedItem:T,onItemLeave:q,itemTextRefCallback:Z,focusSelectedItem:te,selectedItemText:I,position:r,isPositioned:B,searchRef:$,children:f.jsx(oh,{as:Bo,allowPinchZoom:!0,children:f.jsx(th,{asChild:!0,trapped:w.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:le(o,D=>{var re;(re=w.trigger)==null||re.focus({preventScroll:!0}),D.preventDefault()}),children:f.jsx(Pa,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:f.jsx(M,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:D=>D.preventDefault(),...y,...O,onPlaced:()=>W(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:le(y.onKeyDown,D=>{const re=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!re&&D.key.length===1&&L(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let G=U().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(D.key)&&(G=G.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const se=D.target,ne=G.indexOf(se);G=G.slice(ne+1)}setTimeout(()=>H(G)),D.preventDefault()}})})})})})})});FR.displayName=BG;var HG="SelectItemAlignedPosition",zR=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,s=ts(Gs,n),i=ns(Gs,n),[a,l]=p.useState(null),[c,u]=p.useState(null),d=ze(e,k=>u(k)),h=kh(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:w}=i,b=p.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&v&&x&&y){const k=s.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(s.dir!=="rtl"){const se=I.left-T.left,ne=j.left-se,pe=k.left-ne,_=k.width+pe,Ne=Math.max(_,T.width),Pe=window.innerWidth-Bn,De=W1(ne,[Bn,Math.max(Bn,Pe-Ne)]);a.style.minWidth=_+"px",a.style.left=De+"px"}else{const se=T.right-I.right,ne=window.innerWidth-j.right-se,pe=window.innerWidth-k.right-ne,_=k.width+pe,Ne=Math.max(_,T.width),Pe=window.innerWidth-Bn,De=W1(ne,[Bn,Math.max(Bn,Pe-Ne)]);a.style.minWidth=_+"px",a.style.right=De+"px"}const V=h(),U=window.innerHeight-Bn*2,B=v.scrollHeight,W=window.getComputedStyle(c),oe=parseInt(W.borderTopWidth,10),H=parseInt(W.paddingTop,10),te=parseInt(W.borderBottomWidth,10),R=parseInt(W.paddingBottom,10),N=oe+H+B+R+te,$=Math.min(x.offsetHeight*5,N),L=window.getComputedStyle(v),P=parseInt(L.paddingTop,10),q=parseInt(L.paddingBottom,10),Z=k.top+k.height/2-Bn,M=U-Z,O=x.offsetHeight/2,D=x.offsetTop+O,re=oe+H+D,z=N-re;if(re<=Z){const se=V.length>0&&x===V[V.length-1].ref.current;a.style.bottom="0px";const ne=c.clientHeight-v.offsetTop-v.offsetHeight,pe=Math.max(M,O+(se?q:0)+ne+te),_=re+pe;a.style.height=_+"px"}else{const se=V.length>0&&x===V[0].ref.current;a.style.top="0px";const pe=Math.max(Z,oe+v.offsetTop+(se?P:0)+O)+z;a.style.height=pe+"px",v.scrollTop=re-Z+v.offsetTop}a.style.margin=`${Bn}px 0`,a.style.minHeight=$+"px",a.style.maxHeight=U+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,a,c,v,x,y,s.dir,r]);Je(()=>b(),[b]);const[S,C]=p.useState();Je(()=>{c&&C(window.getComputedStyle(c).zIndex)},[c]);const E=p.useCallback(k=>{k&&g.current===!0&&(b(),w==null||w(),g.current=!1)},[b,w]);return f.jsx(VG,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:E,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:f.jsx(Ce.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});zR.displayName=HG;var UG="SelectPopperPosition",Qg=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Bn,...s}=t,i=Eh(n);return f.jsx(Lc,{...i,...s,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Qg.displayName=UG;var[VG,A0]=Oa(Gs,{}),Zg="SelectViewport",BR=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...o}=t,s=ns(Zg,n),i=A0(Zg,n),a=ze(e,s.onViewportChange),l=p.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(Ch.Slot,{scope:n,children:f.jsx(Ce.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:le(o.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&d){const m=Math.abs(l.current-u.scrollTop);if(m>0){const g=window.innerHeight-Bn*2,v=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),y=Math.max(v,x);if(y<g){const w=y+m,b=Math.min(g,w),S=w-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});BR.displayName=Zg;var HR="SelectGroup",[WG,KG]=Oa(HR),qG=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=bt();return f.jsx(WG,{scope:n,id:o,children:f.jsx(Ce.div,{role:"group","aria-labelledby":o,...r,ref:e})})});qG.displayName=HR;var UR="SelectLabel",VR=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=KG(UR,n);return f.jsx(Ce.div,{id:o.id,...r,ref:e})});VR.displayName=UR;var df="SelectItem",[GG,WR]=Oa(df),KR=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:s,...i}=t,a=ts(df,n),l=ns(df,n),c=a.value===r,[u,d]=p.useState(s??""),[h,m]=p.useState(!1),g=ze(e,w=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,w,r,o)}),v=bt(),x=p.useRef("touch"),y=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(GG,{scope:n,value:r,disabled:o,textId:v,isSelected:c,onItemTextChange:p.useCallback(w=>{d(b=>b||((w==null?void 0:w.textContent)??"").trim())},[]),children:f.jsx(Ch.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:f.jsx(Ce.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:g,onFocus:le(i.onFocus,()=>m(!0)),onBlur:le(i.onBlur,()=>m(!1)),onClick:le(i.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:le(i.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:le(i.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:le(i.onPointerMove,w=>{var b;x.current=w.pointerType,o?(b=l.onItemLeave)==null||b.call(l):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(i.onPointerLeave,w=>{var b;w.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:le(i.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(jG.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});KR.displayName=df;var hl="SelectItemText",qR=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,...s}=t,i=ts(hl,n),a=ns(hl,n),l=WR(hl,n),c=$G(hl,n),[u,d]=p.useState(null),h=ze(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),m=u==null?void 0:u.textContent,g=p.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=c;return Je(()=>(v(g),()=>x(g)),[v,x,g]),f.jsxs(f.Fragment,{children:[f.jsx(Ce.span,{id:l.textId,...s,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Yo.createPortal(s.children,i.valueNode):null]})});qR.displayName=hl;var GR="SelectItemIndicator",YR=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return WR(GR,n).isSelected?f.jsx(Ce.span,{"aria-hidden":!0,...r,ref:e}):null});YR.displayName=GR;var ev="SelectScrollUpButton",JR=p.forwardRef((t,e)=>{const n=ns(ev,t.__scopeSelect),r=A0(ev,t.__scopeSelect),[o,s]=p.useState(!1),i=ze(e,r.onScrollButtonChange);return Je(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?f.jsx(QR,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});JR.displayName=ev;var tv="SelectScrollDownButton",XR=p.forwardRef((t,e)=>{const n=ns(tv,t.__scopeSelect),r=A0(tv,t.__scopeSelect),[o,s]=p.useState(!1),i=ze(e,r.onScrollButtonChange);return Je(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?f.jsx(QR,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});XR.displayName=tv;var QR=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,s=ns("SelectScrollButton",n),i=p.useRef(null),a=kh(n),l=p.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),Je(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),f.jsx(Ce.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:le(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:le(o.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:le(o.onPointerLeave,()=>{l()})})}),YG="SelectSeparator",ZR=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return f.jsx(Ce.div,{"aria-hidden":!0,...r,ref:e})});ZR.displayName=YG;var nv="SelectArrow",JG=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Eh(n),s=ts(nv,n),i=ns(nv,n);return s.open&&i.position==="popper"?f.jsx($c,{...o,...r,ref:e}):null});JG.displayName=nv;function eA(t){return t===""||t===void 0}var tA=p.forwardRef((t,e)=>{const{value:n,...r}=t,o=p.useRef(null),s=ze(e,o),i=AG(n);return p.useEffect(()=>{const a=o.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[i,n]),f.jsx(d0,{asChild:!0,children:f.jsx("select",{...r,ref:s,defaultValue:n})})});tA.displayName="BubbleSelect";function nA(t){const e=Ke(t),n=p.useRef(""),r=p.useRef(0),o=p.useCallback(i=>{const a=n.current+i;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,s]}function rA(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=XG(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function XG(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var QG=_R,oA=AR,ZG=jR,eY=IR,tY=DR,sA=LR,nY=BR,iA=VR,aA=KR,rY=qR,oY=YR,lA=JR,cA=XR,uA=ZR;const sY=QG,iY=ZG,dA=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(oA,{ref:r,className:ie("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,f.jsx(eY,{asChild:!0,children:f.jsx(A6,{className:"h-4 w-4 opacity-50"})})]}));dA.displayName=oA.displayName;const fA=p.forwardRef(({className:t,...e},n)=>f.jsx(lA,{ref:n,className:ie("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx($6,{})}));fA.displayName=lA.displayName;const hA=p.forwardRef(({className:t,...e},n)=>f.jsx(cA,{ref:n,className:ie("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(I6,{})}));hA.displayName=cA.displayName;const pA=p.forwardRef(({className:t,children:e,position:n="popper",...r},o)=>f.jsx(tY,{children:f.jsxs(sA,{ref:o,className:ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[f.jsx(fA,{}),f.jsx(nY,{className:ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),f.jsx(hA,{})]})}));pA.displayName=sA.displayName;const aY=p.forwardRef(({className:t,...e},n)=>f.jsx(iA,{ref:n,className:ie("px-2 py-1.5 text-sm font-semibold",t),...e}));aY.displayName=iA.displayName;const rv=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(aA,{ref:r,className:ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(oY,{children:f.jsx(Xy,{className:"h-4 w-4"})})}),f.jsx(rY,{children:e})]}));rv.displayName=aA.displayName;const lY=p.forwardRef(({className:t,...e},n)=>f.jsx(uA,{ref:n,className:ie("-mx-1 my-1 h-px bg-muted",t),...e}));lY.displayName=uA.displayName;function K1({comment:t,editor:e,activeCommentId:n,setActiveCommentId:r,setComments:o,comments:s,onRefreshFeedback:i,onRegenerateSuggestion:a,isRefreshing:l=!1,isRegenerating:c=!1,onTogglePin:u,onMarkAsCompleted:d,onReviveComment:h,isCompleted:m=!1,focusedCommentId:g,setFocusedCommentId:v,isWriteMode:x=!1}){var Cn,Yr,Fn,is,ai,F,Y,fe,de,me,Ae;const[y,w]=p.useState(null),[b,S]=p.useState(!1),[C,E]=p.useState(!1),[k,T]=p.useState(!1),[j,I]=p.useState(!1),[V,U]=p.useState(""),[B,W]=p.useState(0),[oe,H]=p.useState([]),[te,R]=p.useState(1),N=t.issueType||(t.suggestedEdit?"general":"clarity"),$=t.isAIFeedback?"shadow-[0_0_15px_rgba(168,85,247,0.15)]":"",L=p.useRef(null),[P,q]=p.useState(null),[Z,M]=p.useState("");p.useEffect(()=>{var A;if(t.feedbackHistory&&t.feedbackHistory.length>0)H(t.feedbackHistory),R(t.feedbackHistory.length),W(t.feedbackHistory.length-1);else if(t.suggestedEdit){const Q=[{timestamp:t.updatedAt||(typeof t.createdAt=="string"?t.createdAt:t.createdAt.toISOString()),original:t.suggestedEdit.original||t.quotedText||"",currentText:y||t.suggestedEdit.original||t.quotedText||"",suggested:t.suggestedEdit.suggested||"",explanation:t.suggestedEdit.explanation||"",issueType:t.issueType,references:t.suggestedEdit.references}];H(Q),R(1),W(0)}else H([]),R(0),W(0);console.log("Comment loaded:",{id:t.id,isAIFeedback:t.isAIFeedback,hasSuggestedEdit:!!t.suggestedEdit,issueType:t.issueType,suggestedEditData:t.suggestedEdit,referencesCreated:(A=t.suggestedEdit)==null?void 0:A.references})},[t.id,t.feedbackHistory,t.suggestedEdit,t.quotedText,y]),p.useEffect(()=>{var A;if((A=t.suggestedEdit)!=null&&A.explanation&&(oe.length===0||oe[oe.length-1].explanation!==t.suggestedEdit.explanation)){const Q={timestamp:new Date().toISOString(),original:t.suggestedEdit.original||"",currentText:y||t.suggestedEdit.original||"",suggested:t.suggestedEdit.suggested||"",explanation:t.suggestedEdit.explanation,issueType:t.issueType,references:t.suggestedEdit.references},K=oe.length>0?oe[oe.length-1]:null;if(!K||K.explanation!==Q.explanation||K.suggested!==Q.suggested||JSON.stringify(K.references)!==JSON.stringify(Q.references)){const ue=[...oe,Q];H(ue),R(ue.length),W(ue.length-1)}}},[(Cn=t.suggestedEdit)==null?void 0:Cn.explanation,(Yr=t.suggestedEdit)==null?void 0:Yr.suggested,(Fn=t.suggestedEdit)==null?void 0:Fn.references]),p.useEffect(()=>{if(!e||!t.id)return;(()=>{let Q=null;if(e.state.doc.descendants((K,ye)=>{if(K.marks.find(Le=>Le.type.name==="comment"&&Le.attrs.commentId===t.id))return Q={from:ye,to:ye+K.nodeSize},!1}),Q){const K=Q,ye=e.state.doc.textBetween(K.from,K.to);w(ye)}})()},[e,t.id]),p.useEffect(()=>{if(!e||!j)return;const A=()=>{const{selection:K}=e.state,{from:ye,to:ue}=K;if(ye!==ue){const Le=e.state.doc.textBetween(ye,ue);U(Le)}else U("")};e.on("selectionUpdate",A),e.setEditable(!1);const Q=e.view.dom.closest(".ProseMirror")||e.view.dom;return Q&&Q.classList.add("text-selection-mode"),()=>{e.off("selectionUpdate",A),e.setEditable(!0),Q&&Q.classList.remove("text-selection-mode")}},[e,j]),p.useEffect(()=>{if(b){const A=setTimeout(()=>{S(!1)},2e3);return()=>clearTimeout(A)}},[b]);const O=A=>{A==="prev"&&B>0?W(B-1):A==="next"&&B<te-1&&W(B+1)},D=oe[B]||{timestamp:t.updatedAt||(typeof t.createdAt=="string"?t.createdAt:t.createdAt.toISOString()),original:((is=t.suggestedEdit)==null?void 0:is.original)||"",currentText:y||((ai=t.suggestedEdit)==null?void 0:ai.original)||"",suggested:((F=t.suggestedEdit)==null?void 0:F.suggested)||"",explanation:((Y=t.suggestedEdit)==null?void 0:Y.explanation)||"",issueType:t.issueType},re=()=>{if(!e)return;if(x){console.log("Write mode active - not scrolling to comment for distraction-free writing");return}let A=null;if(e.state.doc.descendants((Q,K)=>{if(Q.marks.find(ue=>ue.type.name==="comment"&&ue.attrs.commentId===t.id))return A={from:K,to:K+Q.nodeSize},!1}),A){const Q=A,K=e.state.doc.textBetween(Q.from,Q.to);w(K),e.chain().focus().setTextSelection(Q).run();const ye=window.getSelection();if(ye&&ye.rangeCount>0){const Le=ye.getRangeAt(0).getBoundingClientRect();(Le.top<0||Le.bottom>window.innerHeight)&&e.commands.scrollIntoView()}}},z=()=>{if(!e||!t.suggestedEdit){d?d(t.id,"accepted"):(e==null||e.chain().focus().unsetComment(t.id).run(),o(Q=>Q.filter(K=>K.id!==t.id)));return}let A=null;if(e.state.doc.descendants((Q,K)=>{if(Q.marks.find(ue=>ue.type.name==="comment"&&ue.attrs.commentId===t.id))return A={from:K,to:K+Q.nodeSize},!1}),A&&t.suggestedEdit){const Q=A,K=B===te-1?t.suggestedEdit.suggested||"":D.suggested||"";K&&e.chain().focus().setTextSelection(Q).insertContent(K).run(),d&&d(t.id,"accepted")}},G=()=>{d?d(t.id,"ignored"):(e==null||e.chain().focus().unsetComment(t.id).run(),o(s.filter(A=>A.id!==t.id)))},se=()=>{h&&h(t.id)},ne=()=>{a&&a(t.id)},pe=()=>{u&&u(t.id,!t.isPinned)},_=()=>{var Q;const A=B===te-1?(Q=t.suggestedEdit)==null?void 0:Q.suggested:D.suggested;A&&navigator.clipboard.writeText(A).then(()=>{S(!0),ge.success("Copied to clipboard",{description:"Suggested text has been copied",duration:2e3})}).catch(K=>{console.error("Could not copy text: ",K),ge.error("Copy failed",{description:"Could not copy text to clipboard",duration:2e3})})},Ne=A=>{try{return(typeof A=="string"?new Date(A):A).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Unknown time"}},Pe=()=>{var Q;if(!y)return!1;const A=B===te-1?(Q=t.suggestedEdit)==null?void 0:Q.original:D.original;return A?y!==A:!1},Re=(()=>{if(!t.completionInfo||t.completionInfo.length===0)return null;const A=t.completionInfo[t.completionInfo.length-1],Q=A.action,K=A.timestamp;return{action:Q,timestamp:K,actionText:Q==="active"?"Replaced":"Dismissed",date:Ne(K)}})();p.useEffect(()=>{n===t.id&&L.current&&!x&&L.current.scrollIntoView({behavior:"smooth",block:"center"})},[n,t.id,x]);const be=()=>{var A;q(t.id),M(B===te-1?y!==null?y:((A=t.suggestedEdit)==null?void 0:A.original)||"":D.currentText||"")},Xt=()=>{if(!e||!t.id)return;let A=null;if(e.state.doc.descendants((Q,K)=>{if(Q.marks.find(ue=>ue.type.name==="comment"&&ue.attrs.commentId===t.id))return A={from:K,to:K+Q.nodeSize},!1}),A){const Q=A,K=e.state.tr,ye=e.schema.marks.comment.create({commentId:t.id});K.replaceWith(Q.from,Q.to,e.schema.text(Z,[ye])),e.view.dispatch(K)}o(Q=>Q.map(K=>K.id===t.id?{...K,suggestedEdit:K.suggestedEdit?{...K.suggestedEdit,original:Z}:K.suggestedEdit}:K)),q(null)},La=()=>{I(!0),U(""),ge.info("Selection mode active",{description:"Select text from the editor, then click Done",duration:3e3})},$a=()=>{I(!1),U(""),ge.info("Selection mode cancelled",{duration:2e3})},qr=()=>{var Q;if(!V.trim()){ge.error("No text selected",{description:"Please select text from the editor before clicking Done",duration:3e3}),I(!1),U("");return}const A=B===te-1?y!==null?y:((Q=t.suggestedEdit)==null?void 0:Q.original)||"":D.currentText;if(V.trim()===(A==null?void 0:A.trim())){ge.info("No changes needed",{description:"Selected text is the same as current text",duration:2e3}),I(!1),U("");return}if(e&&t.id){let K=null;if(e.state.doc.descendants((ye,ue)=>{if(ye.marks.find(Ft=>Ft.type.name==="comment"&&Ft.attrs.commentId===t.id))return K={from:ue,to:ue+ye.nodeSize},!1}),K){const ye=K,ue=e.state.tr,Le=e.schema.marks.comment.create({commentId:t.id});ue.replaceWith(ye.from,ye.to,e.schema.text(V,[Le])),e.view.dispatch(ue)}}o(K=>K.map(ye=>ye.id===t.id?{...ye,suggestedEdit:ye.suggestedEdit?{...ye.suggestedEdit,original:V}:ye.suggestedEdit}:ye)),I(!1),U(""),i&&(i(t.id),ge.success("Refreshing feedback",{description:"Updating feedback with selected text",duration:2e3}))};D.references&&D.references.length>0&&D.references.map((A,Q)=>f.jsxs("div",{className:"text-xs",children:[f.jsx("div",{className:"font-medium",children:A.allusion}),f.jsx("div",{className:"text-muted-foreground",children:A.referenceText})]},Q));const Gr=A=>{if(!e)return;const K=e.state.doc.textContent.indexOf(A);if(K!==-1){const ye=K,ue=K+A.length;e.commands.setTextSelection({from:ye,to:ue}),e.commands.setHighlight({color:"purple"}),setTimeout(()=>{e.commands.setTextSelection({from:ye,to:ue}),e.commands.unsetHighlight()},2e3)}},ii=(A,Q)=>{if(!A)return A;let K=A.replace(/<b>(.*?)<\/b>/g,'<span class="text-blue-500 font-semibold inline">$1<svg class="inline-block w-[1em] h-[1em] ml-[0.1em] align-[-0.125em]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></span>');if(Q&&Q.length>0){const ye=[...Q].sort((ue,Le)=>{var Qt,lt;if(ue.position&&Le.position)return Le.position.from-ue.position.from;const Ft=((Qt=ue.allusion)==null?void 0:Qt.length)||0;return(((lt=Le.allusion)==null?void 0:lt.length)||0)-Ft});for(const ue of ye){const Le=ue.allusion;console.log(Le);const Ft=ue.referenceText;if(console.log(Ft),!Le||!Ft)continue;const Rt=`<span class="text-blue-500 underline cursor-pointer hover:text-blue-600">${Le}</span>`,Qt=new RegExp(Le.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");K=K.replace(Qt,Rt)}}return K};p.useEffect(()=>(window.highlightReference=A=>{Gr(A)},()=>{delete window.highlightReference}),[e]);const ss=()=>{if(!e||m)return;if(g===t.id){console.log("Comment deselected, exiting focus mode for:",t.id);const ue=e.view.dom.closest(".ProseMirror")||e.view.dom;ue&&(ue.classList.remove("focus-mode-active"),ue.removeAttribute("data-focused-comment")),document.querySelectorAll(".focused-comment").forEach(Ft=>{Ft.classList.remove("focused-comment")}),v&&v(null),E(!1);return}console.log("Comment selected, entering focus mode for:",t.id),document.querySelectorAll(".focused-comment").forEach(ue=>{ue.classList.remove("focused-comment")});const K=e.view.dom.closest(".ProseMirror")||e.view.dom;K&&(K.classList.add("focus-mode-active"),K.setAttribute("data-focused-comment",t.id));let ye=null;e.state.doc.descendants((ue,Le)=>{if(ue.marks.find(Rt=>Rt.type.name==="comment"&&Rt.attrs.commentId===t.id))return ye={from:Le,to:Le+ue.nodeSize},!1}),ye&&document.querySelectorAll(`[data-comment-id="${t.id}"]`).forEach(Le=>{Le.classList.add("focused-comment")}),v&&v(t.id),E(!0)};return p.useEffect(()=>{const Q=setInterval(()=>{const K=(e==null?void 0:e.view.dom.closest(".ProseMirror"))||(e==null?void 0:e.view.dom),ye=K==null?void 0:K.classList.contains("focus-mode-active"),ue=K==null?void 0:K.getAttribute("data-focused-comment");(!ye||ue&&ue!==t.id)&&E(!1)},100);return()=>{clearInterval(Q)}},[e,t.id]),p.useEffect(()=>{const A=g===t.id;C!==A&&E(A)},[g,t.id,C]),f.jsxs("div",{ref:L,className:ie("bg-white dark:bg-background border border-border/40 rounded-md p-4 transition-all duration-200 relative cursor-pointer dark:bg-neutral-900",n===t.id&&"ring-2 ring-blue-500",t.isPinned&&"border-yellow-400 dark:border-yellow-600",m&&"opacity-80",C&&"ring-2 ring-blue-400",$),onClick:ss,"data-comment-item":t.id,children:[!m&&f.jsx(ve,{variant:"ghost",size:"sm",className:ie("absolute top-2 right-2 h-6 w-6 p-0",t.isPinned?"text-yellow-500 hover:text-yellow-600 dark:text-yellow-400 dark:hover:text-yellow-300":"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"),onClick:A=>{A.stopPropagation(),pe()},title:t.isPinned?"Unpin comment":"Pin comment",children:t.isPinned?f.jsx(wb,{className:"h-3.5 w-3.5 fill-current"}):f.jsx(wb,{className:"h-3.5 w-3.5"})}),f.jsx("div",{className:"flex flex-col space-y-3",children:t.isAIFeedback?f.jsx("div",{className:"flex items-start gap-3",children:f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("h3",{className:"text-base font-medium break-words",children:t.content}),B===te-1?f.jsxs(f.Fragment,{children:[N==="clarity"&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 border border-blue-200 shadow-sm",children:"Clarity"})}),N==="focus"&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 border border-yellow-200 shadow-sm",children:"Focus"})}),N==="flow"&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-orange-200 text-orange-800 dark:bg-orange-900 dark:text-orange-300 border border-orange-300 shadow-sm",children:"Flow"})}),N&&!["flow","focus","clarity"].includes(N)&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border border-gray-200 shadow-sm",children:N})})]}):f.jsxs(f.Fragment,{children:[D.issueType==="clarity"&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 border border-blue-200 shadow-sm",children:"Clarity"}),D.issueType==="focus"&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 border border-yellow-200 shadow-sm",children:"Focus"}),D.issueType==="flow"&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-orange-200 text-orange-800 dark:bg-orange-900 dark:text-orange-300 border border-orange-300 shadow-sm",children:"Flow"}),D.issueType&&!["flow","focus","clarity"].includes(D.issueType)&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border border-gray-200 shadow-sm",children:D.issueType})]}),Re&&f.jsx("span",{className:ie("inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm ml-auto",Re.action==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 border-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 border-red-200"),children:Re.actionText}),te>1&&f.jsxs("div",{className:"flex items-center ml-2",children:[f.jsx("button",{onClick:A=>{A.stopPropagation(),O("prev")},disabled:B===0,className:"p-1 rounded hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous version",children:f.jsx(b4,{className:"h-3 w-3"})}),f.jsxs("span",{className:"mx-1 text-xs text-muted-foreground",children:[B+1,"/",te]}),f.jsx("button",{onClick:A=>{A.stopPropagation(),O("next")},disabled:B===te-1,className:"p-1 rounded hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next version",children:f.jsx(zi,{className:"h-3 w-3"})})]})]}),t.quotedText&&f.jsx("div",{className:"text-sm text-muted-foreground bg-muted/50 p-0 rounded-md cursor-pointer hover:bg-muted/70 mt-3 break-words",onClick:re,children:t.suggestedEdit?f.jsxs("div",{className:"suggest-edit-container overflow-hidden",tabIndex:0,children:[f.jsx("div",{className:"relative",children:f.jsxs("details",{className:"mt-1",open:!0,children:[f.jsx("summary",{className:"suggest-edit-label cursor-pointer",children:"Current Text"}),f.jsxs(Pg,{children:[f.jsx(_g,{asChild:!0,children:f.jsx("div",{className:ie("suggest-edit-deletion break-words mt-1 relative",Pe()&&"bg-red-50 dark:bg-red-900/20"),onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:P===t.id?f.jsxs("div",{className:"space-y-2",onClick:A=>A.stopPropagation(),onMouseDown:A=>A.stopPropagation(),children:[f.jsx("textarea",{className:"w-full min-h-[60px] bg-muted border rounded p-2 mt-1",value:Z,onChange:A=>M(A.target.value),onClick:A=>A.stopPropagation(),onMouseDown:A=>A.stopPropagation(),onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),Xt())},style:{resize:"vertical"}}),f.jsx("div",{className:"flex justify-end",children:f.jsxs(ve,{size:"sm",className:"h-7 text-xs flex items-center gap-1.5",onClick:Xt,children:["Save ",f.jsx("span",{className:"opacity-60",children:""})]})})]}):f.jsxs("div",{className:"relative",children:[f.jsx("div",{onDoubleClick:be,title:"Double-click to edit",style:{whiteSpace:"pre-wrap",cursor:"pointer"},children:B===te-1?y!==null?y:((fe=t.suggestedEdit)==null?void 0:fe.original)||"":D.currentText}),k&&!m&&!j&&f.jsx(ve,{variant:"outline",size:"sm",className:"absolute top-2 right-2 h-7 w-7 p-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border shadow-md hover:shadow-lg transition-all duration-200",onClick:A=>{A.stopPropagation(),La()},title:"Select new text from editor",children:f.jsx(Nl,{className:"h-3.5 w-3.5"})})]})})}),f.jsx(rf,{className:"w-64",children:f.jsxs(kn,{onClick:be,className:"flex items-center",children:[f.jsx(Nl,{className:"h-4 w-4 mr-2"}),f.jsx("span",{children:"Edit current text"})]})})]})]})}),j&&f.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Text Selection Mode"})}),f.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mb-3",children:"Select text from the editor above, then click Done to update the current text and refresh feedback."}),V&&f.jsxs("div",{className:"mb-3 p-2 bg-white dark:bg-gray-800 rounded border",children:[f.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Selected text:"}),f.jsx("div",{className:"text-sm",children:V.length>100?`${V.substring(0,100)}...`:V})]}),f.jsxs("div",{className:"flex justify-end space-x-2",children:[f.jsx(ve,{variant:"outline",size:"sm",onClick:A=>{A.stopPropagation(),$a()},className:"h-8 px-3",children:"Cancel"}),f.jsx(ve,{variant:"default",size:"sm",onClick:A=>{A.stopPropagation(),qr()},className:"h-8 px-4 bg-blue-600 hover:bg-blue-700 text-white",disabled:!V.trim(),children:"Done"})]})]}),f.jsx("div",{children:f.jsxs("details",{className:"mt-1",open:!0,children:[f.jsx("summary",{className:"suggest-edit-label cursor-pointer",children:"Suggested Text"}),f.jsxs(Pg,{children:[f.jsx(_g,{asChild:!0,children:f.jsx("div",{className:"suggest-edit-addition break-words relative",children:c&&B===te-1?f.jsxs("div",{className:"flex items-center justify-center py-2 text-muted-foreground italic",children:[f.jsx(zo,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating new suggestion..."]}):f.jsx("div",{className:"py-1",children:B===te-1?((de=t.suggestedEdit)==null?void 0:de.suggested)||"":D.suggested})})}),f.jsxs(rf,{className:"w-64",children:[f.jsx(kn,{onClick:ne,disabled:c||B!==te-1||m,className:"flex items-center",children:c?f.jsxs(f.Fragment,{children:[f.jsx(zo,{className:"h-4 w-4 mr-2 animate-spin"}),f.jsx("span",{children:"Creating new suggestion..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(_4,{className:"h-4 w-4 mr-2"}),f.jsx("span",{children:"Generate new suggestion"})]})}),f.jsx(kn,{onClick:_,className:"flex items-center",children:b?f.jsxs(f.Fragment,{children:[f.jsx(pa,{className:"h-4 w-4 mr-2 text-green-500"}),f.jsx("span",{children:"Copied!"})]}):f.jsxs(f.Fragment,{children:[f.jsx(Ey,{className:"h-4 w-4 mr-2"}),f.jsx("span",{children:"Copy text"})]})})]})]})]})}),f.jsx("div",{className:"relative",children:f.jsxs("div",{className:"mt-1",children:[f.jsx("div",{className:"suggest-edit-label cursor-pointer",children:f.jsx("span",{children:"Feedback"})}),f.jsx("div",{className:"suggest-edit-explanation break-words mt-1",children:l&&B===te-1?f.jsx("div",{className:"text-muted-foreground italic",children:"Updating feedback..."}):f.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:ii(B===te-1?((me=t.suggestedEdit)==null?void 0:me.explanation)||"":D.explanation,B===te-1?(Ae=t.suggestedEdit)==null?void 0:Ae.references:D.references)}})}),B!==te-1&&D.timestamp&&f.jsxs("div",{className:"text-xs text-muted-foreground mt-1 italic",children:["Viewing feedback from ",Ne(D.timestamp)]}),Re&&f.jsxs("div",{className:"text-xs text-muted-foreground mt-1 italic",children:[Re.actionText," on ",Re.date]})]})})]}):`"${t.quotedText}"`}),n===t.id&&!t.isAIFeedback&&f.jsxs("div",{className:"mt-3 space-y-2 bg-muted rounded-md p-2",children:[f.jsx("div",{className:"relative",children:f.jsx("textarea",{id:t.id,value:t.content,onChange:A=>{o(Q=>Q.map(K=>K.id===t.id?{...K,content:A.target.value}:K))},onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),r(null))},placeholder:"Add a comment...",className:"w-full min-h-[60px] bg-transparent border-none p-0 resize-none focus:outline-none focus:ring-0",autoFocus:!0,readOnly:m})}),f.jsx("div",{className:"flex justify-end",children:f.jsxs(ve,{size:"sm",className:"h-7 text-xs flex items-center gap-1.5",onClick:()=>r(null),children:["Save ",f.jsx("span",{className:"opacity-60",children:""})]})})]}),m?f.jsx("div",{className:"flex items-center justify-left mt-3",children:f.jsxs(ve,{variant:"outline",size:"sm",className:"h-8 px-6",onClick:se,children:[f.jsx(bb,{className:"h-3.5 w-3.5 mr-2"}),"Restore"]})}):j?null:f.jsxs("div",{className:"flex items-center justify-left mt-3 space-x-3",children:[f.jsxs(ve,{variant:"ghost",size:"sm",className:"h-8 px-4",onClick:G,children:[f.jsx(Mc,{className:"h-3.5 w-2.5 mr-1"}),"Dismiss"]}),f.jsxs(ve,{variant:"default",size:"sm",className:"h-8 px-6 pr-4 pl-2 bg-blue-600 hover:bg-blue-700 dark:bg-neutral-600 dark:hover:bg-blue-700 text-white dark:text-white",onClick:z,children:[f.jsx(pa,{className:"h-3.5 w-3.5 mr-2"}),"Replace"]})]})]})}):f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Rs,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-base font-medium",children:"Comment"}),f.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Date(t.createdAt).toLocaleDateString()," ",new Date(t.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]}),Re&&f.jsx("div",{className:"flex justify-end mt-1",children:f.jsx("span",{className:ie("inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm",Re.action==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 border-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 border-red-200"),children:Re.actionText})}),t.quotedText&&f.jsx("div",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded-md cursor-pointer hover:bg-muted/70 mt-3",onClick:re,children:`"${t.quotedText}"`}),n===t.id?f.jsxs("div",{className:"mt-3 space-y-2 bg-muted rounded-md p-2",children:[f.jsx("div",{className:"relative",children:f.jsx("textarea",{id:t.id,value:t.content,onChange:A=>{o(Q=>Q.map(K=>K.id===t.id?{...K,content:A.target.value}:K))},onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),r(null))},placeholder:"Add a comment...",className:"w-full min-h-[60px] bg-transparent border-none p-0 resize-none focus:outline-none focus:ring-0",autoFocus:!0,readOnly:m})}),f.jsx("div",{className:"flex justify-end",children:f.jsxs(ve,{size:"sm",className:"h-7 text-xs flex items-center gap-1.5",onClick:()=>r(null),children:["Save ",f.jsx("span",{className:"opacity-60",children:""})]})})]}):f.jsx("div",{className:"mt-3 text-sm",children:t.content||"No content"}),m?f.jsx("div",{className:"flex justify-center mt-3",children:f.jsxs(ve,{variant:"outline",size:"sm",className:"h-8 px-6",onClick:se,children:[f.jsx(bb,{className:"h-3.5 w-3.5 mr-2"}),"Restore"]})}):f.jsx("div",{className:"flex justify-end mt-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(ve,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>r(t.id),disabled:m,children:[f.jsx(Nl,{className:"h-3.5 w-3.5 mr-1"}),"Edit"]}),f.jsxs(ve,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:G,children:[f.jsx(z4,{className:"h-3.5 w-3.5 mr-1"}),"Delete"]})]})})]})]})})]})}function cY({isOpen:t,setIsOpen:e,comments:n,setComments:r,activeCommentId:o,setActiveCommentId:s,editor:i,focusedCommentId:a,setFocusedCommentId:l,sortCommentsRef:c,highlightingManager:u}){const d=p.useRef(null),[h,m]=p.useState({}),[g,v]=p.useState({}),[x,y]=p.useState("default"),[w,b]=p.useState(!1),[S,C]=p.useState(!1),E=async M=>{var z,G,se;console.log("Refreshing feedback for comment ID:",M);const O=n.find(ne=>ne.id===M);if(!O||!i)return;let D=null;if(i.state.doc.descendants((ne,pe)=>ne.marks.find(Ne=>Ne.type.name==="comment"&&Ne.attrs.commentId===M)?(D={from:pe,to:pe+ne.nodeSize},!1):!0),!D)return;const re=i.state.doc.textBetween(D.from,D.to);m(ne=>({...ne,[M]:!0}));try{if(O.suggestedEdit&&O.suggestedEdit.explanation){const ne=O.suggestedEdit.original||O.quotedText,pe=O.suggestedEdit.explanation,_=await X4({originalText:ne||"",currentText:re,originalFeedback:pe,issueType:O.issueType});if(_.success){const Ne=new Date().toISOString(),Pe=O.feedbackHistory||[];Pe.length===0&&O.suggestedEdit&&Pe.push({timestamp:O.updatedAt||O.createdAt,original:O.suggestedEdit.original||"",currentText:O.suggestedEdit.original||"",suggested:O.suggestedEdit.suggested||"",explanation:O.suggestedEdit.explanation||"",issueType:O.issueType,references:O.suggestedEdit.references||[]});const De={timestamp:Ne,original:O.suggestedEdit.original||"",currentText:re||"",suggested:O.suggestedEdit.suggested||"",explanation:_.data.updatedFeedback,issueType:O.issueType,references:O.suggestedEdit.references||[]};r(Re=>Re.map(be=>be.id===M?{...be,updatedAt:Ne,suggestedEdit:be.suggestedEdit?{...be.suggestedEdit,explanation:_.data.updatedFeedback}:void 0,feedbackHistory:[...Pe,De]}:be))}}else{const pe=await new Promise(De=>{setTimeout(()=>{re!==O.quotedText?De(`This text has been updated. ${Math.random()>.5?"The issues have been resolved, good job!":"There are still some issues to address."}`):De("The text hasn't changed since the last feedback.")},500)}),_=new Date().toISOString(),Ne=O.feedbackHistory||[];Ne.length===0&&O.suggestedEdit&&Ne.push({timestamp:O.updatedAt||O.createdAt,original:O.suggestedEdit.original||"",currentText:O.suggestedEdit.original||"",suggested:O.suggestedEdit.suggested||"",explanation:O.suggestedEdit.explanation||"",issueType:O.issueType,references:O.suggestedEdit.references||[]});const Pe={timestamp:_,original:((z=O.suggestedEdit)==null?void 0:z.original)||O.quotedText||"",currentText:re||"",suggested:((G=O.suggestedEdit)==null?void 0:G.suggested)||O.quotedText||"",explanation:pe,issueType:O.issueType,references:((se=O.suggestedEdit)==null?void 0:se.references)||[]};r(De=>De.map(Re=>Re.id===M?{...Re,updatedAt:_,suggestedEdit:Re.suggestedEdit?{...Re.suggestedEdit,explanation:pe}:{original:Re.quotedText||"",suggested:Re.quotedText||"",explanation:pe,references:[]},feedbackHistory:[...Ne,Pe]}:Re))}}catch(ne){console.error("Error refreshing feedback:",ne),ge.error("Failed to refresh feedback",{description:"Please try again later."})}finally{m(ne=>({...ne,[M]:!1}))}},k=async M=>{var z,G,se;console.log("Regenerating suggestion for comment ID:",M);const O=n.find(ne=>ne.id===M);if(!O||!i)return;let D=null;if(i.state.doc.descendants((ne,pe)=>ne.marks.find(Ne=>Ne.type.name==="comment"&&Ne.attrs.commentId===M)?(D={from:pe,to:pe+ne.nodeSize},!1):!0),!D)return;const re=i.state.doc.textBetween(D.from,D.to);v(ne=>({...ne,[M]:!0}));try{const ne=((z=O.suggestedEdit)==null?void 0:z.original)||O.quotedText||"",pe=((G=O.suggestedEdit)==null?void 0:G.explanation)||"",_=await Q4({originalText:ne,currentText:re,issueType:O.issueType,originalExplanation:pe});if(_.success){const Ne=new Date().toISOString(),Pe=O.feedbackHistory||[];Pe.length===0&&O.suggestedEdit&&Pe.push({timestamp:O.updatedAt||O.createdAt,original:O.suggestedEdit.original||"",currentText:O.suggestedEdit.original||"",suggested:O.suggestedEdit.suggested||"",explanation:O.suggestedEdit.explanation||"",issueType:O.issueType,references:O.suggestedEdit.references||[]});const De={timestamp:Ne,original:((se=O.suggestedEdit)==null?void 0:se.original)||O.quotedText||"",currentText:re||"",suggested:_.data.suggestedEdit.suggested,explanation:_.data.suggestedEdit.explanation,issueType:O.issueType,references:_.data.suggestedEdit.references||[]};r(Re=>Re.map(be=>{var Xt;return be.id===M?{...be,updatedAt:Ne,suggestedEdit:{original:((Xt=O.suggestedEdit)==null?void 0:Xt.original)||O.quotedText||"",suggested:_.data.suggestedEdit.suggested,explanation:_.data.suggestedEdit.explanation,references:_.data.suggestedEdit.references||[]},feedbackHistory:[...Pe,De]}:be}))}}catch(ne){console.error("Error regenerating suggestion:",ne),ge.error("Failed to generate new suggestion",{description:"Please try again later."})}finally{v(ne=>({...ne,[M]:!1}))}},T=(M,O)=>{r(D=>D.map(re=>re.id===M?{...re,isPinned:O}:re)),ge(O?"Comment pinned":"Comment unpinned",{duration:2e3})},j=(M,O,D)=>{const re=new Date().toISOString();r(z=>z.map(G=>G.id===M?{...G,completionInfo:[...G.completionInfo||[],{action:O,timestamp:re,reason:D}]}:G)),ge(`Suggestion ${O==="accepted"?"replaced":"dismissed"}`,{duration:2e3}),O==="accepted"&&!w?b(!0):O==="ignored"&&!S&&C(!0)},I=M=>{r(O=>O.map(D=>D.id===M?{...D,completionInfo:[]}:D)),ge("Comment revived",{description:"Comment has been moved back to active items",duration:2e3})},V=M=>{y(M),U(M)},U=p.useCallback(M=>{const O=[...n];if(M==="newest")O.sort((D,re)=>new Date(re.createdAt).getTime()-new Date(D.createdAt).getTime());else if(M==="oldest")O.sort((D,re)=>new Date(D.createdAt).getTime()-new Date(re.createdAt).getTime());else if(M==="smart"){const D=new Map,re=(i==null?void 0:i.state.doc.textContent)||"";n.forEach(z=>{if(z.quotedText&&!D.has(z.quotedText)){const G=re.indexOf(z.quotedText);G>=0&&D.set(z.quotedText,G)}}),O.sort((z,G)=>{if(z.quotedText===G.quotedText)return new Date(z.createdAt).getTime()-new Date(G.createdAt).getTime();const se=D.get(z.quotedText||"")||0,ne=D.get(G.quotedText||"")||0;return se-ne})}else{const D=new Map,re=(i==null?void 0:i.state.doc.textContent)||"";n.forEach(z=>{if(z.quotedText){const G=re.indexOf(z.quotedText);G>=0&&D.set(z.id,G)}}),O.sort((z,G)=>{const se=D.get(z.id)||0,ne=D.get(G.id)||0;return se-ne})}r(O)},[n,i,r]);p.useEffect(()=>{c&&(c.current=()=>U(x))},[c,U,x]);const B=[{value:"flow",label:"Flow"},{value:"focus",label:"Focus"},{value:"clarity",label:"Clarity"}],[W,oe]=p.useState(B.map(M=>M.value)),H=M=>!M.completionInfo||M.completionInfo.length===0?"active":M.completionInfo[M.completionInfo.length-1].action==="replaced"?"replaced":"dismissed",te=n.filter(M=>H(M)==="active"),R=n.filter(M=>H(M)==="replaced"),N=n.filter(M=>H(M)==="dismissed"),$=M=>{let O;M==="active"?O=te:M==="replaced"?O=R:O=N;const D=O.filter(re=>W.length===B.length?!0:re.issueType?W.includes(re.issueType):!0);if(M==="active"){const re=D.filter(G=>G.isPinned),z=D.filter(G=>!G.isPinned);return[...re,...z]}return D},L=n.filter(M=>H(M)!=="dismissed"),P=L.filter(M=>M.issueType==="clarity").length,q=L.filter(M=>M.issueType==="flow").length,Z=L.filter(M=>M.issueType==="focus").length;return f.jsxs("div",{ref:d,className:ie("fixed right-0 h-[calc(100vh-7rem)] bg-background border-l border-border/40","transition-all duration-300 ease-in-out transform",t?"translate-x-0":"translate-x-full","w-[360px]"),style:{zIndex:40,top:"6rem"},"data-comments-sidebar":"true",children:[f.jsx("button",{onClick:()=>e(!t),className:ie("absolute left-0 top-1/4 -translate-y-1/2 -translate-x-full","bg-background border border-border/40 border-r-0","px-2 py-3 rounded-l-md","transition-colors hover:bg-accent"),children:f.jsx("div",{className:"flex flex-col items-center gap-2",children:t?f.jsx(v4,{className:"mr-2 h-4.0 w-4.0",strokeWidth:1.5}):f.jsx(N4,{className:"mr-2 h-4.0 w-4.0",strokeWidth:1.5})})}),f.jsxs("div",{className:"h-full flex flex-col relative",children:[f.jsxs("div",{className:"flex-1 overflow-y-auto pb-16",children:[f.jsxs("div",{className:"flex items-center justify-left mb-4 pt-6 pl-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[f.jsx("label",{htmlFor:"comment-sort",className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Sort by:"}),f.jsxs(sY,{onValueChange:V,defaultValue:"default",children:[f.jsx(dA,{className:"h-8 text-xs w-32",children:f.jsx(iY,{placeholder:"Sort"})}),f.jsxs(pA,{children:[f.jsx(rv,{value:"default",children:"In Order"}),f.jsx(rv,{value:"newest",children:"Newest First"})]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{htmlFor:"comment-sort",className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Filter by:"}),f.jsx(uq,{options:B,selected:W,onChange:oe})]})]}),f.jsx("div",{className:"border-b border-border/40 pb-4",children:f.jsx("div",{className:"p-4 space-y-3",children:te.length===0?f.jsx("div",{className:"text-center text-muted-foreground py-2",children:"No active comments"}):$("active").map(M=>f.jsx(K1,{comment:M,editor:i,activeCommentId:o,setActiveCommentId:s,setComments:r,comments:n,onRefreshFeedback:E,onRegenerateSuggestion:k,onTogglePin:T,onMarkAsCompleted:j,onReviveComment:I,isRefreshing:h[M.id]||!1,isRegenerating:g[M.id]||!1,focusedCommentId:a,setFocusedCommentId:l,isWriteMode:(u==null?void 0:u.getCurrentMode())==="write"},M.id))})}),f.jsxs("div",{className:"border-b border-border/40",children:[f.jsxs("button",{onClick:()=>C(!S),className:"flex items-center justify-between w-full px-4 py-2 bg-accent/30 hover:bg-accent/50",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(C4,{className:"mr-2 h-4 w-4",strokeWidth:1.5}),f.jsxs("span",{className:"text-sm font-medium",children:["Dismissed Suggestions (",N.length,")"]})]}),S?f.jsx(S4,{className:"h-4 w-4"}):f.jsx(Vf,{className:"h-4 w-4"})]}),S&&f.jsx("div",{className:"p-4 pt-2 space-y-3",children:N.length===0?f.jsx("div",{className:"text-center text-muted-foreground py-2",children:"No dismissed comments"}):$("dismissed").map(M=>f.jsx(K1,{comment:M,editor:i,activeCommentId:o,setActiveCommentId:s,setComments:r,comments:n,onRefreshFeedback:E,onRegenerateSuggestion:k,onTogglePin:T,onMarkAsCompleted:j,onReviveComment:I,isRefreshing:h[M.id]||!1,isRegenerating:g[M.id]||!1,isCompleted:!0,focusedCommentId:a,setFocusedCommentId:l,isWriteMode:(u==null?void 0:u.getCurrentMode())==="write"},M.id))})]}),n.length===0&&f.jsx("div",{className:"text-center text-muted-foreground pt-8",children:"No comments yet"})]}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-background border-t border-border/40 p-3",children:f.jsxs("div",{className:"flex gap-2 justify-center",children:[f.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 dark:bg-blue-900 px-2.5 py-1 text-xs font-medium text-blue-800 dark:text-blue-300",children:["Clarity: ",P]}),f.jsxs("span",{className:"inline-flex items-center rounded-full bg-orange-100 dark:bg-orange-900 px-2.5 py-1 text-xs font-medium text-orange-800 dark:text-orange-300",children:["Flow: ",q]}),f.jsxs("span",{className:"inline-flex items-center rounded-full bg-yellow-100 dark:bg-yellow-900 px-2.5 py-1 text-xs font-medium text-yellow-800 dark:text-yellow-300",children:["Focus: ",Z]})]})})]})]})}const uY=[{name:"Missing space after comma",text:"teacher,coach,counselor because",description:"Text with missing spaces that often causes positioning issues"},{name:"Lowercase sentence start",text:"student are going to have a better knowledge",description:"Sentence starting with lowercase letter"},{name:"Run-on sentence",text:"School should let student enjoy take their high school seriously",description:"Long sentence with grammar issues"},{name:"Missing punctuation",text:"I want to be a teacher,coach,counselor because I enjoy helping people",description:"Sentence missing ending punctuation"},{name:"Partial sentence fragment",text:"because I enjoy helping people",description:"Fragment that might be found mid-sentence"}];function dY(t){console.log(" === PROSEMIRROR SEARCH TESTS ===");const e={passed:0,failed:0,details:[]};return uY.forEach((n,r)=>{console.log(`
--- Test ${r+1}: ${n.name} ---`),console.log(`Description: ${n.description}`),console.log(`Searching for: "${n.text}"`);try{const o=bh(t,n.text),s=cf(t,n.text),i=_0(t,n.text),a={testCase:n.name,searchText:n.text,basicFound:!!o,expandedFound:!!s,robustFound:!!i,basicPosition:o,expandedPosition:s,robustPosition:i,success:!!(o||s||i)};if(o){const l=t.state.doc.textBetween(o.from,o.to);a.basicActualText=l,a.basicMatches=l===n.text,console.log(` Basic search: Found at ${o.from}-${o.to}`),console.log(`   Expected: "${n.text}"`),console.log(`   Actual: "${l}"`),console.log(`   Match: ${a.basicMatches}`)}else console.log(" Basic search: Not found");if(s){const l=t.state.doc.textBetween(s.from,s.to);a.expandedActualText=l.substring(0,100),a.expandedContainsOriginal=l.includes(n.text),console.log(` Expanded search: Found at ${s.from}-${s.to}`),console.log(`   Expanded text: "${l.substring(0,100)}..."`),console.log(`   Contains original: ${a.expandedContainsOriginal}`)}else console.log(" Expanded search: Not found");a.success?(e.passed++,console.log(` Test ${r+1} PASSED`)):(e.failed++,console.log(` Test ${r+1} FAILED`)),e.details.push(a)}catch(o){console.error(` Test ${r+1} ERROR:`,o),e.failed++,e.details.push({testCase:n.name,error:o.message,success:!1})}}),console.log(`
 === TEST SUMMARY ===`),console.log(`Passed: ${e.passed}`),console.log(`Failed: ${e.failed}`),console.log(`Success Rate: ${(e.passed/(e.passed+e.failed)*100).toFixed(1)}%`),e}function fY(t,e){console.log(`
 Quick test for: "${e.substring(0,50)}..."`);const n=bh(t,e),r=cf(t,e),o=_0(t,e);if(console.log("Results:",{basic:n,expanded:r,robust:o,allMatch:!!(n&&r&&o)}),n){const s=t.state.doc.textBetween(n.from,n.to);console.log(`Basic result text: "${s}"`)}if(r){const s=t.state.doc.textBetween(r.from,r.to);console.log(`Expanded result text: "${s.substring(0,100)}..."`)}return{basic:n,expanded:r,robust:o}}typeof window<"u"&&(window.testProseMirrorSearch=dY,window.quickTestSearch=fY);const hY=p.createContext([[],()=>{}]);function pY({className:t="",onEditorChange:e,eventBatcher:n}){const{user:r}=si(),[o,s]=p.useState(!1),[i,a]=p.useState(!0),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[h,m]=p.useState("Untitled document"),[g,v]=p.useState([]),[x,y]=p.useState(null),[w,b]=p.useState([]),[S,C]=p.useState(null),[E,k]=p.useState({}),[T,j]=p.useState(""),[I,V]=p.useState(!1),[U,B]=p.useState(!1),[W,oe]=p.useState({}),[H,te]=p.useState(""),[R,N]=p.useState(null),[$]=p.useState(r?new R0(r.id):null),L=p.useRef(null),[P,q]=p.useState(null),Z=p.useRef(null),[M,O]=p.useState(null),[D,re]=p.useState(0),[z,G]=p.useState(!1),[se,ne]=p.useState(!1),pe=z||se,_=CF({extensions:[T5,P5.configure({multicolor:!0}),R5,A5,O5,L7.configure({HTMLAttributes:{class:"tiptap-comment"},onCommentActivated:F=>{y(F)},onCommentClicked:F=>{if(console.log("onCommentClicked triggered for:",F),M&&M.getCurrentMode()==="write"){console.log("Write mode is active - ignoring comment click for distraction-free writing");return}if(M&&M.getCurrentMode()!=="comments"){console.log("Not in comments mode - ignoring comment click focus actions");return}console.log("Available comments:",w);const Y=document.querySelector(`[data-comment-item="${F}"]`);if(Y)console.log("Found sidebar comment item, triggering click:",Y),Y.click();else{if(console.log("Comment item not found in sidebar for ID:",F),P===F){console.log("Comment already focused, exiting focus mode");const me=(_==null?void 0:_.view.dom.closest(".ProseMirror"))||(_==null?void 0:_.view.dom);me&&(me.classList.remove("focus-mode-active"),me.removeAttribute("data-focused-comment"),document.querySelectorAll(".focused-comment").forEach(A=>{A.classList.remove("focused-comment")})),q(null);return}const de=w.find(me=>me.id===F);if(console.log("Found comment:",de),de){const me=(_==null?void 0:_.view.dom.closest(".ProseMirror"))||(_==null?void 0:_.view.dom);if(me){console.log("Entering focus mode for comment:",F),document.querySelectorAll(".focused-comment").forEach(Q=>{Q.classList.remove("focused-comment")}),me.classList.add("focus-mode-active"),me.setAttribute("data-focused-comment",F);const A=document.querySelectorAll(`[data-comment-id="${F}"]`);console.log("Found comment elements to focus:",A),A.forEach(Q=>{Q.classList.add("focused-comment")})}q(F)}else console.log("Comment not found in comments array")}}}),W7.configure({HTMLAttributes:{class:"tiptap-suggest-edit"},onSuggestEdit:(F,Y)=>{console.log("Suggested edit:",{original:F,suggested:Y})}}),K7,q7,G7],content:"",editable:!pe,editorProps:{attributes:{class:ie("outline-none min-h-[1028px] text-[11pt]","px-[64px] py-[84px]","text-stone-800 dark:text-zinc-400","caret-blue-500","[&>div]:min-h-[24px]","[&>div]:break-words","[&>div]:max-w-[666px]",pe&&"pointer-events-none cursor-wait opacity-75")},handleKeyDown:(F,Y)=>pe?(Y.preventDefault(),!0):((Y.key.length===1&&!Y.ctrlKey&&!Y.metaKey||Y.key===" "||Y.key==="Backspace"||Y.key==="Delete")&&(_==null||_.chain().unsetHighlight().run()),!1),handlePaste:(F,Y)=>{const fe=Y.clipboardData;if(!fe)return!1;const de=fe.getData("text");try{return JSON.parse(de),Y.preventDefault(),!0}catch{return!1}}},onUpdate:({editor:F,transaction:Y})=>{const fe=F.getHTML();e==null||e(fe),Y.docChanged&&Y.steps.some(de=>de.toJSON().stepType==="replace")&&F.chain().unsetHighlight().run()}});if(!_)return null;p.useEffect(()=>{const F=Y=>{(Y.metaKey||Y.ctrlKey)&&Y.key==="s"&&(Y.preventDefault(),ss())};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[]),p.useEffect(()=>{r&&$&&$.updateUserId(r.id)},[r,$]),p.useEffect(()=>{(async()=>{try{const Y=localStorage.getItem("ripple-doc");if(Y&&_){const{title:fe,content:de,comments:me=[],paragraphTopicHighlights:Ae={},essayTopicHighlight:A=null,paragraphTopicTexts:Q={},essayTopicText:K=""}=JSON.parse(Y);m(fe),b(me),k(Ae),C(A),oe(Q),te(K),_.commands.setContent(de)}if(r&&$&&_){const fe=await $.getAllFiles();if(fe.length>0){const de=fe[0];m(de.title),N(de.id),_.commands.setContent(de.content),console.log("Loading comments for file:",de.id);const me=await $.getComments(de.id);if(console.log("Retrieved database comments:",me),me&&me.length>0){const Ae=me.map(A=>$1(A));console.log("Setting UI comments:",Ae),b(Ae),Ae.forEach(A=>{A.from!==void 0&&A.to!==void 0&&(_.commands.setTextSelection({from:A.from,to:A.to}),_.chain().setComment(A.id).run())}),_.commands.setTextSelection(0)}else console.log("No comments found for file:",de.id),b([]);n==null||n.addEvent(Be.FILE_OPEN,{file_id:de.id,title:de.title})}}}catch(Y){console.error("Error loading initial content:",Y)}})()},[_,r,$,n]);const Ne=p.useCallback(()=>{if(!_)return"";const{from:F,to:Y}=_.state.selection;return F===Y?"":(n&&r&&n.addEvent(Be.TEXT_SELECTION,{length:Y-F,selection_text:_.state.doc.textBetween(F,Y).substring(0,100)}),_.state.doc.textBetween(F,Y))},[_,n,r]),Pe=p.useCallback(()=>{if(!o){const F=Ne();j(F)}s(!o)},[o,Ne]),De=p.useCallback(F=>{if(!_)return;const{from:Y,to:fe}=_.state.selection,de=Y!==fe;F==="paragraph"?Object.entries(E).forEach(([,{from:me,to:Ae}])=>{_.commands.setTextSelection({from:me,to:Ae}),_.commands.setHighlight({color:"#93c5fd"})}):F==="paragraph_hide"?(Object.entries(E).forEach(([,{from:me,to:Ae}])=>{_.commands.setTextSelection({from:me,to:Ae}),_.commands.unsetHighlight()}),U&&S&&(_.commands.setTextSelection({from:S.from,to:S.to}),_.commands.setHighlight({color:"#c4b5fd"}))):F==="document"?S&&(_.commands.setTextSelection({from:S.from,to:S.to}),_.commands.setHighlight({color:"#c4b5fd"})):F==="document_hide"&&(S&&(_.commands.setTextSelection({from:S.from,to:S.to}),_.commands.unsetHighlight()),I&&Object.entries(E).forEach(([,{from:me,to:Ae}])=>{_.commands.setTextSelection({from:me,to:Ae}),_.commands.setHighlight({color:"#93c5fd"})})),de?_.commands.setTextSelection({from:Y,to:fe}):_.commands.setTextSelection(Y),_.commands.focus()},[_,E,S,I,U]),Re=p.useCallback(()=>{const F=!I;if(V(F),F){const Y=Object.keys(E).length;Y>0?(De("paragraph"),ge.success(`Showing ${Y} paragraph topic${Y===1?"":"s"}`)):ge.info("No paragraph topics marked yet. Right-click on text and select 'Select as Paragraph Topic'",{duration:5e3,action:{label:"How to use",onClick:()=>{ge.info("Select important sentences in each paragraph, then right-click and choose 'Select as Paragraph Topic'",{duration:7e3})}}})}else De("paragraph_hide"),ge.success("Paragraph topics hidden")},[I,E,De]),be=p.useCallback(()=>{const F=!U;B(F),F?S?(De("document"),ge.success("Showing essay topic")):ge.info("No essay topic marked yet. Right-click on text and select 'Select as Essay Topic'",{duration:5e3,action:{label:"How to use",onClick:()=>{ge.info("Select your main thesis or focus statement, then right-click and choose 'Select as Essay Topic'",{duration:7e3})}}}):(De("document_hide"),ge.success("Essay topic hidden"))},[U,S,De]);p.useEffect(()=>{_&&I&&De("paragraph")},[_,I]),p.useEffect(()=>{_&&U&&De("document")},[_,U]);const Xt=p.useCallback(()=>{if(!_)return;const{from:F,to:Y}=_.state.selection;if(F===Y)return;const fe=_.state.doc.resolve(F),de=fe.node(1);if(de){const me=de.attrs.id||fe.before(1).toString(),Ae=_.state.doc.textBetween(F,Y);if(console.log("Paragraph Topic Selected:",{paragraphId:me,position:{from:F,to:Y},text:Ae}),E[me]){const A=E[me];_.chain().setTextSelection({from:A.from,to:A.to}).unsetHighlight().setTextSelection({from:F,to:Y}).run()}I&&_.chain().setHighlight({color:"#93c5fd"}).setTextSelection(Y).run(),k(A=>({...A,[me]:{from:F,to:Y}})),oe(A=>({...A,[me]:Ae})),setTimeout(()=>{console.log("Updated paragraph topic states:",{highlights:E,texts:W})},0),ge.success("Paragraph topic set")}},[_,E,W,I]),La=p.useCallback(()=>{if(!_)return;const{from:F,to:Y}=_.state.selection;if(F===Y)return;const fe=_.state.doc.textBetween(F,Y);console.log("Essay Topic Selected:",{position:{from:F,to:Y},text:fe}),S&&_.chain().setTextSelection({from:S.from,to:S.to}).unsetHighlight().setTextSelection({from:F,to:Y}).run(),U&&_.chain().setHighlight({color:"#c4b5fd"}).setTextSelection(Y).run(),C({from:F,to:Y}),te(fe),setTimeout(()=>{console.log("Updated essay topic states:",{highlight:S,text:H})},0),ge.success("Essay topic set")},[_,S,H,U]),$a=p.useCallback(()=>_?_.getHTML():"",[_]),qr=p.useCallback(async F=>{var Y,fe,de,me,Ae,A,Q,K,ye;if(_){G(!0);try{let ue="",Le="all";switch(F){case"all":_.chain().focus().selectAll().run(),ue=_.state.doc.textContent;break;case"custom":if(ue=_.state.doc.textBetween(_.state.selection.from,_.state.selection.to),!ue){ge.warning("Please make a Custom Selection first.");return}break}if(!ue){console.error("No content selected for analysis");return}const Ft=_.state.doc.textContent;console.log(" Running analysis with flow highlighting for:",F);const Rt=await xg({content:ue,fullContext:Ft,targetType:Le,flowPrompt:"Highlight important arguments with high emphasis, supporting details with medium emphasis, and transitions with low emphasis"});if(console.log(" Analysis response received:",{hasComments:!!((fe=(Y=Rt.data)==null?void 0:Y.comments)!=null&&fe.length),commentsCount:((me=(de=Rt.data)==null?void 0:de.comments)==null?void 0:me.length)||0,hasFlowHighlights:!!((A=(Ae=Rt.data)==null?void 0:Ae.flowHighlights)!=null&&A.length),flowHighlightsCount:((K=(Q=Rt.data)==null?void 0:Q.flowHighlights)==null?void 0:K.length)||0}),Rt.data.flowHighlights&&Rt.data.flowHighlights.length>0&&M){console.log(" Processing flow highlights as part of regular analysis:",Rt.data.flowHighlights.length,"highlights"),M.setDocumentContext(Ft);const Qt=[];Rt.data.flowHighlights.forEach((lt,br)=>{const Sr=lt.text;let Jr=null;if(_.state.doc.descendants((as,Jc)=>{const Fa=as.textContent;if(Fa.includes(Sr)){const Xc=Jc+Fa.indexOf(Sr),XA=Xc+Sr.length;return Jr={from:Xc,to:XA},!1}}),Jr){const as={id:`flow-${Date.now()}-${br}`,connectionStrength:lt.connectionStrength,connectedSentences:[],position:Jr};Qt.push(as),console.log(` Flow highlight ${br+1}: "${Sr.substring(0,50)}..." with strength ${lt.connectionStrength}`)}else console.warn(" Could not find position for flow highlight text:",Sr.substring(0,100))}),Qt.length>0&&(M.addFlowHighlights(Qt),console.log(" Flow highlights added to HighlightingManager - they will be visible when flow mode is ON"))}else console.log(" No flow highlights returned or HighlightingManager not available");if(((ye=Rt.data.comments)==null?void 0:ye.length)>0){const Qt=[];Rt.data.comments.forEach(lt=>{const br=lt.highlightedText;let Sr=null;if(_.state.doc.descendants((Jr,as)=>{const Jc=Jr.textContent;if(Jc.includes(br)){const Fa=as+Jc.indexOf(br),Xc=Fa+br.length;return Sr={from:Fa,to:Xc},!1}}),Sr){const Jr=`comment-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,as={id:Jr,content:lt.text,createdAt:new Date,createdAtTime:new Date,quotedText:lt.highlightedText,isAIFeedback:!0,issueType:lt.issueType||"general",...lt.suggestedEdit?{suggestedEdit:{original:lt.suggestedEdit.original,suggested:lt.suggestedEdit.suggested,explanation:lt.suggestedEdit.explanation,references:lt.suggestedEdit.references||[]}}:{}};_.chain().setTextSelection(Sr).setComment(Jr).run(),Qt.push(as)}}),b(lt=>[...lt,...Qt]),a(!0),setTimeout(()=>{Z.current&&Z.current()},50),Qt.length>0&&setTimeout(()=>{const lt=Qt[Qt.length-1],br=document.querySelector(`[data-comment-item="${lt.id}"]`);br&&br.scrollIntoView({behavior:"smooth",block:"center"})},100)}_&&_.commands.focus("end")}catch(ue){console.error("Error running contextual analysis:",ue),ge.error("Analysis failed. Please try again.")}finally{G(!1)}}},[_,b,a,M,G]),Gr=p.useCallback(()=>{if(!_)return;const{from:F,to:Y}=_.state.selection;if(F===Y)return;const fe=_.state.doc.textBetween(F,Y),de=crypto.randomUUID(),me={id:de,createdAt:new Date,quotedText:fe,content:"",createdAtTime:new Date,from:F,to:Y};console.log("Adding new comment:",me),b(Ae=>[...Ae,me]),_.chain().setComment(de).run(),y(de),a(!0),setTimeout(()=>{const Ae=document.getElementById(de);Ae&&Ae.focus()},50)},[_]),ii=p.useCallback(()=>{if(!_)return;const{from:F,to:Y}=_.state.selection;if(F===Y)return;const fe=_.state.doc.textBetween(F,Y);if(!window.prompt("Suggest an edit:",fe))return;const me=`c${Date.now()}`,Ae={id:me,createdAt:new Date,quotedText:fe,content:""};b(A=>[...A,Ae]),y(me),a(!0)},[_]);p.useEffect(()=>{localStorage.getItem("ripple-has-visited")||setTimeout(()=>{c(!0),d(!0),localStorage.setItem("ripple-has-visited","true")},1e3)},[]);const ss=p.useCallback(async()=>{if(!(!_||!$))try{console.log("Saving document with topics:",{paragraphTopicHighlights:E,paragraphTopicTexts:W,essayTopicHighlight:S,essayTopicText:H}),console.log("Current comments being saved:",w),localStorage.setItem("ripple-doc",JSON.stringify({title:h,content:_.getHTML(),comments:w,paragraphTopicHighlights:E,essayTopicHighlight:S,paragraphTopicTexts:W,essayTopicText:H,lastSaved:new Date().toISOString()}));try{const F=_.getHTML();let Y=R;if(Y)await $.saveFile(h,F,Y);else{const fe=await $.saveFile(h,F);if(fe)Y=fe.id,N(Y);else throw new Error("Failed to create file")}if(Y){if(console.log(`Preparing to save ${w.length} comments for file ID: ${Y}`),!Array.isArray(w))throw console.error("Comments is not an array:",w),new Error("Comments is not a valid array");if(w.length>0){console.log("Comment samples before saving:",w.slice(0,2));const fe=await $.saveComments(Y,w);console.log("Comment save result:",fe),fe||console.warn("Comments may not have saved successfully")}else console.log("No comments to save")}ge.success("Document saved successfully")}catch(F){console.error("Error saving document",F),gt((r==null?void 0:r.id)||"anonymous",Be.ERROR,{error:F.message}),ge.error("Failed to save document")}}catch(F){console.error("Error saving document:",F),ge.error("Failed to save document")}},[_,$,h,w,R,E,W,S,H,r]),Cn=p.useCallback(()=>{_&&b(F=>F.map(Y=>{let fe=null;if(_.state.doc.descendants((de,me)=>{if(de.marks.find(A=>A.type.name==="comment"&&A.attrs.commentId===Y.id))return fe={from:me,to:me+de.nodeSize},!1}),fe){const de=fe;return{...Y,from:de.from,to:de.to,quotedText:_.state.doc.textBetween(de.from,de.to)}}return Y}))},[_,b]);p.useEffect(()=>{if(!_)return;const F=()=>{L.current&&clearTimeout(L.current),L.current=setTimeout(Cn,500)};return _.on("update",F),()=>{_.off("update",F),L.current&&clearTimeout(L.current)}},[_,Cn]),p.useEffect(()=>{const F=Y=>{if(!P)return;const fe=Y.target,de=fe.closest("[data-comment-id]")||fe.hasAttribute("data-comment-id"),me=fe.closest("[data-comment-item]")||fe.closest(".cursor-pointer"),Ae=fe.closest('button, input, textarea, select, [role="button"]');if(!de&&!me&&!Ae){console.log("Global click detected, exiting focus mode");const A=(_==null?void 0:_.view.dom.closest(".ProseMirror"))||(_==null?void 0:_.view.dom);A!=null&&A.classList.contains("focus-mode-active")&&(A.classList.remove("focus-mode-active"),A.removeAttribute("data-focused-comment"),document.querySelectorAll(".focused-comment").forEach(K=>{K.classList.remove("focused-comment")})),q(null)}};return document.addEventListener("click",F,!0),()=>{document.removeEventListener("click",F,!0)}},[P,_]),p.useEffect(()=>{if(_&&!M){console.log(" Creating HighlightingManager in EditorContainer");const F=new pW(_,Y=>{console.log(` Highlighting Manager: Mode changed to ${Y}`),re(fe=>fe+1)});O(F),window.highlightingManager=F,F.switchMode("comments"),F.setupFlowHoverListeners()}},[_,M]),p.useEffect(()=>{const F=()=>{const fe=_==null?void 0:_.view.dom.closest(".editor-container"),de=(fe==null?void 0:fe.getAttribute("data-analyzing"))==="true";ne(de)},Y=_==null?void 0:_.view.dom.closest(".editor-container");if(Y){const fe=new MutationObserver(F);return fe.observe(Y,{attributes:!0,attributeFilter:["data-analyzing"]}),F(),()=>fe.disconnect()}},[_]);const Yr=p.useCallback(()=>{M&&M.exitFlowSentenceMode()},[M]),Fn=p.useCallback(()=>{var Y;const F=M==null?void 0:M.getSentenceFlowPopoverState();(Y=F==null?void 0:F.sentenceData)!=null&&Y.text&&(navigator.clipboard.writeText(F.sentenceData.text),ge.success("Sentence copied to clipboard"),M==null||M.hideSentenceFlowPopover())},[M]),is=p.useCallback(()=>{M&&_&&_.view.dom.querySelector(".flow-sentence-selected")&&(Gr(),M.hideSentenceFlowPopover())},[M,_,Gr]),ai=p.useCallback(()=>{var Y;const F=M==null?void 0:M.getSentenceFlowPopoverState();(Y=F==null?void 0:F.sentenceData)!=null&&Y.text&&(ge.info("Sentence explanation feature coming soon!"),M==null||M.hideSentenceFlowPopover())},[M]);return p.useEffect(()=>{M&&W&&M.setParagraphTopics(W)},[M,W]),p.useEffect(()=>{M&&M.updateTopicsForHover(W,H)},[M,W,H]),f.jsx("div",{className:ie("w-full h-full relative",t),children:f.jsxs(hY.Provider,{value:[g,v],children:[f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx("div",{className:"sticky top-0 z-[50] bg-background",children:f.jsxs("div",{className:"rounded-lg overflow-hidden border border-border/40",children:[f.jsx(RG,{editor:_,documentTitle:h,setDocumentTitle:m,comments:w,isInsightsOpen:i,setIsInsightsOpen:a,setIsHelpOpen:c,isHelpOpen:l,setComments:b,eventBatcher:n,currentFileId:R,setCurrentFileId:N,highlightingManager:M,isAnalysisRunning:z,setIsAnalysisRunning:G,onLoadFile:F=>{N(F.id),m(F.title),_.commands.setContent(F.content),$&&(console.log("Loading comments for selected file:",F.id),$.getComments(F.id).then(Y=>{console.log("Retrieved comments for selected file:",Y);const fe=Y.map(de=>$1(de));console.log("Setting UI comments for selected file:",fe),b(fe),fe.forEach(de=>{de.from!==void 0&&de.to!==void 0&&(_.commands.setTextSelection({from:de.from,to:de.to}),_.chain().setComment(de.id).run())}),_.commands.setTextSelection(0)}))}}),f.jsx(D7,{editor:_,hasSelection:!!(_!=null&&_.state.selection.content()),onAddComment:Gr,onSuggestEdit:ii,showParagraphTopics:I,showEssayTopics:U,onToggleParagraphTopics:Re,onToggleEssayTopics:be})]})}),f.jsx("div",{className:"flex-1 overflow-auto bg-[#FAF9F6] dark:bg-background/10",children:f.jsxs("div",{className:"mx-auto relative",style:{width:"794px"},children:[f.jsx("div",{className:"py-12",children:f.jsxs("div",{className:ie("relative bg-[#FFFDF7] dark:bg-neutral-900 shadow-sm",pe&&"cursor-wait"),onClick:F=>{if(pe){F.preventDefault(),F.stopPropagation();return}const Y=F.target;if(Y.closest(".ProseMirror")||Y.classList.contains("ProseMirror")){const de=(_==null?void 0:_.view.dom.closest(".ProseMirror"))||(_==null?void 0:_.view.dom);de!=null&&de.classList.contains("focus-mode-active")&&(de.classList.remove("focus-mode-active"),de.removeAttribute("data-focused-comment"),document.querySelectorAll(".focused-comment").forEach(Ae=>{Ae.classList.remove("focused-comment")}))}},children:[pe&&f.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-40 flex items-center justify-center backdrop-blur-sm",children:f.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[f.jsx(zo,{className:"h-8 w-8 animate-spin text-blue-500"}),f.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:se?"Analyzing sentence connections...":"Analyzing document..."}),f.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:se?"Finding related sentences in flow mode":"Please wait while we process your feedback"})]})}),f.jsx(X6,{editor:_,onSelectAsParagraphTopic:Xt,onSelectAsEssayTopic:La,activeCommentId:x,setActiveCommentId:y,onAddComment:Gr,comments:w,setComments:b,runContextualAnalysis:qr,children:f.jsx("div",{className:"editor-container",children:f.jsx(hF,{editor:_})})})]})}),f.jsx(cY,{isOpen:i,setIsOpen:a,comments:w,setComments:b,activeCommentId:x,setActiveCommentId:y,editor:_,focusedCommentId:P,setFocusedCommentId:q,sortCommentsRef:Z,highlightingManager:M})]})})]}),f.jsx(gW,{isOpen:o,onClose:Pe,selectedText:T,documentContext:$a()}),f.jsx(vW,{isOpen:l,onClose:()=>c(!l)}),u&&!l&&f.jsxs("div",{className:"fixed bottom-4 right-4 p-4 bg-card rounded-lg shadow-lg max-w-xs border border-border/40 z-50 animate-in slide-in-from-bottom-10 flex items-center gap-3",children:[f.jsx("div",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full p-2",children:f.jsx(uT,{className:"h-5 w-5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-medium text-sm",children:"Welcome to Ripple!"}),f.jsx("p",{className:"text-muted-foreground text-xs mt-1",children:"Check out our help section to learn how to use all Ripple features."})]}),f.jsx("button",{className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2",onClick:()=>c(!l),children:"Learn More"})]}),(()=>{const F=M==null?void 0:M.getSentenceFlowActionPanelState();return console.log(" Action panel render check:",{hasManager:!!M,actionPanelState:F,isVisible:F==null?void 0:F.isVisible,sentenceData:F==null?void 0:F.sentenceData,trigger:D}),(F==null?void 0:F.isVisible)&&(F==null?void 0:F.sentenceData)&&f.jsx(mW,{position:{x:0,y:0},sentenceText:F.sentenceData.text,connectionStrength:F.sentenceData.connectionStrength,connectedSentences:F.sentenceData.connectedSentences,paragraphCohesion:F.sentenceData.paragraphCohesion,documentCohesion:F.sentenceData.documentCohesion,onExitFlowMode:Yr,onAddComment:is,onCopySentence:Fn,onRedoAnalysis:()=>M==null?void 0:M.redoSentenceFlowAnalysis(),onExplainSentence:ai,onClose:Yr,onUpdateSentence:Y=>{M&&(M.updateAnalyzedSentence(Y),M.redoSentenceFlowAnalysis())},editor:_,isAnalyzing:se})})()]})})}function mY(t){return f.jsx(pY,{...t})}const mA=p.forwardRef(({className:t,type:e,...n},r)=>f.jsx("input",{type:e,className:ie("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));mA.displayName="Input";var gY="Label",gA=p.forwardRef((t,e)=>f.jsx(Ce.label,{...t,ref:e,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));gA.displayName=gY;var vA=gA;const vY=xT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),yA=p.forwardRef(({className:t,...e},n)=>f.jsx(vA,{ref:n,className:ie(vY(),t),...e}));yA.displayName=vA.displayName;var O0={};Object.defineProperty(O0,"__esModule",{value:!0});O0.parse=kY;O0.serialize=EY;const yY=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,xY=/^[\u0021-\u003A\u003C-\u007E]*$/,wY=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,bY=/^[\u0020-\u003A\u003D-\u007E]*$/,SY=Object.prototype.toString,CY=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function kY(t,e){const n=new CY,r=t.length;if(r<2)return n;const o=(e==null?void 0:e.decode)||TY;let s=0;do{const i=t.indexOf("=",s);if(i===-1)break;const a=t.indexOf(";",s),l=a===-1?r:a;if(i>l){s=t.lastIndexOf(";",i-1)+1;continue}const c=q1(t,s,i),u=G1(t,i,c),d=t.slice(c,u);if(n[d]===void 0){let h=q1(t,i+1,l),m=G1(t,l,h);const g=o(t.slice(h,m));n[d]=g}s=l+1}while(s<r);return n}function q1(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function G1(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function EY(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!yY.test(t))throw new TypeError(`argument name is invalid: ${t}`);const o=r(e);if(!xY.test(o))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+o;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!wY.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!bY.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!NY(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function TY(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function NY(t){return SY.call(t)==="[object Date]"}/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Y1="popstate";function MY(t={}){function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return ov("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:yc(o)}return _Y(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PY(){return Math.random().toString(36).substring(2,10)}function J1(t,e){return{usr:t.state,key:t.key,idx:e}}function ov(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ja(e):e,state:n,key:e&&e.key||r||PY()}}function yc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ja(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function _Y(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",l=null,c=u();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function u(){return(i.state||{idx:null}).idx}function d(){a="POP";let x=u(),y=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:y})}function h(x,y){a="PUSH";let w=ov(v.location,x,y);c=u()+1;let b=J1(w,c),S=v.createHref(w);try{i.pushState(b,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(S)}s&&l&&l({action:a,location:v.location,delta:1})}function m(x,y){a="REPLACE";let w=ov(v.location,x,y);c=u();let b=J1(w,c),S=v.createHref(w);i.replaceState(b,"",S),s&&l&&l({action:a,location:v.location,delta:0})}function g(x){let y=o.location.origin!=="null"?o.location.origin:o.location.href,w=typeof x=="string"?x:yc(x);return w=w.replace(/ $/,"%20"),Qe(y,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,y)}let v={get action(){return a},get location(){return t(o,i)},listen(x){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(Y1,d),l=x,()=>{o.removeEventListener(Y1,d),l=null}},createHref(x){return e(o,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return i.go(x)}};return v}function xA(t,e,n="/"){return RY(t,e,n,!1)}function RY(t,e,n,r){let o=typeof e=="string"?ja(e):e,s=Hr(o.pathname||"/",n);if(s==null)return null;let i=wA(t);AY(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=UY(s);a=BY(i[l],c,r)}return a}function wA(t,e=[],n=[],r=""){let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=jr([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Qe(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),wA(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:FY(c,s.index),routesMeta:u})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of bA(s.path))o(s,i,l)}),e}function bA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=bA(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function AY(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zY(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var OY=/^:[\w-]+$/,jY=3,IY=2,DY=1,LY=10,$Y=-2,X1=t=>t==="*";function FY(t,e){let n=t.split("/"),r=n.length;return n.some(X1)&&(r+=$Y),e&&(r+=IY),n.filter(o=>!X1(o)).reduce((o,s)=>o+(OY.test(s)?jY:s===""?DY:LY),r)}function zY(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function BY(t,e,n=!1){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=ff({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=ff({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:jr([s,d.pathname]),pathnameBase:qY(jr([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=jr([s,d.pathnameBase]))}return i}function ff(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=HY(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let g=a[h]||"";i=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return d&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function HY(t,e=!1,n=!0){Zn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function UY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Hr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function VY(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?ja(t):t;return{pathname:n?n.startsWith("/")?n:WY(n,e):e,search:GY(r),hash:YY(o)}}function WY(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Qp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KY(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function j0(t){let e=KY(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function I0(t,e,n,r=!1){let o;typeof t=="string"?o=ja(t):(o={...t},Qe(!o.pathname||!o.pathname.includes("?"),Qp("?","pathname","search",o)),Qe(!o.pathname||!o.pathname.includes("#"),Qp("#","pathname","hash",o)),Qe(!o.search||!o.search.includes("#"),Qp("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let d=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),d-=1;o.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=VY(o,a),c=i&&i!=="/"&&i.endsWith("/"),u=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var jr=t=>t.join("/").replace(/\/\/+/g,"/"),qY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var SA=["POST","PUT","PATCH","DELETE"];new Set(SA);var XY=["GET",...SA];new Set(XY);var Ia=p.createContext(null);Ia.displayName="DataRouter";var Th=p.createContext(null);Th.displayName="DataRouterState";var CA=p.createContext({isTransitioning:!1});CA.displayName="ViewTransition";var QY=p.createContext(new Map);QY.displayName="Fetchers";var ZY=p.createContext(null);ZY.displayName="Await";var rr=p.createContext(null);rr.displayName="Navigation";var Gc=p.createContext(null);Gc.displayName="Location";var wr=p.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var D0=p.createContext(null);D0.displayName="RouteError";function eJ(t,{relative:e}={}){Qe(Da(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=p.useContext(rr),{hash:o,pathname:s,search:i}=Yc(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:jr([n,s])),r.createHref({pathname:a,search:i,hash:o})}function Da(){return p.useContext(Gc)!=null}function rs(){return Qe(Da(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Gc).location}var kA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EA(t){p.useContext(rr).static||p.useLayoutEffect(t)}function TA(){let{isDataRoute:t}=p.useContext(wr);return t?hJ():tJ()}function tJ(){Qe(Da(),"useNavigate() may be used only in the context of a <Router> component.");let t=p.useContext(Ia),{basename:e,navigator:n}=p.useContext(rr),{matches:r}=p.useContext(wr),{pathname:o}=rs(),s=JSON.stringify(j0(r)),i=p.useRef(!1);return EA(()=>{i.current=!0}),p.useCallback((l,c={})=>{if(Zn(i.current,kA),!i.current)return;if(typeof l=="number"){n.go(l);return}let u=I0(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:jr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,o,t])}p.createContext(null);function Yc(t,{relative:e}={}){let{matches:n}=p.useContext(wr),{pathname:r}=rs(),o=JSON.stringify(j0(n));return p.useMemo(()=>I0(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function nJ(t,e){return NA(t,e)}function NA(t,e,n,r){var w;Qe(Da(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:s}=p.useContext(rr),{matches:i}=p.useContext(wr),a=i[i.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let b=d&&d.path||"";MA(c,!d||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=rs(),m;if(e){let b=typeof e=="string"?ja(e):e;Qe(u==="/"||((w=b.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=h;let g=m.pathname||"/",v=g;if(u!=="/"){let b=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=!s&&n&&n.matches&&n.matches.length>0?n.matches:xA(t,{pathname:v});Zn(d||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Zn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=aJ(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:jr([u,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:jr([u,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&y?p.createElement(Gc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},y):y}function rJ(){let t=fJ(),e=JY(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:s},"ErrorBoundary")," or"," ",p.createElement("code",{style:s},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:o},n):null,i)}var oJ=p.createElement(rJ,null),sJ=class extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?p.createElement(wr.Provider,{value:this.props.routeContext},p.createElement(D0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iJ({routeContext:t,match:e,children:n}){let r=p.useContext(Ia);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),p.createElement(wr.Provider,{value:t},n)}function aJ(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let l=o.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Qe(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){i=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,u)=>{let d,h=!1,m=null,g=null;n&&(d=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||oJ,i&&(a<0&&u===0?(MA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):a===u&&(h=!0,g=c.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,u+1)),x=()=>{let y;return d?y=m:h?y=g:c.route.Component?y=p.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=l,p.createElement(iJ,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?p.createElement(sJ,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function L0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lJ(t){let e=p.useContext(Ia);return Qe(e,L0(t)),e}function cJ(t){let e=p.useContext(Th);return Qe(e,L0(t)),e}function uJ(t){let e=p.useContext(wr);return Qe(e,L0(t)),e}function $0(t){let e=uJ(t),n=e.matches[e.matches.length-1];return Qe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function dJ(){return $0("useRouteId")}function fJ(){var r;let t=p.useContext(D0),e=cJ("useRouteError"),n=$0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function hJ(){let{router:t}=lJ("useNavigate"),e=$0("useNavigate"),n=p.useRef(!1);return EA(()=>{n.current=!0}),p.useCallback(async(o,s={})=>{Zn(n.current,kA),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var Q1={};function MA(t,e,n){!e&&!Q1[t]&&(Q1[t]=!0,Zn(!1,n))}p.memo(pJ);function pJ({routes:t,future:e,state:n}){return NA(t,void 0,n,e)}function Z1({to:t,replace:e,state:n,relative:r}){Qe(Da(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=p.useContext(rr);Zn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=p.useContext(wr),{pathname:i}=rs(),a=TA(),l=I0(t,j0(s),i,r==="path"),c=JSON.stringify(l);return p.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function hs(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mJ({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){Qe(!Da(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=p.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=ja(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,m=p.useMemo(()=>{let g=Hr(l,i);return g==null?null:{location:{pathname:g,search:c,hash:u,state:d,key:h},navigationType:r}},[i,l,c,u,d,h,r]);return Zn(m!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:p.createElement(rr.Provider,{value:a},p.createElement(Gc.Provider,{children:e,value:m}))}function eS({children:t,location:e}){return nJ(sv(t),e)}function sv(t,e=[]){let n=[];return p.Children.forEach(t,(r,o)=>{if(!p.isValidElement(r))return;let s=[...e,o];if(r.type===p.Fragment){n.push.apply(n,sv(r.props.children,s));return}Qe(r.type===hs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=sv(r.props.children,s)),n.push(i)}),n}var ud="get",dd="application/x-www-form-urlencoded";function Nh(t){return t!=null&&typeof t.tagName=="string"}function gJ(t){return Nh(t)&&t.tagName.toLowerCase()==="button"}function vJ(t){return Nh(t)&&t.tagName.toLowerCase()==="form"}function yJ(t){return Nh(t)&&t.tagName.toLowerCase()==="input"}function xJ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wJ(t,e){return t.button===0&&(!e||e==="_self")&&!xJ(t)}var Uu=null;function bJ(){if(Uu===null)try{new FormData(document.createElement("form"),0),Uu=!1}catch{Uu=!0}return Uu}var SJ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zp(t){return t!=null&&!SJ.has(t)?(Zn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dd}"`),null):t}function CJ(t,e){let n,r,o,s,i;if(vJ(t)){let a=t.getAttribute("action");r=a?Hr(a,e):null,n=t.getAttribute("method")||ud,o=Zp(t.getAttribute("enctype"))||dd,s=new FormData(t)}else if(gJ(t)||yJ(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Hr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||ud,o=Zp(t.getAttribute("formenctype"))||Zp(a.getAttribute("enctype"))||dd,s=new FormData(a,t),!bJ()){let{name:c,type:u,value:d}=t;if(u==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,d)}}else{if(Nh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ud,r=null,o=dd,i=t}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}function F0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function kJ(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EJ(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function TJ(t,e,n){let r=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let i=await kJ(s,n);return i.links?i.links():[]}return[]}));return _J(r.flat(1).filter(EJ).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function tS(t,e,n,r,o,s){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function NJ(t,e,{includeHydrateFallback:n}={}){return MJ(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function MJ(t){return[...new Set(t)]}function PJ(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function _J(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let s=JSON.stringify(PJ(o));return n.has(s)||(n.add(s),r.push({key:s,link:o})),r},[])}function RJ(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Hr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function PA(){let t=p.useContext(Ia);return F0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function AJ(){let t=p.useContext(Th);return F0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var z0=p.createContext(void 0);z0.displayName="FrameworkContext";function _A(){let t=p.useContext(z0);return F0(t,"You must render this element inside a <HydratedRouter> element"),t}function OJ(t,e){let n=p.useContext(z0),[r,o]=p.useState(!1),[s,i]=p.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=p.useRef(null);p.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let v=y=>{y.forEach(w=>{i(w.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[t]),p.useEffect(()=>{if(r){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{o(!0)},g=()=>{o(!1),i(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:tl(a,m),onBlur:tl(l,g),onMouseEnter:tl(c,m),onMouseLeave:tl(u,g),onTouchStart:tl(d,m)}]:[!1,h,{}]}function tl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jJ({page:t,...e}){let{router:n}=PA(),r=p.useMemo(()=>xA(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?p.createElement(DJ,{page:t,matches:r,...e}):null}function IJ(t){let{manifest:e,routeModules:n}=_A(),[r,o]=p.useState([]);return p.useEffect(()=>{let s=!1;return TJ(t,e,n).then(i=>{s||o(i)}),()=>{s=!0}},[t,e,n]),r}function DJ({page:t,matches:e,...n}){let r=rs(),{manifest:o,routeModules:s}=_A(),{basename:i}=PA(),{loaderData:a,matches:l}=AJ(),c=p.useMemo(()=>tS(t,e,l,o,r,"data"),[t,e,l,o,r]),u=p.useMemo(()=>tS(t,e,l,o,r,"assets"),[t,e,l,o,r]),d=p.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,v=!1;if(e.forEach(y=>{var b;let w=o.routes[y.route.id];!w||!w.hasLoader||(!c.some(S=>S.route.id===y.route.id)&&y.route.id in a&&((b=s[y.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?v=!0:g.add(y.route.id))}),g.size===0)return[];let x=RJ(t,i);return v&&g.size>0&&x.searchParams.set("_routes",e.filter(y=>g.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[i,a,r,o,c,e,t,s]),h=p.useMemo(()=>NJ(u,o),[u,o]),m=IJ(u);return p.createElement(p.Fragment,null,d.map(g=>p.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),h.map(g=>p.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),m.map(({key:g,link:v})=>p.createElement("link",{key:g,...v})))}function LJ(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var RA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RA&&(window.__reactRouterVersion="7.5.0")}catch{}function nS({basename:t,children:e,window:n}){let r=p.useRef();r.current==null&&(r.current=MY({window:n,v5Compat:!0}));let o=r.current,[s,i]=p.useState({action:o.action,location:o.location}),a=p.useCallback(l=>{p.startTransition(()=>i(l))},[i]);return p.useLayoutEffect(()=>o.listen(a),[o,a]),p.createElement(mJ,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var AA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,As=p.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},m){let{basename:g}=p.useContext(rr),v=typeof c=="string"&&AA.test(c),x,y=!1;if(typeof c=="string"&&v&&(x=c,RA))try{let j=new URL(window.location.href),I=c.startsWith("//")?new URL(j.protocol+c):new URL(c),V=Hr(I.pathname,g);I.origin===j.origin&&V!=null?c=V+I.search+I.hash:y=!0}catch{Zn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=eJ(c,{relative:o}),[b,S,C]=OJ(r,h),E=BJ(c,{replace:i,state:a,target:l,preventScrollReset:u,relative:o,viewTransition:d});function k(j){e&&e(j),j.defaultPrevented||E(j)}let T=p.createElement("a",{...h,...C,href:x||w,onClick:y||s?e:k,ref:LJ(m,S),target:l,"data-discover":!v&&n==="render"?"true":void 0});return b&&!v?p.createElement(p.Fragment,null,T,p.createElement(jJ,{page:w})):T});As.displayName="Link";var $J=p.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:l,...c},u){let d=Yc(i,{relative:c.relative}),h=rs(),m=p.useContext(Th),{navigator:g,basename:v}=p.useContext(rr),x=m!=null&&KJ(d)&&a===!0,y=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,w=h.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(w=w.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&v&&(b=Hr(b,v)||b);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=w===y||!o&&w.startsWith(y)&&w.charAt(S)==="/",E=b!=null&&(b===y||!o&&b.startsWith(y)&&b.charAt(y.length)==="/"),k={isActive:C,isPending:E,isTransitioning:x},T=C?e:void 0,j;typeof r=="function"?j=r(k):j=[r,C?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(k):s;return p.createElement(As,{...c,"aria-current":T,className:j,ref:u,style:I,to:i,viewTransition:a},typeof l=="function"?l(k):l)});$J.displayName="NavLink";var FJ=p.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:s,method:i=ud,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},m)=>{let g=VJ(),v=WJ(a,{relative:c}),x=i.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&AA.test(a),w=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let S=b.nativeEvent.submitter,C=(S==null?void 0:S.getAttribute("formmethod"))||i;g(S||b.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:o,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return p.createElement("form",{ref:m,method:x,action:v,onSubmit:r?l:w,...h,"data-discover":!y&&t==="render"?"true":void 0})});FJ.displayName="Form";function zJ(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OA(t){let e=p.useContext(Ia);return Qe(e,zJ(t)),e}function BJ(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=TA(),l=rs(),c=Yc(t,{relative:s});return p.useCallback(u=>{if(wJ(u,e)){u.preventDefault();let d=n!==void 0?n:yc(l)===yc(c);a(t,{replace:d,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[l,a,c,n,r,e,t,o,s,i])}var HJ=0,UJ=()=>`__${String(++HJ)}__`;function VJ(){let{router:t}=OA("useSubmit"),{basename:e}=p.useContext(rr),n=dJ();return p.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:l,body:c}=CJ(r,e);if(o.navigate===!1){let u=o.fetcherKey||UJ();await t.fetch(u,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function WJ(t,{relative:e}={}){let{basename:n}=p.useContext(rr),r=p.useContext(wr);Qe(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...Yc(t||".",{relative:e})},i=rs();if(t==null){s.search=i.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:jr([n,s.pathname])),yc(s)}function KJ(t,e={}){let n=p.useContext(CA);Qe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=OA("useViewTransitionState"),o=Yc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Hr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Hr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ff(o.pathname,i)!=null||ff(o.pathname,s)!=null}new TextEncoder;function qJ(){const[t,e]=p.useState(""),[n,r]=p.useState(!1),{login:o,bypassLogin:s}=si(),i=async l=>{if(l.preventDefault(),!t.trim()){ge.error("Please enter your Prolific ID");return}r(!0);try{const c=await o(t.trim());"error"in c&&c.error&&ge.error("Failed to login. Please try again.")}catch(c){ge.error("An unexpected error occurred"),console.error(c)}finally{r(!1)}},a=async()=>{r(!0);try{const l=await s();"error"in l&&l.error?ge.error("Failed to bypass login. Please try again."):ge.success("Successfully logged in with test account")}catch(l){ge.error("Failed to bypass login"),console.error(l)}finally{r(!1)}};return f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background p-4",children:f.jsxs(fr,{className:"w-full max-w-md",children:[f.jsxs(Ml,{children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs(As,{to:"/",className:"flex items-center text-muted-foreground hover:text-foreground",children:[f.jsx(g4,{className:"h-4 w-4 mr-1"}),f.jsx("span",{className:"text-sm",children:"Back to home"})]})}),f.jsx(Pl,{className:"text-xl",children:"Welcome to Coherence"}),f.jsx(wT,{children:"Please enter your Prolific ID to continue."})]}),f.jsxs("form",{onSubmit:i,children:[f.jsx(hr,{children:f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"space-y-2",children:[f.jsx(yA,{htmlFor:"prolific-id",children:"Prolific ID"}),f.jsx(mA,{id:"prolific-id",value:t,onChange:l=>e(l.target.value),placeholder:"Enter your Prolific ID",disabled:n})]})})}),f.jsxs(bT,{className:"flex flex-col gap-2",children:[f.jsx(ve,{type:"submit",className:"w-full",disabled:n,children:n?"Logging in...":"Login"}),f.jsx(ve,{type:"button",variant:"outline",className:"w-full",onClick:a,disabled:n,children:"Bypass Login (Testing)"})]})]})]})})}var em,B0="HoverCard",[jA,OX]=Sn(B0,[yr]),Mh=yr(),[GJ,H0]=jA(B0),IA=t=>{const{__scopeHoverCard:e,children:n,open:r,defaultOpen:o,onOpenChange:s,openDelay:i=700,closeDelay:a=300}=t,l=Mh(e),c=p.useRef(0),u=p.useRef(0),d=p.useRef(!1),h=p.useRef(!1),[m=!1,g]=Br({prop:r,defaultProp:o,onChange:s}),v=p.useCallback(()=>{clearTimeout(u.current),c.current=window.setTimeout(()=>g(!0),i)},[i,g]),x=p.useCallback(()=>{clearTimeout(c.current),!d.current&&!h.current&&(u.current=window.setTimeout(()=>g(!1),a))},[a,g]),y=p.useCallback(()=>g(!1),[g]);return p.useEffect(()=>()=>{clearTimeout(c.current),clearTimeout(u.current)},[]),f.jsx(GJ,{scope:e,open:m,onOpenChange:g,onOpen:v,onClose:x,onDismiss:y,hasSelectionRef:d,isPointerDownOnContentRef:h,children:f.jsx(Dc,{...l,children:n})})};IA.displayName=B0;var DA="HoverCardTrigger",LA=p.forwardRef((t,e)=>{const{__scopeHoverCard:n,...r}=t,o=H0(DA,n),s=Mh(n);return f.jsx(_a,{asChild:!0,...s,children:f.jsx(Ce.a,{"data-state":o.open?"open":"closed",...r,ref:e,onPointerEnter:le(t.onPointerEnter,pf(o.onOpen)),onPointerLeave:le(t.onPointerLeave,pf(o.onClose)),onFocus:le(t.onFocus,o.onOpen),onBlur:le(t.onBlur,o.onClose),onTouchStart:le(t.onTouchStart,i=>i.preventDefault())})})});LA.displayName=DA;var YJ="HoverCardPortal",[jX,JJ]=jA(YJ,{forceMount:void 0}),hf="HoverCardContent",$A=p.forwardRef((t,e)=>{const n=JJ(hf,t.__scopeHoverCard),{forceMount:r=n.forceMount,...o}=t,s=H0(hf,t.__scopeHoverCard);return f.jsx(xr,{present:r||s.open,children:f.jsx(XJ,{"data-state":s.open?"open":"closed",...o,onPointerEnter:le(t.onPointerEnter,pf(s.onOpen)),onPointerLeave:le(t.onPointerLeave,pf(s.onClose)),ref:e})})});$A.displayName=hf;var XJ=p.forwardRef((t,e)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,...a}=t,l=H0(hf,n),c=Mh(n),u=p.useRef(null),d=ze(e,u),[h,m]=p.useState(!1);return p.useEffect(()=>{if(h){const g=document.body;return em=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=em,g.style.webkitUserSelect=em}}},[h]),p.useEffect(()=>{if(u.current){const g=()=>{m(!1),l.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var x;((x=document.getSelection())==null?void 0:x.toString())!==""&&(l.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!1}}},[l.isPointerDownOnContentRef,l.hasSelectionRef]),p.useEffect(()=>{u.current&&eX(u.current).forEach(v=>v.setAttribute("tabindex","-1"))}),f.jsx(Pa,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:le(s,g=>{g.preventDefault()}),onDismiss:l.onDismiss,children:f.jsx(Lc,{...c,...a,onPointerDown:le(a.onPointerDown,g=>{g.currentTarget.contains(g.target)&&m(!0),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!0}),ref:d,style:{...a.style,userSelect:h?"text":void 0,WebkitUserSelect:h?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),QJ="HoverCardArrow",ZJ=p.forwardRef((t,e)=>{const{__scopeHoverCard:n,...r}=t,o=Mh(n);return f.jsx($c,{...o,...r,ref:e})});ZJ.displayName=QJ;function pf(t){return e=>e.pointerType==="touch"?void 0:t()}function eX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}var tX=IA,nX=LA,FA=$A;const rX=tX,oX=nX,zA=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},o)=>f.jsx(FA,{ref:o,align:e,sideOffset:n,className:ie("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));zA.displayName=FA.displayName;var U0="Avatar",[sX,IX]=Sn(U0),[iX,BA]=sX(U0),HA=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[o,s]=p.useState("idle");return f.jsx(iX,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:f.jsx(Ce.span,{...r,ref:e})})});HA.displayName=U0;var UA="AvatarImage",VA=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=t,i=BA(UA,n),a=aX(r,s.referrerPolicy),l=Ke(c=>{o(c),i.onImageLoadingStatusChange(c)});return Je(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?f.jsx(Ce.img,{...s,ref:e,src:r}):null});VA.displayName=UA;var WA="AvatarFallback",KA=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...o}=t,s=BA(WA,n),[i,a]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&s.imageLoadingStatus!=="loaded"?f.jsx(Ce.span,{...o,ref:e}):null});KA.displayName=WA;function aX(t,e){const[n,r]=p.useState("idle");return Je(()=>{if(!t){r("error");return}let o=!0;const s=new window.Image,i=a=>()=>{o&&r(a)};return r("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{o=!1}},[t,e]),n}var qA=HA,GA=VA,YA=KA;const V0=p.forwardRef(({className:t,...e},n)=>f.jsx(qA,{ref:n,className:ie("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));V0.displayName=qA.displayName;const JA=p.forwardRef(({className:t,...e},n)=>f.jsx(GA,{ref:n,className:ie("aspect-square h-full w-full",t),...e}));JA.displayName=GA.displayName;const W0=p.forwardRef(({className:t,...e},n)=>f.jsx(YA,{ref:n,className:ie("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));W0.displayName=YA.displayName;function lX(){const{user:t,logout:e}=si();if(!t)return null;const n=()=>t.prolificId.startsWith("test_")?"T":t.prolificId.substring(0,2).toUpperCase(),r=async()=>{await e()};return f.jsxs(c0,{children:[f.jsx(u0,{asChild:!0,children:f.jsx(ve,{variant:"ghost",className:"h-8 w-8 rounded-full",children:f.jsx(V0,{className:"h-8 w-8",children:f.jsx(W0,{className:"bg-primary text-primary-foreground",children:n()})})})}),f.jsxs(ah,{align:"end",children:[f.jsx(_P,{children:"Account"}),f.jsxs(fc,{disabled:!0,className:"flex gap-2 text-muted-foreground",children:[f.jsx(B4,{className:"h-4 w-4"}),f.jsx("span",{className:"truncate",title:t.prolificId,children:t.prolificId})]}),f.jsx(RP,{}),f.jsxs(fc,{onClick:r,className:"text-red-500 focus:text-red-500 cursor-pointer",children:[f.jsx(A4,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})}function cX(){const{user:t}=si();return f.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:f.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[f.jsxs("div",{className:"mr-4 flex items-center",children:[f.jsxs(As,{className:"mr-6 flex items-center space-x-2",to:"/",children:[f.jsx(gT,{className:"h-5 w-5 text-blue-600"}),f.jsx("span",{className:"font-bold text-lg",children:"Ripple"})]}),f.jsx("nav",{className:"hidden md:flex items-center space-x-4",children:f.jsx(As,{to:"/editor",className:"text-sm font-medium transition-colors hover:text-primary",children:"Editor"})})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"hidden md:flex items-center",children:t?f.jsx("div",{className:"flex items-center mr-2",children:f.jsxs(ve,{variant:"ghost",size:"sm",className:"text-sm font-medium gap-1.5",children:[f.jsx(id,{className:"h-4 w-4"}),"AI Assistant"]})}):f.jsx(As,{to:"/auth",children:f.jsx(ve,{variant:"outline",size:"sm",className:"mr-2",children:"Sign In"})})}),f.jsx(m_,{}),f.jsx(lX,{})]})]})})}function rS(){const[t,e]=p.useState(!1);return p.useEffect(()=>{e(!0)},[]),f.jsxs("div",{className:"flex min-h-screen flex-col",children:[f.jsx(cX,{}),f.jsxs("main",{className:"flex-1",children:[f.jsx("section",{className:"w-full py-12 md:py-24 lg:py-32 xl:py-40",children:f.jsxs("div",{className:"container px-4 md:px-6",children:[f.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[f.jsx("h1",{className:"text-3xl font-bold tracking-tighter sm:text-5xl xl:text-6xl/none mb-6",children:"AI-Powered Text Editing with Ripple"}),f.jsx("p",{className:"text-muted-foreground md:text-xl mb-8",children:"An intelligent editor with AI assistance for seamless writing, collaboration, and document enhancement."}),f.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:f.jsx(As,{to:"/editor",children:f.jsxs(ve,{size:"lg",children:["Get Started",f.jsx(y4,{className:"ml-2 h-4 w-4"})]})})})]}),f.jsx("div",{className:"max-w-4xl mx-auto mb-20",children:f.jsxs("div",{className:"bg-card rounded-lg shadow-xl overflow-hidden border border-border",children:[f.jsxs("div",{className:"h-8 bg-muted border-b border-border flex items-center px-4",children:[f.jsxs("div",{className:"flex space-x-2 ml-1",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),f.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),f.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),f.jsx("div",{className:"absolute left-0 right-0 mx-auto text-center text-xs text-muted-foreground font-medium",style:{width:"fit-content"},children:"Ripple Editor"})]}),f.jsx("div",{className:"flex items-center justify-center p-0",children:f.jsx("img",{src:"/editor-demo.png",alt:"Ripple Editor Demo",className:"w-full h-auto"})})]})}),f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-8 relative",children:[f.jsxs("div",{className:"flex items-center text-blue-600",children:[f.jsx(sr,{className:"h-5 w-5 mr-2"}),f.jsx("h2",{className:"text-xl font-bold",children:"KEY FEATURES"})]}),f.jsx("p",{className:"text-muted-foreground",children:"AI-powered text editing with smart suggestions"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[f.jsxs("div",{className:"flex flex-col justify-center",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"AI Chat Bar"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"Get instant assistance from our powerful AI assistant. Ask questions, request revisions, generate content, and more with the convenient side panel chat interface."})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-border shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[f.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Rs,{className:"h-4 w-4 text-blue-600 mr-2"}),f.jsx("span",{className:"font-medium text-foreground",children:"AI Assistant"})]}),f.jsxs("div",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full flex items-center dark:bg-green-950 dark:text-green-300",children:[f.jsx(sr,{className:"h-3 w-3 mr-1"}),f.jsx("span",{children:"Active"})]})]}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:[f.jsx("div",{className:"flex p-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-muted mr-3 flex items-center justify-center text-xs text-muted-foreground",children:f.jsx(id,{className:"h-4 w-4"})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:"AI Assistant"}),f.jsx("div",{className:"text-xs text-muted-foreground",children:"How can I help with your document?"})]})]})}),f.jsx("div",{className:"flex justify-end p-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-right",children:"You"}),f.jsx("div",{className:"text-xs text-muted-foreground text-right",children:"Can you suggest a better introduction?"})]}),f.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 ml-3 flex items-center justify-center text-xs text-blue-600 dark:text-blue-300",children:f.jsx("span",{children:"You"})})]})}),f.jsx("div",{className:`flex p-4 ${t?"animate-pulse bg-gradient-to-r from-background to-blue-500/5 dark:from-background dark:to-blue-400/10":""}`,children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-muted mr-3 flex items-center justify-center text-xs text-muted-foreground flex-shrink-0",children:f.jsx(id,{className:"h-4 w-4"})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:"AI Assistant"}),f.jsx("div",{className:"text-xs text-muted-foreground",children:`Here's a more engaging introduction: "In today's fast-paced digital environment, standing out requires content that captivates from the first sentence..."`})]})]})})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[f.jsxs("div",{className:"flex flex-col justify-center",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Inline AI Chat"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"Interact with AI directly within your document. Highlight text and get contextual suggestions, rephrasing options, or AI-powered edits without switching contexts."})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-border shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[f.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(id,{className:"h-4 w-4 text-indigo-600 mr-2"}),f.jsx("span",{className:"font-medium text-foreground",children:"Inline Assistant"})]}),f.jsx("div",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full flex items-center dark:bg-blue-950 dark:text-blue-300",children:f.jsx("span",{children:"Context-aware"})})]}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:[f.jsxs("div",{className:`flex justify-between items-center p-4 ${t?"animate-pulse bg-gradient-to-r from-background to-blue-500/5 dark:from-background dark:to-blue-400/10":""}`,children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:"Selected Text"}),f.jsx("div",{className:"text-xs text-muted-foreground",children:"This paragraph needs improvement for clarity."})]}),f.jsx(ve,{variant:"outline",size:"sm",children:"Ask AI"})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"text-sm font-medium mb-1",children:"AI Suggestions:"}),f.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:'Try: "This paragraph requires revision to enhance clarity and readability for the audience."'}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ve,{variant:"outline",size:"sm",children:"Apply"}),f.jsx(ve,{variant:"outline",size:"sm",children:"Regenerate"})]})]})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[f.jsxs("div",{className:"flex flex-col justify-center",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Automatic AI Suggestions"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"Get real-time suggestions to improve your writing. Our AI provides instant feedback on grammar, cohesion, coherence, flow, and more as you type."})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-border shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[f.jsx("div",{className:"p-4 border-b border-border flex justify-between items-center",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(gT,{className:"h-4 w-4 text-amber-600 mr-2"}),f.jsx("span",{className:"font-medium text-foreground",children:"Writing Enhancements"})]})}),f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Grammar Correction"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Cohesion Improvement"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Coherence Check"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Flow Enhancement"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Style Suggestions"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Clarity Improvements"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Tone Adjustment"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Conciseness"})]})]})})]})]})]})]})}),f.jsx("section",{className:"w-full py-12 md:py-24 lg:py-32 bg-muted dark:bg-black/60",children:f.jsxs("div",{className:"container px-4 md:px-6",children:[f.jsxs("div",{className:`mx-auto flex max-w-[58rem] flex-col items-center justify-center gap-4 text-center ${t?"opacity-100 translate-y-0 transition-all duration-700 ease-out":"opacity-0 translate-y-10"}`,children:[f.jsx("h2",{className:"text-3xl font-bold leading-[1.1] sm:text-3xl md:text-6xl",children:"Why Ripple Matters"}),f.jsx("p",{className:"max-w-[85%] leading-normal text-muted-foreground sm:text-lg sm:leading-7",children:"In today's AI-driven world, writing better content faster gives you a competitive advantage. Ripple combines powerful editing tools with artificial intelligence to transform your workflow."})]}),f.jsxs("div",{className:`mx-auto grid justify-center gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 lg:gap-8 xl:gap-10 mt-12 ${t?"opacity-100 transition-opacity duration-1000 delay-300":"opacity-0"}`,children:[f.jsxs(fr,{className:`h-full transition-all duration-200 hover:shadow-lg border-border ${t?"opacity-100 translate-y-0 transition-all duration-700 delay-100":"opacity-0 translate-y-10"}`,children:[f.jsxs(Ml,{className:"flex flex-row items-center gap-2",children:[f.jsx(R4,{className:"h-5 w-5 text-blue-600"}),f.jsx(Pl,{children:"AI-Powered Insights"})]}),f.jsx(hr,{children:f.jsx("p",{className:"text-muted-foreground",children:"Get intelligent suggestions to improve your writing automatically. Our AI analyzes your text to help you craft more compelling, error-free content."})})]}),f.jsxs(fr,{className:`h-full transition-all duration-200 hover:shadow-lg border-border ${t?"opacity-100 translate-y-0 transition-all duration-700 delay-200":"opacity-0 translate-y-10"}`,children:[f.jsxs(Ml,{className:"flex flex-row items-center gap-2",children:[f.jsx($4,{className:"h-5 w-5 text-blue-600"}),f.jsx(Pl,{children:"Contextual Assistance"})]}),f.jsx(hr,{children:f.jsx("p",{className:"text-muted-foreground",children:"Ask questions and get help right where you need it. Our inline AI chat understands your document's context to provide relevant suggestions."})})]}),f.jsxs(fr,{className:`h-full transition-all duration-200 hover:shadow-lg border-border ${t?"opacity-100 translate-y-0 transition-all duration-700 delay-300":"opacity-0 translate-y-10"}`,children:[f.jsxs(Ml,{className:"flex flex-row items-center gap-2",children:[f.jsx(T4,{className:"h-5 w-5 text-blue-600"}),f.jsx(Pl,{children:"Seamless Collaboration"})]}),f.jsx(hr,{children:f.jsx("p",{className:"text-muted-foreground",children:"Collaborate with both humans and AI. Share your work, get feedback, and implement suggestions for better results in less time."})})]})]})]})})]}),f.jsx("footer",{className:"border-t py-6 md:py-0",children:f.jsx("div",{className:"container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row",children:f.jsxs("p",{className:"text-xs text-muted-foreground leading-loose md:text-left",children:["Built by"," ",f.jsxs(rX,{openDelay:100,closeDelay:100,children:[f.jsx(oX,{asChild:!0,children:f.jsx("a",{href:"https://github.com/nohaxsjustasian",target:"_blank",rel:"noreferrer",className:"font-medium underline underline-offset-4",children:"@nohaxsjustasian"})}),f.jsx(zA,{className:"w-80",children:f.jsxs("div",{className:"flex justify-between space-x-4",children:[f.jsxs(V0,{children:[f.jsx(JA,{src:"https://github.com/nohaxsjustasian.png"}),f.jsx(W0,{children:"NA"})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("h4",{className:"text-sm font-semibold",children:"@nohaxsjustasian"}),f.jsx("p",{className:"text-sm",children:"NEU '25 | Searching for new grad SWE positions."}),f.jsxs("div",{className:"flex items-center pt-2",children:[f.jsx(pa,{className:"mr-2 h-4 w-4 opacity-70"})," ",f.jsx("span",{className:"text-xs text-muted-foreground",children:"Joined December 2021"})]})]})]})})]})]})})})]})}const oS=new uW("",20,2e3);function uX(){const{user:t,loading:e}=si(),[n,r]=p.useState(!1);return p.useEffect(()=>{t&&!e?(oS.updateUserId(t.id),r(!0)):r(!1)},[t,e]),e?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:f.jsx("div",{className:"text-foreground",children:"Loading..."})}):t?f.jsx(nS,{children:f.jsxs(eS,{children:[f.jsx(hs,{path:"/",element:f.jsx(rS,{})}),f.jsx(hs,{path:"/editor",element:f.jsx("div",{className:"min-h-screen bg-background",children:n&&f.jsx(mY,{eventBatcher:oS})})}),f.jsx(hs,{path:"*",element:f.jsx(Z1,{to:"/editor",replace:!0})})]})}):f.jsx(nS,{children:f.jsxs(eS,{children:[f.jsx(hs,{path:"/",element:f.jsx(rS,{})}),f.jsx(hs,{path:"/auth",element:f.jsx(qJ,{})}),f.jsx(hs,{path:"*",element:f.jsx(Z1,{to:"/auth",replace:!0})})]})})}function dX(){return f.jsx(Pj,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:f.jsxs(Sq,{children:[f.jsx(uX,{}),f.jsx(sI,{})]})})}yk(document.getElementById("root")).render(f.jsx(p.StrictMode,{children:f.jsx(dX,{})}));export{sS as g};
