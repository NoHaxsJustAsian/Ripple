var jO=Object.defineProperty;var DO=(t,e,n)=>e in t?jO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var He=(t,e,n)=>DO(t,typeof e!="symbol"?e+"":e,n);function LO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $O(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var mS={exports:{}},xf={},gS={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),FO=Symbol.for("react.portal"),zO=Symbol.for("react.fragment"),BO=Symbol.for("react.strict_mode"),HO=Symbol.for("react.profiler"),UO=Symbol.for("react.provider"),VO=Symbol.for("react.context"),WO=Symbol.for("react.forward_ref"),KO=Symbol.for("react.suspense"),qO=Symbol.for("react.memo"),GO=Symbol.for("react.lazy"),tx=Symbol.iterator;function YO(t){return t===null||typeof t!="object"?null:(t=tx&&t[tx]||t["@@iterator"],typeof t=="function"?t:null)}var vS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yS=Object.assign,xS={};function wa(t,e,n){this.props=t,this.context=e,this.refs=xS,this.updater=n||vS}wa.prototype.isReactComponent={};wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wS(){}wS.prototype=wa.prototype;function fv(t,e,n){this.props=t,this.context=e,this.refs=xS,this.updater=n||vS}var hv=fv.prototype=new wS;hv.constructor=fv;yS(hv,wa.prototype);hv.isPureReactComponent=!0;var nx=Array.isArray,bS=Object.prototype.hasOwnProperty,pv={current:null},SS={key:!0,ref:!0,__self:!0,__source:!0};function CS(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)bS.call(e,r)&&!SS.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:gc,type:t,key:s,ref:i,props:o,_owner:pv.current}}function JO(t,e){return{$$typeof:gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mv(t){return typeof t=="object"&&t!==null&&t.$$typeof===gc}function XO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rx=/\/+/g;function jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XO(""+t.key):e.toString(36)}function Ku(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case gc:case FO:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+jh(i,0):r,nx(o)?(n="",t!=null&&(n=t.replace(rx,"$&/")+"/"),Ku(o,e,n,"",function(c){return c})):o!=null&&(mv(o)&&(o=JO(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(rx,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",nx(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+jh(s,a);i+=Ku(s,e,n,l,o)}else if(l=YO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+jh(s,a++),i+=Ku(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Zc(t,e,n){if(t==null)return t;var r=[],o=0;return Ku(t,r,"","",function(s){return e.call(n,s,o++)}),r}function QO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},qu={transition:null},ZO={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:qu,ReactCurrentOwner:pv};function kS(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Zc,forEach:function(t,e,n){Zc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zc(t,function(){e++}),e},toArray:function(t){return Zc(t,function(e){return e})||[]},only:function(t){if(!mv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=wa;Me.Fragment=zO;Me.Profiler=HO;Me.PureComponent=fv;Me.StrictMode=BO;Me.Suspense=KO;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZO;Me.act=kS;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yS({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=pv.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)bS.call(e,l)&&!SS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:gc,type:t.type,key:o,ref:s,props:r,_owner:i}};Me.createContext=function(t){return t={$$typeof:VO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UO,_context:t},t.Consumer=t};Me.createElement=CS;Me.createFactory=function(t){var e=CS.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:WO,render:t}};Me.isValidElement=mv;Me.lazy=function(t){return{$$typeof:GO,_payload:{_status:-1,_result:t},_init:QO}};Me.memo=function(t,e){return{$$typeof:qO,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=qu.transition;qu.transition={};try{t()}finally{qu.transition=e}};Me.unstable_act=kS;Me.useCallback=function(t,e){return Wt.current.useCallback(t,e)};Me.useContext=function(t){return Wt.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};Me.useEffect=function(t,e){return Wt.current.useEffect(t,e)};Me.useId=function(){return Wt.current.useId()};Me.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return Wt.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};Me.useRef=function(t){return Wt.current.useRef(t)};Me.useState=function(t){return Wt.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return Wt.current.useTransition()};Me.version="18.3.1";gS.exports=Me;var p=gS.exports;const U=pS(p),eI=LO({__proto__:null,default:U},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI=p,nI=Symbol.for("react.element"),rI=Symbol.for("react.fragment"),oI=Object.prototype.hasOwnProperty,sI=tI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iI={key:!0,ref:!0,__self:!0,__source:!0};function ES(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)oI.call(e,r)&&!iI.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:nI,type:t,key:s,ref:i,props:o,_owner:sI.current}}xf.Fragment=rI;xf.jsx=ES;xf.jsxs=ES;mS.exports=xf;var f=mS.exports,TS={exports:{}},yn={},NS={exports:{}},MS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,N){var L=P.length;P.push(N);e:for(;0<L;){var A=L-1>>>1,M=P[A];if(0<o(M,N))P[A]=N,P[L]=M,L=A;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var N=P[0],L=P.pop();if(L!==N){P[0]=L;e:for(var A=0,M=P.length,$=M>>>1;A<$;){var F=2*(A+1)-1,H=P[F],V=F+1,_=P[V];if(0>o(H,L))V<M&&0>o(_,H)?(P[A]=_,P[V]=L,A=V):(P[A]=H,P[F]=L,A=F);else if(V<M&&0>o(_,L))P[A]=_,P[V]=L,A=V;else break e}}return N}function o(P,N){var L=P.sortIndex-N.sortIndex;return L!==0?L:P.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var N=n(c);N!==null;){if(N.callback===null)r(c);else if(N.startTime<=P)r(c),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(c)}}function S(P){if(v=!1,b(P),!g)if(n(l)!==null)g=!0,j(C);else{var N=n(c);N!==null&&X(S,N.startTime-P)}}function C(P,N){g=!1,v&&(v=!1,y(T),T=-1),m=!0;var L=h;try{for(b(N),d=n(l);d!==null&&(!(d.expirationTime>N)||P&&!K());){var A=d.callback;if(typeof A=="function"){d.callback=null,h=d.priorityLevel;var M=A(d.expirationTime<=N);N=t.unstable_now(),typeof M=="function"?d.callback=M:d===n(l)&&r(l),b(N)}else r(l);d=n(l)}if(d!==null)var $=!0;else{var F=n(c);F!==null&&X(S,F.startTime-N),$=!1}return $}finally{d=null,h=L,m=!1}}var E=!1,k=null,T=-1,R=5,O=-1;function K(){return!(t.unstable_now()-O<R)}function z(){if(k!==null){var P=t.unstable_now();O=P;var N=!0;try{N=k(!0,P)}finally{N?Z():(E=!1,k=null)}}else E=!1}var Z;if(typeof w=="function")Z=function(){w(z)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,q=Q.port2;Q.port1.onmessage=z,Z=function(){q.postMessage(null)}}else Z=function(){x(z,0)};function j(P){k=P,E||(E=!0,Z())}function X(P,N){T=x(function(){P(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,j(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var N=3;break;default:N=h}var L=h;h=N;try{return P()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,N){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var L=h;h=P;try{return N()}finally{h=L}},t.unstable_scheduleCallback=function(P,N,L){var A=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?A+L:A):L=A,P){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=L+M,P={id:u++,callback:N,priorityLevel:P,startTime:L,expirationTime:M,sortIndex:-1},L>A?(P.sortIndex=L,e(c,P),n(l)===null&&P===n(c)&&(v?(y(T),T=-1):v=!0,X(S,L-A))):(P.sortIndex=M,e(l,P),g||m||(g=!0,j(C))),P},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(P){var N=h;return function(){var L=h;h=N;try{return P.apply(this,arguments)}finally{h=L}}}})(MS);NS.exports=MS;var aI=NS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI=p,vn=aI;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _S=new Set,Pl={};function Gs(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(Pl[t]=e,t=0;t<e.length;t++)_S.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lm=Object.prototype.hasOwnProperty,cI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ox={},sx={};function uI(t){return lm.call(sx,t)?!0:lm.call(ox,t)?!1:cI.test(t)?sx[t]=!0:(ox[t]=!0,!1)}function dI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fI(t,e,n,r){if(e===null||typeof e>"u"||dI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gv=/[\-:]([a-z])/g;function vv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gv,vv);Mt[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gv,vv);Mt[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gv,vv);Mt[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yv(t,e,n,r){var o=Mt.hasOwnProperty(e)?Mt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fI(e,n,o,r)&&(n=null),r||o===null?uI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wr=lI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eu=Symbol.for("react.element"),Ci=Symbol.for("react.portal"),ki=Symbol.for("react.fragment"),xv=Symbol.for("react.strict_mode"),cm=Symbol.for("react.profiler"),PS=Symbol.for("react.provider"),RS=Symbol.for("react.context"),wv=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),dm=Symbol.for("react.suspense_list"),bv=Symbol.for("react.memo"),ao=Symbol.for("react.lazy"),AS=Symbol.for("react.offscreen"),ix=Symbol.iterator;function $a(t){return t===null||typeof t!="object"?null:(t=ix&&t[ix]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Dh;function el(t){if(Dh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dh=e&&e[1]||""}return`
`+Dh+t}var Lh=!1;function $h(t,e){if(!t||Lh)return"";Lh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{Lh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?el(t):""}function hI(t){switch(t.tag){case 5:return el(t.type);case 16:return el("Lazy");case 13:return el("Suspense");case 19:return el("SuspenseList");case 0:case 2:case 15:return t=$h(t.type,!1),t;case 11:return t=$h(t.type.render,!1),t;case 1:return t=$h(t.type,!0),t;default:return""}}function fm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ki:return"Fragment";case Ci:return"Portal";case cm:return"Profiler";case xv:return"StrictMode";case um:return"Suspense";case dm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RS:return(t.displayName||"Context")+".Consumer";case PS:return(t._context.displayName||"Context")+".Provider";case wv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bv:return e=t.displayName||null,e!==null?e:fm(t.type)||"Memo";case ao:e=t._payload,t=t._init;try{return fm(t(e))}catch{}}return null}function pI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fm(e);case 8:return e===xv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mI(t){var e=OS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tu(t){t._valueTracker||(t._valueTracker=mI(t))}function IS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=OS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function md(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hm(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ax(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jS(t,e){e=e.checked,e!=null&&yv(t,"checked",e,!1)}function pm(t,e){jS(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mm(t,e.type,n):e.hasOwnProperty("defaultValue")&&mm(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mm(t,e,n){(e!=="number"||md(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tl=Array.isArray;function $i(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(tl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function DS(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ux(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nu,$S=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nu=nu||document.createElement("div"),nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gI=["Webkit","ms","Moz","O"];Object.keys(fl).forEach(function(t){gI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fl[e]=fl[t]})});function FS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fl.hasOwnProperty(t)&&fl[t]?(""+e).trim():e+"px"}function zS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=FS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var vI=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(t,e){if(e){if(vI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function xm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wm=null;function Sv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bm=null,Fi=null,zi=null;function dx(t){if(t=xc(t)){if(typeof bm!="function")throw Error(J(280));var e=t.stateNode;e&&(e=kf(e),bm(t.stateNode,t.type,e))}}function BS(t){Fi?zi?zi.push(t):zi=[t]:Fi=t}function HS(){if(Fi){var t=Fi,e=zi;if(zi=Fi=null,dx(t),e)for(t=0;t<e.length;t++)dx(e[t])}}function US(t,e){return t(e)}function VS(){}var Fh=!1;function WS(t,e,n){if(Fh)return t(e,n);Fh=!0;try{return US(t,e,n)}finally{Fh=!1,(Fi!==null||zi!==null)&&(VS(),HS())}}function Al(t,e){var n=t.stateNode;if(n===null)return null;var r=kf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Sm=!1;if($r)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){Sm=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{Sm=!1}function yI(t,e,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var hl=!1,gd=null,vd=!1,Cm=null,xI={onError:function(t){hl=!0,gd=t}};function wI(t,e,n,r,o,s,i,a,l){hl=!1,gd=null,yI.apply(xI,arguments)}function bI(t,e,n,r,o,s,i,a,l){if(wI.apply(this,arguments),hl){if(hl){var c=gd;hl=!1,gd=null}else throw Error(J(198));vd||(vd=!0,Cm=c)}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function KS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fx(t){if(Ys(t)!==t)throw Error(J(188))}function SI(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return fx(o),t;if(s===r)return fx(o),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function qS(t){return t=SI(t),t!==null?GS(t):null}function GS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GS(t);if(e!==null)return e;t=t.sibling}return null}var YS=vn.unstable_scheduleCallback,hx=vn.unstable_cancelCallback,CI=vn.unstable_shouldYield,kI=vn.unstable_requestPaint,at=vn.unstable_now,EI=vn.unstable_getCurrentPriorityLevel,Cv=vn.unstable_ImmediatePriority,JS=vn.unstable_UserBlockingPriority,yd=vn.unstable_NormalPriority,TI=vn.unstable_LowPriority,XS=vn.unstable_IdlePriority,wf=null,ur=null;function NI(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(wf,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:PI,MI=Math.log,_I=Math.LN2;function PI(t){return t>>>=0,t===0?32:31-(MI(t)/_I|0)|0}var ru=64,ou=4194304;function nl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=nl(a):(s&=i,s!==0&&(r=nl(s)))}else i=n&~o,i!==0?r=nl(i):s!==0&&(r=nl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),o=1<<n,r|=t[n],e&=~o;return r}function RI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Vn(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=RI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function km(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QS(){var t=ru;return ru<<=1,!(ru&4194240)&&(ru=64),t}function zh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function OI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Vn(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function kv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var je=0;function ZS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eC,Ev,tC,nC,rC,Em=!1,su=[],So=null,Co=null,ko=null,Ol=new Map,Il=new Map,ho=[],II="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function px(t,e){switch(t){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Ol.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(e.pointerId)}}function za(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=xc(e),e!==null&&Ev(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function jI(t,e,n,r,o){switch(e){case"focusin":return So=za(So,t,e,n,r,o),!0;case"dragenter":return Co=za(Co,t,e,n,r,o),!0;case"mouseover":return ko=za(ko,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Ol.set(s,za(Ol.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Il.set(s,za(Il.get(s)||null,t,e,n,r,o)),!0}return!1}function oC(t){var e=ys(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=KS(n),e!==null){t.blockedOn=e,rC(t.priority,function(){tC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wm=r,n.target.dispatchEvent(r),wm=null}else return e=xc(n),e!==null&&Ev(e),t.blockedOn=n,!1;e.shift()}return!0}function mx(t,e,n){Gu(t)&&n.delete(e)}function DI(){Em=!1,So!==null&&Gu(So)&&(So=null),Co!==null&&Gu(Co)&&(Co=null),ko!==null&&Gu(ko)&&(ko=null),Ol.forEach(mx),Il.forEach(mx)}function Ba(t,e){t.blockedOn===e&&(t.blockedOn=null,Em||(Em=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,DI)))}function jl(t){function e(o){return Ba(o,t)}if(0<su.length){Ba(su[0],t);for(var n=1;n<su.length;n++){var r=su[n];r.blockedOn===t&&(r.blockedOn=null)}}for(So!==null&&Ba(So,t),Co!==null&&Ba(Co,t),ko!==null&&Ba(ko,t),Ol.forEach(e),Il.forEach(e),n=0;n<ho.length;n++)r=ho[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ho.length&&(n=ho[0],n.blockedOn===null);)oC(n),n.blockedOn===null&&ho.shift()}var Bi=Wr.ReactCurrentBatchConfig,wd=!0;function LI(t,e,n,r){var o=je,s=Bi.transition;Bi.transition=null;try{je=1,Tv(t,e,n,r)}finally{je=o,Bi.transition=s}}function $I(t,e,n,r){var o=je,s=Bi.transition;Bi.transition=null;try{je=4,Tv(t,e,n,r)}finally{je=o,Bi.transition=s}}function Tv(t,e,n,r){if(wd){var o=Tm(t,e,n,r);if(o===null)Jh(t,e,r,bd,n),px(t,r);else if(jI(o,t,e,n,r))r.stopPropagation();else if(px(t,r),e&4&&-1<II.indexOf(t)){for(;o!==null;){var s=xc(o);if(s!==null&&eC(s),s=Tm(t,e,n,r),s===null&&Jh(t,e,r,bd,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Jh(t,e,r,null,n)}}var bd=null;function Tm(t,e,n,r){if(bd=null,t=Sv(r),t=ys(t),t!==null)if(e=Ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=KS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bd=t,null}function sC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EI()){case Cv:return 1;case JS:return 4;case yd:case TI:return 16;case XS:return 536870912;default:return 16}default:return 16}}var vo=null,Nv=null,Yu=null;function iC(){if(Yu)return Yu;var t,e=Nv,n=e.length,r,o="value"in vo?vo.value:vo.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Yu=o.slice(t,1<r?1-r:void 0)}function Ju(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iu(){return!0}function gx(){return!1}function xn(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iu:gx,this.isPropagationStopped=gx,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),e}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mv=xn(ba),yc=tt({},ba,{view:0,detail:0}),FI=xn(yc),Bh,Hh,Ha,bf=tt({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(Bh=t.screenX-Ha.screenX,Hh=t.screenY-Ha.screenY):Hh=Bh=0,Ha=t),Bh)},movementY:function(t){return"movementY"in t?t.movementY:Hh}}),vx=xn(bf),zI=tt({},bf,{dataTransfer:0}),BI=xn(zI),HI=tt({},yc,{relatedTarget:0}),Uh=xn(HI),UI=tt({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),VI=xn(UI),WI=tt({},ba,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KI=xn(WI),qI=tt({},ba,{data:0}),yx=xn(qI),GI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JI[t])?!!e[t]:!1}function _v(){return XI}var QI=tt({},yc,{key:function(t){if(t.key){var e=GI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ju(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(t){return t.type==="keypress"?Ju(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ju(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZI=xn(QI),e2=tt({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=xn(e2),t2=tt({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),n2=xn(t2),r2=tt({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),o2=xn(r2),s2=tt({},bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i2=xn(s2),a2=[9,13,27,32],Pv=$r&&"CompositionEvent"in window,pl=null;$r&&"documentMode"in document&&(pl=document.documentMode);var l2=$r&&"TextEvent"in window&&!pl,aC=$r&&(!Pv||pl&&8<pl&&11>=pl),wx=" ",bx=!1;function lC(t,e){switch(t){case"keyup":return a2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ei=!1;function c2(t,e){switch(t){case"compositionend":return cC(e);case"keypress":return e.which!==32?null:(bx=!0,wx);case"textInput":return t=e.data,t===wx&&bx?null:t;default:return null}}function u2(t,e){if(Ei)return t==="compositionend"||!Pv&&lC(t,e)?(t=iC(),Yu=Nv=vo=null,Ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aC&&e.locale!=="ko"?null:e.data;default:return null}}var d2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!d2[t.type]:e==="textarea"}function uC(t,e,n,r){BS(r),e=Sd(e,"onChange"),0<e.length&&(n=new Mv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ml=null,Dl=null;function f2(t){bC(t,0)}function Sf(t){var e=Mi(t);if(IS(e))return t}function h2(t,e){if(t==="change")return e}var dC=!1;if($r){var Vh;if($r){var Wh="oninput"in document;if(!Wh){var Cx=document.createElement("div");Cx.setAttribute("oninput","return;"),Wh=typeof Cx.oninput=="function"}Vh=Wh}else Vh=!1;dC=Vh&&(!document.documentMode||9<document.documentMode)}function kx(){ml&&(ml.detachEvent("onpropertychange",fC),Dl=ml=null)}function fC(t){if(t.propertyName==="value"&&Sf(Dl)){var e=[];uC(e,Dl,t,Sv(t)),WS(f2,e)}}function p2(t,e,n){t==="focusin"?(kx(),ml=e,Dl=n,ml.attachEvent("onpropertychange",fC)):t==="focusout"&&kx()}function m2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sf(Dl)}function g2(t,e){if(t==="click")return Sf(e)}function v2(t,e){if(t==="input"||t==="change")return Sf(e)}function y2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:y2;function Ll(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!lm.call(e,o)||!Kn(t[o],e[o]))return!1}return!0}function Ex(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tx(t,e){var n=Ex(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ex(n)}}function hC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pC(){for(var t=window,e=md();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=md(t.document)}return e}function Rv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function x2(t){var e=pC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hC(n.ownerDocument.documentElement,n)){if(r!==null&&Rv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=Tx(n,s);var i=Tx(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var w2=$r&&"documentMode"in document&&11>=document.documentMode,Ti=null,Nm=null,gl=null,Mm=!1;function Nx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mm||Ti==null||Ti!==md(r)||(r=Ti,"selectionStart"in r&&Rv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gl&&Ll(gl,r)||(gl=r,r=Sd(Nm,"onSelect"),0<r.length&&(e=new Mv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ti)))}function au(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ni={animationend:au("Animation","AnimationEnd"),animationiteration:au("Animation","AnimationIteration"),animationstart:au("Animation","AnimationStart"),transitionend:au("Transition","TransitionEnd")},Kh={},mC={};$r&&(mC=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function Cf(t){if(Kh[t])return Kh[t];if(!Ni[t])return t;var e=Ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mC)return Kh[t]=e[n];return t}var gC=Cf("animationend"),vC=Cf("animationiteration"),yC=Cf("animationstart"),xC=Cf("transitionend"),wC=new Map,Mx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wo(t,e){wC.set(t,e),Gs(e,[t])}for(var qh=0;qh<Mx.length;qh++){var Gh=Mx[qh],b2=Gh.toLowerCase(),S2=Gh[0].toUpperCase()+Gh.slice(1);Wo(b2,"on"+S2)}Wo(gC,"onAnimationEnd");Wo(vC,"onAnimationIteration");Wo(yC,"onAnimationStart");Wo("dblclick","onDoubleClick");Wo("focusin","onFocus");Wo("focusout","onBlur");Wo(xC,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function _x(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bI(r,e,void 0,t),t.currentTarget=null}function bC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;_x(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;_x(o,a,c),s=l}}}if(vd)throw t=Cm,vd=!1,Cm=null,t}function qe(t,e){var n=e[Om];n===void 0&&(n=e[Om]=new Set);var r=t+"__bubble";n.has(r)||(SC(e,t,2,!1),n.add(r))}function Yh(t,e,n){var r=0;e&&(r|=4),SC(n,t,r,e)}var lu="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[lu]){t[lu]=!0,_S.forEach(function(n){n!=="selectionchange"&&(C2.has(n)||Yh(n,!1,t),Yh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lu]||(e[lu]=!0,Yh("selectionchange",!1,e))}}function SC(t,e,n,r){switch(sC(e)){case 1:var o=LI;break;case 4:o=$I;break;default:o=Tv}n=o.bind(null,e,n,t),o=void 0,!Sm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Jh(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=ys(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}WS(function(){var c=s,u=Sv(n),d=[];e:{var h=wC.get(t);if(h!==void 0){var m=Mv,g=t;switch(t){case"keypress":if(Ju(n)===0)break e;case"keydown":case"keyup":m=ZI;break;case"focusin":g="focus",m=Uh;break;case"focusout":g="blur",m=Uh;break;case"beforeblur":case"afterblur":m=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=BI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=n2;break;case gC:case vC:case yC:m=VI;break;case xC:m=o2;break;case"scroll":m=FI;break;case"wheel":m=i2;break;case"copy":case"cut":case"paste":m=KI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=xx}var v=(e&4)!==0,x=!v&&t==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var w=c,b;w!==null;){b=w;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,y!==null&&(S=Al(w,y),S!=null&&v.push(Fl(w,S,b)))),x)break;w=w.return}0<v.length&&(h=new m(h,g,null,n,u),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==wm&&(g=n.relatedTarget||n.fromElement)&&(ys(g)||g[Fr]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?ys(g):null,g!==null&&(x=Ys(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=vx,S="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=xx,S="onPointerLeave",y="onPointerEnter",w="pointer"),x=m==null?h:Mi(m),b=g==null?h:Mi(g),h=new v(S,w+"leave",m,n,u),h.target=x,h.relatedTarget=b,S=null,ys(u)===c&&(v=new v(y,w+"enter",g,n,u),v.target=b,v.relatedTarget=x,S=v),x=S,m&&g)t:{for(v=m,y=g,w=0,b=v;b;b=si(b))w++;for(b=0,S=y;S;S=si(S))b++;for(;0<w-b;)v=si(v),w--;for(;0<b-w;)y=si(y),b--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=si(v),y=si(y)}v=null}else v=null;m!==null&&Px(d,h,m,v,!1),g!==null&&x!==null&&Px(d,x,g,v,!0)}}e:{if(h=c?Mi(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var C=h2;else if(Sx(h))if(dC)C=v2;else{C=m2;var E=p2}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=g2);if(C&&(C=C(t,c))){uC(d,C,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&mm(h,"number",h.value)}switch(E=c?Mi(c):window,t){case"focusin":(Sx(E)||E.contentEditable==="true")&&(Ti=E,Nm=c,gl=null);break;case"focusout":gl=Nm=Ti=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,Nx(d,n,u);break;case"selectionchange":if(w2)break;case"keydown":case"keyup":Nx(d,n,u)}var k;if(Pv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ei?lC(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(aC&&n.locale!=="ko"&&(Ei||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ei&&(k=iC()):(vo=u,Nv="value"in vo?vo.value:vo.textContent,Ei=!0)),E=Sd(c,T),0<E.length&&(T=new yx(T,t,null,n,u),d.push({event:T,listeners:E}),k?T.data=k:(k=cC(n),k!==null&&(T.data=k)))),(k=l2?c2(t,n):u2(t,n))&&(c=Sd(c,"onBeforeInput"),0<c.length&&(u=new yx("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}bC(d,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sd(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Al(t,n),s!=null&&r.unshift(Fl(t,s,o)),s=Al(t,e),s!=null&&r.push(Fl(t,s,o))),t=t.return}return r}function si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Px(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=Al(n,s),l!=null&&i.unshift(Fl(n,l,a))):o||(l=Al(n,s),l!=null&&i.push(Fl(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var k2=/\r\n?/g,E2=/\u0000|\uFFFD/g;function Rx(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(E2,"")}function cu(t,e,n){if(e=Rx(e),Rx(t)!==e&&n)throw Error(J(425))}function Cd(){}var _m=null,Pm=null;function Rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Am=typeof setTimeout=="function"?setTimeout:void 0,T2=typeof clearTimeout=="function"?clearTimeout:void 0,Ax=typeof Promise=="function"?Promise:void 0,N2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ax<"u"?function(t){return Ax.resolve(null).then(t).catch(M2)}:Am;function M2(t){setTimeout(function(){throw t})}function Xh(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),jl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);jl(e)}function Eo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ox(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),lr="__reactFiber$"+Sa,zl="__reactProps$"+Sa,Fr="__reactContainer$"+Sa,Om="__reactEvents$"+Sa,_2="__reactListeners$"+Sa,P2="__reactHandles$"+Sa;function ys(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ox(t);t!==null;){if(n=t[lr])return n;t=Ox(t)}return e}t=n,n=t.parentNode}return null}function xc(t){return t=t[lr]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function kf(t){return t[zl]||null}var Im=[],_i=-1;function Ko(t){return{current:t}}function Ye(t){0>_i||(t.current=Im[_i],Im[_i]=null,_i--)}function Ve(t,e){_i++,Im[_i]=t.current,t.current=e}var $o={},Lt=Ko($o),nn=Ko(!1),As=$o;function ta(t,e){var n=t.type.contextTypes;if(!n)return $o;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function rn(t){return t=t.childContextTypes,t!=null}function kd(){Ye(nn),Ye(Lt)}function Ix(t,e,n){if(Lt.current!==$o)throw Error(J(168));Ve(Lt,e),Ve(nn,n)}function CC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(J(108,pI(t)||"Unknown",o));return tt({},n,r)}function Ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$o,As=Lt.current,Ve(Lt,t),Ve(nn,nn.current),!0}function jx(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=CC(t,e,As),r.__reactInternalMemoizedMergedChildContext=t,Ye(nn),Ye(Lt),Ve(Lt,t)):Ye(nn),Ve(nn,n)}var Pr=null,Ef=!1,Qh=!1;function kC(t){Pr===null?Pr=[t]:Pr.push(t)}function R2(t){Ef=!0,kC(t)}function qo(){if(!Qh&&Pr!==null){Qh=!0;var t=0,e=je;try{var n=Pr;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,Ef=!1}catch(o){throw Pr!==null&&(Pr=Pr.slice(t+1)),YS(Cv,qo),o}finally{je=e,Qh=!1}}return null}var Pi=[],Ri=0,Td=null,Nd=0,Sn=[],Cn=0,Os=null,Rr=1,Ar="";function cs(t,e){Pi[Ri++]=Nd,Pi[Ri++]=Td,Td=t,Nd=e}function EC(t,e,n){Sn[Cn++]=Rr,Sn[Cn++]=Ar,Sn[Cn++]=Os,Os=t;var r=Rr;t=Ar;var o=32-Vn(r)-1;r&=~(1<<o),n+=1;var s=32-Vn(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Rr=1<<32-Vn(e)+o|n<<o|r,Ar=s+t}else Rr=1<<s|n<<o|r,Ar=t}function Av(t){t.return!==null&&(cs(t,1),EC(t,1,0))}function Ov(t){for(;t===Td;)Td=Pi[--Ri],Pi[Ri]=null,Nd=Pi[--Ri],Pi[Ri]=null;for(;t===Os;)Os=Sn[--Cn],Sn[Cn]=null,Ar=Sn[--Cn],Sn[Cn]=null,Rr=Sn[--Cn],Sn[Cn]=null}var mn=null,pn=null,Xe=!1,Hn=null;function TC(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,pn=Eo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Os!==null?{id:Rr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,pn=null,!0):!1;default:return!1}}function jm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dm(t){if(Xe){var e=pn;if(e){var n=e;if(!Dx(t,e)){if(jm(t))throw Error(J(418));e=Eo(n.nextSibling);var r=mn;e&&Dx(t,e)?TC(r,n):(t.flags=t.flags&-4097|2,Xe=!1,mn=t)}}else{if(jm(t))throw Error(J(418));t.flags=t.flags&-4097|2,Xe=!1,mn=t}}}function Lx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function uu(t){if(t!==mn)return!1;if(!Xe)return Lx(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rm(t.type,t.memoizedProps)),e&&(e=pn)){if(jm(t))throw NC(),Error(J(418));for(;e;)TC(t,e),e=Eo(e.nextSibling)}if(Lx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Eo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=mn?Eo(t.stateNode.nextSibling):null;return!0}function NC(){for(var t=pn;t;)t=Eo(t.nextSibling)}function na(){pn=mn=null,Xe=!1}function Iv(t){Hn===null?Hn=[t]:Hn.push(t)}var A2=Wr.ReactCurrentBatchConfig;function Ua(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function du(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $x(t){var e=t._init;return e(t._payload)}function MC(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function o(y,w){return y=_o(y,w),y.index=0,y.sibling=null,y}function s(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,b,S){return w===null||w.tag!==6?(w=sp(b,y.mode,S),w.return=y,w):(w=o(w,b),w.return=y,w)}function l(y,w,b,S){var C=b.type;return C===ki?u(y,w,b.props.children,S,b.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ao&&$x(C)===w.type)?(S=o(w,b.props),S.ref=Ua(y,w,b),S.return=y,S):(S=rd(b.type,b.key,b.props,null,y.mode,S),S.ref=Ua(y,w,b),S.return=y,S)}function c(y,w,b,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=ip(b,y.mode,S),w.return=y,w):(w=o(w,b.children||[]),w.return=y,w)}function u(y,w,b,S,C){return w===null||w.tag!==7?(w=Es(b,y.mode,S,C),w.return=y,w):(w=o(w,b),w.return=y,w)}function d(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=sp(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case eu:return b=rd(w.type,w.key,w.props,null,y.mode,b),b.ref=Ua(y,null,w),b.return=y,b;case Ci:return w=ip(w,y.mode,b),w.return=y,w;case ao:var S=w._init;return d(y,S(w._payload),b)}if(tl(w)||$a(w))return w=Es(w,y.mode,b,null),w.return=y,w;du(y,w)}return null}function h(y,w,b,S){var C=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(y,w,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eu:return b.key===C?l(y,w,b,S):null;case Ci:return b.key===C?c(y,w,b,S):null;case ao:return C=b._init,h(y,w,C(b._payload),S)}if(tl(b)||$a(b))return C!==null?null:u(y,w,b,S,null);du(y,b)}return null}function m(y,w,b,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(b)||null,a(w,y,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case eu:return y=y.get(S.key===null?b:S.key)||null,l(w,y,S,C);case Ci:return y=y.get(S.key===null?b:S.key)||null,c(w,y,S,C);case ao:var E=S._init;return m(y,w,b,E(S._payload),C)}if(tl(S)||$a(S))return y=y.get(b)||null,u(w,y,S,C,null);du(w,S)}return null}function g(y,w,b,S){for(var C=null,E=null,k=w,T=w=0,R=null;k!==null&&T<b.length;T++){k.index>T?(R=k,k=null):R=k.sibling;var O=h(y,k,b[T],S);if(O===null){k===null&&(k=R);break}t&&k&&O.alternate===null&&e(y,k),w=s(O,w,T),E===null?C=O:E.sibling=O,E=O,k=R}if(T===b.length)return n(y,k),Xe&&cs(y,T),C;if(k===null){for(;T<b.length;T++)k=d(y,b[T],S),k!==null&&(w=s(k,w,T),E===null?C=k:E.sibling=k,E=k);return Xe&&cs(y,T),C}for(k=r(y,k);T<b.length;T++)R=m(k,y,T,b[T],S),R!==null&&(t&&R.alternate!==null&&k.delete(R.key===null?T:R.key),w=s(R,w,T),E===null?C=R:E.sibling=R,E=R);return t&&k.forEach(function(K){return e(y,K)}),Xe&&cs(y,T),C}function v(y,w,b,S){var C=$a(b);if(typeof C!="function")throw Error(J(150));if(b=C.call(b),b==null)throw Error(J(151));for(var E=C=null,k=w,T=w=0,R=null,O=b.next();k!==null&&!O.done;T++,O=b.next()){k.index>T?(R=k,k=null):R=k.sibling;var K=h(y,k,O.value,S);if(K===null){k===null&&(k=R);break}t&&k&&K.alternate===null&&e(y,k),w=s(K,w,T),E===null?C=K:E.sibling=K,E=K,k=R}if(O.done)return n(y,k),Xe&&cs(y,T),C;if(k===null){for(;!O.done;T++,O=b.next())O=d(y,O.value,S),O!==null&&(w=s(O,w,T),E===null?C=O:E.sibling=O,E=O);return Xe&&cs(y,T),C}for(k=r(y,k);!O.done;T++,O=b.next())O=m(k,y,T,O.value,S),O!==null&&(t&&O.alternate!==null&&k.delete(O.key===null?T:O.key),w=s(O,w,T),E===null?C=O:E.sibling=O,E=O);return t&&k.forEach(function(z){return e(y,z)}),Xe&&cs(y,T),C}function x(y,w,b,S){if(typeof b=="object"&&b!==null&&b.type===ki&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case eu:e:{for(var C=b.key,E=w;E!==null;){if(E.key===C){if(C=b.type,C===ki){if(E.tag===7){n(y,E.sibling),w=o(E,b.props.children),w.return=y,y=w;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ao&&$x(C)===E.type){n(y,E.sibling),w=o(E,b.props),w.ref=Ua(y,E,b),w.return=y,y=w;break e}n(y,E);break}else e(y,E);E=E.sibling}b.type===ki?(w=Es(b.props.children,y.mode,S,b.key),w.return=y,y=w):(S=rd(b.type,b.key,b.props,null,y.mode,S),S.ref=Ua(y,w,b),S.return=y,y=S)}return i(y);case Ci:e:{for(E=b.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),w=o(w,b.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=ip(b,y.mode,S),w.return=y,y=w}return i(y);case ao:return E=b._init,x(y,w,E(b._payload),S)}if(tl(b))return g(y,w,b,S);if($a(b))return v(y,w,b,S);du(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),w=o(w,b),w.return=y,y=w):(n(y,w),w=sp(b,y.mode,S),w.return=y,y=w),i(y)):n(y,w)}return x}var ra=MC(!0),_C=MC(!1),Md=Ko(null),_d=null,Ai=null,jv=null;function Dv(){jv=Ai=_d=null}function Lv(t){var e=Md.current;Ye(Md),t._currentValue=e}function Lm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hi(t,e){_d=t,jv=Ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(jv!==t)if(t={context:t,memoizedValue:e,next:null},Ai===null){if(_d===null)throw Error(J(308));Ai=t,_d.dependencies={lanes:0,firstContext:t}}else Ai=Ai.next=t;return e}var xs=null;function $v(t){xs===null?xs=[t]:xs.push(t)}function PC(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,$v(e)):(n.next=o.next,o.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lo=!1;function Fv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function To(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,zr(t,n)}return o=r.interleaved,o===null?(e.next=e,$v(r)):(e.next=o.next,o.next=e),r.interleaved=e,zr(t,n)}function Xu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kv(t,n)}}function Fx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pd(t,e,n,r){var o=t.updateQueue;lo=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=o.baseState;i=0,u=c=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(h=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=tt({},d,h);break e;case 2:lo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,i|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);js|=i,t.lanes=i,t.memoizedState=d}}function zx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(J(191,o));o.call(r)}}}var wc={},dr=Ko(wc),Bl=Ko(wc),Hl=Ko(wc);function ws(t){if(t===wc)throw Error(J(174));return t}function zv(t,e){switch(Ve(Hl,e),Ve(Bl,t),Ve(dr,wc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vm(e,t)}Ye(dr),Ve(dr,e)}function oa(){Ye(dr),Ye(Bl),Ye(Hl)}function AC(t){ws(Hl.current);var e=ws(dr.current),n=vm(e,t.type);e!==n&&(Ve(Bl,t),Ve(dr,n))}function Bv(t){Bl.current===t&&(Ye(dr),Ye(Bl))}var Ze=Ko(0);function Rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zh=[];function Hv(){for(var t=0;t<Zh.length;t++)Zh[t]._workInProgressVersionPrimary=null;Zh.length=0}var Qu=Wr.ReactCurrentDispatcher,ep=Wr.ReactCurrentBatchConfig,Is=0,et=null,ht=null,gt=null,Ad=!1,vl=!1,Ul=0,O2=0;function At(){throw Error(J(321))}function Uv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function Vv(t,e,n,r,o,s){if(Is=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qu.current=t===null||t.memoizedState===null?L2:$2,t=n(r,o),vl){s=0;do{if(vl=!1,Ul=0,25<=s)throw Error(J(301));s+=1,gt=ht=null,e.updateQueue=null,Qu.current=F2,t=n(r,o)}while(vl)}if(Qu.current=Od,e=ht!==null&&ht.next!==null,Is=0,gt=ht=et=null,Ad=!1,e)throw Error(J(300));return t}function Wv(){var t=Ul!==0;return Ul=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?et.memoizedState=gt=t:gt=gt.next=t,gt}function On(){if(ht===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=gt===null?et.memoizedState:gt.next;if(e!==null)gt=e,ht=t;else{if(t===null)throw Error(J(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?et.memoizedState=gt=t:gt=gt.next=t}return gt}function Vl(t,e){return typeof e=="function"?e(t):e}function tp(t){var e=On(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=ht,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var u=c.lane;if((Is&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,et.lanes|=u,js|=u}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Kn(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,et.lanes|=s,js|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function np(t){var e=On(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Kn(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function OC(){}function IC(t,e){var n=et,r=On(),o=e(),s=!Kn(r.memoizedState,o);if(s&&(r.memoizedState=o,en=!0),r=r.queue,Kv(LC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,DC.bind(null,n,r,o,e),void 0,null),yt===null)throw Error(J(349));Is&30||jC(n,e,o)}return o}function jC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function DC(t,e,n,r){e.value=n,e.getSnapshot=r,$C(e)&&FC(t)}function LC(t,e,n){return n(function(){$C(e)&&FC(t)})}function $C(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function FC(t){var e=zr(t,1);e!==null&&Wn(e,t,1,-1)}function Bx(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:t},e.queue=t,t=t.dispatch=D2.bind(null,et,t),[e.memoizedState,t]}function Wl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zC(){return On().memoizedState}function Zu(t,e,n,r){var o=ar();et.flags|=t,o.memoizedState=Wl(1|e,n,void 0,r===void 0?null:r)}function Tf(t,e,n,r){var o=On();r=r===void 0?null:r;var s=void 0;if(ht!==null){var i=ht.memoizedState;if(s=i.destroy,r!==null&&Uv(r,i.deps)){o.memoizedState=Wl(e,n,s,r);return}}et.flags|=t,o.memoizedState=Wl(1|e,n,s,r)}function Hx(t,e){return Zu(8390656,8,t,e)}function Kv(t,e){return Tf(2048,8,t,e)}function BC(t,e){return Tf(4,2,t,e)}function HC(t,e){return Tf(4,4,t,e)}function UC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VC(t,e,n){return n=n!=null?n.concat([t]):null,Tf(4,4,UC.bind(null,e,t),n)}function qv(){}function WC(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KC(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qC(t,e,n){return Is&21?(Kn(n,e)||(n=QS(),et.lanes|=n,js|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function I2(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=ep.transition;ep.transition={};try{t(!1),e()}finally{je=n,ep.transition=r}}function GC(){return On().memoizedState}function j2(t,e,n){var r=Mo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},YC(t))JC(e,n);else if(n=PC(t,e,n,r),n!==null){var o=Bt();Wn(n,t,r,o),XC(n,e,r)}}function D2(t,e,n){var r=Mo(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(YC(t))JC(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Kn(a,i)){var l=e.interleaved;l===null?(o.next=o,$v(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=PC(t,e,o,r),n!==null&&(o=Bt(),Wn(n,t,r,o),XC(n,e,r))}}function YC(t){var e=t.alternate;return t===et||e!==null&&e===et}function JC(t,e){vl=Ad=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kv(t,n)}}var Od={readContext:An,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},L2={readContext:An,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:Hx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zu(4194308,4,UC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zu(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j2.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:Bx,useDebugValue:qv,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=Bx(!1),e=t[0];return t=I2.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,o=ar();if(Xe){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),yt===null)throw Error(J(349));Is&30||jC(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,Hx(LC.bind(null,r,s,t),[t]),r.flags|=2048,Wl(9,DC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ar(),e=yt.identifierPrefix;if(Xe){var n=Ar,r=Rr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=O2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$2={readContext:An,useCallback:WC,useContext:An,useEffect:Kv,useImperativeHandle:VC,useInsertionEffect:BC,useLayoutEffect:HC,useMemo:KC,useReducer:tp,useRef:zC,useState:function(){return tp(Vl)},useDebugValue:qv,useDeferredValue:function(t){var e=On();return qC(e,ht.memoizedState,t)},useTransition:function(){var t=tp(Vl)[0],e=On().memoizedState;return[t,e]},useMutableSource:OC,useSyncExternalStore:IC,useId:GC,unstable_isNewReconciler:!1},F2={readContext:An,useCallback:WC,useContext:An,useEffect:Kv,useImperativeHandle:VC,useInsertionEffect:BC,useLayoutEffect:HC,useMemo:KC,useReducer:np,useRef:zC,useState:function(){return np(Vl)},useDebugValue:qv,useDeferredValue:function(t){var e=On();return ht===null?e.memoizedState=t:qC(e,ht.memoizedState,t)},useTransition:function(){var t=np(Vl)[0],e=On().memoizedState;return[t,e]},useMutableSource:OC,useSyncExternalStore:IC,useId:GC,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $m(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nf={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),o=Mo(t),s=Ir(r,o);s.payload=e,n!=null&&(s.callback=n),e=To(t,s,o),e!==null&&(Wn(e,t,o,r),Xu(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),o=Mo(t),s=Ir(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=To(t,s,o),e!==null&&(Wn(e,t,o,r),Xu(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=Mo(t),o=Ir(n,r);o.tag=2,e!=null&&(o.callback=e),e=To(t,o,r),e!==null&&(Wn(e,t,r,n),Xu(e,t,r))}};function Ux(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Ll(n,r)||!Ll(o,s):!0}function QC(t,e,n){var r=!1,o=$o,s=e.contextType;return typeof s=="object"&&s!==null?s=An(s):(o=rn(e)?As:Lt.current,r=e.contextTypes,s=(r=r!=null)?ta(t,o):$o),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Vx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nf.enqueueReplaceState(e,e.state,null)}function Fm(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Fv(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=An(s):(s=rn(e)?As:Lt.current,o.context=ta(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($m(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Nf.enqueueReplaceState(o,o.state,null),Pd(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",r=e;do n+=hI(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function rp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z2=typeof WeakMap=="function"?WeakMap:Map;function ZC(t,e,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jd||(jd=!0,Jm=r),zm(t,e)},n}function ek(t,e,n){n=Ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){zm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zm(t,e),typeof r!="function"&&(No===null?No=new Set([this]):No.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Wx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z2;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=ej.bind(null,t,e,n),e.then(t,t))}function Kx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qx(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ir(-1,1),e.tag=2,To(n,e,1))),n.lanes|=1),t)}var B2=Wr.ReactCurrentOwner,en=!1;function zt(t,e,n,r){e.child=t===null?_C(e,null,n,r):ra(e,t.child,n,r)}function Gx(t,e,n,r,o){n=n.render;var s=e.ref;return Hi(e,o),r=Vv(t,e,n,r,s,o),n=Wv(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Br(t,e,o)):(Xe&&n&&Av(e),e.flags|=1,zt(t,e,r,o),e.child)}function Yx(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!ty(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tk(t,e,s,r,o)):(t=rd(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ll,n(i,r)&&t.ref===e.ref)return Br(t,e,o)}return e.flags|=1,t=_o(s,r),t.ref=e.ref,t.return=e,e.child=t}function tk(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Ll(s,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Br(t,e,o)}return Bm(t,e,n,r,o)}function nk(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ii,dn),dn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Ii,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(Ii,dn),dn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(Ii,dn),dn|=r;return zt(t,e,o,n),e.child}function rk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bm(t,e,n,r,o){var s=rn(n)?As:Lt.current;return s=ta(e,s),Hi(e,o),n=Vv(t,e,n,r,s,o),r=Wv(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Br(t,e,o)):(Xe&&r&&Av(e),e.flags|=1,zt(t,e,n,o),e.child)}function Jx(t,e,n,r,o){if(rn(n)){var s=!0;Ed(e)}else s=!1;if(Hi(e,o),e.stateNode===null)ed(t,e),QC(e,n,r),Fm(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=An(c):(c=rn(n)?As:Lt.current,c=ta(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Vx(e,i,r,c),lo=!1;var h=e.memoizedState;i.state=h,Pd(e,r,i,o),l=e.memoizedState,a!==r||h!==l||nn.current||lo?(typeof u=="function"&&($m(e,n,u,r),l=e.memoizedState),(a=lo||Ux(e,n,a,r,h,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,RC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fn(e.type,a),i.props=c,d=e.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=An(l):(l=rn(n)?As:Lt.current,l=ta(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Vx(e,i,r,l),lo=!1,h=e.memoizedState,i.state=h,Pd(e,r,i,o);var g=e.memoizedState;a!==d||h!==g||nn.current||lo?(typeof m=="function"&&($m(e,n,m,r),g=e.memoizedState),(c=lo||Ux(e,n,c,r,h,g,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,g,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,g,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),i.props=r,i.state=g,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Hm(t,e,n,r,s,o)}function Hm(t,e,n,r,o,s){rk(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&jx(e,n,!1),Br(t,e,s);r=e.stateNode,B2.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=ra(e,t.child,null,s),e.child=ra(e,null,a,s)):zt(t,e,a,s),e.memoizedState=r.state,o&&jx(e,n,!0),e.child}function ok(t){var e=t.stateNode;e.pendingContext?Ix(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ix(t,e.context,!1),zv(t,e.containerInfo)}function Xx(t,e,n,r,o){return na(),Iv(o),e.flags|=256,zt(t,e,n,r),e.child}var Um={dehydrated:null,treeContext:null,retryLane:0};function Vm(t){return{baseLanes:t,cachePool:null,transitions:null}}function sk(t,e,n){var r=e.pendingProps,o=Ze.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Ve(Ze,o&1),t===null)return Dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Pf(i,r,0,null),t=Es(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vm(n),e.memoizedState=Um,t):Gv(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return H2(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_o(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=_o(a,s):(s=Es(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?Vm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=Um,r}return s=t.child,t=s.sibling,r=_o(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gv(t,e){return e=Pf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fu(t,e,n,r){return r!==null&&Iv(r),ra(e,t.child,null,n),t=Gv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H2(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=rp(Error(J(422))),fu(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=Pf({mode:"visible",children:r.children},o,0,null),s=Es(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ra(e,t.child,null,i),e.child.memoizedState=Vm(i),e.memoizedState=Um,s);if(!(e.mode&1))return fu(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=rp(s,r,void 0),fu(t,e,i,r)}if(a=(i&t.childLanes)!==0,en||a){if(r=yt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,zr(t,o),Wn(r,t,o,-1))}return ey(),r=rp(Error(J(421))),fu(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=tj.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,pn=Eo(o.nextSibling),mn=e,Xe=!0,Hn=null,t!==null&&(Sn[Cn++]=Rr,Sn[Cn++]=Ar,Sn[Cn++]=Os,Rr=t.id,Ar=t.overflow,Os=e),e=Gv(e,r.children),e.flags|=4096,e)}function Qx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lm(t.return,e,n)}function op(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function ik(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(zt(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qx(t,n,e);else if(t.tag===19)Qx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Rd(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),op(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Rd(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}op(e,!0,n,null,s);break;case"together":op(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ed(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),js|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=_o(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_o(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U2(t,e,n){switch(e.tag){case 3:ok(e),na();break;case 5:AC(e);break;case 1:rn(e.type)&&Ed(e);break;case 4:zv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Ve(Md,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?sk(t,e,n):(Ve(Ze,Ze.current&1),t=Br(t,e,n),t!==null?t.sibling:null);Ve(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ik(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ve(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,nk(t,e,n)}return Br(t,e,n)}var ak,Wm,lk,ck;ak=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wm=function(){};lk=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,ws(dr.current);var s=null;switch(n){case"input":o=hm(t,o),r=hm(t,r),s=[];break;case"select":o=tt({},o,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":o=gm(t,o),r=gm(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cd)}ym(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ck=function(t,e,n,r){n!==r&&(e.flags|=4)};function Va(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function V2(t,e,n){var r=e.pendingProps;switch(Ov(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return rn(e.type)&&kd(),Ot(e),null;case 3:return r=e.stateNode,oa(),Ye(nn),Ye(Lt),Hv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(Zm(Hn),Hn=null))),Wm(t,e),Ot(e),null;case 5:Bv(e);var o=ws(Hl.current);if(n=e.type,t!==null&&e.stateNode!=null)lk(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Ot(e),null}if(t=ws(dr.current),uu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[lr]=e,r[zl]=s,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(o=0;o<rl.length;o++)qe(rl[o],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":ax(r,s),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qe("invalid",r);break;case"textarea":cx(r,s),qe("invalid",r)}ym(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&cu(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&cu(r.textContent,a,t),o=["children",""+a]):Pl.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&qe("scroll",r)}switch(n){case"input":tu(r),lx(r,s,!0);break;case"textarea":tu(r),ux(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cd)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[lr]=e,t[zl]=r,ak(t,e,!1,!1),e.stateNode=t;e:{switch(i=xm(n,r),n){case"dialog":qe("cancel",t),qe("close",t),o=r;break;case"iframe":case"object":case"embed":qe("load",t),o=r;break;case"video":case"audio":for(o=0;o<rl.length;o++)qe(rl[o],t);o=r;break;case"source":qe("error",t),o=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),o=r;break;case"details":qe("toggle",t),o=r;break;case"input":ax(t,r),o=hm(t,r),qe("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=tt({},r,{value:void 0}),qe("invalid",t);break;case"textarea":cx(t,r),o=gm(t,r),qe("invalid",t);break;default:o=r}ym(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?zS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$S(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rl(t,l):typeof l=="number"&&Rl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qe("scroll",t):l!=null&&yv(t,s,l,i))}switch(n){case"input":tu(t),lx(t,r,!1);break;case"textarea":tu(t),ux(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?$i(t,!!r.multiple,s,!1):r.defaultValue!=null&&$i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Cd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)ck(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=ws(Hl.current),ws(dr.current),uu(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(s=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:cu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return Ot(e),null;case 13:if(Ye(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&pn!==null&&e.mode&1&&!(e.flags&128))NC(),na(),e.flags|=98560,s=!1;else if(s=uu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[lr]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),s=!1}else Hn!==null&&(Zm(Hn),Hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?pt===0&&(pt=3):ey())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return oa(),Wm(t,e),t===null&&$l(e.stateNode.containerInfo),Ot(e),null;case 10:return Lv(e.type._context),Ot(e),null;case 17:return rn(e.type)&&kd(),Ot(e),null;case 19:if(Ye(Ze),s=e.memoizedState,s===null)return Ot(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)Va(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Rd(t),i!==null){for(e.flags|=128,Va(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ze,Ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&at()>ia&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rd(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Xe)return Ot(e),null}else 2*at()-s.renderingStartTime>ia&&n!==1073741824&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=at(),e.sibling=null,n=Ze.current,Ve(Ze,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return Zv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function W2(t,e){switch(Ov(e),e.tag){case 1:return rn(e.type)&&kd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oa(),Ye(nn),Ye(Lt),Hv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bv(e),null;case 13:if(Ye(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(Ze),null;case 4:return oa(),null;case 10:return Lv(e.type._context),null;case 22:case 23:return Zv(),null;case 24:return null;default:return null}}var hu=!1,jt=!1,K2=typeof WeakSet=="function"?WeakSet:Set,le=null;function Oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function Km(t,e,n){try{n()}catch(r){rt(t,e,r)}}var Zx=!1;function q2(t,e){if(_m=wd,t=pC(),Rv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var m;d!==n||o!==0&&d.nodeType!==3||(a=i+o),d!==s||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===t)break t;if(h===n&&++c===o&&(a=i),h===s&&++u===r&&(l=i),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pm={focusedElem:t,selectionRange:n},wd=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Fn(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(S){rt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return g=Zx,Zx=!1,g}function yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&Km(e,n,s)}o=o.next}while(o!==r)}}function Mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uk(t){var e=t.alternate;e!==null&&(t.alternate=null,uk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[zl],delete e[Om],delete e[_2],delete e[P2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dk(t){return t.tag===5||t.tag===3||t.tag===4}function ew(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cd));else if(r!==4&&(t=t.child,t!==null))for(Gm(t,e,n),t=t.sibling;t!==null;)Gm(t,e,n),t=t.sibling}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}var Ct=null,zn=!1;function Jr(t,e,n){for(n=n.child;n!==null;)fk(t,e,n),n=n.sibling}function fk(t,e,n){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(wf,n)}catch{}switch(n.tag){case 5:jt||Oi(n,e);case 6:var r=Ct,o=zn;Ct=null,Jr(t,e,n),Ct=r,zn=o,Ct!==null&&(zn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(zn?(t=Ct,n=n.stateNode,t.nodeType===8?Xh(t.parentNode,n):t.nodeType===1&&Xh(t,n),jl(t)):Xh(Ct,n.stateNode));break;case 4:r=Ct,o=zn,Ct=n.stateNode.containerInfo,zn=!0,Jr(t,e,n),Ct=r,zn=o;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&Km(n,e,i),o=o.next}while(o!==r)}Jr(t,e,n);break;case 1:if(!jt&&(Oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rt(n,e,a)}Jr(t,e,n);break;case 21:Jr(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,Jr(t,e,n),jt=r):Jr(t,e,n);break;default:Jr(t,e,n)}}function tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new K2),e.forEach(function(r){var o=nj.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,zn=!1;break e;case 3:Ct=a.stateNode.containerInfo,zn=!0;break e;case 4:Ct=a.stateNode.containerInfo,zn=!0;break e}a=a.return}if(Ct===null)throw Error(J(160));fk(s,i,o),Ct=null,zn=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){rt(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hk(e,t),e=e.sibling}function hk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),or(t),r&4){try{yl(3,t,t.return),Mf(3,t)}catch(v){rt(t,t.return,v)}try{yl(5,t,t.return)}catch(v){rt(t,t.return,v)}}break;case 1:Ln(e,t),or(t),r&512&&n!==null&&Oi(n,n.return);break;case 5:if(Ln(e,t),or(t),r&512&&n!==null&&Oi(n,n.return),t.flags&32){var o=t.stateNode;try{Rl(o,"")}catch(v){rt(t,t.return,v)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jS(o,s),xm(a,i);var c=xm(a,s);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];u==="style"?zS(o,d):u==="dangerouslySetInnerHTML"?$S(o,d):u==="children"?Rl(o,d):yv(o,u,d,c)}switch(a){case"input":pm(o,s);break;case"textarea":DS(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?$i(o,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?$i(o,!!s.multiple,s.defaultValue,!0):$i(o,!!s.multiple,s.multiple?[]:"",!1))}o[zl]=s}catch(v){rt(t,t.return,v)}}break;case 6:if(Ln(e,t),or(t),r&4){if(t.stateNode===null)throw Error(J(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(v){rt(t,t.return,v)}}break;case 3:if(Ln(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(e.containerInfo)}catch(v){rt(t,t.return,v)}break;case 4:Ln(e,t),or(t);break;case 13:Ln(e,t),or(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Xv=at())),r&4&&tw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||u,Ln(e,t),jt=c):Ln(e,t),or(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(le=t,u=t.child;u!==null;){for(d=le=u;le!==null;){switch(h=le,m=h.child,h.tag){case 0:case 11:case 14:case 15:yl(4,h,h.return);break;case 1:Oi(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){rt(r,n,v)}}break;case 5:Oi(h,h.return);break;case 22:if(h.memoizedState!==null){rw(d);continue}}m!==null?(m.return=h,le=m):rw(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{o=d.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=FS("display",i))}catch(v){rt(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){rt(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,t),or(t),r&4&&tw(t);break;case 21:break;default:Ln(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dk(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Rl(o,""),r.flags&=-33);var s=ew(t);Ym(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=ew(t);Gm(t,a,i);break;default:throw Error(J(161))}}catch(l){rt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G2(t,e,n){le=t,pk(t)}function pk(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var o=le,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||hu;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||jt;a=hu;var c=jt;if(hu=i,(jt=l)&&!c)for(le=o;le!==null;)i=le,l=i.child,i.tag===22&&i.memoizedState!==null?ow(o):l!==null?(l.return=i,le=l):ow(o);for(;s!==null;)le=s,pk(s),s=s.sibling;le=o,hu=a,jt=c}nw(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,le=s):nw(t)}}function nw(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Mf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zx(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zx(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&jl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}jt||e.flags&512&&qm(e)}catch(h){rt(e,e.return,h)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function rw(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function ow(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mf(4,e)}catch(l){rt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){rt(e,o,l)}}var s=e.return;try{qm(e)}catch(l){rt(e,s,l)}break;case 5:var i=e.return;try{qm(e)}catch(l){rt(e,i,l)}}}catch(l){rt(e,e.return,l)}if(e===t){le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,le=a;break}le=e.return}}var Y2=Math.ceil,Id=Wr.ReactCurrentDispatcher,Yv=Wr.ReactCurrentOwner,Tn=Wr.ReactCurrentBatchConfig,Ae=0,yt=null,ct=null,Nt=0,dn=0,Ii=Ko(0),pt=0,Kl=null,js=0,_f=0,Jv=0,xl=null,Qt=null,Xv=0,ia=1/0,Tr=null,jd=!1,Jm=null,No=null,pu=!1,yo=null,Dd=0,wl=0,Xm=null,td=-1,nd=0;function Bt(){return Ae&6?at():td!==-1?td:td=at()}function Mo(t){return t.mode&1?Ae&2&&Nt!==0?Nt&-Nt:A2.transition!==null?(nd===0&&(nd=QS()),nd):(t=je,t!==0||(t=window.event,t=t===void 0?16:sC(t.type)),t):1}function Wn(t,e,n,r){if(50<wl)throw wl=0,Xm=null,Error(J(185));vc(t,n,r),(!(Ae&2)||t!==yt)&&(t===yt&&(!(Ae&2)&&(_f|=n),pt===4&&po(t,Nt)),on(t,r),n===1&&Ae===0&&!(e.mode&1)&&(ia=at()+500,Ef&&qo()))}function on(t,e){var n=t.callbackNode;AI(t,e);var r=xd(t,t===yt?Nt:0);if(r===0)n!==null&&hx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hx(n),e===1)t.tag===0?R2(sw.bind(null,t)):kC(sw.bind(null,t)),N2(function(){!(Ae&6)&&qo()}),n=null;else{switch(ZS(r)){case 1:n=Cv;break;case 4:n=JS;break;case 16:n=yd;break;case 536870912:n=XS;break;default:n=yd}n=Sk(n,mk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mk(t,e){if(td=-1,nd=0,Ae&6)throw Error(J(327));var n=t.callbackNode;if(Ui()&&t.callbackNode!==n)return null;var r=xd(t,t===yt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ld(t,r);else{e=r;var o=Ae;Ae|=2;var s=vk();(yt!==t||Nt!==e)&&(Tr=null,ia=at()+500,ks(t,e));do try{Q2();break}catch(a){gk(t,a)}while(!0);Dv(),Id.current=s,Ae=o,ct!==null?e=0:(yt=null,Nt=0,e=pt)}if(e!==0){if(e===2&&(o=km(t),o!==0&&(r=o,e=Qm(t,o))),e===1)throw n=Kl,ks(t,0),po(t,r),on(t,at()),n;if(e===6)po(t,r);else{if(o=t.current.alternate,!(r&30)&&!J2(o)&&(e=Ld(t,r),e===2&&(s=km(t),s!==0&&(r=s,e=Qm(t,s))),e===1))throw n=Kl,ks(t,0),po(t,r),on(t,at()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:us(t,Qt,Tr);break;case 3:if(po(t,r),(r&130023424)===r&&(e=Xv+500-at(),10<e)){if(xd(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Am(us.bind(null,t,Qt,Tr),e);break}us(t,Qt,Tr);break;case 4:if(po(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Vn(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Y2(r/1960))-r,10<r){t.timeoutHandle=Am(us.bind(null,t,Qt,Tr),r);break}us(t,Qt,Tr);break;case 5:us(t,Qt,Tr);break;default:throw Error(J(329))}}}return on(t,at()),t.callbackNode===n?mk.bind(null,t):null}function Qm(t,e){var n=xl;return t.current.memoizedState.isDehydrated&&(ks(t,e).flags|=256),t=Ld(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&Zm(e)),t}function Zm(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function J2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Kn(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function po(t,e){for(e&=~Jv,e&=~_f,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function sw(t){if(Ae&6)throw Error(J(327));Ui();var e=xd(t,0);if(!(e&1))return on(t,at()),null;var n=Ld(t,e);if(t.tag!==0&&n===2){var r=km(t);r!==0&&(e=r,n=Qm(t,r))}if(n===1)throw n=Kl,ks(t,0),po(t,e),on(t,at()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,Qt,Tr),on(t,at()),null}function Qv(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(ia=at()+500,Ef&&qo())}}function Ds(t){yo!==null&&yo.tag===0&&!(Ae&6)&&Ui();var e=Ae;Ae|=1;var n=Tn.transition,r=je;try{if(Tn.transition=null,je=1,t)return t()}finally{je=r,Tn.transition=n,Ae=e,!(Ae&6)&&qo()}}function Zv(){dn=Ii.current,Ye(Ii)}function ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,T2(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(Ov(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kd();break;case 3:oa(),Ye(nn),Ye(Lt),Hv();break;case 5:Bv(r);break;case 4:oa();break;case 13:Ye(Ze);break;case 19:Ye(Ze);break;case 10:Lv(r.type._context);break;case 22:case 23:Zv()}n=n.return}if(yt=t,ct=t=_o(t.current,null),Nt=dn=e,pt=0,Kl=null,Jv=_f=js=0,Qt=xl=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}xs=null}return t}function gk(t,e){do{var n=ct;try{if(Dv(),Qu.current=Od,Ad){for(var r=et.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ad=!1}if(Is=0,gt=ht=et=null,vl=!1,Ul=0,Yv.current=null,n===null||n.return===null){pt=1,Kl=e,ct=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Kx(i);if(m!==null){m.flags&=-257,qx(m,i,a,s,e),m.mode&1&&Wx(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){Wx(s,c,e),ey();break e}l=Error(J(426))}}else if(Xe&&a.mode&1){var x=Kx(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),qx(x,i,a,s,e),Iv(sa(l,a));break e}}s=l=sa(l,a),pt!==4&&(pt=2),xl===null?xl=[s]:xl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=ZC(s,l,e);Fx(s,y);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(No===null||!No.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=ek(s,a,e);Fx(s,S);break e}}s=s.return}while(s!==null)}xk(n)}catch(C){e=C,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function vk(){var t=Id.current;return Id.current=Od,t===null?Od:t}function ey(){(pt===0||pt===3||pt===2)&&(pt=4),yt===null||!(js&268435455)&&!(_f&268435455)||po(yt,Nt)}function Ld(t,e){var n=Ae;Ae|=2;var r=vk();(yt!==t||Nt!==e)&&(Tr=null,ks(t,e));do try{X2();break}catch(o){gk(t,o)}while(!0);if(Dv(),Ae=n,Id.current=r,ct!==null)throw Error(J(261));return yt=null,Nt=0,pt}function X2(){for(;ct!==null;)yk(ct)}function Q2(){for(;ct!==null&&!CI();)yk(ct)}function yk(t){var e=bk(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?xk(t):ct=e,Yv.current=null}function xk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=W2(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(n=V2(n,e,dn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);pt===0&&(pt=5)}function us(t,e,n){var r=je,o=Tn.transition;try{Tn.transition=null,je=1,Z2(t,e,n,r)}finally{Tn.transition=o,je=r}return null}function Z2(t,e,n,r){do Ui();while(yo!==null);if(Ae&6)throw Error(J(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(OI(t,s),t===yt&&(ct=yt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pu||(pu=!0,Sk(yd,function(){return Ui(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var i=je;je=1;var a=Ae;Ae|=4,Yv.current=null,q2(t,n),hk(n,t),x2(Pm),wd=!!_m,Pm=_m=null,t.current=n,G2(n),kI(),Ae=a,je=i,Tn.transition=s}else t.current=n;if(pu&&(pu=!1,yo=t,Dd=o),s=t.pendingLanes,s===0&&(No=null),NI(n.stateNode),on(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(jd)throw jd=!1,t=Jm,Jm=null,t;return Dd&1&&t.tag!==0&&Ui(),s=t.pendingLanes,s&1?t===Xm?wl++:(wl=0,Xm=t):wl=0,qo(),null}function Ui(){if(yo!==null){var t=ZS(Dd),e=Tn.transition,n=je;try{if(Tn.transition=null,je=16>t?16:t,yo===null)var r=!1;else{if(t=yo,yo=null,Dd=0,Ae&6)throw Error(J(331));var o=Ae;for(Ae|=4,le=t.current;le!==null;){var s=le,i=s.child;if(le.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(le=c;le!==null;){var u=le;switch(u.tag){case 0:case 11:case 15:yl(8,u,s)}var d=u.child;if(d!==null)d.return=u,le=d;else for(;le!==null;){u=le;var h=u.sibling,m=u.return;if(uk(u),u===c){le=null;break}if(h!==null){h.return=m,le=h;break}le=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}le=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,le=i;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yl(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,le=y;break e}le=s.return}}var w=t.current;for(le=w;le!==null;){i=le;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,le=b;else e:for(i=w;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mf(9,a)}}catch(C){rt(a,a.return,C)}if(a===i){le=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,le=S;break e}le=a.return}}if(Ae=o,qo(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(wf,t)}catch{}r=!0}return r}finally{je=n,Tn.transition=e}}return!1}function iw(t,e,n){e=sa(n,e),e=ZC(t,e,1),t=To(t,e,1),e=Bt(),t!==null&&(vc(t,1,e),on(t,e))}function rt(t,e,n){if(t.tag===3)iw(t,t,n);else for(;e!==null;){if(e.tag===3){iw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(No===null||!No.has(r))){t=sa(n,t),t=ek(e,t,1),e=To(e,t,1),t=Bt(),e!==null&&(vc(e,1,t),on(e,t));break}}e=e.return}}function ej(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(Nt&n)===n&&(pt===4||pt===3&&(Nt&130023424)===Nt&&500>at()-Xv?ks(t,0):Jv|=n),on(t,e)}function wk(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Bt();t=zr(t,e),t!==null&&(vc(t,e,n),on(t,n))}function tj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wk(t,n)}function nj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),wk(t,n)}var bk;bk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,U2(t,e,n);en=!!(t.flags&131072)}else en=!1,Xe&&e.flags&1048576&&EC(e,Nd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ed(t,e),t=e.pendingProps;var o=ta(e,Lt.current);Hi(e,n),o=Vv(null,e,r,t,o,n);var s=Wv();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(s=!0,Ed(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Fv(e),o.updater=Nf,e.stateNode=o,o._reactInternals=e,Fm(e,r,t,n),e=Hm(null,e,r,!0,s,n)):(e.tag=0,Xe&&s&&Av(e),zt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ed(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=oj(r),t=Fn(r,t),o){case 0:e=Bm(null,e,r,t,n);break e;case 1:e=Jx(null,e,r,t,n);break e;case 11:e=Gx(null,e,r,t,n);break e;case 14:e=Yx(null,e,r,Fn(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Fn(r,o),Bm(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Fn(r,o),Jx(t,e,r,o,n);case 3:e:{if(ok(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,o=s.element,RC(t,e),Pd(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=sa(Error(J(423)),e),e=Xx(t,e,r,n,o);break e}else if(r!==o){o=sa(Error(J(424)),e),e=Xx(t,e,r,n,o);break e}else for(pn=Eo(e.stateNode.containerInfo.firstChild),mn=e,Xe=!0,Hn=null,n=_C(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),r===o){e=Br(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return AC(e),t===null&&Dm(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,Rm(r,o)?i=null:s!==null&&Rm(r,s)&&(e.flags|=32),rk(t,e),zt(t,e,i,n),e.child;case 6:return t===null&&Dm(e),null;case 13:return sk(t,e,n);case 4:return zv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ra(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Fn(r,o),Gx(t,e,r,o,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,Ve(Md,r._currentValue),r._currentValue=i,s!==null)if(Kn(s.value,i)){if(s.children===o.children&&!nn.current){e=Br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ir(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(J(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Lm(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}zt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Hi(e,n),o=An(o),r=r(o),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,o=Fn(r,e.pendingProps),o=Fn(r.type,o),Yx(t,e,r,o,n);case 15:return tk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Fn(r,o),ed(t,e),e.tag=1,rn(r)?(t=!0,Ed(e)):t=!1,Hi(e,n),QC(e,r,o),Fm(e,r,o,n),Hm(null,e,r,!0,t,n);case 19:return ik(t,e,n);case 22:return nk(t,e,n)}throw Error(J(156,e.tag))};function Sk(t,e){return YS(t,e)}function rj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new rj(t,e,n,r)}function ty(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oj(t){if(typeof t=="function")return ty(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wv)return 11;if(t===bv)return 14}return 2}function _o(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rd(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")ty(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case ki:return Es(n.children,o,s,e);case xv:i=8,o|=8;break;case cm:return t=En(12,n,e,o|2),t.elementType=cm,t.lanes=s,t;case um:return t=En(13,n,e,o),t.elementType=um,t.lanes=s,t;case dm:return t=En(19,n,e,o),t.elementType=dm,t.lanes=s,t;case AS:return Pf(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PS:i=10;break e;case RS:i=9;break e;case wv:i=11;break e;case bv:i=14;break e;case ao:i=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=En(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function Es(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function Pf(t,e,n,r){return t=En(22,t,r,e),t.elementType=AS,t.lanes=n,t.stateNode={isHidden:!1},t}function sp(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function ip(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sj(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zh(0),this.expirationTimes=zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zh(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ny(t,e,n,r,o,s,i,a,l){return t=new sj(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=En(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fv(s),t}function ij(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ck(t){if(!t)return $o;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(rn(n))return CC(t,n,e)}return e}function kk(t,e,n,r,o,s,i,a,l){return t=ny(n,r,!0,t,o,s,i,a,l),t.context=Ck(null),n=t.current,r=Bt(),o=Mo(n),s=Ir(r,o),s.callback=e??null,To(n,s,o),t.current.lanes=o,vc(t,o,r),on(t,r),t}function Rf(t,e,n,r){var o=e.current,s=Bt(),i=Mo(o);return n=Ck(n),e.context===null?e.context=n:e.pendingContext=n,e=Ir(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=To(o,e,i),t!==null&&(Wn(t,o,i,s),Xu(t,o,i)),i}function $d(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ry(t,e){aw(t,e),(t=t.alternate)&&aw(t,e)}function aj(){return null}var Ek=typeof reportError=="function"?reportError:function(t){console.error(t)};function oy(t){this._internalRoot=t}Af.prototype.render=oy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Rf(t,e,null,null)};Af.prototype.unmount=oy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ds(function(){Rf(null,t,null,null)}),e[Fr]=null}};function Af(t){this._internalRoot=t}Af.prototype.unstable_scheduleHydration=function(t){if(t){var e=nC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ho.length&&e!==0&&e<ho[n].priority;n++);ho.splice(n,0,t),n===0&&oC(t)}};function sy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lw(){}function lj(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=$d(i);s.call(c)}}var i=kk(e,r,t,0,null,!1,!1,"",lw);return t._reactRootContainer=i,t[Fr]=i.current,$l(t.nodeType===8?t.parentNode:t),Ds(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=$d(l);a.call(c)}}var l=ny(t,0,!1,null,null,!1,!1,"",lw);return t._reactRootContainer=l,t[Fr]=l.current,$l(t.nodeType===8?t.parentNode:t),Ds(function(){Rf(e,l,n,r)}),l}function If(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=$d(i);a.call(l)}}Rf(e,i,t,o)}else i=lj(n,e,t,o,r);return $d(i)}eC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nl(e.pendingLanes);n!==0&&(kv(e,n|1),on(e,at()),!(Ae&6)&&(ia=at()+500,qo()))}break;case 13:Ds(function(){var r=zr(t,1);if(r!==null){var o=Bt();Wn(r,t,1,o)}}),ry(t,1)}};Ev=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=Bt();Wn(e,t,134217728,n)}ry(t,134217728)}};tC=function(t){if(t.tag===13){var e=Mo(t),n=zr(t,e);if(n!==null){var r=Bt();Wn(n,t,e,r)}ry(t,e)}};nC=function(){return je};rC=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};bm=function(t,e,n){switch(e){case"input":if(pm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=kf(r);if(!o)throw Error(J(90));IS(r),pm(r,o)}}}break;case"textarea":DS(t,n);break;case"select":e=n.value,e!=null&&$i(t,!!n.multiple,e,!1)}};US=Qv;VS=Ds;var cj={usingClientEntryPoint:!1,Events:[xc,Mi,kf,BS,HS,Qv]},Wa={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uj={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qS(t),t===null?null:t.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||aj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{wf=mu.inject(uj),ur=mu}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cj;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sy(e))throw Error(J(200));return ij(t,e,null,n)};yn.createRoot=function(t,e){if(!sy(t))throw Error(J(299));var n=!1,r="",o=Ek;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=ny(t,1,!1,null,null,n,!1,r,o),t[Fr]=e.current,$l(t.nodeType===8?t.parentNode:t),new oy(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=qS(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Ds(t)};yn.hydrate=function(t,e,n){if(!Of(e))throw Error(J(200));return If(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!sy(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Ek;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=kk(e,null,t,1,n??null,o,!1,s,i),t[Fr]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Af(e)};yn.render=function(t,e,n){if(!Of(e))throw Error(J(200));return If(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!Of(t))throw Error(J(40));return t._reactRootContainer?(Ds(function(){If(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};yn.unstable_batchedUpdates=Qv;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Of(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return If(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function Tk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tk)}catch(t){console.error(t)}}Tk(),TS.exports=yn;var Go=TS.exports;const bc=pS(Go);var Nk,cw=Go;Nk=cw.createRoot,cw.hydrateRoot;const dj={theme:"system",setTheme:()=>null},Mk=p.createContext(dj);function fj({children:t,defaultTheme:e="system",storageKey:n="vite-ui-theme",...r}){const[o,s]=p.useState(()=>localStorage.getItem(n)||e);p.useEffect(()=>{const a=window.document.documentElement;if(a.classList.remove("light","dark"),o==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a.classList.add(l);return}a.classList.add(o)},[o]);const i={theme:o,setTheme:a=>{localStorage.setItem(n,a),s(a)}};return f.jsx(Mk.Provider,{...r,value:i,children:t})}const hj=()=>{const t=p.useContext(Mk);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};var uw=["light","dark"],pj="(prefers-color-scheme: dark)",mj=p.createContext(void 0),gj={setTheme:t=>{},themes:[]},vj=()=>{var t;return(t=p.useContext(mj))!=null?t:gj};p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,attrs:a,nonce:l})=>{let c=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=o?uw.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,x=!0)=>{let y=i?i[g]:g,w=v?g+"|| ''":`'${y}'`,b="";return o&&x&&!v&&uw.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?b+=`c.add(${w})`:b+="null":y&&(b+=`d[s](n,${w})`),b},m=t?`!function(){${u}${h(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${pj}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${c?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return p.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var yj=t=>{switch(t){case"success":return bj;case"info":return Cj;case"warning":return Sj;case"error":return kj;default:return null}},xj=Array(12).fill(0),wj=({visible:t})=>U.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},U.createElement("div",{className:"sonner-spinner"},xj.map((e,n)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),bj=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Sj=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Cj=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),kj=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ej=()=>{let[t,e]=U.useState(document.hidden);return U.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},eg=1,Tj=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,o=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:eg++,s=this.toasts.find(a=>a.id===o),i=t.dismissible===void 0?!0:t.dismissible;return s?this.toasts=this.toasts.map(a=>a.id===o?(this.publish({...a,...t,id:o,title:n}),{...a,...t,id:o,dismissible:i,title:n}):a):this.addToast({title:n,...r,dismissible:i,id:o}),o},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),o=n!==void 0;return r.then(async s=>{if(Mj(s)&&!s.ok){o=!1;let i=typeof e.error=="function"?await e.error(`HTTP error! status: ${s.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:n,type:"error",message:i,description:a})}else if(e.success!==void 0){o=!1;let i=typeof e.success=="function"?await e.success(s):e.success,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:n,type:"success",message:i,description:a})}}).catch(async s=>{if(e.error!==void 0){o=!1;let i=typeof e.error=="function"?await e.error(s):e.error,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:n,type:"error",message:i,description:a})}}).finally(()=>{var s;o&&(this.dismiss(n),n=void 0),(s=e.finally)==null||s.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||eg++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},un=new Tj,Nj=(t,e)=>{let n=(e==null?void 0:e.id)||eg++;return un.addToast({title:t,...e,id:n}),n},Mj=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",_j=Nj,Pj=()=>un.toasts,ve=Object.assign(_j,{success:un.success,info:un.info,warning:un.warning,error:un.error,custom:un.custom,message:un.message,promise:un.promise,dismiss:un.dismiss,loading:un.loading},{getHistory:Pj});function Rj(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Rj(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function gu(t){return t.label!==void 0}var Aj=3,Oj="32px",Ij=4e3,jj=356,Dj=14,Lj=20,$j=200;function Fj(...t){return t.filter(Boolean).join(" ")}var zj=t=>{var e,n,r,o,s,i,a,l,c,u;let{invert:d,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:x,heights:y,index:w,toasts:b,expanded:S,removeToast:C,defaultRichColors:E,closeButton:k,style:T,cancelButtonStyle:R,actionButtonStyle:O,className:K="",descriptionClassName:z="",duration:Z,position:Q,gap:q,loadingIcon:j,expandByDefault:X,classNames:P,icons:N,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:A,cn:M}=t,[$,F]=U.useState(!1),[H,V]=U.useState(!1),[_,ee]=U.useState(!1),[te,ie]=U.useState(!1),[ge,he]=U.useState(0),[Ne,Oe]=U.useState(0),Be=U.useRef(null),I=U.useRef(null),Le=w===0,nr=w+1<=x,Y=h.type,ce=h.dismissible!==!1,de=h.className||"",We=h.descriptionClassName||"",Se=U.useMemo(()=>y.findIndex(G=>G.toastId===h.id)||0,[y,h.id]),Je=U.useMemo(()=>{var G;return(G=h.closeButton)!=null?G:k},[h.closeButton,k]),wn=U.useMemo(()=>h.duration||Z||Ij,[h.duration,Z]),jn=U.useRef(0),Rt=U.useRef(0),ss=U.useRef(0),Gr=U.useRef(null),[Da,qc]=Q.split("-"),Gc=U.useMemo(()=>y.reduce((G,se,fe)=>fe>=Se?G:G+se.height,0),[y,Se]),Yc=Ej(),Ih=h.invert||d,D=Y==="loading";Rt.current=U.useMemo(()=>Se*q+Gc,[Se,Gc]),U.useEffect(()=>{F(!0)},[]),U.useLayoutEffect(()=>{if(!$)return;let G=I.current,se=G.style.height;G.style.height="auto";let fe=G.getBoundingClientRect().height;G.style.height=se,Oe(fe),v(xe=>xe.find(lt=>lt.toastId===h.id)?xe.map(lt=>lt.toastId===h.id?{...lt,height:fe}:lt):[{toastId:h.id,height:fe,position:h.position},...xe])},[$,h.title,h.description,v,h.id]);let B=U.useCallback(()=>{V(!0),he(Rt.current),v(G=>G.filter(se=>se.toastId!==h.id)),setTimeout(()=>{C(h)},$j)},[h,C,v,Rt]);U.useEffect(()=>{if(h.promise&&Y==="loading"||h.duration===1/0||h.type==="loading")return;let G,se=wn;return S||g||A&&Yc?(()=>{if(ss.current<jn.current){let fe=new Date().getTime()-jn.current;se=se-fe}ss.current=new Date().getTime()})():se!==1/0&&(jn.current=new Date().getTime(),G=setTimeout(()=>{var fe;(fe=h.onAutoClose)==null||fe.call(h,h),B()},se)),()=>clearTimeout(G)},[S,g,X,h,wn,B,h.promise,Y,A,Yc]),U.useEffect(()=>{let G=I.current;if(G){let se=G.getBoundingClientRect().height;return Oe(se),v(fe=>[{toastId:h.id,height:se,position:h.position},...fe]),()=>v(fe=>fe.filter(xe=>xe.toastId!==h.id))}},[v,h.id]),U.useEffect(()=>{h.delete&&B()},[B,h.delete]);function ae(){return N!=null&&N.loading?U.createElement("div",{className:"sonner-loader","data-visible":Y==="loading"},N.loading):j?U.createElement("div",{className:"sonner-loader","data-visible":Y==="loading"},j):U.createElement(wj,{visible:Y==="loading"})}return U.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:I,className:M(K,de,P==null?void 0:P.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,P==null?void 0:P.default,P==null?void 0:P[Y],(n=h==null?void 0:h.classNames)==null?void 0:n[Y]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:E,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":$,"data-promise":!!h.promise,"data-removed":H,"data-visible":nr,"data-y-position":Da,"data-x-position":qc,"data-index":w,"data-front":Le,"data-swiping":_,"data-dismissible":ce,"data-type":Y,"data-invert":Ih,"data-swipe-out":te,"data-expanded":!!(S||X&&$),style:{"--index":w,"--toasts-before":w,"--z-index":b.length-w,"--offset":`${H?ge:Rt.current}px`,"--initial-height":X?"auto":`${Ne}px`,...T,...h.style},onPointerDown:G=>{D||!ce||(Be.current=new Date,he(Rt.current),G.target.setPointerCapture(G.pointerId),G.target.tagName!=="BUTTON"&&(ee(!0),Gr.current={x:G.clientX,y:G.clientY}))},onPointerUp:()=>{var G,se,fe,xe;if(te||!ce)return;Gr.current=null;let lt=Number(((G=I.current)==null?void 0:G.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Dn=new Date().getTime()-((se=Be.current)==null?void 0:se.getTime()),Jc=Math.abs(lt)/Dn;if(Math.abs(lt)>=Lj||Jc>.11){he(Rt.current),(fe=h.onDismiss)==null||fe.call(h,h),B(),ie(!0);return}(xe=I.current)==null||xe.style.setProperty("--swipe-amount","0px"),ee(!1)},onPointerMove:G=>{var se;if(!Gr.current||!ce)return;let fe=G.clientY-Gr.current.y,xe=G.clientX-Gr.current.x,lt=(Da==="top"?Math.min:Math.max)(0,fe),Dn=G.pointerType==="touch"?10:2;Math.abs(lt)>Dn?(se=I.current)==null||se.style.setProperty("--swipe-amount",`${fe}px`):Math.abs(xe)>Dn&&(Gr.current=null)}},Je&&!h.jsx?U.createElement("button",{"aria-label":L,"data-disabled":D,"data-close-button":!0,onClick:D||!ce?()=>{}:()=>{var G;B(),(G=h.onDismiss)==null||G.call(h,h)},className:M(P==null?void 0:P.closeButton,(o=h==null?void 0:h.classNames)==null?void 0:o.closeButton)},U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||U.isValidElement(h.title)?h.jsx||h.title:U.createElement(U.Fragment,null,Y||h.icon||h.promise?U.createElement("div",{"data-icon":"",className:M(P==null?void 0:P.icon,(s=h==null?void 0:h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||ae():null,h.type!=="loading"?h.icon||(N==null?void 0:N[Y])||yj(Y):null):null,U.createElement("div",{"data-content":"",className:M(P==null?void 0:P.content,(i=h==null?void 0:h.classNames)==null?void 0:i.content)},U.createElement("div",{"data-title":"",className:M(P==null?void 0:P.title,(a=h==null?void 0:h.classNames)==null?void 0:a.title)},h.title),h.description?U.createElement("div",{"data-description":"",className:M(z,We,P==null?void 0:P.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),U.isValidElement(h.cancel)?h.cancel:h.cancel&&gu(h.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||R,onClick:G=>{var se,fe;gu(h.cancel)&&ce&&((fe=(se=h.cancel).onClick)==null||fe.call(se,G),B())},className:M(P==null?void 0:P.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,U.isValidElement(h.action)?h.action:h.action&&gu(h.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:G=>{var se,fe;gu(h.action)&&(G.defaultPrevented||((fe=(se=h.action).onClick)==null||fe.call(se,G),B()))},className:M(P==null?void 0:P.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function dw(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var Bj=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:o,closeButton:s,className:i,offset:a,theme:l="light",richColors:c,duration:u,style:d,visibleToasts:h=Aj,toastOptions:m,dir:g=dw(),gap:v=Dj,loadingIcon:x,icons:y,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:b,cn:S=Fj}=t,[C,E]=U.useState([]),k=U.useMemo(()=>Array.from(new Set([n].concat(C.filter(A=>A.position).map(A=>A.position)))),[C,n]),[T,R]=U.useState([]),[O,K]=U.useState(!1),[z,Z]=U.useState(!1),[Q,q]=U.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=U.useRef(null),X=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=U.useRef(null),N=U.useRef(!1),L=U.useCallback(A=>{var M;(M=C.find($=>$.id===A.id))!=null&&M.delete||un.dismiss(A.id),E($=>$.filter(({id:F})=>F!==A.id))},[C]);return U.useEffect(()=>un.subscribe(A=>{if(A.dismiss){E(M=>M.map($=>$.id===A.id?{...$,delete:!0}:$));return}setTimeout(()=>{bc.flushSync(()=>{E(M=>{let $=M.findIndex(F=>F.id===A.id);return $!==-1?[...M.slice(0,$),{...M[$],...A},...M.slice($+1)]:[A,...M]})})})}),[]),U.useEffect(()=>{if(l!=="system"){q(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:A})=>{q(A?"dark":"light")})},[l]),U.useEffect(()=>{C.length<=1&&K(!1)},[C]),U.useEffect(()=>{let A=M=>{var $,F;r.every(H=>M[H]||M.code===H)&&(K(!0),($=j.current)==null||$.focus()),M.code==="Escape"&&(document.activeElement===j.current||(F=j.current)!=null&&F.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[r]),U.useEffect(()=>{if(j.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,N.current=!1)}},[j.current]),C.length?U.createElement("section",{"aria-label":`${w} ${X}`,tabIndex:-1},k.map((A,M)=>{var $;let[F,H]=A.split("-");return U.createElement("ol",{key:A,dir:g==="auto"?dw():g,tabIndex:-1,ref:j,className:i,"data-sonner-toaster":!0,"data-theme":Q,"data-y-position":F,"data-x-position":H,style:{"--front-toast-height":`${(($=T[0])==null?void 0:$.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||Oj,"--width":`${jj}px`,"--gap":`${v}px`,...d},onBlur:V=>{N.current&&!V.currentTarget.contains(V.relatedTarget)&&(N.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||N.current||(N.current=!0,P.current=V.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{z||K(!1)},onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},C.filter(V=>!V.position&&M===0||V.position===A).map((V,_)=>{var ee,te;return U.createElement(zj,{key:V.id,icons:y,index:_,toast:V,defaultRichColors:c,duration:(ee=m==null?void 0:m.duration)!=null?ee:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:h,closeButton:(te=m==null?void 0:m.closeButton)!=null?te:s,interacting:z,position:A,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:L,toasts:C.filter(ie=>ie.position==V.position),heights:T.filter(ie=>ie.position==V.position),setHeights:R,expandByDefault:o,gap:v,loadingIcon:x,expanded:O,pauseWhenPageIsHidden:b,cn:S})}))})):null};const Hj=({...t})=>{const{theme:e="system"}=vj();return f.jsx(Bj,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:`
            group toast 
            group-[.toaster]:bg-background 
            group-[.toaster]:text-foreground 
            group-[.toaster]:border-border 
            group-[.toaster]:shadow-lg 
            dark:group-[.toaster]:shadow-white/10  // Add white shadow for dark mode
            dark:group-[.toaster]:shadow-xl       // Optional: Add larger shadow in dark mode
          `,description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function kt(t){this.content=t}kt.prototype={constructor:kt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new kt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new kt(n)},addToStart:function(t,e){return new kt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new kt(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new kt(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=kt.from(t),t.size?new kt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=kt.from(t),t.size?new kt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=kt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};kt.from=function(t){if(t instanceof kt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new kt(e)};function _k(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=_k(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function Pk(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=Pk(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class W{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new W(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new W(r,o)}cutByIndex(e,n){return e==n?W.empty:e==0&&n==this.content.length?this:new W(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new W(o,s)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return _k(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Pk(this,e,n,r)}findIndex(e,n=-1){if(e==0)return vu(0,e);if(e==this.size)return vu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?vu(r+1,i):vu(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return W.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new W(n||e,r)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const ap={index:0,offset:0};function vu(t,e){return ap.index=t,ap.offset=e,ap}function Fd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Fd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Fd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let $e=class tg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Fd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return tg.none;if(e instanceof tg)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};$e.none=[];class zd extends Error{}class ne{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Ak(this.content,e+this.openStart,n);return r&&new ne(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ne(Rk(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ne.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ne(W.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new ne(e,r,o)}}ne.empty=new ne(W.empty,0,0);function Rk(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Rk(s.content,e-o-1,n-o-1)))}function Ak(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=Ak(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function Uj(t,e,n){if(n.openStart>t.depth)throw new zd("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new zd("Inconsistent open depths");return Ok(t,e,n,0)}function Ok(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=Ok(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return Ns(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=Vj(n,t);return Ns(s,jk(t,i,a,e,r))}else return Ns(s,Bd(t,e,r))}function Ik(t,e){if(!e.type.compatibleContent(t.type))throw new zd("Cannot join "+e.type.name+" onto "+t.type.name)}function ng(t,e,n){let r=t.node(n);return Ik(r,e.node(n)),r}function Ts(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function bl(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Ts(t.nodeAfter,r),s++));for(let a=s;a<i;a++)Ts(o.child(a),r);e&&e.depth==n&&e.textOffset&&Ts(e.nodeBefore,r)}function Ns(t,e){return t.type.checkContent(e),t.copy(e)}function jk(t,e,n,r,o){let s=t.depth>o&&ng(t,e,o+1),i=r.depth>o&&ng(n,r,o+1),a=[];return bl(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(Ik(s,i),Ts(Ns(s,jk(t,e,n,r,o+1)),a)):(s&&Ts(Ns(s,Bd(t,e,o+1)),a),bl(e,n,o,a),i&&Ts(Ns(i,Bd(n,r,o+1)),a)),bl(r,null,o,a),new W(a)}function Bd(t,e,n){let r=[];if(bl(null,t,n,r),t.depth>n){let o=ng(t,e,n+1);Ts(Ns(o,Bd(t,e,n+1)),r)}return bl(e,null,n,r),new W(r)}function Vj(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(W.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class ql{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return $e.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Hd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new ql(n,r,s)}static resolveCached(e,n){let r=fw.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else fw.set(e,r=new Wj);let o=r.elts[r.i]=ql.resolve(e,n);return r.i=(r.i+1)%Kj,o}}class Wj{constructor(){this.elts=[],this.i=0}}const Kj=12,fw=new WeakMap;class Hd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qj=Object.create(null);let Po=class rg{constructor(e,n,r,o=$e.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Fd(this.attrs,n||e.defaultAttrs||qj)&&$e.sameSet(this.marks,r||$e.none)}copy(e=null){return e==this.content?this:new rg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new rg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ne.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new ne(c,o.depth-i,s.depth-i)}replace(e,n,r){return Uj(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return ql.resolveCached(this,e)}resolveNoCache(e){return ql.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Dk(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=W.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=$e.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!$e.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=W.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};Po.prototype.text=void 0;class Ud extends Po{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Dk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ud(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ud(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Dk(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ls{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Gj(e,n);if(r.next==null)return Ls.empty;let o=Lk(r);r.next&&r.err("Unexpected trailing text");let s=tD(eD(o));return nD(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return W.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Ls.empty=new Ls(!0);class Gj{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Lk(t){let e=[];do e.push(Yj(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Yj(t){let e=[];do e.push(Jj(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Jj(t){let e=Zj(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Xj(t,e);else break;return e}function hw(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Xj(t,e){let n=hw(t),r=n;return t.eat(",")&&(t.next!="}"?r=hw(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Qj(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function Zj(t){if(t.eat("(")){let e=Lk(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Qj(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function eD(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();o(s(i.expr,l),u),l=u}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),o(s(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function $k(t,e){return e-t}function pw(t,e){let n=[];return r(e),n.sort($k);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function tD(t){let e=Object.create(null);return n(pw(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);pw(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Ls(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort($k);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function nD(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Fk(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function zk(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function Bk(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function Hk(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new oD(t,r,e[r]);return n}let mw=class Uk{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Hk(e,r.attrs),this.defaultAttrs=Fk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ls.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:zk(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Po(this,this.computeAttrs(e),W.from(n),$e.setFrom(r))}createChecked(e=null,n,r){return n=W.from(n),this.checkContent(n),new Po(this,this.computeAttrs(e),n,$e.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=W.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(W.empty,!0);return s?new Po(this,e,n.append(s),$e.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Bk(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:$e.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new Uk(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function rD(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class oD{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?rD(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class jf{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=Hk(e,o.attrs),this.excluded=null;let s=Fk(this.attrs);this.instance=s?new $e(this,s):null}create(e=null){return!e&&this.instance?this.instance:new $e(this,zk(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new jf(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Bk(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Vk{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=kt.from(e.nodes),n.marks=kt.from(e.marks||{}),this.nodes=mw.compile(this.spec.nodes,this),this.marks=jf.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=Ls.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?gw(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:gw(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof mw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Ud(r,r.defaultAttrs,e,$e.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Po.fromJSON(this,e)}markFromJSON(e){return $e.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function gw(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function sD(t){return t.tag!=null}function iD(t){return t.style!=null}class Ro{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(sD(o))this.tags.push(o);else if(iD(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new yw(this,n,!1);return r.addAll(e,$e.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new yw(this,n,!0);return r.addAll(e,$e.none,n.from,n.to),ne.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(cD(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=xw(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=xw(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ro(e,Ro.schemaRules(e)))}}const Wk={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},aD={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Kk={ol:!0,ul:!0},Gl=1,og=2,Sl=4;function vw(t,e,n){return e!=null?(e?Gl:0)|(e==="full"?og:0):t&&t.whitespace=="pre"?Gl|og:n&~Sl}class yu{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=$e.none,this.match=s||(i&Sl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(W.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Gl)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=W.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Wk.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class yw{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=vw(null,n.preserveWhitespace,0)|(r?Sl:0);o?s=new yu(o.type,o.attrs,$e.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new yu(null,null,$e.none,!0,null,i):s=new yu(e.schema.topNodeType,null,$e.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&og?"full":this.localPreserveWS||(o.options&Gl)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;Kk.hasOwnProperty(i)&&this.parser.normalizeLists&&lD(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:aD.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Wk.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n){let r,o;for(let s=this.open;s>=0;s--){let i=this.nodes[s],a=i.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,o=i,!a.length)||i.solid)break}if(!r)return null;this.sync(o);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=$e.none;for(let i of r.concat(e.marks))(o.type?o.type.allowsMarkType(i.type):ww(i.type,e.type))&&(s=i.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=vw(e,s,i.options);i.options&Sl&&i.content.length==0&&(a|=Sl);let l=$e.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):ww(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new yu(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Gl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function lD(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Kk.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function cD(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function xw(t){let e={};for(let n in t)e[n]=t[n];return e}function ww(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&i(u))return!0}};if(i(o.contentMatch))return!0}}class Js{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=lp(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=od(lp(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&od(lp(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return od(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Js(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=bw(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return bw(e.marks)}}function bw(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function lp(t){return t.document||window.document}const Sw=new WeakMap;function uD(t){let e=Sw.get(t);return e===void 0&&Sw.set(t,e=dD(t)),e}function dD(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function od(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=uD(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:g}=od(t,h,n,r);if(l.appendChild(m),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const qk=65535,Gk=Math.pow(2,16);function fD(t,e){return t+e*Gk}function Cw(t){return t&qk}function hD(t){return(t-(t&qk))/Gk}const Yk=1,Jk=2,sd=4,Xk=8;class sg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Xk)>0}get deletedBefore(){return(this.delInfo&(Yk|sd))>0}get deletedAfter(){return(this.delInfo&(Jk|sd))>0}get deletedAcross(){return(this.delInfo&sd)>0}}class hn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&hn.empty)return hn.empty}recover(e){let n=0,r=Cw(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+hD(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+i],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,m=l+o+(h<0?0:u);if(r)return m;let g=e==(n<0?l:d)?null:fD(a/3,e-l),v=e==l?Jk:e==d?Yk:sd;return(n<0?e!=l:e!=d)&&(v|=Xk),new sg(m,v,g)}o+=u-c}return r?e+o:new sg(e+o,0,null)}touches(e,n){let r=0,o=Cw(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new hn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hn.empty:new hn(e<0?[0,-e,0]:[0,0,e])}}hn.empty=new hn([]);class Vi{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new Vi(this.maps,this.mirror,e,n)}copy(){return new Vi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Vi;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this.maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new sg(e,o,null)}}const cp=Object.create(null);class $t{getMap(){return hn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=cp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in cp)throw new RangeError("Duplicate use of step JSON ID "+e);return cp[e]=n,n.prototype.jsonID=e,n}}class ut{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ut(e,null)}static fail(e){return new ut(null,e)}static fromReplace(e,n,r,o){try{return ut.ok(e.replace(n,r,o))}catch(s){if(s instanceof zd)return ut.fail(s.message);throw s}}}function iy(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(iy(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return W.fromArray(r)}class xo extends $t{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new ne(iy(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return ut.fromReplace(e,this.from,this.to,s)}invert(){return new cr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xo(n.pos,r.pos,this.mark)}merge(e){return e instanceof xo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xo(n.from,n.to,e.markFromJSON(n.mark))}}$t.jsonID("addMark",xo);class cr extends $t{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ne(iy(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return ut.fromReplace(e,this.from,this.to,r)}invert(){return new xo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new cr(n.pos,r.pos,this.mark)}merge(e){return e instanceof cr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new cr(n.from,n.to,e.markFromJSON(n.mark))}}$t.jsonID("removeMark",cr);class wo extends $t{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ut.fromReplace(e,this.pos,this.pos+1,new ne(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new wo(this.pos,n.marks[o]);return new wo(this.pos,this.mark)}}return new aa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new wo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new wo(n.pos,e.markFromJSON(n.mark))}}$t.jsonID("addNodeMark",wo);class aa extends $t{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ut.fromReplace(e,this.pos,this.pos+1,new ne(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new wo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new aa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new aa(n.pos,e.markFromJSON(n.mark))}}$t.jsonID("removeNodeMark",aa);class vt extends $t{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&ig(e,this.from,this.to)?ut.fail("Structure replace would overwrite content"):ut.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hn([this.from,this.to-this.from,this.slice.size])}invert(e){return new vt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof vt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ne.empty:new ne(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ne.empty:new ne(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vt(n.from,n.to,ne.fromJSON(e,n.slice),!!n.structure)}}$t.jsonID("replace",vt);class xt extends $t{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(ig(e,this.from,this.gapFrom)||ig(e,this.gapTo,this.to)))return ut.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ut.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ut.fromReplace(e,this.from,this.to,r):ut.fail("Content does not fit in gap")}getMap(){return new hn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new xt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new xt(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new xt(n.from,n.to,n.gapFrom,n.gapTo,ne.fromJSON(e,n.slice),n.insert,!!n.structure)}}$t.jsonID("replaceAround",xt);function ig(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function pD(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),m=Math.min(c+l.nodeSize,n),g=r.addToSet(d);for(let v=0;v<d.length;v++)d[v].isInSet(g)||(i&&i.to==h&&i.mark.eq(d[v])?i.to=m:o.push(i=new cr(h,m,d[v])));a&&a.to==h?a.to=m:s.push(a=new xo(h,m,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function mD(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof jf){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let m=0;m<o.length;m++){let g=o[m];g.step==s-1&&d.eq(o[m].style)&&(h=g)}h?(h.to=c,h.step=s):o.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new cr(i.from,i.to,i.style)))}function ay(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)i.push(new vt(a,u,ne.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new cr(a,u,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,m=/\r?\n|\r/g,g;for(;h=m.exec(c.text);)g||(g=new ne(W.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new vt(a+h.index,a+h.index+h[0].length,g))}}a=u}if(!r.validEnd){let l=r.fillBefore(W.empty,!0);t.replace(a,a,new ne(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function gD(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ca(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!gD(o,s,i))break}return null}function vD(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,u=W.empty,d=0;for(let g=s,v=!1;g>n;g--)v||r.index(g)>0?(v=!0,u=W.from(r.node(g).copy(u)),d++):l--;let h=W.empty,m=0;for(let g=s,v=!1;g>n;g--)v||o.after(g+1)<o.end(g)?(v=!0,h=W.from(o.node(g).copy(h)),m++):c++;t.step(new xt(l,c,i,a,new ne(u.append(h),d,m),u.size-d,!0))}function ly(t,e,n=null,r=t){let o=yD(t,e),s=o&&xD(r,e);return s?o.map(kw).concat({type:e,attrs:n}).concat(s.map(kw)):null}function kw(t){return{type:t,attrs:null}}function yD(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function xD(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function wD(t,e,n){let r=W.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=W.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new xt(o,s,o,s,new ne(r,0,0),n.length,!0))}function bD(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&SD(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?c=!1:!m&&g&&(c=!0)}c===!1&&Zk(t,i,a,s),ay(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+i.nodeSize,1);return t.step(new xt(d,h,d+1,h-1,new ne(W.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&Qk(t,i,a,s),!1}})}function Qk(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Zk(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function SD(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function CD(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new xt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ne(W.from(i),0,0),1,!0))}function Wi(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let d=o.node(c),h=o.index(c);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(h,d.childCount),g=r&&r[u+1];g&&(m=m.replaceChild(0,g.type.create(g.attrs)));let v=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!v.type.validContent(m))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function kD(t,e,n=1,r){let o=t.doc.resolve(e),s=W.empty,i=W.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=W.from(o.node(a).copy(s));let u=r&&r[c];i=W.from(u?u.type.create(u.attrs,i):o.node(a).copy(i))}t.step(new vt(e,e,new ne(s.append(i),n,n),!0))}function Yo(t,e){let n=t.resolve(e),r=n.index();return eE(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ED(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function eE(t,e){return!!(t&&e&&!t.isLeaf&&ED(t,e))}function Df(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&eE(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function TD(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let u=i.whitespace=="pre",d=!!i.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);Zk(t,u.node(),u.before(),a)}i.inlineContent&&ay(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new vt(c,l.map(e+n,-1),ne.empty,!0)),r===!0){let u=t.doc.resolve(c);Qk(t,u.node(),u.before(),t.steps.length)}return t}function ND(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function tE(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function Lf(t,e,n=e,r=ne.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return nE(o,s,r)?new vt(e,n,r):new MD(o,s,r).fit()}function nE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class MD{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=W.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=W.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new ne(s,i,a);return e>-1?new xt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new vt(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=up(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(i?c.matchType(i.type)||(d=c.fillBefore(W.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=up(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new ne(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=up(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new ne(ol(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ne(ol(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let v=0;v<s.length;v++)this.openFrontierNode(s[v]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(o){for(let v=0;v<o.childCount;v++)u.push(o.child(v));d=d.matchFragment(o)}let m=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let v=a.child(c),x=d.matchType(v.type);if(!x)break;c++,(c>1||l==0||v.content.size)&&(d=x,u.push(rE(v.mark(h.allowedMarks(v.marks)),c==1?l:0,c==a.childCount?m:-1)))}let g=c==a.childCount;g||(m=-1),this.placed=sl(this.placed,n,W.from(u)),this.frontier[n].match=d,g&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,x=a;v<m;v++){let y=x.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),x=y.content}this.unplaced=g?e==0?ne.empty:new ne(ol(i.content,e-1,1),e-1,m<0?i.openEnd:e-1):new ne(ol(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!dp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=dp(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=dp(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=sl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=sl(this.placed,this.depth,W.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(W.empty,!0);n.childCount&&(this.placed=sl(this.placed,this.frontier.length,n))}}function ol(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ol(t.firstChild.content,e-1,n)))}function sl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(sl(t.lastChild.content,e-1,n)))}function up(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function rE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,rE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(W.empty,!0)))),t.copy(r)}function dp(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!_D(n,s.content,i)?a:null}function _D(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function PD(t){return t.spec.defining||t.spec.definingForContent}function RD(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(nE(o,s,r))return t.step(new vt(e,n,r));let i=sE(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,m=o.pos-1;h>0;h--,m--){let g=o.node(h).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==m&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],u=r.openStart;for(let h=r.content,m=0;;m++){let g=h.firstChild;if(c.push(g),m==r.openStart)break;h=g.content}for(let h=u-1;h>=0;h--){let m=c[h],g=PD(m.type);if(g&&!m.sameMarkup(o.node(Math.abs(a)-1)))u=h;else if(g||!m.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let m=(h+u+1)%(r.openStart+1),g=c[m];if(g)for(let v=0;v<i.length;v++){let x=i[(v+l)%i.length],y=!0;x<0&&(y=!1,x=-x);let w=o.node(x-1),b=o.index(x-1);if(w.canReplaceWith(b,b,g.type,g.marks))return t.replace(o.before(x),y?s.after(x):n,new ne(oE(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let m=i[h];m<0||(e=o.before(m),n=s.after(m))}}function oE(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(oE(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(W.empty,!0))}return t}function AD(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=ND(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new ne(W.from(r),0,0))}function OD(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=sE(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function sE(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Ki extends $t{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ut.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return ut.fromReplace(e,this.pos,this.pos+1,new ne(W.from(o),0,n.isLeaf?0:1))}getMap(){return hn.empty}invert(e){return new Ki(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ki(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ki(n.pos,n.attr,n.value)}}$t.jsonID("attr",Ki);class Yl extends $t{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ut.ok(r)}getMap(){return hn.empty}invert(e){return new Yl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Yl(n.attr,n.value)}}$t.jsonID("docAttr",Yl);let la=class extends Error{};la=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};la.prototype=Object.create(Error.prototype);la.prototype.constructor=la;la.prototype.name="TransformError";class ID{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new la(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ne.empty){let o=Lf(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new ne(W.from(r),0,0))}delete(e,n){return this.replace(e,n,ne.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return RD(this,e,n,r),this}replaceRangeWith(e,n,r){return AD(this,e,n,r),this}deleteRange(e,n){return OD(this,e,n),this}lift(e,n){return vD(this,e,n),this}join(e,n=1){return TD(this,e,n),this}wrap(e,n){return wD(this,e,n),this}setBlockType(e,n=e,r,o=null){return bD(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return CD(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Ki(e,n,r)),this}setDocAttribute(e,n){return this.step(new Yl(e,n)),this}addNodeMark(e,n){return this.step(new wo(e,n)),this}removeNodeMark(e,n){if(!(n instanceof $e)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new aa(e,n)),this}split(e,n=1,r){return kD(this,e,n,r),this}addMark(e,n,r){return pD(this,e,n,r),this}removeMark(e,n,r){return mD(this,e,n,r),this}clearIncompatible(e,n,r){return ay(this,e,n,r),this}}const fp=Object.create(null);class Ee{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new jD(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ne.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?ne.empty:n),a==0&&Nw(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),Nw(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new we(e):xi(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?xi(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):xi(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Nn(e.node(0))}static atStart(e){return xi(e,e,0,0,1)||new Nn(e)}static atEnd(e){return xi(e,e,e.content.size,e.childCount,-1)||new Nn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=fp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in fp)throw new RangeError("Duplicate use of selection JSON ID "+e);return fp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return we.between(this.$anchor,this.$head).getBookmark()}}Ee.prototype.visible=!0;class jD{constructor(e,n){this.$from=e,this.$to=n}}let Ew=!1;function Tw(t){!Ew&&!t.parent.inlineContent&&(Ew=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class we extends Ee{constructor(e,n=e){Tw(e),Tw(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ee.near(r);let o=e.resolve(n.map(this.anchor));return new we(o.parent.inlineContent?o:r,r)}replace(e,n=ne.empty){if(super.replace(e,n),n==ne.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof we&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new $f(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new we(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Ee.findFrom(n,r,!0)||Ee.findFrom(n,-r,!0);if(s)n=s.$head;else return Ee.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Ee.findFrom(e,-r,!0)||Ee.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new we(e,n)}}Ee.jsonID("text",we);class $f{constructor(e,n){this.anchor=e,this.head=n}map(e){return new $f(e.map(this.anchor),e.map(this.head))}resolve(e){return we.between(e.resolve(this.anchor),e.resolve(this.head))}}class me extends Ee{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Ee.near(s):new me(s)}content(){return new ne(W.from(this.node),0,0)}eq(e){return e instanceof me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new cy(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new me(e.resolve(n.anchor))}static create(e,n){return new me(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}me.prototype.visible=!1;Ee.jsonID("node",me);class cy{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new $f(r,r):new cy(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&me.isSelectable(r)?new me(n):Ee.near(n)}}class Nn extends Ee{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ne.empty){if(n==ne.empty){e.delete(0,e.doc.content.size);let r=Ee.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Nn(e)}map(e){return new Nn(e)}eq(e){return e instanceof Nn}getBookmark(){return DD}}Ee.jsonID("all",Nn);const DD={map(){return this},resolve(t){return new Nn(t)}};function xi(t,e,n,r,o,s=!1){if(e.inlineContent)return we.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&me.isSelectable(a))return me.create(t,n-(o<0?a.nodeSize:0))}else{let l=xi(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function Nw(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof vt||o instanceof xt))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,u)=>{i==null&&(i=u)}),t.setSelection(Ee.near(t.doc.resolve(i),n))}const Mw=1,xu=2,_w=4;class LD extends ID{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Mw)&~xu,this.storedMarks=null,this}get selectionSet(){return(this.updated&Mw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=xu,this}ensureMarks(e){return $e.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&xu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~xu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||$e.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(Ee.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_w,this}get scrolledIntoView(){return(this.updated&_w)>0}}function Pw(t,e){return!e||!t?t:t.bind(e)}class il{constructor(e,n,r){this.name=e,this.init=Pw(n.init,r),this.apply=Pw(n.apply,r)}}const $D=[new il("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new il("selection",{init(t,e){return t.selection||Ee.atStart(e.doc)},apply(t){return t.selection}}),new il("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new il("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class hp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=$D.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new il(r.key,r.spec.state,r))})}}class ji{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ji(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new LD(this)}static create(e){let n=new hp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ji(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new hp(this.schema,e.plugins),r=n.fields,o=new ji(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new hp(e.schema,e.plugins),s=new ji(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=Po.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=Ee.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function iE(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=iE(o,e,{})),n[r]=o}return n}class qt{constructor(e){this.spec=e,this.props={},e.props&&iE(e.props,this,this.props),this.key=e.key?e.key.key:aE("plugin")}getState(e){return e[this.key]}}const pp=Object.create(null);function aE(t){return t in pp?t+"$"+ ++pp[t]:(pp[t]=0,t+"$")}class In{constructor(e="key"){this.key=aE(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Et=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Jl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let ag=null;const Nr=function(t,e,n){let r=ag||(ag=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},FD=function(){ag=null},$s=function(t,e,n,r){return n&&(Rw(t,e,n,r,-1)||Rw(t,e,n,r,1))},zD=/^(img|br|input|textarea|hr)$/i;function Rw(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:kn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Sc(t)||zD.test(t.nodeName)||t.contentEditable=="false")return!1;e=Et(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?kn(t):0}else return!1}}function kn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function BD(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=kn(t)}else if(t.parentNode&&!Sc(t))e=Et(t),t=t.parentNode;else return null}}function HD(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Sc(t))e=Et(t)+1,t=t.parentNode;else return null}}function UD(t,e,n){for(let r=e==0,o=e==kn(t);r||o;){if(t==n)return!0;let s=Et(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==kn(t)}}function Sc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ff=function(t){return t.focusNode&&$s(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ps(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function VD(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function WD(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(kn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(kn(r.startContainer),r.startOffset)}}}const pr=typeof navigator<"u"?navigator:null,Aw=typeof document<"u"?document:null,Jo=pr&&pr.userAgent||"",lg=/Edge\/(\d+)/.exec(Jo),lE=/MSIE \d/.exec(Jo),cg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jo),sn=!!(lE||cg||lg),Ao=lE?document.documentMode:cg?+cg[1]:lg?+lg[1]:0,qn=!sn&&/gecko\/(\d+)/i.test(Jo);qn&&+(/Firefox\/(\d+)/.exec(Jo)||[0,0])[1];const ug=!sn&&/Chrome\/(\d+)/.exec(Jo),Dt=!!ug,cE=ug?+ug[1]:0,Ht=!sn&&!!pr&&/Apple Computer/.test(pr.vendor),ca=Ht&&(/Mobile\/\w+/.test(Jo)||!!pr&&pr.maxTouchPoints>2),bn=ca||(pr?/Mac/.test(pr.platform):!1),KD=pr?/Win/.test(pr.platform):!1,Or=/Android \d/.test(Jo),Cc=!!Aw&&"webkitFontSmoothing"in Aw.documentElement.style,qD=Cc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function GD(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function kr(t,e){return typeof t=="number"?t:t[e]}function YD(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Ow(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;i=Jl(i)){if(i.nodeType!=1)continue;let a=i,l=a==s.body,c=l?GD(s):YD(a),u=0,d=0;if(e.top<c.top+kr(r,"top")?d=-(c.top-e.top+kr(o,"top")):e.bottom>c.bottom-kr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+kr(o,"top")-c.top:e.bottom-c.bottom+kr(o,"bottom")),e.left<c.left+kr(r,"left")?u=-(c.left-e.left+kr(o,"left")):e.right>c.right-kr(r,"right")&&(u=e.right-c.right+kr(o,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-h,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function JD(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:uE(t.dom)}}function uE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Jl(r));return e}function XD({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;dE(n,r==0?0:r-e)}function dE(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ii=null;function QD(t){if(t.setActive)return t.setActive();if(ii)return t.focus(ii);let e=uE(t);t.focus(ii==null?{get preventScroll(){return ii={preventScroll:!0},!0}}:void 0),ii||(ii=!1,dE(e,0))}function fE(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Nr(u).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.top<=i&&g.bottom>=a){i=Math.max(g.bottom,i),a=Math.min(g.top,a);let v=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(v<r){n=u,r=v,o=v&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&v&&(s=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!l&&g.left<=e.left&&g.right>=e.left&&(l=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(s=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?ZD(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:fE(n,o)}function ZD(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=to(r,1);if(s.top!=s.bottom&&uy(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function uy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eL(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tL(t,e,n){let{node:r,offset:o}=fE(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function nL(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function hE(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(uy(e,c))return hE(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function rL(t,e){let n=t.dom.ownerDocument,r,o=0,s=WD(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!uy(e,c)||(i=hE(t.dom,e,c),!i))return null}if(Ht)for(let c=i;r&&c;c=Jl(c))c.draggable&&(r=void 0);if(i=eL(i,e),r){if(qn&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;Cc&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=nL(t,r,o,e))}a==null&&(a=tL(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Iw(t){return t.top<t.bottom||t.left<t.right}function to(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Iw(r))return r}return Array.prototype.find.call(n,Iw)||t.getBoundingClientRect()}const oL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function pE(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Cc||qn;if(r.nodeType==3)if(i&&(oL.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=to(Nr(r,o,o),n);if(qn&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=to(Nr(r,o-1,o-1),-1);if(c.top==l.top){let u=to(Nr(r,o,o+1),-1);if(u.top!=l.top)return Ka(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Ka(to(Nr(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==kn(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return mp(l.getBoundingClientRect(),!1)}if(s==null&&o<kn(r)){let l=r.childNodes[o];if(l.nodeType==1)return mp(l.getBoundingClientRect(),!0)}return mp(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==kn(r))){let l=r.childNodes[o-1],c=l.nodeType==3?Nr(l,kn(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ka(to(c,1),!1)}if(s==null&&o<kn(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Nr(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Ka(to(c,-1),!0)}return Ka(to(r.nodeType==3?Nr(r):r,-n),n>=0)}function Ka(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function mp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function mE(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function sL(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return mE(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=pE(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Nr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const iL=/[\u0590-\u08ac]/;function aL(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!iL.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:mE(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:v}=t.domSelectionRange(),x=g&&!m.contains(g.nodeType==1?g:g.parentNode)||l==g&&c==v;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),x}):r.pos==r.start()||r.pos==r.end()}let jw=null,Dw=null,Lw=!1;function lL(t,e,n){return jw==e&&Dw==n?Lw:(jw=e,Dw=n,Lw=n=="up"||n=="down"?sL(t,e,n):aL(t,e,n))}const Mn=0,$w=1,bs=2,mr=3;class kc{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Mn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Et(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof vE){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof gE&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Et(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Et(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let u=i+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=i;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=Et(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Et(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let m=0,g=0;m<this.children.length;m++){let v=this.children[m],x=g+v.size;if(s>g&&i<x)return v.setSelection(e-g-v.border,n-g-v.border,r,o);g=x}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((qn||Ht)&&e==n){let{node:m,offset:g}=a;if(m.nodeType==3){if(d=!!(g&&m.nodeValue[g-1]==`
`),d&&g==m.nodeValue.length)for(let v=m,x;v;v=v.parentNode){if(x=v.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:Et(x)+1});break}let y=v.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let v=m.childNodes[g-1];d=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(qn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||d&&Ht)&&$s(a.node,a.offset,u.anchorNode,u.anchorOffset)&&$s(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let g=a;a=l,l=g}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?bs:$w,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=mr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?bs:mr}r=i}this.dirty=bs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?bs:$w;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class gE extends kc{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Mn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class cL extends kc{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Fs extends kc{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=Js.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Fs(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&mr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=mr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Mn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Mn}}slice(e,n,r){let o=Fs.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=fg(s,n,i,r)),e>0&&(s=fg(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Oo extends kc{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Js.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=wE(u,r,n),c?l=new uL(e,n,r,o,u,d||null,h,c,s,i+1):n.isText?new zf(e,n,r,o,u,h,s):new Oo(e,n,r,o,u,d||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,n,r){return this.dirty==Mn&&e.eq(this.node)&&Vd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new fL(this,i&&i.node,e);mL(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?$e.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let m;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(m=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,m,e)||l.updateNextNode(c,u,d,e,h,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==bs)&&(i&&this.protectLocalComposition(e,i),yE(this.contentDOM,this.children,e),ca&&gL(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof we)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=vL(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new cL(this,s,n,o);e.input.compositionNodes.push(i),this.children=fg(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==mr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Mn}updateOuterDeco(e){if(Vd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=xE(this.dom,this.nodeDOM,dg(this.outerDeco,this.node,n),dg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Fw(t,e,n,r,o){wE(r,e,t);let s=new Oo(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class zf extends Oo{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==mr||this.dirty!=Mn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Mn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Mn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new zf(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=mr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class vE extends kc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Mn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uL extends Oo{constructor(e,n,r,o,s,i,a,l,c,u){super(e,n,r,o,s,i,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==mr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function yE(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=zw(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof Fs){let l=r?r.previousSibling:t.lastChild;yE(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=zw(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Cl=function(t){t&&(this.nodeName=t)};Cl.prototype=Object.create(null);const Ss=[new Cl];function dg(t,e,n){if(t.length==0)return Ss;let r=n?Ss[0]:new Cl,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new Cl(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new Cl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function xE(t,e,n,r){if(n==Ss&&r==Ss)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Ss[0]),o=l}dL(o,a||Ss[0],i)}return o}function dL(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function wE(t,e,n){return xE(t,t,Ss,dg(e,n,t.nodeType!=1))}function Vd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function zw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class fL{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hL(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Mn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Fs.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==mr&&i.dom==i.contentDOM&&(i.dirty=bs),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Oo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=mr&&Vd(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=bs,d.updateChildren(o,i+1),d.dirty=Mn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Vd(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=Oo.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=Oo.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new gE(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Fs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof zf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ht||Dt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new vE(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hL(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Fs)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function pL(t,e){return t.type.side-e.type.side}function mL(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(s,u),c),s+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,d;for(;i<o.length&&o[i].to==s;){let x=o[i++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(pL);for(let x=0;x<d.length;x++)n(d[x],c,!!l)}else n(u,c,!!l);let h,m;if(l)m=-1,h=l,l=null;else if(c<t.childCount)m=c,h=t.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=s&&a.splice(x--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let g=s+h.nodeSize;if(h.isText){let x=g;i<o.length&&o[i].from<x&&(x=o[i].from);for(let y=0;y<a.length;y++)a[y].to<x&&(x=a[y].to);x<g&&(l=h.cut(x-s),h=h.cut(0,x-s),g=x,m=-1)}else for(;i<o.length&&o[i].to<g;)i++;let v=h.isInline&&!h.isLeaf?a.filter(x=>!x.inline):a.slice();r(h,v,e.forChild(s,h),m),s=g}}function gL(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function vL(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function fg(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function dy(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(Ff(n)){for(l=i;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&me.isSelectable(d)&&o.parent&&!(d.isInline&&UD(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new me(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=i,h=i;for(let m=0;m<n.rangeCount;m++){let g=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,i]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=fy(t,u,a,d)}return c}function bE(t){return t.editable?t.hasFocus():CE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function jr(t,e=!1){let n=t.state.selection;if(SE(t,n),!!bE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Dt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&$s(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)xL(t);else{let{anchor:r,head:o}=n,s,i;Bw&&!(n instanceof we)&&(n.$from.parent.inlineContent||(s=Hw(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=Hw(t,n.to))),t.docView.setSelection(r,o,t,e),Bw&&(s&&Uw(s),i&&Uw(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yL(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Bw=Ht||Dt&&cE<63;function Hw(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ht&&o&&o.contentEditable=="false")return gp(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return gp(o);if(s)return gp(s)}}function gp(t){return t.contentEditable="true",Ht&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Uw(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function yL(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!bE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function xL(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Et(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&sn&&Ao<=11&&(r.disabled=!0,r.disabled=!1)}function SE(t,e){if(e instanceof me){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Vw(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Vw(t)}function Vw(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function fy(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||we.between(e,n,r)}function Ww(t){return t.editable&&!t.hasFocus()?!1:CE(t)}function CE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function wL(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return $s(e.node,e.offset,n.anchorNode,n.anchorOffset)}function hg(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Ee.findFrom(s,e)}function co(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Kw(t,e,n){let r=t.state.selection;if(r instanceof we)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return co(t,new we(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=hg(t.state,e);return o&&o instanceof me?co(t,o):!1}else if(!(bn&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?me.isSelectable(s)?co(t,new me(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Cc?co(t,new we(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof me&&r.node.isInline)return co(t,new we(e>0?r.$to:r.$from));{let o=hg(t.state,e);return o?co(t,o):!1}}}function Wd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function kl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ai(t,e){return e<0?bL(t):SL(t)}function bL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(qn&&n.nodeType==1&&r<Wd(n)&&kl(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(kl(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(kE(n))break;{let a=n.previousSibling;for(;a&&kl(a,-1);)o=n.parentNode,s=Et(a),a=a.previousSibling;if(a)n=a,r=Wd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?pg(t,n,r):o&&pg(t,o,s)}function SL(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Wd(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(kl(a,1))s=n,i=++r;else break}else{if(kE(n))break;{let a=n.nextSibling;for(;a&&kl(a,1);)s=a.parentNode,i=Et(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Wd(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&pg(t,s,i)}function kE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function CL(t,e){for(;t&&e==t.childNodes.length&&!Sc(t);)e=Et(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function kL(t,e){for(;t&&!e&&!Sc(t);)e=Et(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function pg(t,e,n){if(e.nodeType!=3){let s,i;(i=CL(e,n))?(e=i,n=0):(s=kL(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ff(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&jr(t)},50)}function qw(t,e){let n=t.state.doc.resolve(e);if(!(Dt||KD)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Gw(t,e,n){let r=t.state.selection;if(r instanceof we&&!r.empty||n.indexOf("s")>-1||bn&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=hg(t.state,e);if(i&&i instanceof me)return co(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof Nn?Ee.near(i,e):Ee.findFrom(i,e);return a?co(t,a):!1}return!1}function Yw(t,e){if(!(t.state.selection instanceof we))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function Jw(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function EL(t){if(!Ht||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Jw(t,r,"true"),setTimeout(()=>Jw(t,r,"false"),20)}return!1}function TL(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function NL(t,e){let n=e.keyCode,r=TL(e);if(n==8||bn&&n==72&&r=="c")return Yw(t,-1)||ai(t,-1);if(n==46&&!e.shiftKey||bn&&n==68&&r=="c")return Yw(t,1)||ai(t,1);if(n==13||n==27)return!0;if(n==37||bn&&n==66&&r=="c"){let o=n==37?qw(t,t.state.selection.from)=="ltr"?-1:1:-1;return Kw(t,o,r)||ai(t,o)}else if(n==39||bn&&n==70&&r=="c"){let o=n==39?qw(t,t.state.selection.from)=="ltr"?1:-1:1;return Kw(t,o,r)||ai(t,o)}else{if(n==38||bn&&n==80&&r=="c")return Gw(t,-1,r)||ai(t,-1);if(n==40||bn&&n==78&&r=="c")return EL(t)||Gw(t,1,r)||ai(t,1);if(r==(bn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function hy(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let i=t.someProp("clipboardSerializer")||Js.fromSchema(t.state.schema),a=PE(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=_E[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let g=a.createElement(u[m]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function EE(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new ne(W.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ne.empty;let d=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(d)a=d;else{let h=o.marks(),{schema:m}=t.state,g=Js.fromSchema(m);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let x=i.appendChild(document.createElement("p"));v&&x.appendChild(g.serializeNode(m.text(v,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),i=RL(n),Cc&&AL(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ro.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!ML.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=OL(Xw(a,+u[1],+u[2]),u[4]);else if(a=ne.maxOpen(_L(a.content,o),!0),a.openStart||a.openEnd){let d=0,h=0;for(let m=a.content.firstChild;d<a.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=a.content.lastChild;h<a.openEnd&&!m.type.spec.isolating;h++,m=m.lastChild);a=Xw(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const ML=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _L(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&NE(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=ME(i[i.length-1],s.length));let u=TE(a,l);i.push(u),o=o.matchType(u.type),s=l}}),i)return W.from(i)}return t}function TE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,W.from(t));return t}function NE(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=NE(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(W.from(TE(n,t,o+1))))}}function ME(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ME(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(W.empty,!0);return t.copy(n.append(r))}function mg(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=mg(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(W.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function Xw(t,e,n){return e<t.openStart&&(t=new ne(mg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ne(mg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const _E={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Qw=null;function PE(){return Qw||(Qw=document.implementation.createHTMLDocument("title"))}let vp=null;function PL(t){let e=window.trustedTypes;return e?(vp||(vp=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),vp.createHTML(t)):t}function RL(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=PE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&_E[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=PL(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function AL(t){let e=t.querySelectorAll(Dt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function OL(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=W.from(l.create(r[a+1],o)),s++,i++}return new ne(o,s,i)}const Ut={},Vt={},IL={touchstart:!0,touchmove:!0};class jL{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function DL(t){for(let e in Ut){let n=Ut[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{$L(t,r)&&!py(t,r)&&(t.editable||!(r.type in Vt))&&n(t,r)},IL[e]?{passive:!0}:void 0)}Ht&&t.dom.addEventListener("input",()=>null),gg(t)}function bo(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function LL(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function gg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>py(t,r))})}function py(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function $L(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function FL(t,e){!py(t,e)&&Ut[e.type]&&(t.editable||!(e.type in Vt))&&Ut[e.type](t,e)}Vt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!AE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Or&&Dt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ca&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,ps(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||NL(t,n)?n.preventDefault():bo(t,"key")};Vt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Vt.keypress=(t,e)=>{let n=e;if(AE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||bn&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof we)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function Bf(t){return{left:t.clientX,top:t.clientY}}function zL(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function my(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function qi(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function BL(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&me.isSelectable(r)?(qi(t,new me(n)),!0):!1}function HL(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof me&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(me.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(qi(t,me.create(t.state.doc,o)),!0):!1}function UL(t,e,n,r,o){return my(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?HL(t,n):BL(t,n))}function VL(t,e,n,r){return my(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function WL(t,e,n,r){return my(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||KL(t,n,r)}function KL(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(qi(t,we.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)qi(t,we.create(r,a+1,a+1+i.content.size));else if(me.isSelectable(i))qi(t,me.create(r,a));else continue;return!0}}function gy(t){return Kd(t)}const RE=bn?"metaKey":"ctrlKey";Ut.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=gy(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&zL(n,t.input.lastClick)&&!n[RE]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let i=t.posAtCoords(Bf(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new qL(t,i,n,!!r)):(s=="doubleClick"?VL:WL)(t,i.pos,i.inside,n)?n.preventDefault():bo(t,"pointer"))};class qL{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[RE],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,i=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof me&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),bo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>jr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Bf(e))),this.updateAllowDefault(e),this.allowDefault||!n?bo(this.view,"pointer"):UL(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ht&&this.mightDrag&&!this.mightDrag.node.isAtom||Dt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(qi(this.view,Ee.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):bo(this.view,"pointer")}move(e){this.updateAllowDefault(e),bo(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ut.touchstart=t=>{t.input.lastTouch=Date.now(),gy(t),bo(t,"pointer")};Ut.touchmove=t=>{t.input.lastTouch=Date.now(),bo(t,"pointer")};Ut.contextmenu=t=>gy(t);function AE(t,e){return t.composing?!0:Ht&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const GL=Or?5e3:-1;Vt.compositionstart=Vt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof we&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Kd(t,!0),t.markCursor=null;else if(Kd(t,!e.selection.empty),qn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}OE(t,GL)};Vt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,OE(t,20))};function OE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Kd(t),e))}function IE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=JL());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function YL(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=BD(e.focusNode,e.focusOffset),r=HD(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function JL(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Kd(t,e=!1){if(!(Or&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),IE(t),e||t.docView&&t.docView.dirty){let n=dy(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function XL(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Xl=sn&&Ao<15||ca&&qD<604;Ut.copy=Vt.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=Xl?null:n.clipboardData,i=r.content(),{dom:a,text:l}=hy(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):XL(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QL(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function ZL(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ql(t,r.value,null,o,e):Ql(t,r.textContent,r.innerHTML,o,e)},50)}function Ql(t,e,n,r,o){let s=EE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||ne.empty)))return!0;if(!s)return!1;let i=QL(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function jE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Vt.paste=(t,e)=>{let n=e;if(t.composing&&!Or)return;let r=Xl?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ql(t,jE(r),r.getData("text/html"),o,n)?n.preventDefault():ZL(t,n)};class DE{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const LE=bn?"altKey":"ctrlKey";Ut.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Bf(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof me?o.to-1:o.to))){if(r&&r.mightDrag)i=me.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(i=me.create(t.state.doc,d.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:u}=hy(t,a);(!n.dataTransfer.files.length||!Dt||cE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Xl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Xl||n.dataTransfer.setData("text/plain",c),t.dragging=new DE(u,!n[LE],i)};Ut.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Vt.dragover=Vt.dragenter=(t,e)=>e.preventDefault();Vt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Bf(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",g=>{i=g(i,t)}):i=EE(t,jE(n.dataTransfer),Xl?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[LE]);if(t.someProp("handleDrop",g=>g(t,n,i||ne.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?tE(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(h))return;let m=c.doc.resolve(u);if(d&&me.isSelectable(i.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new me(m));else{let g=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((v,x,y,w)=>g=w),c.setSelection(fy(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Ut.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&jr(t)},20))};Ut.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ut.beforeinput=(t,e)=>{if(Dt&&Or&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,ps(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Vt)Ut[t]=Vt[t];function Zl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class qd{constructor(e,n){this.toDOM=e,this.spec=n||Ms,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new tn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof qd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Zl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Io{constructor(e,n){this.attrs=e,this.spec=n||Ms}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new tn(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Io&&Zl(this.attrs,e.attrs)&&Zl(this.spec,e.spec)}static is(e){return e.type instanceof Io}destroy(){}}class vy{constructor(e,n){this.attrs=e,this.spec=n||Ms}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new tn(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof vy&&Zl(this.attrs,e.attrs)&&Zl(this.spec,e.spec)}destroy(){}}class tn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new tn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new tn(e,e,new qd(n,r))}static inline(e,n,r,o){return new tn(e,n,new Io(r,o))}static node(e,n,r,o){return new tn(e,n,new vy(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Io}get widget(){return this.type instanceof qd}}const wi=[],Ms={};class ot{constructor(e,n){this.local=e.length?e:wi,this.children=n.length?n:wi}static create(e,n){return n.length?Gd(n,e,0,Ms):It}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==It||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ms)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?e$(this.children,i||[],e,n,r,o,s):i?new ot(i.sort(_s),wi):It}add(e,n){return n.length?this==It?ot.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=FE(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,Gd(u,a,c+1,Ms)),s+=3}});let i=$E(s?zE(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new ot(i.length?this.local.concat(i).sort(_s):this.local,o||this.children)}remove(e){return e.length==0||this==It?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=It?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new ot(o,r):It}forChild(e,n){if(this==It)return this;if(n.isLeaf)return ot.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof Io){let c=Math.max(s,l.from)-s,u=Math.min(i,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new ot(o.sort(_s),wi);return r?new mo([a,r]):a}return r||It}eq(e){if(this==e)return!0;if(!(e instanceof ot)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return yy(this.localsInner(e))}localsInner(e){if(this==It)return wi;if(e.inlineContent||!this.local.some(Io.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Io||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ot.empty=new ot([],[]);ot.removeOverlap=yy;const It=ot.empty;class mo{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Ms));return mo.from(r)}forChild(e,n){if(n.isLeaf)return ot.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=It&&(s instanceof mo?r=r.concat(s.members):r.push(s))}return mo.from(r)}eq(e){if(!(e instanceof mo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?yy(r?n:n.sort(_s)):wi}static from(e){switch(e.length){case 0:return It;case 1:return e[0];default:return new mo(e.every(n=>n instanceof ot)?e:e.reduce((n,r)=>n.concat(r instanceof ot?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function e$(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,m,g,v)=>{let x=v-g-(m-h);for(let y=0;y<a.length;y+=3){let w=a[y+1];if(w<0||h>w+u-d)continue;let b=a[y]+u-d;m>=b?a[y+1]=h<=b?-2:-1:h>=u&&x&&(a[y]+=x,a[y+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),m=h-o,{index:g,offset:v}=r.content.findIndex(d),x=r.maybeChild(g);if(x&&v==d&&v+x.nodeSize==m){let y=a[c+2].mapInner(n,x,u+1,t[c]+s+1,i);y!=It?(a[c]=d,a[c+1]=m,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=t$(a,t,e,n,o,s,i),u=Gd(c,r,0,i);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let m=u.children[d];for(;h<a.length&&a[h]<m;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ot(e.sort(_s),a)}function $E(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new tn(o.from+e,o.to+e,o.type))}return n}function t$(t,e,n,r,o,s,i){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function FE(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function zE(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Gd(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=FE(t,a,l+n);if(c){s=!0;let u=Gd(c,a,n+l+1,r);u!=It&&o.push(l,l+a.nodeSize,u)}});let i=$E(s?zE(t):t,-n).sort(_s);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new ot(i,o):It}function _s(t,e){return t.from-e.from||t.to-e.to}function yy(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),Zw(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Zw(e,o,r.copy(s.from,r.to)));break}}}return e}function Zw(t,e,n){for(;e<t.length&&_s(n,t[e])>0;)e++;t.splice(e,0,n)}function yp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=It&&e.push(r)}),t.cursorWrapper&&e.push(ot.create(t.state.doc,[t.cursorWrapper.deco])),mo.from(e)}const n$={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},r$=sn&&Ao<=11;class o${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class s${constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new o$,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);sn&&Ao<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),r$&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,n$)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ww(this.view)){if(this.suppressingSelectionUpdates)return jr(this.view);if(sn&&Ao<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&$s(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Jl(s))n.add(s);for(let s=e.anchorNode;s;s=Jl(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Ww(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(a=!0))}if(qn&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let m=h.parentNode;m&&m.nodeName=="LI"&&(!d||l$(e,d)!=m)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ff(r)&&(c=dy(e))&&c.eq(Ee.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,jr(e),this.currentSelection.set(r)):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),i$(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||jr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(sn&&Ao<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?Et(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?Et(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let eb=new WeakMap,tb=!1;function i$(t){if(!eb.has(t)&&(eb.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qn,tb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),tb=!0}}function nb(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return $s(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function a$(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return nb(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?nb(t,n):null}function l$(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function c$(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Ff(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Dt&&t.input.lastKeyCode===8)for(let x=s;x>o;x--){let y=r.childNodes[x-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){s=x;break}if(!w||w.size)break}let d=t.state.doc,h=t.someProp("domParser")||Ro.fromSchema(t.state.schema),m=d.resolve(i),g=null,v=h.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:u$,context:m});if(c&&c[0].pos!=null){let x=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=x),g={anchor:x+i,head:y+i}}return{doc:v,sel:g,from:i,to:a}}function u$(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ht&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ht&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const d$=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function f$(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,O=dy(t,R);if(O&&!t.state.selection.eq(O)){if(Dt&&Or&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",z=>z(t,ps(13,"Enter"))))return;let K=t.state.tr.setSelection(O);R=="pointer"?K.setMeta("pointer",!0):R=="key"&&K.scrollIntoView(),s&&K.setMeta("composition",s),t.dispatch(K)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=c$(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,m="end"):(h=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let g=m$(d.content,c.doc.content,c.from,h,m);if(g&&t.input.domChangeCount++,(ca&&t.input.lastIOSEnter>Date.now()-225||Or)&&o.some(R=>R.nodeType==1&&!d$.test(R.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",R=>R(t,ps(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof we&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let R=rb(t,t.state.doc,c.sel);if(R&&!R.eq(t.state.selection)){let O=t.state.tr.setSelection(R);s&&O.setMeta("composition",s),t.dispatch(O)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof we&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),sn&&Ao<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let v=c.doc.resolveNoCache(g.start-c.from),x=c.doc.resolveNoCache(g.endB-c.from),y=u.resolve(g.start),w=v.sameParent(x)&&v.parent.inlineContent&&y.end()>=g.endA,b;if((ca&&t.input.lastIOSEnter>Date.now()-225&&(!w||o.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!w&&v.pos<c.doc.content.size&&!v.sameParent(x)&&(b=Ee.findFrom(c.doc.resolve(v.pos+1),1,!0))&&b.head==x.pos)&&t.someProp("handleKeyDown",R=>R(t,ps(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&p$(u,g.start,g.endA,v,x)&&t.someProp("handleKeyDown",R=>R(t,ps(8,"Backspace")))){Or&&Dt&&t.domObserver.suppressSelectionUpdates();return}Dt&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),Or&&!w&&v.start()!=x.start()&&x.parentOffset==0&&v.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,x=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,ps(13,"Enter"))})},20));let S=g.start,C=g.endA,E,k,T;if(w){if(v.pos==x.pos)sn&&Ao<=11&&v.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>jr(t),20)),E=t.state.tr.delete(S,C),k=u.resolve(g.start).marksAcross(u.resolve(g.endA));else if(g.endA==g.endB&&(T=h$(v.parent.content.cut(v.parentOffset,x.parentOffset),y.parent.content.cut(y.parentOffset,g.endA-y.start()))))E=t.state.tr,T.type=="add"?E.addMark(S,C,T.mark):E.removeMark(S,C,T.mark);else if(v.parent.child(v.index()).isText&&v.index()==x.index()-(x.textOffset?0:1)){let R=v.parent.textBetween(v.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",O=>O(t,S,C,R)))return;E=t.state.tr.insertText(R,S,C)}}if(E||(E=t.state.tr.replace(S,C,c.doc.slice(g.start-c.from,g.endB-c.from))),c.sel){let R=rb(t,E.doc,c.sel);R&&!(Dt&&t.composing&&R.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(R.head==S||R.head==E.mapping.map(C)-1)||sn&&R.empty&&R.head==S)&&E.setSelection(R)}k&&E.ensureMarks(k),s&&E.setMeta("composition",s),t.dispatch(E.scrollIntoView())}function rb(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:fy(t,e.resolve(n.anchor),e.resolve(n.head))}function h$(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(W.from(c).eq(t))return{mark:a,type:i}}function p$(t,e,n,r,o){if(n-e<=o.pos-r.pos||xp(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(xp(s,!0,!0));return!i.parent.isTextblock||i.pos>n||xp(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function xp(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function m$(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&ob(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&ob(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function ob(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class g${constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jL,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(cb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ab(this),ib(this),this.nodeViews=lb(this),this.docView=Fw(this.state.doc,sb(this),yp(this),this.dom,this),this.domObserver=new s$(this,(r,o,s,i)=>f$(this,r,o,s,i)),this.domObserver.start(),DL(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&gg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(cb),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(IE(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=lb(this);y$(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&gg(this),this.editable=ab(this),ib(this);let l=yp(this),c=sb(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(o.selection))&&(i=!0);let h=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&JD(this);if(i){this.domObserver.stop();let m=d&&(sn||Dt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&v$(o.selection,e.selection);if(d){let g=Dt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=YL(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Fw(e.doc,c,l,this.dom,this)),g&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&wL(this))?jr(this,m):(SE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&XD(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof me){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Ow(this,n.getBoundingClientRect(),e)}else Ow(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new DE(e.slice,e.move,o<0?void 0:me.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(sn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&QD(this.dom),jr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rL(this,e)}coordsAtPos(e,n=1){return pE(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return lL(this,n||this.state,e)}pasteHTML(e,n){return Ql(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ql(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return hy(this,e)}destroy(){this.docView&&(LL(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],yp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,FD())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return FL(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ht&&this.root.nodeType===11&&VD(this.dom.ownerDocument)==this.dom&&a$(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function sb(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[tn.node(0,t.state.doc.content.size,e)]}function ib(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:tn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ab(t){return!t.someProp("editable",e=>e(t.state)===!1)}function v$(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function lb(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function y$(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function cb(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Fo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},x$=typeof navigator<"u"&&/Mac/.test(navigator.platform),w$=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Tt=0;Tt<10;Tt++)Fo[48+Tt]=Fo[96+Tt]=String(Tt);for(var Tt=1;Tt<=24;Tt++)Fo[Tt+111]="F"+Tt;for(var Tt=65;Tt<=90;Tt++)Fo[Tt]=String.fromCharCode(Tt+32),Yd[Tt]=String.fromCharCode(Tt);for(var wp in Fo)Yd.hasOwnProperty(wp)||(Yd[wp]=Fo[wp]);function b$(t){var e=x$&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||w$&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Yd:Fo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const S$=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function C$(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))S$?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function k$(t){let e=Object.create(null);for(let n in t)e[C$(n)]=t[n];return e}function bp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function E$(t){return new qt({props:{handleKeyDown:BE(t)}})}function BE(t){let e=k$(t);return function(n,r){let o=b$(r),s,i=e[bp(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[bp(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=Fo[r.keyCode])&&s!=o){let a=e[bp(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const T$=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function HE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const N$=(t,e,n)=>{let r=HE(t,n);if(!r)return!1;let o=xy(r);if(!o){let i=r.blockRange(),a=i&&Ca(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(KE(t,o,e,-1))return!0;if(r.parent.content.size==0&&(ua(s,"end")||me.isSelectable(s)))for(let i=r.depth;;i--){let a=Lf(t.doc,r.before(i),r.after(i),ne.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(ua(s,"end")?Ee.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):me.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},M$=(t,e,n)=>{let r=HE(t,n);if(!r)return!1;let o=xy(r);return o?UE(t,o,e):!1},_$=(t,e,n)=>{let r=VE(t,n);if(!r)return!1;let o=wy(r);return o?UE(t,o,e):!1};function UE(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Lf(t.doc,s,l,ne.empty);if(!c||c.from!=s||c instanceof vt&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(we.create(u.doc,s)),n(u.scrollIntoView())}return!0}function ua(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const P$=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=xy(r)}let i=s&&s.nodeBefore;return!i||!me.isSelectable(i)?!1:(e&&e(t.tr.setSelection(me.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function xy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function VE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const R$=(t,e,n)=>{let r=VE(t,n);if(!r)return!1;let o=wy(r);if(!o)return!1;let s=o.nodeAfter;if(KE(t,o,e,1))return!0;if(r.parent.content.size==0&&(ua(s,"start")||me.isSelectable(s))){let i=Lf(t.doc,r.before(),r.after(),ne.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(ua(s,"start")?Ee.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):me.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},A$=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=wy(r)}let i=s&&s.nodeAfter;return!i||!me.isSelectable(i)?!1:(e&&e(t.tr.setSelection(me.create(t.doc,s.pos)).scrollIntoView()),!0)};function wy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const O$=(t,e)=>{let n=t.selection,r=n instanceof me,o;if(r){if(n.node.isTextblock||!Yo(t.doc,n.from))return!1;o=n.from}else if(o=Df(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(me.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},I$=(t,e)=>{let n=t.selection,r;if(n instanceof me){if(n.node.isTextblock||!Yo(t.doc,n.to))return!1;r=n.to}else if(r=Df(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},j$=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&Ca(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},D$=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function WE(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const L$=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=WE(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Ee.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},$$=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Nn||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=WE(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(we.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},F$=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Wi(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Ca(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},z$=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(me.create(t.doc,o))),!0)};function B$(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||Yo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function KE(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&B$(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let m=e.pos+s.nodeSize,g=W.empty;for(let y=i.length-1;y>=0;y--)g=W.from(i[y].create(null,g));g=W.from(o.copy(g));let v=t.tr.step(new xt(e.pos-1,m,e.pos,m,new ne(g,1,0),i.length,!0)),x=v.doc.resolve(m+2*i.length);x.nodeAfter&&x.nodeAfter.type==o.type&&Yo(v.doc,x.pos)&&v.join(x.pos),n(v.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Ee.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&Ca(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&ua(s,"start",!0)&&ua(o,"end")){let m=o,g=[];for(;g.push(m),!m.isTextblock;)m=m.lastChild;let v=s,x=1;for(;!v.isTextblock;v=v.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,v.content)){if(n){let y=W.empty;for(let b=g.length-1;b>=0;b--)y=W.from(g[b].copy(y));let w=t.tr.step(new xt(e.pos-g.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new ne(y,g.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function qE(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(we.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const H$=qE(-1),U$=qE(1);function V$(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&ly(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function ub(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function W$(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return K$(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function K$(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new Hd(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Hd(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=ly(s,n,r,e);return a?(t&&q$(t,e,a,o,n),!0):!1}function q$(t,e,n,r,o){let s=W.empty;for(let u=n.length-1;u>=0;u--)s=W.from(n[u].type.create(n[u].attrs,s));t.step(new xt(e.start-(r?2:0),e.end,e.start,e.end,new ne(s,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==o&&(i=u+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Wi(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function G$(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Y$(e,n,t,s):J$(e,n,s):!0:!1}}function Y$(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new xt(s-1,i,s,i,new ne(W.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Hd(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Ca(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(s,-1)-1;return Yo(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function J$(t,e,n){let r=t.tr,o=n.parent;for(let m=n.end,g=n.endIndex-1,v=n.startIndex;g>v;g--)m-=o.child(g).nodeSize,r.delete(m-1,m+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?W.empty:W.from(o))))return!1;let d=s.pos,h=d+i.nodeSize;return r.step(new xt(d-(a?1:0),h+(l?1:0),d+1,h-1,new ne((a?W.empty:W.from(o.copy(W.empty))).append(l?W.empty:W.from(o.copy(W.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function X$(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=W.from(c?t.create():null),d=new ne(W.from(t.create(null,W.from(a.type.create(null,u)))),c?3:1,0),h=s.start,m=s.end;n(e.tr.step(new xt(h-(c?3:1),m,h,m,d,1,!0)).scrollIntoView())}return!0}}function Hf(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class Uf{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,m])=>[h,(...v)=>{const x=this.buildProps(c,n),y=m(...v)(x);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a={tr:e,editor:o,view:i,state:Hf({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Q${constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ue(t,e,n){return t.config[e]===void 0&&t.parent?ue(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ue(t.parent,e,n):null}):t.config[e]}function Vf(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function GE(t){const e=[],{nodeExtensions:n,markExtensions:r}=Vf(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=ue(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,m])=>{e.push({type:d,name:h,attribute:{...s,...m}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=ue(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:u,attribute:h})})}),e}function bt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function nt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(m=>m.trim());c.set(d,h)}),r[o]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[o]=s}),r},{})}function vg(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>nt(n,r),{})}function YE(t){return typeof t=="function"}function Te(t,e=void 0,...n){return YE(t)?e?t.bind(e)(...n):t(...n):t}function Z$(t={}){return Object.keys(t).length===0&&t.constructor===Object}function eF(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function db(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):eF(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function fb(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Z$(n)?!1:n!=null))}function tF(t,e){var n;const r=GE(t),{nodeExtensions:o,markExtensions:s}=Vf(t),i=(n=o.find(c=>ue(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,w)=>{const b=ue(w,"extendNodeSchema",d);return{...y,...b?b(c):{}}},{}),m=fb({...h,content:Te(ue(c,"content",d)),marks:Te(ue(c,"marks",d)),group:Te(ue(c,"group",d)),inline:Te(ue(c,"inline",d)),atom:Te(ue(c,"atom",d)),selectable:Te(ue(c,"selectable",d)),draggable:Te(ue(c,"draggable",d)),code:Te(ue(c,"code",d)),whitespace:Te(ue(c,"whitespace",d)),linebreakReplacement:Te(ue(c,"linebreakReplacement",d)),defining:Te(ue(c,"defining",d)),isolating:Te(ue(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var w;return[y.name,{default:(w=y==null?void 0:y.attribute)===null||w===void 0?void 0:w.default}]}))}),g=Te(ue(c,"parseHTML",d));g&&(m.parseDOM=g.map(y=>db(y,u)));const v=ue(c,"renderHTML",d);v&&(m.toDOM=y=>v({node:y,HTMLAttributes:vg(y,u)}));const x=ue(c,"renderText",d);return x&&(m.toText=x),[c.name,m]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((x,y)=>{const w=ue(y,"extendMarkSchema",d);return{...x,...w?w(c):{}}},{}),m=fb({...h,inclusive:Te(ue(c,"inclusive",d)),excludes:Te(ue(c,"excludes",d)),group:Te(ue(c,"group",d)),spanning:Te(ue(c,"spanning",d)),code:Te(ue(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var y;return[x.name,{default:(y=x==null?void 0:x.attribute)===null||y===void 0?void 0:y.default}]}))}),g=Te(ue(c,"parseHTML",d));g&&(m.parseDOM=g.map(x=>db(x,u)));const v=ue(c,"renderHTML",d);return v&&(m.toDOM=x=>v({mark:x,HTMLAttributes:vg(x,u)})),[c.name,m]}));return new Vk({topNode:i,nodes:a,marks:l})}function Sp(t,e){return e.nodes[t]||e.marks[t]||null}function hb(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function by(t,e){const n=Js.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const nF=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-s))}),n};function Sy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Wf{constructor(e){this.find=e.find,this.handler=e.handler}}const rF=(t,e)=>{if(Sy(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function wu(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=nF(c)+s;return i.forEach(h=>{if(u)return;const m=rF(d,h.find);if(!m)return;const g=l.state.tr,v=Hf({state:l.state,transaction:g}),x={from:r-(m[0].length-s.length),to:o},{commands:y,chain:w,can:b}=new Uf({editor:n,state:v});h.handler({state:v,range:x,match:m,commands:y,chain:w,can:b})===null||!g.steps.length||(g.setMeta(a,{transform:g,from:r,to:o,text:s}),l.dispatch(g),u=!0)}),u}function oF(t){const{editor:e,rules:n}=t,r=new qt({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=by(W.from(u),i.schema);const{from:d}=l,h=d+u.length;wu({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return wu({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&wu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?wu({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function sF(t){return Object.prototype.toString.call(t).slice(8,-1)}function bu(t){return sF(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Kf(t,e){const n={...t};return bu(t)&&bu(e)&&Object.keys(e).forEach(r=>{bu(e[r])&&bu(t[r])?n[r]=Kf(t[r],e[r]):n[r]=e[r]}),n}class _t{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ue(this,"addOptions",{name:this.name}))),this.storage=Te(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _t(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Kf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new _t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Te(ue(n,"addOptions",{name:n.name})),n.storage=Te(ue(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function iF(t){return typeof t=="number"}class aF{constructor(e){this.find=e.find,this.handler=e.handler}}const lF=(t,e,n)=>{if(Sy(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function cF(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Uf({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,(m,g)=>{if(!m.isTextblock||m.type.spec.code)return;const v=Math.max(r,g),x=Math.min(o,g+m.content.size),y=m.textBetween(v-g,x-g,void 0,"");lF(y,s.find,i).forEach(b=>{if(b.index===void 0)return;const S=v+b.index+1,C=S+b[0].length,E={from:n.tr.mapping.map(S),to:n.tr.mapping.map(C)},k=s.handler({state:n,range:E,match:b,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});d.push(k)})}),d.every(m=>m!==null)}let Su=null;const uF=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function dF(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:m,pasteEvt:g})=>{const v=u.tr,x=Hf({state:u,transaction:v});if(!(!cF({editor:e,state:x,from:Math.max(d-1,0),to:h.b-1,rule:m,pasteEvent:g,dropEvent:a})||!v.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(u=>new qt({view(d){const h=g=>{var v;r=!((v=d.dom.parentElement)===null||v===void 0)&&v.contains(g.target)?d.dom.parentElement:null,r&&(Su=e)},m=()=>{Su&&(Su=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const m=Su;m&&setTimeout(()=>{const g=m.state.selection;g&&m.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,h)=>{var m;const g=(m=h.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return i=h,o=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,m)=>{const g=d[0],v=g.getMeta("uiEvent")==="paste"&&!o,x=g.getMeta("uiEvent")==="drop"&&!s,y=g.getMeta("applyPasteRules"),w=!!y;if(!v&&!x&&!w)return;if(w){let{text:C}=y;typeof C=="string"?C=C:C=by(W.from(C),m.schema);const{from:E}=y,k=E+C.length,T=uF(C);return l({rule:u,state:m,from:E,to:{b:k},pasteEvt:T})}const b=h.doc.content.findDiffStart(m.doc.content),S=h.doc.content.findDiffEnd(m.doc.content);if(!(!iF(b)||!S||b===S.b))return l({rule:u,state:m,from:b,to:S,pasteEvt:i})}}))}function fF(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Di{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Di.resolve(e),this.schema=tF(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Di.sort(Di.flatten(e)),r=fF(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=ue(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=ue(r,"priority")||100,i=ue(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Sp(n.name,this.schema)},o=ue(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=Di.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:Sp(i.name,this.schema)},l=[],c=ue(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&ue(i,"exitable",a)&&(u.ArrowRight=()=>_t.handleExit({editor:e,mark:i})),c){const v=Object.fromEntries(Object.entries(c()).map(([x,y])=>[x,()=>y({editor:e})]));u={...u,...v}}const d=E$(u);l.push(d);const h=ue(i,"addInputRules",a);hb(i,e.options.enableInputRules)&&h&&r.push(...h());const m=ue(i,"addPasteRules",a);hb(i,e.options.enablePasteRules)&&m&&o.push(...m());const g=ue(i,"addProseMirrorPlugins",a);if(g){const v=g();l.push(...v)}return l}).flat();return[oF({editor:e,rules:r}),...dF({editor:e,rules:o}),...s]}get attributes(){return GE(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Vf(this.extensions);return Object.fromEntries(n.filter(r=>!!ue(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:bt(r.name,this.schema)},i=ue(r,"addNodeView",s);if(!i)return[];const a=(l,c,u,d,h)=>{const m=vg(l,o);return i()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:m})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Sp(e.name,this.schema)};e.type==="mark"&&(!((n=Te(ue(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=ue(e,"onBeforeCreate",r),s=ue(e,"onCreate",r),i=ue(e,"onUpdate",r),a=ue(e,"onSelectionUpdate",r),l=ue(e,"onTransaction",r),c=ue(e,"onFocus",r),u=ue(e,"onBlur",r),d=ue(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Pt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ue(this,"addOptions",{name:this.name}))),this.storage=Te(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Kf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Pt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Te(ue(n,"addOptions",{name:n.name})),n.storage=Te(ue(n,"addStorage",{name:n.name,options:n.options})),n}}function JE(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const m=i==null?void 0:i[l.type.name];if(m)return u&&(a+=m({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function XE(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const hF=Pt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qt({key:new In("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=XE(n);return JE(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),pF=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),mF=(t=!1)=>({commands:e})=>e.setContent("",t),gF=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),m=d.blockRange(h);if(!m)return;const g=Ca(m);if(a.type.isTextblock){const{defaultType:v}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,v)}(g||g===0)&&e.lift(m,g)})}),!0},vF=t=>e=>t(e),yF=()=>({state:t,dispatch:e})=>$$(t,e),xF=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new we(r.doc.resolve(i-1))),!0},wF=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},bF=t=>({tr:e,state:n,dispatch:r})=>{const o=bt(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},SF=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},CF=()=>({state:t,dispatch:e})=>T$(t,e),kF=()=>({commands:t})=>t.keyboardShortcut("Enter"),EF=()=>({state:t,dispatch:e})=>L$(t,e);function Jd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:Sy(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function QE(t,e,n={}){return t.find(r=>r.type===e&&Jd(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function pb(t,e,n={}){return!!QE(t,e,n)}function Cy(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!QE([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&pb([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&pb([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Xo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const TF=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=Xo(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const d=Cy(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=we.create(i,d.from,d.to);n.setSelection(h)}}return!0},NF=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function ZE(t){return t instanceof we}function Cs(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function eT(t,e=null){if(!e)return null;const n=Ee.atStart(t),r=Ee.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?we.create(t,Cs(0,o,s),Cs(t.content.size,o,s)):we.create(t,Cs(e,o,s),Cs(e,o,s))}function MF(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ky(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const _F=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(ky()||MF())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!ZE(n.state.selection))return i(),!0;const a=eT(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},PF=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),RF=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),tT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&tT(r)}return t};function Cu(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return tT(n)}function Xd(t,e,n){if(t instanceof Po||t instanceof W)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return W.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Xd("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new Vk({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Ro.fromSchema(l).parseSlice(Cu(t),n.parseOptions):Ro.fromSchema(l).parse(Cu(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Ro.fromSchema(e);return n.slice?s.parseSlice(Cu(t),n.parseOptions).content:s.parse(Cu(t),n.parseOptions)}return Xd("",e,n)}function AF(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof vt||o instanceof xt))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,u)=>{i===0&&(i=u)}),t.setSelection(Ee.near(t.doc.resolve(i),n))}const OF=t=>!("type"in t),IF=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Xd(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:s.options.enableContentCheck})}catch(g){return s.emit("contentError",{editor:s,error:g,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((OF(a)?a:[a]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),l===c&&d){const{parent:g}=r.doc.resolve(l);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(l-=1,c+=1)}let m;if(u){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof W){let g="";e.forEach(v=>{v.text&&(g+=v.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,l,c)}else m=a,r.replaceWith(l,c,m);n.updateSelection&&AF(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:m})}return!0},jF=()=>({state:t,dispatch:e})=>O$(t,e),DF=()=>({state:t,dispatch:e})=>I$(t,e),LF=()=>({state:t,dispatch:e})=>N$(t,e),$F=()=>({state:t,dispatch:e})=>R$(t,e),FF=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Df(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},zF=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Df(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},BF=()=>({state:t,dispatch:e})=>M$(t,e),HF=()=>({state:t,dispatch:e})=>_$(t,e);function nT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function UF(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))ky()||nT()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const VF=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=UF(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function ec(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?bt(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(d,h)=>{if(d.isText)return;const m=Math.max(r,h),g=Math.min(o,h+d.nodeSize);a.push({node:d,from:m,to:g})});const l=o-r,c=a.filter(d=>i?i.name===d.node.type.name:!0).filter(d=>Jd(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const WF=(t,e={})=>({state:n,dispatch:r})=>{const o=bt(t,n.schema);return ec(n,o,e)?j$(n,r):!1},KF=()=>({state:t,dispatch:e})=>F$(t,e),qF=t=>({state:e,dispatch:n})=>{const r=bt(t,e.schema);return G$(r)(e,n)},GF=()=>({state:t,dispatch:e})=>D$(t,e);function qf(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function mb(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const YF=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=qf(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=bt(t,r.schema)),a==="mark"&&(i=Xo(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,mb(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(d=>{i===d.type&&n.addMark(u,u+c.nodeSize,i.create(mb(d.attrs,e)))})})}),!0):!1},JF=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),XF=()=>({tr:t,dispatch:e})=>{if(e){const n=new Nn(t.doc);t.setSelection(n)}return!0},QF=()=>({state:t,dispatch:e})=>P$(t,e),ZF=()=>({state:t,dispatch:e})=>A$(t,e),e3=()=>({state:t,dispatch:e})=>z$(t,e),t3=()=>({state:t,dispatch:e})=>U$(t,e),n3=()=>({state:t,dispatch:e})=>H$(t,e);function yg(t,e,n={},r={}){return Xd(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const r3=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=yg(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return i&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return i&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function rT(t,e){const n=Xo(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function o3(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function s3(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ey(t){return e=>s3(e.$from,t)}function i3(t,e){const n={from:0,to:t.content.size};return JE(t,n,e)}function a3(t,e){const n=bt(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function l3(t,e){const n=qf(typeof e=="string"?e:e.name,t.schema);return n==="node"?a3(t,e):n==="mark"?rT(t,e):{}}function oT(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=Cy(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function id(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function xg(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?Xo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Jd(d.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:d,$to:h})=>{const m=d.pos,g=h.pos;t.doc.nodesBetween(m,g,(v,x)=>{if(!v.isText&&!v.marks.length)return;const y=Math.max(m,x),w=Math.min(g,x+v.nodeSize),b=w-y;i+=b,a.push(...v.marks.map(S=>({mark:S,from:y,to:w})))})}),i===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Jd(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=i}function c3(t,e,n={}){if(!e)return ec(t,null,n)||xg(t,null,n);const r=qf(e,t.schema);return r==="node"?ec(t,e,n):r==="mark"?xg(t,e,n):!1}function gb(t,e){const{nodeExtensions:n}=Vf(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=Te(ue(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function Ty(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(Ty(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function u3(t){return t instanceof me}function d3(t,e,n){var r;const{selection:o}=e;let s=null;if(ZE(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const m=!h||h.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(v=>v.type.excludes(n));c=m&&g}return!c}),c})}const f3=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=Xo(t,r.schema);if(o)if(i){const c=rT(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,m)=>{const g=Math.max(m,u),v=Math.min(m+h.nodeSize,d);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(g,v,l.create({...y.attrs,...e}))}):n.addMark(g,v,l.create(e))})});return d3(r,n,l)},h3=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),p3=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=bt(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>ub(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>ub(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},m3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Cs(t,0,r.content.size),s=me.create(r,o);e.setSelection(s)}return!0},g3=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=we.atStart(r).from,a=we.atEnd(r).to,l=Cs(o,i,a),c=Cs(s,i,a),u=we.create(r,l,c);e.setSelection(u)}return!0},v3=t=>({state:e,dispatch:n})=>{const r=bt(t,e.schema);return X$(r)(e,n)};function vb(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const y3=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,u=id(c,a.node().type.name,a.node().attrs);if(s instanceof me&&s.node.isBlock)return!a.parentOffset||!Wi(i,a.pos)?!1:(r&&(t&&vb(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:o3(a.node(-1).contentMatchAt(a.indexAfter(-1)));let m=d&&h?[{type:h,attrs:u}]:void 0,g=Wi(e.doc,e.mapping.map(a.pos),1,m);if(!m&&!g&&Wi(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(g=!0,m=h?[{type:h,attrs:u}]:void 0),r){if(g&&(s instanceof we&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,m),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const v=e.mapping.map(a.before()),x=e.doc.resolve(v);a.node(-1).canReplaceWith(x.index(),x.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&vb(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return g},x3=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=bt(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let y=W.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let T=l.depth-w;T>=l.depth-3;T-=1)y=W.from(l.node(T).copy(y));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...id(h,l.node().type.name,l.node().attrs),...e},C=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(S))||void 0;y=y.append(W.from(a.createAndFill(null,C)||void 0));const E=l.before(l.depth-(w-1));n.replace(E,l.after(-b),new ne(y,4-w,0));let k=-1;n.doc.nodesBetween(E,n.doc.content.size,(T,R)=>{if(k>-1)return!1;T.isTextblock&&T.content.size===0&&(k=R+1)}),k>-1&&n.setSelection(we.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const m=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...id(h,d.type.name,d.attrs),...e},v={...id(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=m?[{type:a,attrs:g},{type:m,attrs:v}]:[{type:a,attrs:g}];if(!Wi(n.doc,l.pos,2))return!1;if(o){const{selection:y,storedMarks:w}=r,{splittableMarks:b}=s.extensionManager,S=w||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!S||!o)return!0;const C=S.filter(E=>b.includes(E.type.name));n.ensureMarks(C)}return!0},Cp=(t,e)=>{const n=Ey(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Yo(t.doc,n.pos)&&t.join(n.pos),!0},kp=(t,e)=>{const n=Ey(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&Yo(t.doc,r)&&t.join(r),!0},w3=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=o.extensionManager,m=bt(t,i.schema),g=bt(e,i.schema),{selection:v,storedMarks:x}=i,{$from:y,$to:w}=v,b=y.blockRange(w),S=x||v.$to.parentOffset&&v.$from.marks();if(!b)return!1;const C=Ey(E=>gb(E.type.name,d))(v);if(b.depth>=1&&C&&b.depth-C.depth<=1){if(C.node.type===m)return c.liftListItem(g);if(gb(C.node.type.name,d)&&m.validContent(C.node.content)&&a)return l().command(()=>(s.setNodeMarkup(C.pos,m),!0)).command(()=>Cp(s,m)).command(()=>kp(s,m)).run()}return!n||!S||!a?l().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>Cp(s,m)).command(()=>kp(s,m)).run():l().command(()=>{const E=u().wrapInList(m,r),k=S.filter(T=>h.includes(T.type.name));return s.ensureMarks(k),E?!0:c.clearNodes()}).wrapInList(m,r).command(()=>Cp(s,m)).command(()=>kp(s,m)).run()},b3=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=Xo(t,r.schema);return xg(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},S3=(t,e,n={})=>({state:r,commands:o})=>{const s=bt(t,r.schema),i=bt(e,r.schema),a=ec(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},C3=(t,e={})=>({state:n,commands:r})=>{const o=bt(t,n.schema);return ec(n,o,e)?r.lift(o):r.wrapIn(o,e)},k3=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},E3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},T3=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=Xo(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&i){let{from:h,to:m}=a;const g=(s=c.marks().find(x=>x.type===l))===null||s===void 0?void 0:s.attrs,v=Cy(c,l,g);v&&(h=v.from,m=v.to),n.removeMark(h,m,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},N3=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=qf(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=bt(t,r.schema)),a==="mark"&&(i=Xo(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,m,g;n.selection.empty?r.doc.nodesBetween(c,u,(v,x)=>{s&&s===v.type&&(m=Math.max(x,c),g=Math.min(x+v.nodeSize,u),d=x,h=v)}):r.doc.nodesBetween(c,u,(v,x)=>{x<c&&s&&s===v.type&&(m=Math.max(x,c),g=Math.min(x+v.nodeSize,u),d=x,h=v),x>=c&&x<=u&&(s&&s===v.type&&n.setNodeMarkup(x,void 0,{...v.attrs,...e}),i&&v.marks.length&&v.marks.forEach(y=>{if(i===y.type){const w=Math.max(x,c),b=Math.min(x+v.nodeSize,u);n.addMark(w,b,i.create({...y.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(v=>{i===v.type&&n.addMark(m,g,i.create({...v.attrs,...e}))}))}),!0):!1},M3=(t,e={})=>({state:n,dispatch:r})=>{const o=bt(t,n.schema);return V$(o,e)(n,r)},_3=(t,e={})=>({state:n,dispatch:r})=>{const o=bt(t,n.schema);return W$(o,e)(n,r)};var P3=Object.freeze({__proto__:null,blur:pF,clearContent:mF,clearNodes:gF,command:vF,createParagraphNear:yF,cut:xF,deleteCurrentNode:wF,deleteNode:bF,deleteRange:SF,deleteSelection:CF,enter:kF,exitCode:EF,extendMarkRange:TF,first:NF,focus:_F,forEach:PF,insertContent:RF,insertContentAt:IF,joinBackward:LF,joinDown:DF,joinForward:$F,joinItemBackward:FF,joinItemForward:zF,joinTextblockBackward:BF,joinTextblockForward:HF,joinUp:jF,keyboardShortcut:VF,lift:WF,liftEmptyBlock:KF,liftListItem:qF,newlineInCode:GF,resetAttributes:YF,scrollIntoView:JF,selectAll:XF,selectNodeBackward:QF,selectNodeForward:ZF,selectParentNode:e3,selectTextblockEnd:t3,selectTextblockStart:n3,setContent:r3,setMark:f3,setMeta:h3,setNode:p3,setNodeSelection:m3,setTextSelection:g3,sinkListItem:v3,splitBlock:y3,splitListItem:x3,toggleList:w3,toggleMark:b3,toggleNode:S3,toggleWrap:C3,undoInputRule:k3,unsetAllMarks:E3,unsetMark:T3,updateAttributes:N3,wrapIn:M3,wrapInList:_3});const R3=Pt.create({name:"commands",addCommands(){return{...P3}}}),A3=Pt.create({name:"drop",addProseMirrorPlugins(){return[new qt({key:new In("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),O3=Pt.create({name:"editable",addProseMirrorPlugins(){return[new qt({key:new In("editable"),props:{editable:()=>this.editor.options.editable}})]}}),I3=new In("focusEvents"),j3=Pt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qt({key:I3,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),D3=Pt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:m}=d,g=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,v=g.parent.type.spec.isolating,x=d.pos-d.parentOffset,y=v&&g.parent.childCount===1?x===d.pos:Ee.atStart(c).from===h;return!u||!m.type.isTextblock||m.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ky()||nT()?s:o},addProseMirrorPlugins(){return[new qt({key:new In("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(v=>v.getMeta("composition")))return;const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),o=t.some(v=>v.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=Ee.atStart(e.doc).from,c=Ee.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!Ty(n.doc))return;const h=n.tr,m=Hf({state:n,transaction:h}),{commands:g}=new Uf({editor:this.editor,state:m});if(g.clearNodes(),!!h.steps.length)return h}})]}}),L3=Pt.create({name:"paste",addProseMirrorPlugins(){return[new qt({key:new In("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),$3=Pt.create({name:"tabindex",addProseMirrorPlugins(){return[new qt({key:new In("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ms{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ms(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ms(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ms(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new ms(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new ms(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const F3=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function z3(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}let B3=class extends Q${constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=z3(F3,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=YE(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=n.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[O3,hF.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),R3,j3,D3,$3,A3,L3].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Di(o,this)}createCommandManager(){this.commandManager=new Uf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=yg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=yg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=eT(n,this.options.autofocus);this.view=new g$(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ji.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return l3(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return c3(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return by(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return i3(this.state.doc,{blockSeparator:n,textSerializers:{...XE(this.schema),...r}})}get isEmpty(){return Ty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new ms(n,this)}get $doc(){return this.$pos(0)}};function zs(t){return new Wf({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Te(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(oT(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function H3(t){return new Wf({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Te(t.getAttributes,void 0,r)||{},{tr:s}=e,i=n.from;let a=n.to;const l=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,i+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?i:i-1;s.insert(c,t.type.create(o)).delete(s.mapping.map(i),s.mapping.map(a))}s.scrollIntoView()}})}function wg(t){return new Wf({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=Te(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function tc(t){return new Wf({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const s=Te(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&ly(l,t.type,s);if(!c)return null;if(i.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:m}=t.editor.extensionManager,g=h||d.$to.parentOffset&&d.$from.marks();if(g){const v=g.filter(x=>m.includes(x.type.name));i.ensureMarks(v)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(d,s).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Yo(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&i.join(n.from-1)}})}let Qn=class bg{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ue(this,"addOptions",{name:this.name}))),this.storage=Te(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new bg(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Kf(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new bg(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Te(ue(n,"addOptions",{name:n.name})),n.storage=Te(ue(n,"addStorage",{name:n.name,options:n.options})),n}};function Bs(t){return new aF({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=Te(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(oT(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(x=>x===t.type&&x!==g.mark.type)).filter(g=>g.to>d).length)return null;h<n.to&&i.delete(h,n.to),d>n.from&&i.delete(n.from+u,d),c=n.from+u+a.length,i.addMark(n.from+u,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}function U3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sT={exports:{}},Ep={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function V3(){if(yb)return Ep;yb=1;var t=U;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function a(d,h){var m=h(),g=r({inst:{value:m,getSnapshot:h}}),v=g[0].inst,x=g[1];return s(function(){v.value=m,v.getSnapshot=h,l(v)&&x({inst:v})},[d,m,h]),o(function(){return l(v)&&x({inst:v}),d(function(){l(v)&&x({inst:v})})},[d]),i(m),m}function l(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!n(d,m)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Ep.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Ep}sT.exports=V3();var Ny=sT.exports;const W3=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},K3=({contentComponent:t})=>{const e=Ny.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return U.createElement(U.Fragment,null,Object.values(e))};function q3(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:bc.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class G3 extends U.Component{constructor(e){var n;super(e),this.editorContentRef=U.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=q3(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return U.createElement(U.Fragment,null,U.createElement("div",{ref:W3(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&U.createElement(K3,{contentComponent:e.contentComponent}))}}const Y3=p.forwardRef((t,e)=>{const n=U.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return U.createElement(G3,{key:n,innerRef:e,...t})}),J3=U.memo(Y3);var X3=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;for(o of e.entries())if(!t(o[1],n.get(o[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(e[o]!==n[o])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!(i==="_owner"&&e.$$typeof)&&!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n},Q3=U3(X3),iT={exports:{}},Tp={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function Z3(){if(xb)return Tp;xb=1;var t=U,e=Ny;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Tp.useSyncExternalStoreWithSelector=function(c,u,d,h,m){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=a(function(){function y(E){if(!w){if(w=!0,b=E,E=h(E),m!==void 0&&v.hasValue){var k=v.value;if(m(k,E))return S=k}return S=E}if(k=S,r(b,E))return k;var T=h(E);return m!==void 0&&m(k,T)?k:(b=E,S=T)}var w=!1,b,S,C=d===void 0?null:d;return[function(){return y(u())},C===null?void 0:function(){return y(C())}]},[u,d,h,m]);var x=o(c,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),l(x),x},Tp}iT.exports=Z3();var e5=iT.exports;const t5=typeof window<"u"?p.useLayoutEffect:p.useEffect;class n5{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function r5(t){var e;const[n]=p.useState(()=>new n5(t.editor)),r=e5.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:Q3);return t5(()=>n.watch(t.editor),[t.editor,n]),p.useDebugValue(r),r}const o5=!1,Sg=typeof window>"u",s5=Sg||!!(typeof window<"u"&&window.next);class My{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Sg||s5?null:this.createEditor();if(this.options.current.immediatelyRender&&Sg&&o5)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(o,...r)},onBlur:(...r)=>{var o,s;return(s=(o=this.options.current).onBlur)===null||s===void 0?void 0:s.call(o,...r)},onCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onCreate)===null||s===void 0?void 0:s.call(o,...r)},onDestroy:(...r)=>{var o,s;return(s=(o=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(o,...r)},onFocus:(...r)=>{var o,s;return(s=(o=this.options.current).onFocus)===null||s===void 0?void 0:s.call(o,...r)},onSelectionUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(o,...r)},onTransaction:(...r)=>{var o,s;return(s=(o=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(o,...r)},onUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(o,...r)},onContentError:(...r)=>{var o,s;return(s=(o=this.options.current).onContentError)===null||s===void 0?void 0:s.call(o,...r)},onDrop:(...r)=>{var o,s;return(s=(o=this.options.current).onDrop)===null||s===void 0?void 0:s.call(o,...r)},onPaste:(...r)=>{var o,s;return(s=(o=this.options.current).onPaste)===null||s===void 0?void 0:s.call(o,...r)}};return new B3(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((o,s)=>{var i;return o===((i=n.extensions)===null||i===void 0?void 0:i[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?My.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function i5(t={},e=[]){const n=p.useRef(t);n.current=t;const[r]=p.useState(()=>new My(n)),o=Ny.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return p.useDebugValue(o),p.useEffect(r.onRender(e)),r5({editor:o,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),o}const a5=p.createContext({editor:null});a5.Consumer;const l5=p.createContext({onDragStart:void 0}),c5=()=>p.useContext(l5);U.forwardRef((t,e)=>{const{onDragStart:n}=c5(),r=t.as||"div";return U.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const u5=/^\s*>\s$/,d5=Qn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[tc({find:u5,type:this.type})]}}),f5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,h5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,p5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,m5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,g5=_t.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[zs({find:f5,type:this.type}),zs({find:p5,type:this.type})]},addPasteRules(){return[Bs({find:h5,type:this.type}),Bs({find:m5,type:this.type})]}}),v5="listItem",wb="textStyle",bb=/^\s*([-+*])\s$/,y5=Qn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(v5,this.editor.getAttributes(wb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=tc({find:bb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=tc({find:bb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(wb),editor:this.editor})),[t]}}),x5=/(^|[^`])`([^`]+)`(?!`)/,w5=/(^|[^`])`([^`]+)`(?!`)/g,b5=_t.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[zs({find:x5,type:this.type})]},addPasteRules(){return[Bs({find:w5,type:this.type})]}}),S5=/^```([a-z]+)?[\s\n]$/,C5=/^~~~([a-z]+)?[\s\n]$/,k5=Qn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",nt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!s||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Ee.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[wg({find:S5,type:this.type,getAttributes:t=>({language:t[1]})}),wg({find:C5,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new qt({key:new In("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:i,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:s},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(we.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),E5=Qn.create({name:"doc",topNode:!0,content:"block+"});function T5(t={}){return new qt({view(e){return new N5(e,t)}})}class N5{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,i;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,i=-pageYOffset;else{let a=o.getBoundingClientRect();s=a.left-o.scrollLeft,i=a.top-o.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=tE(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const M5=Pt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[T5(this.options)]}});class st extends Ee{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return st.valid(r)?new st(r):Ee.near(r)}content(){return ne.empty}eq(e){return e instanceof st&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new st(e.resolve(n.pos))}getBookmark(){return new _y(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!_5(e)||!P5(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&st.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(st.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!me.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(st.valid(a))return a}return null}}}st.prototype.visible=!1;st.findFrom=st.findGapCursorFrom;Ee.jsonID("gapcursor",st);class _y{constructor(e){this.pos=e}map(e){return new _y(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return st.valid(n)?new st(n):Ee.near(n)}}function _5(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function P5(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function R5(){return new qt({props:{decorations:j5,createSelectionBetween(t,e,n){return e.pos==n.pos&&st.valid(n)?new st(n):null},handleClick:O5,handleKeyDown:A5,handleDOMEvents:{beforeinput:I5}}})}const A5=BE({ArrowLeft:ku("horiz",-1),ArrowRight:ku("horiz",1),ArrowUp:ku("vert",-1),ArrowDown:ku("vert",1)});function ku(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof we){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=st.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new st(c))),!0):!1}}function O5(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!st.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&me.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new st(r))),!0)}function I5(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof st))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=W.empty;for(let i=r.length-1;i>=0;i--)o=W.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new ne(o,0,0));return s.setSelection(we.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function j5(t){if(!(t.selection instanceof st))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ot.create(t.doc,[tn.widget(t.selection.head,e,{key:"gapcursor"})])}const D5=Pt.create({name:"gapCursor",addProseMirrorPlugins(){return[R5()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Te(ue(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),L5=Qn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",nt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),$5=Qn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,nt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>wg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Qd=200,wt=function(){};wt.prototype.append=function(e){return e.length?(e=wt.from(e),!this.length&&e||e.length<Qd&&this.leafAppend(e)||this.length<Qd&&e.leafPrepend(this)||this.appendInner(e)):this};wt.prototype.prepend=function(e){return e.length?wt.from(e).append(this):this};wt.prototype.appendInner=function(e){return new F5(this,e)};wt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?wt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};wt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};wt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};wt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};wt.from=function(e){return e instanceof wt?e:e&&e.length?new aT(e):wt.empty};var aT=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Qd)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Qd)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(wt);wt.empty=new aT([]);var F5=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(wt);const z5=500;class Un{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,u.push(d);return}if(o){u.push(new Xr(d.map));let m=d.step.map(o.slice(s)),g;m&&i.maybeStep(m).doc&&(g=i.mapping.maps[i.mapping.maps.length-1],c.push(new Xr(g,void 0,void 0,c.length+u.length))),s--,g&&o.appendMap(g,s)}else i.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(s)):d.selection,l=new Un(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new Xr(e.mapping.maps[u],d,n),m;(m=l&&l.merge(h))&&(h=m,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>H5&&(a=B5(a,c),i-=c),new Un(a.append(s),i)}remapping(e,n){let r=new Vi;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Un(this.items.append(e.map(n=>new Xr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let m=s.getMirror(--l);if(m==null)return;i=Math.min(i,m);let g=s.maps[m];if(h.step){let v=e.steps[m].invert(e.docs[m]),x=h.selection&&h.selection.map(s.slice(l+1,m));x&&a++,r.push(new Xr(g,v,x))}else r.push(new Xr(g))},o);let c=[];for(let h=n;h<i;h++)c.push(new Xr(s.maps[h]));let u=this.items.slice(0,o).append(c).append(r),d=new Un(u,a);return d.emptyItemCount()>z5&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&s++;let d=new Xr(c.invert(),l,u),h,m=o.length-1;(h=o.length&&o[m].merge(d))?o[m]=h:o.push(d)}}else i.map&&r--},this.items.length,0),new Un(wt.from(o.reverse()),s)}}Un.empty=new Un(wt.empty,0);function B5(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Xr=class lT{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new lT(n.getMap().invert(),n,this.selection)}}};class uo{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const H5=20;function U5(t,e,n,r){let o=n.getMeta(Ps),s;if(o)return o.historyState;n.getMeta(K5)&&(t=new uo(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(Ps))return i.getMeta(Ps).redo?new uo(t.done.addTransform(n,void 0,r,ad(e)),t.undone,Sb(n.mapping.maps),t.prevTime,t.prevComposition):new uo(t.done,t.undone.addTransform(n,void 0,r,ad(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!V5(n,t.prevRanges)),c=i?Np(t.prevRanges,n.mapping):Sb(n.mapping.maps);return new uo(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,ad(e)),Un.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new uo(t.done.rebased(n,s),t.undone.rebased(n,s),Np(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new uo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Np(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function V5(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function Sb(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function Np(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function W5(t,e,n){let r=ad(e),o=Ps.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new uo(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(Ps,{redo:n,historyState:l})}let Mp=!1,Cb=null;function ad(t){let e=t.plugins;if(Cb!=e){Mp=!1,Cb=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Mp=!0;break}}return Mp}const Ps=new In("history"),K5=new In("closeHistory");function q5(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new qt({key:Ps,state:{init(){return new uo(Un.empty,Un.empty,null,0,-1)},apply(e,n,r){return U5(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?uT:r=="historyRedo"?dT:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function cT(t,e){return(n,r)=>{let o=Ps.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=W5(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const uT=cT(!1,!0),dT=cT(!0,!0),G5=Pt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>uT(t,e),redo:()=>({state:t,dispatch:e})=>dT(t,e)}},addProseMirrorPlugins(){return[q5(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Y5=Qn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",nt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:o}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):u3(n)?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:i,dispatch:a})=>{var l;if(a){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(we.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(me.create(i.doc,c.pos)):i.setSelection(we.create(i.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(i.insert(u,d),i.setSelection(we.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[H3({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),J5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,X5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Q5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Z5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,e4=_t.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[zs({find:J5,type:this.type}),zs({find:Q5,type:this.type})]},addPasteRules(){return[Bs({find:X5,type:this.type}),Bs({find:Z5,type:this.type})]}}),t4=Qn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",nt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),n4="listItem",kb="textStyle",Eb=/^(\d+)\.\s$/,r4=Qn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",nt(this.options.HTMLAttributes,n),0]:["ol",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(n4,this.editor.getAttributes(kb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=tc({find:Eb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=tc({find:Eb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(kb)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),o4=Qn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),s4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,i4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,a4=_t.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[zs({find:s4,type:this.type})]},addPasteRules(){return[Bs({find:i4,type:this.type})]}}),l4=Qn.create({name:"text",group:"inline"}),c4=Pt.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(g5.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(d5.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(y5.configure(this.options.bulletList)),this.options.code!==!1&&t.push(b5.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(k5.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(E5.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(M5.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(D5.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(L5.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push($5.configure(this.options.heading)),this.options.history!==!1&&t.push(G5.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(Y5.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(e4.configure(this.options.italic)),this.options.listItem!==!1&&t.push(t4.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(r4.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(o4.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(a4.configure(this.options.strike)),this.options.text!==!1&&t.push(l4.configure(this.options.text)),t}}),u4=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,d4=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,f4=_t.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[zs({find:u4,type:this.type})]},addPasteRules(){return[Bs({find:d4,type:this.type})]}}),h4=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,o;const s=n.getAttribute("style"),i=(o=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||o===void 0?void 0:o.getAttribute("style");n.setAttribute("style",`${i};${s}`)})},p4=_t.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&h4(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(o=>o.type===this.type).some(o=>Object.values(o.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),m4=Pt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),g4=_t.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function fT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=fT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function v4(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=fT(t))&&(r&&(r+=" "),r+=e);return r}const Py="-",y4=t=>{const e=w4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(Py);return a[0]===""&&a.length!==1&&a.shift(),hT(a,e)||x4(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},hT=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?hT(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const s=t.join(Py);return(i=e.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},Tb=/^\[(.+)\]$/,x4=t=>{if(Tb.test(t)){const e=Tb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},w4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return S4(Object.entries(t.classGroups),n).forEach(([s,i])=>{Cg(i,r,s,e)}),r},Cg=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const s=o===""?e:Nb(e,o);s.classGroupId=n;return}if(typeof o=="function"){if(b4(o)){Cg(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{Cg(i,Nb(e,s),n,r)})})},Nb=(t,e)=>{let n=t;return e.split(Py).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},b4=t=>t.isThemeGetter,S4=(t,e)=>e?t.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[e+i,a])):s);return[n,o]}):t,C4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},pT="!",k4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],s=e.length,i=a=>{const l=[];let c=0,u=0,d;for(let x=0;x<a.length;x++){let y=a[x];if(c===0){if(y===o&&(r||a.slice(x,x+s)===e)){l.push(a.slice(u,x)),u=x+s;continue}if(y==="/"){d=x;continue}}y==="["?c++:y==="]"&&c--}const h=l.length===0?a:a.substring(u),m=h.startsWith(pT),g=m?h.substring(1):h,v=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:i}):i},E4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},T4=t=>({cache:C4(t.cacheSize),parseClassName:k4(t),...y4(t)}),N4=/\s+/,M4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,s=[],i=t.trim().split(N4);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(c);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){a=c+(a.length>0?" "+a:a);continue}if(v=r(h),!v){a=c+(a.length>0?" "+a:a);continue}g=!1}const x=E4(u).join(":"),y=d?x+pT:x,w=y+v;if(s.includes(w))continue;s.push(w);const b=o(v,g);for(let S=0;S<b.length;++S){const C=b[S];s.push(y+C)}a=c+(a.length>0?" "+a:a)}return a};function _4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=mT(e))&&(r&&(r+=" "),r+=n);return r}const mT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=mT(t[r]))&&(n&&(n+=" "),n+=e);return n};function P4(t,...e){let n,r,o,s=i;function i(l){const c=e.reduce((u,d)=>d(u),t());return n=T4(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=M4(l,n);return o(l,u),u}return function(){return s(_4.apply(null,arguments))}}const Ke=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},gT=/^\[(?:([a-z-]+):)?(.+)\]$/i,R4=/^\d+\/\d+$/,A4=new Set(["px","full","screen"]),O4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,I4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,j4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,D4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,L4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Er=t=>Gi(t)||A4.has(t)||R4.test(t),Qr=t=>ka(t,"length",W4),Gi=t=>!!t&&!Number.isNaN(Number(t)),_p=t=>ka(t,"number",Gi),qa=t=>!!t&&Number.isInteger(Number(t)),$4=t=>t.endsWith("%")&&Gi(t.slice(0,-1)),Ce=t=>gT.test(t),Zr=t=>O4.test(t),F4=new Set(["length","size","percentage"]),z4=t=>ka(t,F4,vT),B4=t=>ka(t,"position",vT),H4=new Set(["image","url"]),U4=t=>ka(t,H4,q4),V4=t=>ka(t,"",K4),Ga=()=>!0,ka=(t,e,n)=>{const r=gT.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},W4=t=>I4.test(t)&&!j4.test(t),vT=()=>!1,K4=t=>D4.test(t),q4=t=>L4.test(t),G4=()=>{const t=Ke("colors"),e=Ke("spacing"),n=Ke("blur"),r=Ke("brightness"),o=Ke("borderColor"),s=Ke("borderRadius"),i=Ke("borderSpacing"),a=Ke("borderWidth"),l=Ke("contrast"),c=Ke("grayscale"),u=Ke("hueRotate"),d=Ke("invert"),h=Ke("gap"),m=Ke("gradientColorStops"),g=Ke("gradientColorStopPositions"),v=Ke("inset"),x=Ke("margin"),y=Ke("opacity"),w=Ke("padding"),b=Ke("saturate"),S=Ke("scale"),C=Ke("sepia"),E=Ke("skew"),k=Ke("space"),T=Ke("translate"),R=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",Ce,e],z=()=>[Ce,e],Z=()=>["",Er,Qr],Q=()=>["auto",Gi,Ce],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],N=()=>["","0",Ce],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>[Gi,Ce];return{cacheSize:500,separator:":",theme:{colors:[Ga],spacing:[Er,Qr],blur:["none","",Zr,Ce],brightness:A(),borderColor:[t],borderRadius:["none","","full",Zr,Ce],borderSpacing:z(),borderWidth:Z(),contrast:A(),grayscale:N(),hueRotate:A(),invert:N(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[$4,Qr],inset:K(),margin:K(),opacity:A(),padding:z(),saturate:A(),scale:A(),sepia:N(),skew:A(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[Zr]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Ce]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qa,Ce]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",qa,Ce]}],"grid-cols":[{"grid-cols":[Ga]}],"col-start-end":[{col:["auto",{span:["full",qa,Ce]},Ce]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[Ga]}],"row-start-end":[{row:["auto",{span:[qa,Ce]},Ce]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ce,e]}],"min-w":[{"min-w":[Ce,e,"min","max","fit"]}],"max-w":[{"max-w":[Ce,e,"none","full","min","max","fit","prose",{screen:[Zr]},Zr]}],h:[{h:[Ce,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ce,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zr,Qr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_p]}],"font-family":[{font:[Ga]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",Gi,_p]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Er,Ce]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Er,Qr]}],"underline-offset":[{"underline-offset":["auto",Er,Ce]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),B4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",z4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},U4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:j()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[Er,Ce]}],"outline-w":[{outline:[Er,Qr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Er,Qr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zr,V4]}],"shadow-color":[{shadow:[Ga]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Zr,Ce]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[qa,Ce]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Er,Qr,_p]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Y4=P4(G4);function oe(...t){return Y4(v4(t))}/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yT=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>p.createElement("svg",{ref:l,...X4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:yT("lucide",o),...a},[...i.map(([c,u])=>p.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(t,e)=>{const n=p.forwardRef(({className:r,...o},s)=>p.createElement(Q4,{ref:s,iconNode:e,className:yT(`lucide-${J4(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=ye("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=ye("ArrowRightToLine",[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=ye("BookCheck",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=ye("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=ye("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=ye("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=ye("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=ye("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=ye("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=ye("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=ye("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=ye("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=ye("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ye("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=ye("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=ye("RectangleEllipsis",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=ye("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=ye("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=ye("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Cz(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Yf(...t){return e=>t.forEach(n=>Cz(n,e))}function De(...t){return p.useCallback(Yf(...t),t)}var zo=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),s=o.find(kz);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return f.jsx(kg,{...r,ref:e,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return f.jsx(kg,{...r,ref:e,children:n})});zo.displayName="Slot";var kg=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const o=Tz(n);return p.cloneElement(n,{...Ez(r,n.props),ref:e?Yf(e,o):o})}return p.Children.count(n)>1?p.Children.only(null):null});kg.displayName="SlotClone";var _T=({children:t})=>f.jsx(f.Fragment,{children:t});function kz(t){return p.isValidElement(t)&&t.type===_T}function Ez(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function Tz(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function PT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=PT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Nz(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=PT(t))&&(r&&(r+=" "),r+=e);return r}const Ab=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Ob=Nz,RT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Ob(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=e,i=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const h=Ab(u)||Ab(d);return o[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...a}[v]):{...s,...a}[v]===x})?[...c,d,h]:c},[]);return Ob(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},Mz=RT("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),pe=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},s)=>{const i=r?zo:"button";return f.jsx(i,{className:oe(Mz({variant:e,size:n,className:t})),ref:s,...o})});pe.displayName="Button";const fr=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:oe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));fr.displayName="Card";const El=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:oe("flex flex-col space-y-1.5 p-6",t),...e}));El.displayName="CardHeader";const Tl=p.forwardRef(({className:t,...e},n)=>f.jsx("h3",{ref:n,className:oe("font-semibold leading-none tracking-tight",t),...e}));Tl.displayName="CardTitle";const AT=p.forwardRef(({className:t,...e},n)=>f.jsx("p",{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));AT.displayName="CardDescription";const hr=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:oe("p-6 pt-0",t),...e}));hr.displayName="CardContent";const OT=p.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:oe("flex items-center p-6 pt-0",t),...e}));OT.displayName="CardFooter";function _z({onSubmit:t,onClose:e,onBackToMenu:n,title:r="AI Writing Assistant",placeholder:o="Ask AI to help with your selected text..."}){const[s,i]=p.useState(""),a=()=>{s.trim()&&(t(s.trim()),i(""))},l=c=>{c.key==="Enter"&&!c.shiftKey?(c.preventDefault(),a()):c.key==="Escape"&&e()};return f.jsx(fr,{className:"w-[300px] shadow-lg select-none",children:f.jsx(hr,{className:"p-3",children:f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-grab active:cursor-grabbing",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(MT,{className:"h-4 w-4"}),f.jsx("span",{className:"text-sm font-medium",children:r})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[n&&f.jsx(pe,{variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0",title:"Back to Context Menu",children:f.jsx(ET,{className:"h-4 w-4"})}),f.jsx(pe,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0",children:f.jsx(Ec,{className:"h-4 w-4"})})]})]}),f.jsx("div",{className:"relative",children:f.jsx("textarea",{value:s,onChange:c=>i(c.target.value),onKeyDown:l,placeholder:o,className:"w-full h-24 p-2 text-sm resize-none rounded-md border border-input bg-background focus:outline-none",autoFocus:!0})}),f.jsxs("div",{className:"flex items-center justify-between mt-2",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Press Enter to send"}),f.jsx(pe,{size:"sm",onClick:a,disabled:!s.trim(),className:"h-6 px-2 text-xs",children:"Send"})]})]})})})}function Pz({response:t,suggestedText:e,onClose:n,onInsert:r,onBackToMenu:o}){const[s,i]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState({x:0,y:0}),d=p.useRef({startX:0,startY:0,startMouseX:0,startMouseY:0}),h=()=>{navigator.clipboard.writeText(e)},m=x=>{x.target.closest("button")||(l(!0),d.current={startX:c.x,startY:c.y,startMouseX:x.clientX,startMouseY:x.clientY},x.preventDefault())},g=x=>{if(!a)return;const y=x.clientX-d.current.startMouseX,w=x.clientY-d.current.startMouseY;u({x:d.current.startX+y,y:d.current.startY+w})},v=()=>{l(!1)};return p.useEffect(()=>{if(a)return document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v)}},[a]),f.jsx(fr,{className:"w-[350px] shadow-lg select-none",style:{transform:`translate(${c.x}px, ${c.y}px)`,cursor:a?"grabbing":"default"},children:f.jsx(hr,{className:"p-3",children:f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-grab active:cursor-grabbing",onMouseDown:m,children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(MT,{className:"h-4 w-4"}),f.jsx("span",{className:"text-sm font-medium",children:"AI Response"})]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[o&&f.jsx(pe,{variant:"ghost",size:"sm",onClick:o,className:"h-6 w-6 p-0",title:"Back to Context Menu",children:f.jsx(ET,{className:"h-4 w-4"})}),f.jsx(pe,{variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0",children:f.jsx(Ec,{className:"h-4 w-4"})})]})]}),f.jsx("div",{className:"p-2 bg-muted rounded-md text-sm max-h-32 overflow-y-auto",children:t}),f.jsxs("div",{className:"p-2 border border-primary rounded-md text-sm relative",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[f.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Suggested Text:"}),f.jsx("div",{className:"max-h-24 overflow-y-auto pr-6",children:e}),s&&f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx(pe,{variant:"ghost",size:"sm",onClick:h,className:"h-6 w-6 p-0",children:f.jsx(Ry,{className:"h-3 w-3"})})})]}),f.jsxs("div",{className:"flex justify-between mt-2",children:[f.jsx(pe,{variant:"outline",size:"sm",onClick:n,className:"h-6 px-2 text-xs",children:"Dismiss"}),f.jsxs(pe,{size:"sm",onClick:()=>r(e),className:"h-6 px-2 text-xs bg-blue-500 text-white",children:[f.jsx(da,{className:"h-3 w-3 mr-1"}),"Insert"]})]})]})})})}const Tc="https://ripple-dfmp.onrender.com";async function Eg(t){try{console.log("Sending analysis request:",JSON.stringify(t,null,2));const e=await fetch(`${Tc}/api/analyze-context`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw console.error("Server response error:",n),new Error(n.error||"Failed to analyze text with context")}return await e.json()}catch(e){throw console.error("Error analyzing text with context:",e),e}}async function Rz(t){try{const e=await fetch(`${Tc}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const r=await e.json();throw new Error(r.error||"Failed to send chat message")}return await e.json()}catch(e){throw console.error("Error sending chat message:",e),e}}async function Az(t){try{const e=await fetch(`${Tc}/api/custom-prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to process custom prompt")}return await e.json()}catch(e){throw console.error("Error processing custom prompt:",e),e}}async function Oz(t){if(!t.sentence.trim()||!t.documentContext.trim())throw new Error("Empty sentence or document context");console.log("Sending explain connection request for sentence:",t.sentence.substring(0,50)+"...");try{const e=await fetch(`${Tc}/api/explain-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw console.error("Server response error:",await e.json()),new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error explaining connection:",e),e}}async function Ib(t){console.log(" Sending sentence flow analysis request for:",t.sentence.substring(0,50)+"...");try{const e=await fetch(`${Tc}/api/analyze-sentence-flow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw console.error("Server response error:",await e.json()),new Error(`HTTP error! status: ${e.status}`);const n=await e.json();return console.log(" Sentence flow analysis result:",n),n}catch(e){throw console.error(" Error analyzing sentence flow:",e),e}}function Pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function Iz(t,e){const n=p.createContext(e),r=s=>{const{children:i,...a}=s,l=p.useMemo(()=>a,Object.values(a));return f.jsx(n.Provider,{value:l,children:i})};r.displayName=t+"Provider";function o(s){const i=p.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,o]}function Ft(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];const c=d=>{var y;const{scope:h,children:m,...g}=d,v=((y=h==null?void 0:h[t])==null?void 0:y[l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})};c.displayName=s+"Provider";function u(d,h){var v;const m=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,jz(o,...e)]}function jz(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function jb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Oy(...t){return e=>{let n=!1;const r=t.map(o=>{const s=jb(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():jb(t[o],null)}}}}function an(...t){return p.useCallback(Oy(...t),t)}var nc=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),s=o.find(Lz);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return f.jsx(Tg,{...r,ref:e,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return f.jsx(Tg,{...r,ref:e,children:n})});nc.displayName="Slot";var Tg=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const o=Fz(n);return p.cloneElement(n,{...$z(r,n.props),ref:e?Oy(e,o):o})}return p.Children.count(n)>1?p.Children.only(null):null});Tg.displayName="SlotClone";var Dz=({children:t})=>f.jsx(f.Fragment,{children:t});function Lz(t){return p.isValidElement(t)&&t.type===Dz}function $z(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function Fz(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gt=zz.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?nc:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function IT(t,e){t&&Go.flushSync(()=>t.dispatchEvent(e))}function jT(t){const e=t+"CollectionProvider",[n,r]=Ft(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:g,children:v}=m,x=U.useRef(null),y=U.useRef(new Map).current;return f.jsx(o,{scope:g,itemMap:y,collectionRef:x,children:v})};i.displayName=e;const a=t+"CollectionSlot",l=U.forwardRef((m,g)=>{const{scope:v,children:x}=m,y=s(a,v),w=an(g,y.collectionRef);return f.jsx(nc,{ref:w,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=U.forwardRef((m,g)=>{const{scope:v,children:x,...y}=m,w=U.useRef(null),b=an(g,w),S=s(c,v);return U.useEffect(()=>(S.itemMap.set(w,{ref:w,...y}),()=>void S.itemMap.delete(w))),f.jsx(nc,{[u]:"",ref:b,children:x})});d.displayName=c;function h(m){const g=s(t+"CollectionConsumer",m);return U.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,C)=>y.indexOf(S.ref.current)-y.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},h,r]}var Bz=p.createContext(void 0);function Xs(t){const e=p.useContext(Bz);return t||e||"ltr"}function Fe(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Iy(t,e=globalThis==null?void 0:globalThis.document){const n=Fe(t);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Hz="DismissableLayer",Ng="dismissableLayer.update",Uz="dismissableLayer.pointerDownOutside",Vz="dismissableLayer.focusOutside",Db,DT=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),LT=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=p.useContext(DT),[u,d]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=an(e,k=>d(k)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,C=qz(k=>{const T=k.target,R=[...c.branches].some(O=>O.contains(T));!S||R||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),E=Gz(k=>{const T=k.target;[...c.branches].some(O=>O.contains(T))||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return Iy(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Db=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Lb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Db)}},[u,h,n,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Lb())},[u,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(Ng,k),()=>document.removeEventListener(Ng,k)},[]),f.jsx(Gt.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:Pe(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Pe(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Pe(t.onPointerDownCapture,C.onPointerDownCapture)})});LT.displayName=Hz;var Wz="DismissableLayerBranch",Kz=p.forwardRef((t,e)=>{const n=p.useContext(DT),r=p.useRef(null),o=an(e,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(Gt.div,{...t,ref:o})});Kz.displayName=Wz;function qz(t,e=globalThis==null?void 0:globalThis.document){const n=Fe(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){$T(Uz,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Gz(t,e=globalThis==null?void 0:globalThis.document){const n=Fe(t),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&$T(Vz,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Lb(){const t=new CustomEvent(Ng);document.dispatchEvent(t)}function $T(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?IT(o,s):o.dispatchEvent(s)}var Pp=0;function Nc(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??$b()),document.body.insertAdjacentElement("beforeend",t[1]??$b()),Pp++,()=>{Pp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Pp--}},[])}function $b(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Rp="focusScope.autoFocusOnMount",Ap="focusScope.autoFocusOnUnmount",Fb={bubbles:!1,cancelable:!0},Yz="FocusScope",FT=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=p.useState(null),c=Fe(o),u=Fe(s),d=p.useRef(null),h=an(e,v=>l(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:no(d.current,{select:!0})},x=function(b){if(m.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||no(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&no(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,m.paused]),p.useEffect(()=>{if(a){Bb.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(Rp,Fb);a.addEventListener(Rp,c),a.dispatchEvent(y),y.defaultPrevented||(Jz(tB(zT(a)),{select:!0}),document.activeElement===v&&no(a))}return()=>{a.removeEventListener(Rp,c),setTimeout(()=>{const y=new CustomEvent(Ap,Fb);a.addEventListener(Ap,u),a.dispatchEvent(y),y.defaultPrevented||no(v??document.body,{select:!0}),a.removeEventListener(Ap,u),Bb.remove(m)},0)}}},[a,c,u,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,S]=Xz(w);b&&S?!v.shiftKey&&y===S?(v.preventDefault(),n&&no(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&no(S,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return f.jsx(Gt.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});FT.displayName=Yz;function Jz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(no(r,{select:e}),document.activeElement!==n)return}function Xz(t){const e=zT(t),n=zb(e,t),r=zb(e.reverse(),t);return[n,r]}function zT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zb(t,e){for(const n of t)if(!Qz(n,{upTo:e}))return n}function Qz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Zz(t){return t instanceof HTMLInputElement&&"select"in t}function no(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Zz(t)&&e&&t.select()}}var Bb=eB();function eB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Hb(t,e),t.unshift(e)},remove(e){var n;t=Hb(t,e),(n=t[0])==null||n.resume()}}}function Hb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function tB(t){return t.filter(e=>e.tagName!=="A")}var ze=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},nB=eI.useId||(()=>{}),rB=0;function dt(t){const[e,n]=p.useState(nB());return ze(()=>{t||n(r=>r??String(rB++))},[t]),t||(e?`radix-${e}`:"")}const oB=["top","right","bottom","left"],Bo=Math.min,fn=Math.max,ef=Math.round,Eu=Math.floor,Ho=t=>({x:t,y:t}),sB={left:"right",right:"left",bottom:"top",top:"bottom"},iB={start:"end",end:"start"};function Mg(t,e,n){return fn(t,Bo(e,n))}function Hr(t,e){return typeof t=="function"?t(e):t}function Ur(t){return t.split("-")[0]}function Ea(t){return t.split("-")[1]}function jy(t){return t==="x"?"y":"x"}function Dy(t){return t==="y"?"height":"width"}function Uo(t){return["top","bottom"].includes(Ur(t))?"y":"x"}function Ly(t){return jy(Uo(t))}function aB(t,e,n){n===void 0&&(n=!1);const r=Ea(t),o=Ly(t),s=Dy(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(i=tf(i)),[i,tf(i)]}function lB(t){const e=tf(t);return[_g(t),e,_g(e)]}function _g(t){return t.replace(/start|end/g,e=>iB[e])}function cB(t,e,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?s:i;default:return[]}}function uB(t,e,n,r){const o=Ea(t);let s=cB(Ur(t),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),e&&(s=s.concat(s.map(_g)))),s}function tf(t){return t.replace(/left|right|bottom|top/g,e=>sB[e])}function dB(t){return{top:0,right:0,bottom:0,left:0,...t}}function BT(t){return typeof t!="number"?dB(t):{top:t,right:t,bottom:t,left:t}}function nf(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function Ub(t,e,n){let{reference:r,floating:o}=t;const s=Uo(e),i=Ly(e),a=Dy(i),l=Ur(e),c=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-o.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-o.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Ea(e)){case"start":m[i]-=h*(n&&c?-1:1);break;case"end":m[i]+=h*(n&&c?-1:1);break}return m}const fB=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:d}=Ub(c,r,l),h=r,m={},g=0;for(let v=0;v<a.length;v++){const{name:x,fn:y}=a[v],{x:w,y:b,data:S,reset:C}=await y({x:u,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:m,rects:c,platform:i,elements:{reference:t,floating:e}});u=w??u,d=b??d,m={...m,[x]:{...m[x],...S}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(c=C.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):C.rects),{x:u,y:d}=Ub(c,h,l)),v=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:m}};async function rc(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Hr(e,t),g=BT(m),x=a[h?d==="floating"?"reference":"floating":d],y=nf(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},C=nf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(y.top-C.top+g.top)/S.y,bottom:(C.bottom-y.bottom+g.bottom)/S.y,left:(y.left-C.left+g.left)/S.x,right:(C.right-y.right+g.right)/S.x}}const hB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Hr(t,e)||{};if(c==null)return{};const d=BT(u),h={x:n,y:r},m=Ly(o),g=Dy(m),v=await i.getDimensions(c),x=m==="y",y=x?"top":"left",w=x?"bottom":"right",b=x?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[m]-h[m]-s.floating[g],C=h[m]-s.reference[m],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let k=E?E[b]:0;(!k||!await(i.isElement==null?void 0:i.isElement(E)))&&(k=a.floating[b]||s.floating[g]);const T=S/2-C/2,R=k/2-v[g]/2-1,O=Bo(d[y],R),K=Bo(d[w],R),z=O,Z=k-v[g]-K,Q=k/2-v[g]/2+T,q=Mg(z,Q,Z),j=!l.arrow&&Ea(o)!=null&&Q!==q&&s.reference[g]/2-(Q<z?O:K)-v[g]/2<0,X=j?Q<z?Q-z:Q-Z:0;return{[m]:h[m]+X,data:{[m]:q,centerOffset:Q-q-X,...j&&{alignmentOffset:X}},reset:j}}}),pB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=Hr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Ur(o),w=Uo(a),b=Ur(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=h||(b||!v?[tf(a)]:lB(a)),E=g!=="none";!h&&E&&C.push(...uB(a,v,g,S));const k=[a,...C],T=await rc(e,x),R=[];let O=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&R.push(T[y]),d){const Q=aB(o,i,S);R.push(T[Q[0]],T[Q[1]])}if(O=[...O,{placement:o,overflows:R}],!R.every(Q=>Q<=0)){var K,z;const Q=(((K=s.flip)==null?void 0:K.index)||0)+1,q=k[Q];if(q)return{data:{index:Q,overflows:O},reset:{placement:q}};let j=(z=O.filter(X=>X.overflows[0]<=0).sort((X,P)=>X.overflows[1]-P.overflows[1])[0])==null?void 0:z.placement;if(!j)switch(m){case"bestFit":{var Z;const X=(Z=O.filter(P=>{if(E){const N=Uo(P.placement);return N===w||N==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(N=>N>0).reduce((N,L)=>N+L,0)]).sort((P,N)=>P[1]-N[1])[0])==null?void 0:Z[0];X&&(j=X);break}case"initialPlacement":j=a;break}if(o!==j)return{reset:{placement:j}}}return{}}}};function Vb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Wb(t){return oB.some(e=>t[e]>=0)}const mB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Hr(t,e);switch(r){case"referenceHidden":{const s=await rc(e,{...o,elementContext:"reference"}),i=Vb(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Wb(i)}}}case"escaped":{const s=await rc(e,{...o,altBoundary:!0}),i=Vb(s,n.floating);return{data:{escapedOffsets:i,escaped:Wb(i)}}}default:return{}}}}};async function gB(t,e){const{placement:n,platform:r,elements:o}=t,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Ur(n),a=Ea(n),l=Uo(n)==="y",c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,d=Hr(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*u,y:h*c}:{x:h*c,y:m*u}}const vB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=e,l=await gB(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},yB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:x=>{let{x:y,y:w}=x;return{x:y,y:w}}},...l}=Hr(t,e),c={x:n,y:r},u=await rc(e,l),d=Uo(Ur(o)),h=jy(d);let m=c[h],g=c[d];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=m+u[x],b=m-u[y];m=Mg(w,m,b)}if(i){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=g+u[x],b=g-u[y];g=Mg(w,g,b)}const v=a.fn({...e,[h]:m,[d]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[d]:i}}}}}},xB=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Hr(t,e),u={x:n,y:r},d=Uo(o),h=jy(d);let m=u[h],g=u[d];const v=Hr(a,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=h==="y"?"height":"width",S=s.reference[h]-s.floating[b]+x.mainAxis,C=s.reference[h]+s.reference[b]-x.mainAxis;m<S?m=S:m>C&&(m=C)}if(c){var y,w;const b=h==="y"?"width":"height",S=["top","left"].includes(Ur(o)),C=s.reference[d]-s.floating[b]+(S&&((y=i.offset)==null?void 0:y[d])||0)+(S?0:x.crossAxis),E=s.reference[d]+s.reference[b]+(S?0:((w=i.offset)==null?void 0:w[d])||0)-(S?x.crossAxis:0);g<C?g=C:g>E&&(g=E)}return{[h]:m,[d]:g}}}},wB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:s,platform:i,elements:a}=e,{apply:l=()=>{},...c}=Hr(t,e),u=await rc(e,c),d=Ur(o),h=Ea(o),m=Uo(o)==="y",{width:g,height:v}=s.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const w=v-u.top-u.bottom,b=g-u.left-u.right,S=Bo(v-u[x],w),C=Bo(g-u[y],b),E=!e.middlewareData.shift;let k=S,T=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=w),E&&!h){const O=fn(u.left,0),K=fn(u.right,0),z=fn(u.top,0),Z=fn(u.bottom,0);m?T=g-2*(O!==0||K!==0?O+K:fn(u.left,u.right)):k=v-2*(z!==0||Z!==0?z+Z:fn(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:k});const R=await i.getDimensions(a.floating);return g!==R.width||v!==R.height?{reset:{rects:!0}}:{}}}};function Jf(){return typeof window<"u"}function Ta(t){return HT(t)?(t.nodeName||"").toLowerCase():"#document"}function gn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vr(t){var e;return(e=(HT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function HT(t){return Jf()?t instanceof Node||t instanceof gn(t).Node:!1}function Gn(t){return Jf()?t instanceof Element||t instanceof gn(t).Element:!1}function gr(t){return Jf()?t instanceof HTMLElement||t instanceof gn(t).HTMLElement:!1}function Kb(t){return!Jf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gn(t).ShadowRoot}function Mc(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Yn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function bB(t){return["table","td","th"].includes(Ta(t))}function Xf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function $y(t){const e=Fy(),n=Gn(t)?Yn(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function SB(t){let e=Vo(t);for(;gr(e)&&!ha(e);){if($y(e))return e;if(Xf(e))return null;e=Vo(e)}return null}function Fy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ha(t){return["html","body","#document"].includes(Ta(t))}function Yn(t){return gn(t).getComputedStyle(t)}function Qf(t){return Gn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vo(t){if(Ta(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Kb(t)&&t.host||vr(t);return Kb(e)?e.host:e}function UT(t){const e=Vo(t);return ha(e)?t.ownerDocument?t.ownerDocument.body:t.body:gr(e)&&Mc(e)?e:UT(e)}function oc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=UT(t),s=o===((r=t.ownerDocument)==null?void 0:r.body),i=gn(o);if(s){const a=Pg(i);return e.concat(i,i.visualViewport||[],Mc(o)?o:[],a&&n?oc(a):[])}return e.concat(o,oc(o,[],n))}function Pg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VT(t){const e=Yn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=gr(t),s=o?t.offsetWidth:n,i=o?t.offsetHeight:r,a=ef(n)!==s||ef(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function zy(t){return Gn(t)?t:t.contextElement}function Yi(t){const e=zy(t);if(!gr(e))return Ho(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:s}=VT(e);let i=(s?ef(n.width):n.width)/r,a=(s?ef(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const CB=Ho(0);function WT(t){const e=gn(t);return!Fy()||!e.visualViewport?CB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==gn(t)?!1:e}function Hs(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),s=zy(t);let i=Ho(1);e&&(r?Gn(r)&&(i=Yi(r)):i=Yi(t));const a=kB(s,n,r)?WT(s):Ho(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const h=gn(s),m=r&&Gn(r)?gn(r):r;let g=h,v=Pg(g);for(;v&&r&&m!==g;){const x=Yi(v),y=v.getBoundingClientRect(),w=Yn(v),b=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*x.x,S=y.top+(v.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=b,c+=S,g=gn(v),v=Pg(g)}}return nf({width:u,height:d,x:l,y:c})}function EB(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const s=o==="fixed",i=vr(r),a=e?Xf(e.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ho(1);const u=Ho(0),d=gr(r);if((d||!d&&!s)&&((Ta(r)!=="body"||Mc(i))&&(l=Qf(r)),gr(r))){const h=Hs(r);c=Yi(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function TB(t){return Array.from(t.getClientRects())}function Rg(t,e){const n=Qf(t).scrollLeft;return e?e.left+n:Hs(vr(t)).left+n}function NB(t){const e=vr(t),n=Qf(t),r=t.ownerDocument.body,o=fn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=fn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Rg(t);const a=-n.scrollTop;return Yn(r).direction==="rtl"&&(i+=fn(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function MB(t,e){const n=gn(t),r=vr(t),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=Fy();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function _B(t,e){const n=Hs(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,s=gr(t)?Yi(t):Ho(1),i=t.clientWidth*s.x,a=t.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function qb(t,e,n){let r;if(e==="viewport")r=MB(t,n);else if(e==="document")r=NB(vr(t));else if(Gn(e))r=_B(e,n);else{const o=WT(t);r={...e,x:e.x-o.x,y:e.y-o.y}}return nf(r)}function KT(t,e){const n=Vo(t);return n===e||!Gn(n)||ha(n)?!1:Yn(n).position==="fixed"||KT(n,e)}function PB(t,e){const n=e.get(t);if(n)return n;let r=oc(t,[],!1).filter(a=>Gn(a)&&Ta(a)!=="body"),o=null;const s=Yn(t).position==="fixed";let i=s?Vo(t):t;for(;Gn(i)&&!ha(i);){const a=Yn(i),l=$y(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Mc(i)&&!l&&KT(t,i))?r=r.filter(u=>u!==i):o=a,i=Vo(i)}return e.set(t,r),r}function RB(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?Xf(e)?[]:PB(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const d=qb(e,u,o);return c.top=fn(d.top,c.top),c.right=Bo(d.right,c.right),c.bottom=Bo(d.bottom,c.bottom),c.left=fn(d.left,c.left),c},qb(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function AB(t){const{width:e,height:n}=VT(t);return{width:e,height:n}}function OB(t,e,n){const r=gr(e),o=vr(e),s=n==="fixed",i=Hs(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ho(0);if(r||!r&&!s)if((Ta(e)!=="body"||Mc(o))&&(a=Qf(e)),r){const m=Hs(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else o&&(l.x=Rg(o));let c=0,u=0;if(o&&!r&&!s){const m=o.getBoundingClientRect();u=m.top+a.scrollTop,c=m.left+a.scrollLeft-Rg(o,m)}const d=i.left+a.scrollLeft-l.x-c,h=i.top+a.scrollTop-l.y-u;return{x:d,y:h,width:i.width,height:i.height}}function Op(t){return Yn(t).position==="static"}function Gb(t,e){if(!gr(t)||Yn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return vr(t)===n&&(n=n.ownerDocument.body),n}function qT(t,e){const n=gn(t);if(Xf(t))return n;if(!gr(t)){let o=Vo(t);for(;o&&!ha(o);){if(Gn(o)&&!Op(o))return o;o=Vo(o)}return n}let r=Gb(t,e);for(;r&&bB(r)&&Op(r);)r=Gb(r,e);return r&&ha(r)&&Op(r)&&!$y(r)?n:r||SB(t)||n}const IB=async function(t){const e=this.getOffsetParent||qT,n=this.getDimensions,r=await n(t.floating);return{reference:OB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jB(t){return Yn(t).direction==="rtl"}const DB={convertOffsetParentRelativeRectToViewportRelativeRect:EB,getDocumentElement:vr,getClippingRect:RB,getOffsetParent:qT,getElementRects:IB,getClientRects:TB,getDimensions:AB,getScale:Yi,isElement:Gn,isRTL:jB};function LB(t,e){let n=null,r;const o=vr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const m=Eu(u),g=Eu(o.clientWidth-(c+d)),v=Eu(o.clientHeight-(u+h)),x=Eu(c),w={rootMargin:-m+"px "+-g+"px "+-v+"px "+-x+"px",threshold:fn(0,Bo(1,l))||1};let b=!0;function S(C){const E=C[0].intersectionRatio;if(E!==l){if(!b)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(S,{...w,root:o.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(t)}return i(!0),s}function GT(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=zy(t),u=o||s?[...c?oc(c):[],...oc(e)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?LB(c,n):null;let h=-1,m=null;i&&(m=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,v=l?Hs(t):null;l&&x();function x(){const y=Hs(t);v&&(y.x!==v.x||y.y!==v.y||y.width!==v.width||y.height!==v.height)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;u.forEach(w=>{o&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const $B=vB,FB=yB,zB=pB,BB=wB,HB=mB,Yb=hB,UB=xB,VB=(t,e,n)=>{const r=new Map,o={platform:DB,...n},s={...o.platform,_c:r};return fB(t,e,{...o,platform:s})};var cd=typeof document<"u"?p.useLayoutEffect:p.useEffect;function rf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!rf(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!rf(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function YT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Jb(t,e){const n=YT(t);return Math.round(e*n)/n}function Ip(t){const e=p.useRef(t);return cd(()=>{e.current=t}),e}function JT(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(r);rf(h,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),w=p.useCallback(P=>{P!==E.current&&(E.current=P,v(P))},[]),b=p.useCallback(P=>{P!==k.current&&(k.current=P,y(P))},[]),S=s||g,C=i||x,E=p.useRef(null),k=p.useRef(null),T=p.useRef(u),R=l!=null,O=Ip(l),K=Ip(o),z=Ip(c),Z=p.useCallback(()=>{if(!E.current||!k.current)return;const P={placement:e,strategy:n,middleware:h};K.current&&(P.platform=K.current),VB(E.current,k.current,P).then(N=>{const L={...N,isPositioned:z.current!==!1};Q.current&&!rf(T.current,L)&&(T.current=L,Go.flushSync(()=>{d(L)}))})},[h,e,n,K,z]);cd(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(P=>({...P,isPositioned:!1})))},[c]);const Q=p.useRef(!1);cd(()=>(Q.current=!0,()=>{Q.current=!1}),[]),cd(()=>{if(S&&(E.current=S),C&&(k.current=C),S&&C){if(O.current)return O.current(S,C,Z);Z()}},[S,C,Z,O,R]);const q=p.useMemo(()=>({reference:E,floating:k,setReference:w,setFloating:b}),[w,b]),j=p.useMemo(()=>({reference:S,floating:C}),[S,C]),X=p.useMemo(()=>{const P={position:n,left:0,top:0};if(!j.floating)return P;const N=Jb(j.floating,u.x),L=Jb(j.floating,u.y);return a?{...P,transform:"translate("+N+"px, "+L+"px)",...YT(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:N,top:L}},[n,a,j.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:Z,refs:q,elements:j,floatingStyles:X}),[u,Z,q,j,X])}const WB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Yb({element:r.current,padding:o}).fn(n):{}:r?Yb({element:r,padding:o}).fn(n):{}}}},XT=(t,e)=>({...$B(t),options:[t,e]}),QT=(t,e)=>({...FB(t),options:[t,e]}),ZT=(t,e)=>({...UB(t),options:[t,e]}),eN=(t,e)=>({...zB(t),options:[t,e]}),tN=(t,e)=>({...BB(t),options:[t,e]}),nN=(t,e)=>({...HB(t),options:[t,e]}),rN=(t,e)=>({...WB(t),options:[t,e]});var KB="Arrow",oN=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return f.jsx(Gt.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});oN.displayName=KB;var qB=oN;function sN(t){const[e,n]=p.useState(void 0);return ze(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var By="Popper",[iN,aN]=Ft(By),[GB,lN]=iN(By),cN=t=>{const{__scopePopper:e,children:n}=t,[r,o]=p.useState(null);return f.jsx(GB,{scope:e,anchor:r,onAnchorChange:o,children:n})};cN.displayName=By;var uN="PopperAnchor",dN=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=lN(uN,n),i=p.useRef(null),a=an(e,i);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:f.jsx(Gt.div,{...o,ref:a})});dN.displayName=uN;var Hy="PopperContent",[YB,JB]=iN(Hy),fN=p.forwardRef((t,e)=>{var _,ee,te,ie,ge,he;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,x=lN(Hy,n),[y,w]=p.useState(null),b=an(e,Ne=>w(Ne)),[S,C]=p.useState(null),E=sN(S),k=(E==null?void 0:E.width)??0,T=(E==null?void 0:E.height)??0,R=r+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},K=Array.isArray(c)?c:[c],z=K.length>0,Z={padding:O,boundary:K.filter(QB),altBoundary:z},{refs:Q,floatingStyles:q,placement:j,isPositioned:X,middlewareData:P}=JT({strategy:"fixed",placement:R,whileElementsMounted:(...Ne)=>GT(...Ne,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[XT({mainAxis:o+T,alignmentAxis:i}),l&&QT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?ZT():void 0,...Z}),l&&eN({...Z}),tN({...Z,apply:({elements:Ne,rects:Oe,availableWidth:Be,availableHeight:I})=>{const{width:Le,height:nr}=Oe.reference,Y=Ne.floating.style;Y.setProperty("--radix-popper-available-width",`${Be}px`),Y.setProperty("--radix-popper-available-height",`${I}px`),Y.setProperty("--radix-popper-anchor-width",`${Le}px`),Y.setProperty("--radix-popper-anchor-height",`${nr}px`)}}),S&&rN({element:S,padding:a}),ZB({arrowWidth:k,arrowHeight:T}),h&&nN({strategy:"referenceHidden",...Z})]}),[N,L]=mN(j),A=Fe(g);ze(()=>{X&&(A==null||A())},[X,A]);const M=(_=P.arrow)==null?void 0:_.x,$=(ee=P.arrow)==null?void 0:ee.y,F=((te=P.arrow)==null?void 0:te.centerOffset)!==0,[H,V]=p.useState();return ze(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),f.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:X?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(ie=P.transformOrigin)==null?void 0:ie.x,(ge=P.transformOrigin)==null?void 0:ge.y].join(" "),...((he=P.hide)==null?void 0:he.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(YB,{scope:n,placedSide:N,onArrowChange:C,arrowX:M,arrowY:$,shouldHideArrow:F,children:f.jsx(Gt.div,{"data-side":N,"data-align":L,...v,ref:b,style:{...v.style,animation:X?void 0:"none"}})})})});fN.displayName=Hy;var hN="PopperArrow",XB={top:"bottom",right:"left",bottom:"top",left:"right"},pN=p.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=JB(hN,r),i=XB[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(qB,{...o,ref:n,style:{...o.style,display:"block"}})})});pN.displayName=hN;function QB(t){return t!==null}var ZB=t=>({name:"transformOrigin",options:t,fn(e){var x,y,w;const{placement:n,rects:r,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,u]=mN(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=o.arrow)==null?void 0:y.x)??0)+a/2,m=(((w=o.arrow)==null?void 0:w.y)??0)+l/2;let g="",v="";return c==="bottom"?(g=i?d:`${h}px`,v=`${-l}px`):c==="top"?(g=i?d:`${h}px`,v=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,v=i?d:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,v=i?d:`${m}px`),{data:{x:g,y:v}}}});function mN(t){const[e,n="center"]=t.split("-");return[e,n]}var eH=cN,tH=dN,nH=fN,rH=pN,oH="Portal",gN=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=p.useState(!1);ze(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?bc.createPortal(f.jsx(Gt.div,{...r,ref:e}),i):null});gN.displayName=oH;function sH(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var _c=t=>{const{present:e,children:n}=t,r=iH(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=an(r.ref,aH(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};_c.displayName="Presence";function iH(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),s=p.useRef("none"),i=t?"mounted":"unmounted",[a,l]=sH(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Tu(r.current);s.current=a==="mounted"?c:"none"},[a]),ze(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,m=Tu(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),ze(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const v=Tu(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=m=>{m.target===e&&(s.current=Tu(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Tu(t){return(t==null?void 0:t.animationName)||"none"}function aH(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Jn({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=lH({defaultProp:e,onChange:n}),s=t!==void 0,i=s?t:r,a=Fe(n),l=p.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else o(c)},[s,t,o,a]);return[i,l]}function lH({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,o=p.useRef(r),s=Fe(e);return p.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var jp="rovingFocusGroup.onEntryFocus",cH={bubbles:!1,cancelable:!0},Zf="RovingFocusGroup",[Ag,vN,uH]=jT(Zf),[dH,yN]=Ft(Zf,[uH]),[fH,hH]=dH(Zf),xN=p.forwardRef((t,e)=>f.jsx(Ag.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Ag.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(pH,{...t,ref:e})})}));xN.displayName=Zf;var pH=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=p.useRef(null),m=an(e,h),g=Xs(s),[v=null,x]=Jn({prop:i,defaultProp:a,onChange:l}),[y,w]=p.useState(!1),b=Fe(c),S=vN(n),C=p.useRef(!1),[E,k]=p.useState(0);return p.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(jp,b),()=>T.removeEventListener(jp,b)},[b]),f.jsx(fH,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:v,onItemFocus:p.useCallback(T=>x(T),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>k(T=>T-1),[]),children:f.jsx(Gt.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:Pe(t.onMouseDown,()=>{C.current=!0}),onFocus:Pe(t.onFocus,T=>{const R=!C.current;if(T.target===T.currentTarget&&R&&!y){const O=new CustomEvent(jp,cH);if(T.currentTarget.dispatchEvent(O),!O.defaultPrevented){const K=S().filter(j=>j.focusable),z=K.find(j=>j.active),Z=K.find(j=>j.id===v),q=[z,Z,...K].filter(Boolean).map(j=>j.ref.current);SN(q,u)}}C.current=!1}),onBlur:Pe(t.onBlur,()=>w(!1))})})}),wN="RovingFocusGroupItem",bN=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=dt(),l=s||a,c=hH(wN,n),u=c.currentTabStopId===l,d=vN(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=c;return p.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),f.jsx(Ag.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:f.jsx(Gt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:Pe(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:Pe(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Pe(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=vH(g,c.orientation,c.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const w=y.indexOf(g.currentTarget);y=c.loop?yH(y,w+1):y.slice(w+1)}setTimeout(()=>SN(y))}})})})});bN.displayName=wN;var mH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gH(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function vH(t,e,n){const r=gH(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return mH[r]}function SN(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function yH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var xH=xN,wH=bN,bH=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},li=new WeakMap,Nu=new WeakMap,Mu={},Dp=0,CN=function(t){return t&&(t.host||CN(t.parentNode))},SH=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=CN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},CH=function(t,e,n,r){var o=SH(e,Array.isArray(t)?t:[t]);Mu[n]||(Mu[n]=new WeakMap);var s=Mu[n],i=[],a=new Set,l=new Set(o),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(li.get(h)||0)+1,x=(s.get(h)||0)+1;li.set(h,v),s.set(h,x),i.push(h),v===1&&g&&Nu.set(h,!0),x===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),Dp++,function(){i.forEach(function(d){var h=li.get(d)-1,m=s.get(d)-1;li.set(d,h),s.set(d,m),h||(Nu.has(d)||d.removeAttribute(r),Nu.delete(d)),m||d.removeAttribute(n)}),Dp--,Dp||(li=new WeakMap,li=new WeakMap,Nu=new WeakMap,Mu={})}},Pc=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=bH(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),CH(r,o,n,"aria-hidden")):function(){return null}},it=function(){return it=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},it.apply(this,arguments)};function eh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Uy(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Ji="right-scroll-bar-position",Xi="width-before-scroll-bar",kH="with-scroll-bars-hidden",EH="--removed-body-scroll-bar-size";function Lp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function TH(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var NH=typeof window<"u"?p.useLayoutEffect:p.useEffect,Xb=new WeakMap;function Vy(t,e){var n=TH(null,function(r){return t.forEach(function(o){return Lp(o,r)})});return NH(function(){var r=Xb.get(n);if(r){var o=new Set(r),s=new Set(t),i=n.current;o.forEach(function(a){s.has(a)||Lp(a,null)}),s.forEach(function(a){o.has(a)||Lp(a,i)})}Xb.set(n,t)},[t]),n}function MH(t){return t}function _H(t,e){e===void 0&&(e=MH);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var i=e(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var u=i;i=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return o}function Wy(t){t===void 0&&(t={});var e=_H(null);return e.options=it({async:!0,ssr:!1},t),e}var kN=function(t){var e=t.sideCar,n=eh(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,it({},n))};kN.isSideCarExport=!0;function Ky(t,e){return t.useMedium(e),kN}var EN=Wy(),$p=function(){},th=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:$p,onWheelCapture:$p,onTouchMoveCapture:$p}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,b=eh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,C=Vy([n,e]),E=it(it({},b),o);return p.createElement(p.Fragment,null,u&&p.createElement(S,{sideCar:EN,removeScrollBar:c,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?p.cloneElement(p.Children.only(a),it(it({},E),{ref:C})):p.createElement(y,it({},E,{className:l,ref:C}),a))});th.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};th.classNames={fullWidth:Xi,zeroRight:Ji};var PH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=PH();return e&&t.setAttribute("nonce",e),t}function AH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function OH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var IH=function(){var t=0,e=null;return{add:function(n){t==0&&(e=RH())&&(AH(e,n),OH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},jH=function(){var t=IH();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},nh=function(){var t=jH(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},DH={left:0,top:0,right:0,gap:0},Fp=function(t){return parseInt(t||"",10)||0},LH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[Fp(n),Fp(r),Fp(o)]},$H=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return DH;var e=LH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},FH=nh(),Qi="data-scroll-locked",zH=function(t,e,n,r){var o=t.left,s=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(kH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Qi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ji,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xi,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ji," .").concat(Ji,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xi," .").concat(Xi,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Qi,`] {
    `).concat(EH,": ").concat(a,`px;
  }
`)},Qb=function(){var t=parseInt(document.body.getAttribute(Qi)||"0",10);return isFinite(t)?t:0},BH=function(){p.useEffect(function(){return document.body.setAttribute(Qi,(Qb()+1).toString()),function(){var t=Qb()-1;t<=0?document.body.removeAttribute(Qi):document.body.setAttribute(Qi,t.toString())}},[])},qy=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;BH();var s=p.useMemo(function(){return $H(o)},[o]);return p.createElement(FH,{styles:zH(s,!e,o,n?"":"!important")})},Og=!1;if(typeof window<"u")try{var _u=Object.defineProperty({},"passive",{get:function(){return Og=!0,!0}});window.addEventListener("test",_u,_u),window.removeEventListener("test",_u,_u)}catch{Og=!1}var ci=Og?{passive:!1}:!1,HH=function(t){return t.tagName==="TEXTAREA"},TN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!HH(t)&&n[e]==="visible")},UH=function(t){return TN(t,"overflowY")},VH=function(t){return TN(t,"overflowX")},Zb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=NN(t,r);if(o){var s=MN(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},WH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},KH=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},NN=function(t,e){return t==="v"?UH(e):VH(e)},MN=function(t,e){return t==="v"?WH(e):KH(e)},qH=function(t,e){return t==="h"&&e==="rtl"?-1:1},GH=function(t,e,n,r,o){var s=qH(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,h=0;do{var m=MN(t,a),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&NN(t,a)&&(d+=y,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(h)<1||!o))&&(c=!0),c},Pu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},e1=function(t){return[t.deltaX,t.deltaY]},t1=function(t){return t&&"current"in t?t.current:t},YH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},JH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},XH=0,ui=[];function QH(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(XH++)[0],s=p.useState(nh)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var v=Uy([t.lockRef.current],(t.shards||[]).map(t1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var y=Pu(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],S="deltaY"in v?v.deltaY:w[1]-y[1],C,E=v.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&E.type==="range")return!1;var T=Zb(k,E);if(!T)return!0;if(T?C=k:(C=k==="v"?"h":"v",T=Zb(k,E)),!T)return!1;if(!r.current&&"changedTouches"in v&&(b||S)&&(r.current=C),!C)return!0;var R=r.current||C;return GH(R,x,v,R==="h"?b:S,!0)},[]),l=p.useCallback(function(v){var x=v;if(!(!ui.length||ui[ui.length-1]!==s)){var y="deltaY"in x?e1(x):Pu(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&YH(C.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(t1).filter(Boolean).filter(function(C){return C.contains(x.target)}),S=b.length>0?a(x,b[0]):!i.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),c=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:ZH(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=p.useCallback(function(v){n.current=Pu(v),r.current=void 0},[]),d=p.useCallback(function(v){c(v.type,e1(v),v.target,a(v,t.lockRef.current))},[]),h=p.useCallback(function(v){c(v.type,Pu(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return ui.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,ci),document.addEventListener("touchmove",l,ci),document.addEventListener("touchstart",u,ci),function(){ui=ui.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,ci),document.removeEventListener("touchmove",l,ci),document.removeEventListener("touchstart",u,ci)}},[]);var m=t.removeScrollBar,g=t.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:JH(o)}):null,m?p.createElement(qy,{gapMode:t.gapMode}):null)}function ZH(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const e6=Ky(EN,QH);var _N=p.forwardRef(function(t,e){return p.createElement(th,it({},t,{ref:e,sideCar:e6}))});_N.classNames=th.classNames;var Ig=["Enter"," "],t6=["ArrowDown","PageUp","Home"],PN=["ArrowUp","PageDown","End"],n6=[...t6,...PN],r6={ltr:[...Ig,"ArrowRight"],rtl:[...Ig,"ArrowLeft"]},o6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rc="Menu",[sc,s6,i6]=jT(Rc),[Qs,RN]=Ft(Rc,[i6,aN,yN]),rh=aN(),AN=yN(),[a6,Zs]=Qs(Rc),[l6,Ac]=Qs(Rc),ON=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=t,a=rh(e),[l,c]=p.useState(null),u=p.useRef(!1),d=Fe(s),h=Xs(o);return p.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),f.jsx(eH,{...a,children:f.jsx(a6,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:f.jsx(l6,{scope:e,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};ON.displayName=Rc;var c6="MenuAnchor",Gy=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=rh(n);return f.jsx(tH,{...o,...r,ref:e})});Gy.displayName=c6;var Yy="MenuPortal",[u6,IN]=Qs(Yy,{forceMount:void 0}),jN=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,s=Zs(Yy,e);return f.jsx(u6,{scope:e,forceMount:n,children:f.jsx(_c,{present:n||s.open,children:f.jsx(gN,{asChild:!0,container:o,children:r})})})};jN.displayName=Yy;var _n="MenuContent",[d6,Jy]=Qs(_n),DN=p.forwardRef((t,e)=>{const n=IN(_n,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=Zs(_n,t.__scopeMenu),i=Ac(_n,t.__scopeMenu);return f.jsx(sc.Provider,{scope:t.__scopeMenu,children:f.jsx(_c,{present:r||s.open,children:f.jsx(sc.Slot,{scope:t.__scopeMenu,children:i.modal?f.jsx(f6,{...o,ref:e}):f.jsx(h6,{...o,ref:e})})})})}),f6=p.forwardRef((t,e)=>{const n=Zs(_n,t.__scopeMenu),r=p.useRef(null),o=an(e,r);return p.useEffect(()=>{const s=r.current;if(s)return Pc(s)},[]),f.jsx(Xy,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Pe(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),h6=p.forwardRef((t,e)=>{const n=Zs(_n,t.__scopeMenu);return f.jsx(Xy,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Xy=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=t,x=Zs(_n,n),y=Ac(_n,n),w=rh(n),b=AN(n),S=s6(n),[C,E]=p.useState(null),k=p.useRef(null),T=an(e,k,x.onContentChange),R=p.useRef(0),O=p.useRef(""),K=p.useRef(0),z=p.useRef(null),Z=p.useRef("right"),Q=p.useRef(0),q=g?_N:p.Fragment,j=g?{as:nc,allowPinchZoom:!0}:void 0,X=N=>{var _,ee;const L=O.current+N,A=S().filter(te=>!te.disabled),M=document.activeElement,$=(_=A.find(te=>te.ref.current===M))==null?void 0:_.textValue,F=A.map(te=>te.textValue),H=E6(F,L,$),V=(ee=A.find(te=>te.textValue===H))==null?void 0:ee.ref.current;(function te(ie){O.current=ie,window.clearTimeout(R.current),ie!==""&&(R.current=window.setTimeout(()=>te(""),1e3))})(L),V&&setTimeout(()=>V.focus())};p.useEffect(()=>()=>window.clearTimeout(R.current),[]),Nc();const P=p.useCallback(N=>{var A,M;return Z.current===((A=z.current)==null?void 0:A.side)&&N6(N,(M=z.current)==null?void 0:M.area)},[]);return f.jsx(d6,{scope:n,searchRef:O,onItemEnter:p.useCallback(N=>{P(N)&&N.preventDefault()},[P]),onItemLeave:p.useCallback(N=>{var L;P(N)||((L=k.current)==null||L.focus(),E(null))},[P]),onTriggerLeave:p.useCallback(N=>{P(N)&&N.preventDefault()},[P]),pointerGraceTimerRef:K,onPointerGraceIntentChange:p.useCallback(N=>{z.current=N},[]),children:f.jsx(q,{...j,children:f.jsx(FT,{asChild:!0,trapped:o,onMountAutoFocus:Pe(s,N=>{var L;N.preventDefault(),(L=k.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:f.jsx(LT,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:f.jsx(xH,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:Pe(l,N=>{y.isUsingKeyboardRef.current||N.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(nH,{role:"menu","aria-orientation":"vertical","data-state":QN(x.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:Pe(v.onKeyDown,N=>{const A=N.target.closest("[data-radix-menu-content]")===N.currentTarget,M=N.ctrlKey||N.altKey||N.metaKey,$=N.key.length===1;A&&(N.key==="Tab"&&N.preventDefault(),!M&&$&&X(N.key));const F=k.current;if(N.target!==F||!n6.includes(N.key))return;N.preventDefault();const V=S().filter(_=>!_.disabled).map(_=>_.ref.current);PN.includes(N.key)&&V.reverse(),C6(V)}),onBlur:Pe(t.onBlur,N=>{N.currentTarget.contains(N.target)||(window.clearTimeout(R.current),O.current="")}),onPointerMove:Pe(t.onPointerMove,ic(N=>{const L=N.target,A=Q.current!==N.clientX;if(N.currentTarget.contains(L)&&A){const M=N.clientX>Q.current?"right":"left";Z.current=M,Q.current=N.clientX}}))})})})})})})});DN.displayName=_n;var p6="MenuGroup",Qy=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Gt.div,{role:"group",...r,ref:e})});Qy.displayName=p6;var m6="MenuLabel",LN=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Gt.div,{...r,ref:e})});LN.displayName=m6;var of="MenuItem",n1="menu.itemSelect",oh=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,s=p.useRef(null),i=Ac(of,t.__scopeMenu),a=Jy(of,t.__scopeMenu),l=an(e,s),c=p.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(n1,{bubbles:!0,cancelable:!0});d.addEventListener(n1,m=>r==null?void 0:r(m),{once:!0}),IT(d,h),h.defaultPrevented?c.current=!1:i.onClose()}};return f.jsx($N,{...o,ref:l,disabled:n,onClick:Pe(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:Pe(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Pe(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||Ig.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});oh.displayName=of;var $N=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=t,i=Jy(of,n),a=AN(n),l=p.useRef(null),c=an(e,l),[u,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[s.children]),f.jsx(sc.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:f.jsx(wH,{asChild:!0,...a,focusable:!r,children:f.jsx(Gt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:Pe(t.onPointerMove,ic(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(t.onPointerLeave,ic(g=>i.onItemLeave(g))),onFocus:Pe(t.onFocus,()=>d(!0)),onBlur:Pe(t.onBlur,()=>d(!1))})})})}),g6="MenuCheckboxItem",FN=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return f.jsx(VN,{scope:t.__scopeMenu,checked:n,children:f.jsx(oh,{role:"menuitemcheckbox","aria-checked":sf(n)?"mixed":n,...o,ref:e,"data-state":e0(n),onSelect:Pe(o.onSelect,()=>r==null?void 0:r(sf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});FN.displayName=g6;var zN="MenuRadioGroup",[v6,y6]=Qs(zN,{value:void 0,onValueChange:()=>{}}),BN=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,s=Fe(r);return f.jsx(v6,{scope:t.__scopeMenu,value:n,onValueChange:s,children:f.jsx(Qy,{...o,ref:e})})});BN.displayName=zN;var HN="MenuRadioItem",UN=p.forwardRef((t,e)=>{const{value:n,...r}=t,o=y6(HN,t.__scopeMenu),s=n===o.value;return f.jsx(VN,{scope:t.__scopeMenu,checked:s,children:f.jsx(oh,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":e0(s),onSelect:Pe(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});UN.displayName=HN;var Zy="MenuItemIndicator",[VN,x6]=Qs(Zy,{checked:!1}),WN=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,s=x6(Zy,n);return f.jsx(_c,{present:r||sf(s.checked)||s.checked===!0,children:f.jsx(Gt.span,{...o,ref:e,"data-state":e0(s.checked)})})});WN.displayName=Zy;var w6="MenuSeparator",KN=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(Gt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});KN.displayName=w6;var b6="MenuArrow",qN=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=rh(n);return f.jsx(rH,{...o,...r,ref:e})});qN.displayName=b6;var S6="MenuSub",[vQ,GN]=Qs(S6),al="MenuSubTrigger",YN=p.forwardRef((t,e)=>{const n=Zs(al,t.__scopeMenu),r=Ac(al,t.__scopeMenu),o=GN(al,t.__scopeMenu),s=Jy(al,t.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(Gy,{asChild:!0,...c,children:f.jsx($N,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":QN(n.open),...t,ref:Oy(e,o.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Pe(t.onPointerMove,ic(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Pe(t.onPointerLeave,ic(d=>{var m,g;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,w=h[x?"left":"right"],b=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(t.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||r6[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});YN.displayName=al;var JN="MenuSubContent",XN=p.forwardRef((t,e)=>{const n=IN(_n,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=Zs(_n,t.__scopeMenu),i=Ac(_n,t.__scopeMenu),a=GN(JN,t.__scopeMenu),l=p.useRef(null),c=an(e,l);return f.jsx(sc.Provider,{scope:t.__scopeMenu,children:f.jsx(_c,{present:r||s.open,children:f.jsx(sc.Slot,{scope:t.__scopeMenu,children:f.jsx(Xy,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Pe(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Pe(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Pe(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=o6[i.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});XN.displayName=JN;function QN(t){return t?"open":"closed"}function sf(t){return t==="indeterminate"}function e0(t){return sf(t)?"indeterminate":t?"checked":"unchecked"}function C6(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function k6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function E6(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=k6(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function T6(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function N6(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return T6(n,e)}function ic(t){return e=>e.pointerType==="mouse"?t(e):void 0}var M6=ON,_6=Gy,P6=jN,R6=DN,A6=Qy,O6=LN,I6=oh,j6=FN,D6=BN,L6=UN,$6=WN,F6=KN,z6=qN,B6=YN,H6=XN,t0="ContextMenu",[U6,yQ]=Ft(t0,[RN]),Yt=RN(),[V6,ZN]=U6(t0),eM=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:o,modal:s=!0}=t,[i,a]=p.useState(!1),l=Yt(e),c=Fe(r),u=p.useCallback(d=>{a(d),c(d)},[c]);return f.jsx(V6,{scope:e,open:i,onOpenChange:u,modal:s,children:f.jsx(M6,{...l,dir:o,open:i,onOpenChange:u,modal:s,children:n})})};eM.displayName=t0;var tM="ContextMenuTrigger",nM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=t,s=ZN(tM,n),i=Yt(n),a=p.useRef({x:0,y:0}),l=p.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=p.useRef(0),u=p.useCallback(()=>window.clearTimeout(c.current),[]),d=h=>{a.current={x:h.clientX,y:h.clientY},s.onOpenChange(!0)};return p.useEffect(()=>u,[u]),p.useEffect(()=>void(r&&u()),[r,u]),f.jsxs(f.Fragment,{children:[f.jsx(_6,{...i,virtualRef:l}),f.jsx(Gt.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:Pe(t.onContextMenu,h=>{u(),d(h),h.preventDefault()}),onPointerDown:r?t.onPointerDown:Pe(t.onPointerDown,Ru(h=>{u(),c.current=window.setTimeout(()=>d(h),700)})),onPointerMove:r?t.onPointerMove:Pe(t.onPointerMove,Ru(u)),onPointerCancel:r?t.onPointerCancel:Pe(t.onPointerCancel,Ru(u)),onPointerUp:r?t.onPointerUp:Pe(t.onPointerUp,Ru(u))})]})});nM.displayName=tM;var W6="ContextMenuPortal",rM=t=>{const{__scopeContextMenu:e,...n}=t,r=Yt(e);return f.jsx(P6,{...r,...n})};rM.displayName=W6;var oM="ContextMenuContent",sM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=ZN(oM,n),s=Yt(n),i=p.useRef(!1);return f.jsx(R6,{...s,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=t.onCloseAutoFocus)==null||l.call(t,a),!a.defaultPrevented&&i.current&&a.preventDefault(),i.current=!1},onInteractOutside:a=>{var l;(l=t.onInteractOutside)==null||l.call(t,a),!a.defaultPrevented&&!o.modal&&(i.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sM.displayName=oM;var K6="ContextMenuGroup",q6=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(A6,{...o,...r,ref:e})});q6.displayName=K6;var G6="ContextMenuLabel",iM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(O6,{...o,...r,ref:e})});iM.displayName=G6;var Y6="ContextMenuItem",aM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(I6,{...o,...r,ref:e})});aM.displayName=Y6;var J6="ContextMenuCheckboxItem",lM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(j6,{...o,...r,ref:e})});lM.displayName=J6;var X6="ContextMenuRadioGroup",Q6=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(D6,{...o,...r,ref:e})});Q6.displayName=X6;var Z6="ContextMenuRadioItem",cM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(L6,{...o,...r,ref:e})});cM.displayName=Z6;var e8="ContextMenuItemIndicator",uM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx($6,{...o,...r,ref:e})});uM.displayName=e8;var t8="ContextMenuSeparator",dM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(F6,{...o,...r,ref:e})});dM.displayName=t8;var n8="ContextMenuArrow",r8=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(z6,{...o,...r,ref:e})});r8.displayName=n8;var o8="ContextMenuSubTrigger",fM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(B6,{...o,...r,ref:e})});fM.displayName=o8;var s8="ContextMenuSubContent",hM=p.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Yt(n);return f.jsx(H6,{...o,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hM.displayName=s8;function Ru(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var i8=eM,a8=nM,l8=rM,pM=sM,mM=iM,gM=aM,vM=lM,yM=cM,xM=uM,wM=dM,bM=fM,SM=hM;function Qo(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var c8=["color"],u8=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,c8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),d8=["color"],n0=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,d8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),f8=["color"],h8=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,f8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),p8=["color"],CM=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,p8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),m8=["color"],g8=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,m8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),v8=["color"],y8=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,v8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),x8=["color"],w8=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,x8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M3.29227 0.048984C3.47033 -0.032338 3.67946 -0.00228214 3.8274 0.125891L12.8587 7.95026C13.0134 8.08432 13.0708 8.29916 13.0035 8.49251C12.9362 8.68586 12.7578 8.81866 12.5533 8.82768L9.21887 8.97474L11.1504 13.2187C11.2648 13.47 11.1538 13.7664 10.9026 13.8808L8.75024 14.8613C8.499 14.9758 8.20255 14.8649 8.08802 14.6137L6.15339 10.3703L3.86279 12.7855C3.72196 12.934 3.50487 12.9817 3.31479 12.9059C3.1247 12.8301 3 12.6461 3 12.4414V0.503792C3 0.308048 3.11422 0.130306 3.29227 0.048984ZM4 1.59852V11.1877L5.93799 9.14425C6.05238 9.02363 6.21924 8.96776 6.38319 8.99516C6.54715 9.02256 6.68677 9.12965 6.75573 9.2809L8.79056 13.7441L10.0332 13.178L8.00195 8.71497C7.93313 8.56376 7.94391 8.38824 8.03072 8.24659C8.11753 8.10494 8.26903 8.01566 8.435 8.00834L11.2549 7.88397L4 1.59852Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),b8=["color"],kM=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Qo(t,b8);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),p.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const EM=i8,TM=a8,S8=p.forwardRef(({className:t,inset:e,children:n,...r},o)=>f.jsxs(bM,{ref:o,className:oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",t),...r,children:[n,f.jsx(CM,{className:"ml-auto h-4 w-4"})]}));S8.displayName=bM.displayName;const C8=p.forwardRef(({className:t,...e},n)=>f.jsx(SM,{ref:n,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));C8.displayName=SM.displayName;const r0=p.forwardRef(({className:t,...e},n)=>f.jsx(l8,{children:f.jsx(pM,{ref:n,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e})}));r0.displayName=pM.displayName;const Mr=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(gM,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Mr.displayName=gM.displayName;const k8=p.forwardRef(({className:t,children:e,checked:n,...r},o)=>f.jsxs(vM,{ref:o,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(xM,{children:f.jsx(n0,{className:"h-4 w-4"})})}),e]}));k8.displayName=vM.displayName;const E8=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(yM,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(xM,{children:f.jsx(kM,{className:"h-4 w-4 fill-current"})})}),e]}));E8.displayName=yM.displayName;const T8=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(mM,{ref:r,className:oe("px-2 py-1.5 text-sm font-semibold text-foreground",e&&"pl-8",t),...n}));T8.displayName=mM.displayName;const ud=p.forwardRef(({className:t,...e},n)=>f.jsx(wM,{ref:n,className:oe("-mx-1 my-1 h-px bg-border",t),...e}));ud.displayName=wM.displayName;function N8({children:t,editor:e,onSelectAsParagraphTopic:n,onSelectAsEssayTopic:r,comments:o,setComments:s,activeCommentId:i,setActiveCommentId:a,onAddComment:l,runContextualAnalysis:c}){const[u,d]=p.useState(!1),[h]=p.useState({x:0,y:0}),[m,g]=p.useState(""),[v,x]=p.useState(!1),[y,w]=p.useState(null),[b,S]=p.useState(!1),[C,E]=p.useState({x:0,y:0}),[k,T]=p.useState(!1),[R,O]=p.useState(null),[K,z]=p.useState(!1),Z=p.useRef(null),Q=p.useRef({startX:0,startY:0,startMouseX:0,startMouseY:0}),q=()=>{d(!1),w(null);const _=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,clientX:h.x,clientY:h.y});e==null||e.view.dom.dispatchEvent(_)},j=()=>{if(!e)return;const _=e.state.doc.textBetween(e.state.selection.from,e.state.selection.to);navigator.clipboard.writeText(_)},X=()=>{e&&navigator.clipboard.readText().then(_=>{e.commands.insertContent(_)})},P=async _=>{if(e){x(!0);try{const ee=e.getHTML(),te=await Az({selectedText:m,prompt:_,fullContext:ee});w({response:te.response,suggestedText:te.suggestedText})}catch(ee){console.error("Error getting AI response:",ee),w({response:"Sorry, I couldn't process your request properly.",suggestedText:m})}finally{x(!1)}}},N=_=>{if(!e)return;const{from:ee,to:te}=e.state.selection;e.commands.deleteRange({from:ee,to:te}),e.commands.insertContent(_),d(!1),w(null)},L=()=>{d(!1),w(null),E({x:0,y:0}),O(null),T(!1),z(!1),Z.current&&(document.removeEventListener("mouseup",Z.current),Z.current=null)},A=()=>{if(!e||!R)return;Z.current&&(document.removeEventListener("mouseup",Z.current),Z.current=null),z(!0),e.commands.setTextSelection({from:R.from,to:R.to}),e.commands.focus();const _=()=>{setTimeout(()=>{const{from:ee,to:te}=e.state.selection;if(ee!==te){const ie=e.state.doc.textBetween(ee,te);ie!==m&&ie.trim().length>0&&(g(ie),O({from:ee,to:te}),z(!1),document.removeEventListener("mouseup",_),Z.current=null)}},50)};Z.current=_,document.addEventListener("mouseup",_),setTimeout(()=>{Z.current===_&&(document.removeEventListener("mouseup",_),Z.current=null,z(!1))},1e4)},M=_=>{_.target.closest("button, input, textarea")||(S(!0),Q.current={startX:C.x,startY:C.y,startMouseX:_.clientX,startMouseY:_.clientY},_.preventDefault())},$=_=>{if(!b)return;const ee=_.clientX-Q.current.startMouseX,te=_.clientY-Q.current.startMouseY;E({x:Q.current.startX+ee,y:Q.current.startY+te})},F=()=>{S(!1)};p.useEffect(()=>{if(b)return document.addEventListener("mousemove",$),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",F)}},[b]);const H=_=>{if(!e)return;const ee=e.state.doc;if(!ee||ee.nodeSize===0)return;const te=[];try{ee.descendants((ie,ge)=>{if(!ie||!ie.marks)return;ie.marks.find(Ne=>Ne.type.name==="comment"&&Ne.attrs.commentId===_)&&te.push({from:ge,to:ge+ie.nodeSize})})}catch(ie){console.warn("AIContextMenu handleUpdateComment descendants error:",ie);return}if(te.length>0){const ie=te.map(({from:ge,to:he})=>e.state.doc.textBetween(ge,he)).join(" ");s(ge=>ge.map(he=>he.id===_?{...he,quotedText:ie}:he))}else s(ie=>ie.filter(ge=>ge.id!==_)),a(null)};p.useEffect(()=>{if(!e)return;const _=new MutationObserver(()=>{o.forEach(te=>H(te.id))}),ee=e.view.dom;return _.observe(ee,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),()=>_.disconnect()},[e,o]),p.useEffect(()=>{if(!e||!i)return;let _=!1;const ee=()=>{if(!_){_=!0;try{const{from:ie,to:ge}=e.state.selection,he=e.state.doc;if(!he||he.nodeSize===0)return;const Ne=[];try{he.descendants((Oe,Be)=>{if(!Oe||!Oe.marks)return;Oe.marks.find(Le=>Le.type.name==="comment"&&Le.attrs.commentId===i)&&Ne.push({from:Be,to:Be+Oe.nodeSize})})}catch(Oe){console.warn("AIContextMenu descendants error:",Oe);return}if(Ne.length>0){const Oe=Ne.map(({from:I,to:Le})=>e.state.doc.textBetween(I,Le)).join(" ");s(I=>I.map(Le=>Le.id===i&&Le.quotedText!==Oe?{...Le,quotedText:Oe}:Le)),Ne.some(({from:I,to:Le})=>ie>=I&&ge<=Le)&&e.commands.setTextSelection({from:ie,to:ge})}}finally{setTimeout(()=>{_=!1},10)}}},te=()=>{setTimeout(()=>{ee()},50)};return e.on("transaction",te),()=>{e.off("transaction",te)}},[e,i]);const V=_=>{if(!e)return;const{from:ee,to:te}=e.state.selection;ee!==te&&_.preventDefault()};return f.jsxs(f.Fragment,{children:[f.jsx("div",{onContextMenu:V,children:f.jsxs(EM,{children:[f.jsx(TM,{children:t}),f.jsxs(r0,{children:[f.jsxs(Mr,{onSelect:j,className:"flex items-center",children:[f.jsx(Ry,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Copy"})]}),f.jsxs(Mr,{onSelect:X,className:"flex items-center",children:[f.jsx(az,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Paste"})]}),f.jsx(ud,{}),f.jsxs(Mr,{onSelect:()=>c==null?void 0:c("all"),className:"flex items-center",children:[f.jsx(ST,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Check Everything"})]}),f.jsxs(Mr,{onSelect:()=>c==null?void 0:c("custom"),className:"flex items-center",children:[f.jsx(kT,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Check Custom Selection"})]}),f.jsx(ud,{}),f.jsxs(Mr,{onSelect:n,className:"flex items-center",children:[f.jsx(TT,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Set as Paragraph Topic"})]}),f.jsxs(Mr,{onSelect:r,className:"flex items-center",children:[f.jsx(Zd,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Set as Essay Topic"})]}),f.jsx(ud,{}),f.jsxs(Mr,{onSelect:l,className:"flex items-center",children:[f.jsx(jo,{className:"mr-2 h-4 w-4"}),f.jsx("span",{children:"Add Comment"})]})]})]})}),u&&f.jsx("div",{className:"select-none",style:{position:"fixed",left:`${h.x+C.x}px`,top:`${h.y+C.y}px`,zIndex:100,cursor:b?"grabbing":"grab"},onMouseDown:M,children:f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsxs("div",{className:`text-xs text-gray-600 mb-2 p-2 bg-blue-50 border border-blue-200 rounded max-w-[300px] min-h-fit relative${K?" border-blue-400 bg-blue-100":""}`,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:[f.jsxs("span",{className:"italic break-words",children:['"',m,'"']}),K&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-blue-50/80 rounded",children:f.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Select new text in editor..."})}),k&&!K&&f.jsx(pe,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border shadow-md hover:shadow-lg transition-all duration-200",onClick:_=>{_.stopPropagation(),A()},title:"Reselect this text in editor",children:f.jsx(gz,{className:"h-3 w-3"})})]}),v?f.jsx(fr,{className:"w-[300px] shadow-lg",children:f.jsx(hr,{className:"p-3 flex justify-center items-center h-16",children:f.jsx("div",{className:"text-sm",children:"Analyzing your request..."})})}):y?f.jsx(Pz,{response:y.response,suggestedText:y.suggestedText,onClose:L,onInsert:N,onBackToMenu:q}):f.jsx(_z,{onSubmit:P,onClose:L,onBackToMenu:q,title:"AI Writing Assistant",placeholder:"Ask AI to help with your selected text..."})]})})]})}function re(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}var M8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],be=M8.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?zo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function NM(t,e){t&&Go.flushSync(()=>t.dispatchEvent(e))}function _8(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[t][l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})}function u(d,h){const m=(h==null?void 0:h[t][l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,P8(o,...e)]}function P8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function o0(t){const e=t+"CollectionProvider",[n,r]=_8(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:g,children:v}=m,x=U.useRef(null),y=U.useRef(new Map).current;return f.jsx(o,{scope:g,itemMap:y,collectionRef:x,children:v})};i.displayName=e;const a=t+"CollectionSlot",l=U.forwardRef((m,g)=>{const{scope:v,children:x}=m,y=s(a,v),w=De(g,y.collectionRef);return f.jsx(zo,{ref:w,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=U.forwardRef((m,g)=>{const{scope:v,children:x,...y}=m,w=U.useRef(null),b=De(g,w),S=s(c,v);return U.useEffect(()=>(S.itemMap.set(w,{ref:w,...y}),()=>void S.itemMap.delete(w))),f.jsx(zo,{[u]:"",ref:b,children:x})});d.displayName=c;function h(m){const g=s(t+"CollectionConsumer",m);return U.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,C)=>y.indexOf(S.ref.current)-y.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},h,r]}var R8="DismissableLayer",jg="dismissableLayer.update",A8="dismissableLayer.pointerDownOutside",O8="dismissableLayer.focusOutside",r1,MM=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Na=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=p.useContext(MM),[u,d]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=De(e,k=>d(k)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,C=D8(k=>{const T=k.target,R=[...c.branches].some(O=>O.contains(T));!S||R||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),E=L8(k=>{const T=k.target;[...c.branches].some(O=>O.contains(T))||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return Iy(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(r1=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),o1(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=r1)}},[u,h,n,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),o1())},[u,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(jg,k),()=>document.removeEventListener(jg,k)},[]),f.jsx(be.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:re(t.onFocusCapture,E.onFocusCapture),onBlurCapture:re(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:re(t.onPointerDownCapture,C.onPointerDownCapture)})});Na.displayName=R8;var I8="DismissableLayerBranch",j8=p.forwardRef((t,e)=>{const n=p.useContext(MM),r=p.useRef(null),o=De(e,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(be.div,{...t,ref:o})});j8.displayName=I8;function D8(t,e=globalThis==null?void 0:globalThis.document){const n=Fe(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){_M(A8,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function L8(t,e=globalThis==null?void 0:globalThis.document){const n=Fe(t),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&_M(O8,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function o1(){const t=new CustomEvent(jg);document.dispatchEvent(t)}function _M(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?NM(o,s):o.dispatchEvent(s)}var zp="focusScope.autoFocusOnMount",Bp="focusScope.autoFocusOnUnmount",s1={bubbles:!1,cancelable:!0},$8="FocusScope",sh=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=p.useState(null),c=Fe(o),u=Fe(s),d=p.useRef(null),h=De(e,v=>l(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:ro(d.current,{select:!0})},x=function(b){if(m.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||ro(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&ro(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,m.paused]),p.useEffect(()=>{if(a){a1.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(zp,s1);a.addEventListener(zp,c),a.dispatchEvent(y),y.defaultPrevented||(F8(V8(PM(a)),{select:!0}),document.activeElement===v&&ro(a))}return()=>{a.removeEventListener(zp,c),setTimeout(()=>{const y=new CustomEvent(Bp,s1);a.addEventListener(Bp,u),a.dispatchEvent(y),y.defaultPrevented||ro(v??document.body,{select:!0}),a.removeEventListener(Bp,u),a1.remove(m)},0)}}},[a,c,u,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,S]=z8(w);b&&S?!v.shiftKey&&y===S?(v.preventDefault(),n&&ro(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&ro(S,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return f.jsx(be.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});sh.displayName=$8;function F8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ro(r,{select:e}),document.activeElement!==n)return}function z8(t){const e=PM(t),n=i1(e,t),r=i1(e.reverse(),t);return[n,r]}function PM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function i1(t,e){for(const n of t)if(!B8(n,{upTo:e}))return n}function B8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function H8(t){return t instanceof HTMLInputElement&&"select"in t}function ro(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&H8(t)&&e&&t.select()}}var a1=U8();function U8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=l1(t,e),t.unshift(e)},remove(e){var n;t=l1(t,e),(n=t[0])==null||n.resume()}}}function l1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function V8(t){return t.filter(e=>e.tagName!=="A")}var W8="Arrow",RM=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return f.jsx(be.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});RM.displayName=W8;var K8=RM;function q8(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[t][l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})}function u(d,h){const m=(h==null?void 0:h[t][l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,G8(o,...e)]}function G8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var s0="Popper",[AM,yr]=q8(s0),[Y8,OM]=AM(s0),IM=t=>{const{__scopePopper:e,children:n}=t,[r,o]=p.useState(null);return f.jsx(Y8,{scope:e,anchor:r,onAnchorChange:o,children:n})};IM.displayName=s0;var jM="PopperAnchor",DM=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=OM(jM,n),i=p.useRef(null),a=De(e,i);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:f.jsx(be.div,{...o,ref:a})});DM.displayName=jM;var i0="PopperContent",[J8,X8]=AM(i0),LM=p.forwardRef((t,e)=>{var _,ee,te,ie,ge,he;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,x=OM(i0,n),[y,w]=p.useState(null),b=De(e,Ne=>w(Ne)),[S,C]=p.useState(null),E=sN(S),k=(E==null?void 0:E.width)??0,T=(E==null?void 0:E.height)??0,R=r+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},K=Array.isArray(c)?c:[c],z=K.length>0,Z={padding:O,boundary:K.filter(Z8),altBoundary:z},{refs:Q,floatingStyles:q,placement:j,isPositioned:X,middlewareData:P}=JT({strategy:"fixed",placement:R,whileElementsMounted:(...Ne)=>GT(...Ne,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[XT({mainAxis:o+T,alignmentAxis:i}),l&&QT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?ZT():void 0,...Z}),l&&eN({...Z}),tN({...Z,apply:({elements:Ne,rects:Oe,availableWidth:Be,availableHeight:I})=>{const{width:Le,height:nr}=Oe.reference,Y=Ne.floating.style;Y.setProperty("--radix-popper-available-width",`${Be}px`),Y.setProperty("--radix-popper-available-height",`${I}px`),Y.setProperty("--radix-popper-anchor-width",`${Le}px`),Y.setProperty("--radix-popper-anchor-height",`${nr}px`)}}),S&&rN({element:S,padding:a}),e9({arrowWidth:k,arrowHeight:T}),h&&nN({strategy:"referenceHidden",...Z})]}),[N,L]=zM(j),A=Fe(g);ze(()=>{X&&(A==null||A())},[X,A]);const M=(_=P.arrow)==null?void 0:_.x,$=(ee=P.arrow)==null?void 0:ee.y,F=((te=P.arrow)==null?void 0:te.centerOffset)!==0,[H,V]=p.useState();return ze(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),f.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:X?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(ie=P.transformOrigin)==null?void 0:ie.x,(ge=P.transformOrigin)==null?void 0:ge.y].join(" "),...((he=P.hide)==null?void 0:he.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(J8,{scope:n,placedSide:N,onArrowChange:C,arrowX:M,arrowY:$,shouldHideArrow:F,children:f.jsx(be.div,{"data-side":N,"data-align":L,...v,ref:b,style:{...v.style,animation:X?void 0:"none"}})})})});LM.displayName=i0;var $M="PopperArrow",Q8={top:"bottom",right:"left",bottom:"top",left:"right"},FM=p.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=X8($M,r),i=Q8[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(K8,{...o,ref:n,style:{...o.style,display:"block"}})})});FM.displayName=$M;function Z8(t){return t!==null}var e9=t=>({name:"transformOrigin",options:t,fn(e){var x,y,w;const{placement:n,rects:r,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,u]=zM(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=o.arrow)==null?void 0:y.x)??0)+a/2,m=(((w=o.arrow)==null?void 0:w.y)??0)+l/2;let g="",v="";return c==="bottom"?(g=i?d:`${h}px`,v=`${-l}px`):c==="top"?(g=i?d:`${h}px`,v=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,v=i?d:`${m}px`):c==="left"&&(g=`${r.floating.width+l}px`,v=i?d:`${m}px`),{data:{x:g,y:v}}}});function zM(t){const[e,n="center"]=t.split("-");return[e,n]}var Oc=IM,Ma=DM,Ic=LM,jc=FM,t9="Portal",Dc=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=p.useState(!1);ze(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?bc.createPortal(f.jsx(be.div,{...r,ref:e}),i):null});Dc.displayName=t9;function n9(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var xr=t=>{const{present:e,children:n}=t,r=r9(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=De(r.ref,o9(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};xr.displayName="Presence";function r9(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),s=p.useRef("none"),i=t?"mounted":"unmounted",[a,l]=n9(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Au(r.current);s.current=a==="mounted"?c:"none"},[a]),ze(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,m=Au(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),ze(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const v=Au(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=m=>{m.target===e&&(s.current=Au(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Au(t){return(t==null?void 0:t.animationName)||"none"}function o9(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function s9(t,e=[]){let n=[];function r(s,i){const a=p.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:h,children:m,...g}=d,v=(h==null?void 0:h[t][l])||a,x=p.useMemo(()=>g,Object.values(g));return f.jsx(v.Provider,{value:x,children:m})}function u(d,h){const m=(h==null?void 0:h[t][l])||a,g=p.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const o=()=>{const s=n.map(i=>p.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,i9(o,...e)]}function i9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Hp="rovingFocusGroup.onEntryFocus",a9={bubbles:!1,cancelable:!0},ih="RovingFocusGroup",[Dg,BM,l9]=o0(ih),[c9,HM]=s9(ih,[l9]),[u9,d9]=c9(ih),UM=p.forwardRef((t,e)=>f.jsx(Dg.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Dg.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(f9,{...t,ref:e})})}));UM.displayName=ih;var f9=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=p.useRef(null),m=De(e,h),g=Xs(s),[v=null,x]=Jn({prop:i,defaultProp:a,onChange:l}),[y,w]=p.useState(!1),b=Fe(c),S=BM(n),C=p.useRef(!1),[E,k]=p.useState(0);return p.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(Hp,b),()=>T.removeEventListener(Hp,b)},[b]),f.jsx(u9,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:v,onItemFocus:p.useCallback(T=>x(T),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>k(T=>T-1),[]),children:f.jsx(be.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:re(t.onMouseDown,()=>{C.current=!0}),onFocus:re(t.onFocus,T=>{const R=!C.current;if(T.target===T.currentTarget&&R&&!y){const O=new CustomEvent(Hp,a9);if(T.currentTarget.dispatchEvent(O),!O.defaultPrevented){const K=S().filter(j=>j.focusable),z=K.find(j=>j.active),Z=K.find(j=>j.id===v),q=[z,Z,...K].filter(Boolean).map(j=>j.ref.current);KM(q,u)}}C.current=!1}),onBlur:re(t.onBlur,()=>w(!1))})})}),VM="RovingFocusGroupItem",WM=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=dt(),l=s||a,c=d9(VM,n),u=c.currentTabStopId===l,d=BM(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=c;return p.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),f.jsx(Dg.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:f.jsx(be.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:re(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:re(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:re(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=m9(g,c.orientation,c.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const w=y.indexOf(g.currentTarget);y=c.loop?g9(y,w+1):y.slice(w+1)}setTimeout(()=>KM(y))}})})})});WM.displayName=VM;var h9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function p9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function m9(t,e,n){const r=p9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return h9[r]}function KM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function g9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var v9=UM,y9=WM,qM=Wy(),Up=function(){},ah=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Up,onWheelCapture:Up,onTouchMoveCapture:Up}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,b=eh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,C=Vy([n,e]),E=it(it({},b),o);return p.createElement(p.Fragment,null,u&&p.createElement(S,{sideCar:qM,removeScrollBar:c,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?p.cloneElement(p.Children.only(a),it(it({},E),{ref:C})):p.createElement(y,it({},E,{className:l,ref:C}),a))});ah.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ah.classNames={fullWidth:Xi,zeroRight:Ji};var Lg=!1;if(typeof window<"u")try{var Ou=Object.defineProperty({},"passive",{get:function(){return Lg=!0,!0}});window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{Lg=!1}var di=Lg?{passive:!1}:!1,x9=function(t){return t.tagName==="TEXTAREA"},GM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!x9(t)&&n[e]==="visible")},w9=function(t){return GM(t,"overflowY")},b9=function(t){return GM(t,"overflowX")},c1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=YM(t,r);if(o){var s=JM(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},S9=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},C9=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},YM=function(t,e){return t==="v"?w9(e):b9(e)},JM=function(t,e){return t==="v"?S9(e):C9(e)},k9=function(t,e){return t==="h"&&e==="rtl"?-1:1},E9=function(t,e,n,r,o){var s=k9(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,h=0;do{var m=JM(t,a),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&YM(t,a)&&(d+=y,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(h)<1||!o))&&(c=!0),c},Iu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},u1=function(t){return[t.deltaX,t.deltaY]},d1=function(t){return t&&"current"in t?t.current:t},T9=function(t,e){return t[0]===e[0]&&t[1]===e[1]},N9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},M9=0,fi=[];function _9(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(M9++)[0],s=p.useState(nh)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var v=Uy([t.lockRef.current],(t.shards||[]).map(d1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var y=Iu(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],S="deltaY"in v?v.deltaY:w[1]-y[1],C,E=v.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&E.type==="range")return!1;var T=c1(k,E);if(!T)return!0;if(T?C=k:(C=k==="v"?"h":"v",T=c1(k,E)),!T)return!1;if(!r.current&&"changedTouches"in v&&(b||S)&&(r.current=C),!C)return!0;var R=r.current||C;return E9(R,x,v,R==="h"?b:S,!0)},[]),l=p.useCallback(function(v){var x=v;if(!(!fi.length||fi[fi.length-1]!==s)){var y="deltaY"in x?u1(x):Iu(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&T9(C.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(d1).filter(Boolean).filter(function(C){return C.contains(x.target)}),S=b.length>0?a(x,b[0]):!i.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),c=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:P9(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=p.useCallback(function(v){n.current=Iu(v),r.current=void 0},[]),d=p.useCallback(function(v){c(v.type,u1(v),v.target,a(v,t.lockRef.current))},[]),h=p.useCallback(function(v){c(v.type,Iu(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return fi.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,di),document.addEventListener("touchmove",l,di),document.addEventListener("touchstart",u,di),function(){fi=fi.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,di),document.removeEventListener("touchmove",l,di),document.removeEventListener("touchstart",u,di)}},[]);var m=t.removeScrollBar,g=t.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:N9(o)}):null,m?p.createElement(qy,{gapMode:t.gapMode}):null)}function P9(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const R9=Ky(qM,_9);var lh=p.forwardRef(function(t,e){return p.createElement(ah,it({},t,{ref:e,sideCar:R9}))});lh.classNames=ah.classNames;var $g=["Enter"," "],A9=["ArrowDown","PageUp","Home"],XM=["ArrowUp","PageDown","End"],O9=[...A9,...XM],I9={ltr:[...$g,"ArrowRight"],rtl:[...$g,"ArrowLeft"]},j9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Lc="Menu",[ac,D9,L9]=o0(Lc),[ei,QM]=Ft(Lc,[L9,yr,HM]),ch=yr(),ZM=HM(),[$9,ti]=ei(Lc),[F9,$c]=ei(Lc),e_=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=t,a=ch(e),[l,c]=p.useState(null),u=p.useRef(!1),d=Fe(s),h=Xs(o);return p.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),f.jsx(Oc,{...a,children:f.jsx($9,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:f.jsx(F9,{scope:e,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};e_.displayName=Lc;var z9="MenuAnchor",a0=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=ch(n);return f.jsx(Ma,{...o,...r,ref:e})});a0.displayName=z9;var l0="MenuPortal",[B9,t_]=ei(l0,{forceMount:void 0}),n_=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,s=ti(l0,e);return f.jsx(B9,{scope:e,forceMount:n,children:f.jsx(xr,{present:n||s.open,children:f.jsx(Dc,{asChild:!0,container:o,children:r})})})};n_.displayName=l0;var Pn="MenuContent",[H9,c0]=ei(Pn),r_=p.forwardRef((t,e)=>{const n=t_(Pn,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ti(Pn,t.__scopeMenu),i=$c(Pn,t.__scopeMenu);return f.jsx(ac.Provider,{scope:t.__scopeMenu,children:f.jsx(xr,{present:r||s.open,children:f.jsx(ac.Slot,{scope:t.__scopeMenu,children:i.modal?f.jsx(U9,{...o,ref:e}):f.jsx(V9,{...o,ref:e})})})})}),U9=p.forwardRef((t,e)=>{const n=ti(Pn,t.__scopeMenu),r=p.useRef(null),o=De(e,r);return p.useEffect(()=>{const s=r.current;if(s)return Pc(s)},[]),f.jsx(u0,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:re(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),V9=p.forwardRef((t,e)=>{const n=ti(Pn,t.__scopeMenu);return f.jsx(u0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),u0=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=t,x=ti(Pn,n),y=$c(Pn,n),w=ch(n),b=ZM(n),S=D9(n),[C,E]=p.useState(null),k=p.useRef(null),T=De(e,k,x.onContentChange),R=p.useRef(0),O=p.useRef(""),K=p.useRef(0),z=p.useRef(null),Z=p.useRef("right"),Q=p.useRef(0),q=g?lh:p.Fragment,j=g?{as:zo,allowPinchZoom:!0}:void 0,X=N=>{var _,ee;const L=O.current+N,A=S().filter(te=>!te.disabled),M=document.activeElement,$=(_=A.find(te=>te.ref.current===M))==null?void 0:_.textValue,F=A.map(te=>te.textValue),H=nU(F,L,$),V=(ee=A.find(te=>te.textValue===H))==null?void 0:ee.ref.current;(function te(ie){O.current=ie,window.clearTimeout(R.current),ie!==""&&(R.current=window.setTimeout(()=>te(""),1e3))})(L),V&&setTimeout(()=>V.focus())};p.useEffect(()=>()=>window.clearTimeout(R.current),[]),Nc();const P=p.useCallback(N=>{var A,M;return Z.current===((A=z.current)==null?void 0:A.side)&&oU(N,(M=z.current)==null?void 0:M.area)},[]);return f.jsx(H9,{scope:n,searchRef:O,onItemEnter:p.useCallback(N=>{P(N)&&N.preventDefault()},[P]),onItemLeave:p.useCallback(N=>{var L;P(N)||((L=k.current)==null||L.focus(),E(null))},[P]),onTriggerLeave:p.useCallback(N=>{P(N)&&N.preventDefault()},[P]),pointerGraceTimerRef:K,onPointerGraceIntentChange:p.useCallback(N=>{z.current=N},[]),children:f.jsx(q,{...j,children:f.jsx(sh,{asChild:!0,trapped:o,onMountAutoFocus:re(s,N=>{var L;N.preventDefault(),(L=k.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:f.jsx(Na,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:f.jsx(v9,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:re(l,N=>{y.isUsingKeyboardRef.current||N.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(Ic,{role:"menu","aria-orientation":"vertical","data-state":x_(x.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:re(v.onKeyDown,N=>{const A=N.target.closest("[data-radix-menu-content]")===N.currentTarget,M=N.ctrlKey||N.altKey||N.metaKey,$=N.key.length===1;A&&(N.key==="Tab"&&N.preventDefault(),!M&&$&&X(N.key));const F=k.current;if(N.target!==F||!O9.includes(N.key))return;N.preventDefault();const V=S().filter(_=>!_.disabled).map(_=>_.ref.current);XM.includes(N.key)&&V.reverse(),eU(V)}),onBlur:re(t.onBlur,N=>{N.currentTarget.contains(N.target)||(window.clearTimeout(R.current),O.current="")}),onPointerMove:re(t.onPointerMove,lc(N=>{const L=N.target,A=Q.current!==N.clientX;if(N.currentTarget.contains(L)&&A){const M=N.clientX>Q.current?"right":"left";Z.current=M,Q.current=N.clientX}}))})})})})})})});r_.displayName=Pn;var W9="MenuGroup",d0=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(be.div,{role:"group",...r,ref:e})});d0.displayName=W9;var K9="MenuLabel",o_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(be.div,{...r,ref:e})});o_.displayName=K9;var af="MenuItem",f1="menu.itemSelect",uh=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,s=p.useRef(null),i=$c(af,t.__scopeMenu),a=c0(af,t.__scopeMenu),l=De(e,s),c=p.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(f1,{bubbles:!0,cancelable:!0});d.addEventListener(f1,m=>r==null?void 0:r(m),{once:!0}),NM(d,h),h.defaultPrevented?c.current=!1:i.onClose()}};return f.jsx(s_,{...o,ref:l,disabled:n,onClick:re(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:re(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:re(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||$g.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});uh.displayName=af;var s_=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=t,i=c0(af,n),a=ZM(n),l=p.useRef(null),c=De(e,l),[u,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[s.children]),f.jsx(ac.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:f.jsx(y9,{asChild:!0,...a,focusable:!r,children:f.jsx(be.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:re(t.onPointerMove,lc(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(t.onPointerLeave,lc(g=>i.onItemLeave(g))),onFocus:re(t.onFocus,()=>d(!0)),onBlur:re(t.onBlur,()=>d(!1))})})})}),q9="MenuCheckboxItem",i_=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return f.jsx(d_,{scope:t.__scopeMenu,checked:n,children:f.jsx(uh,{role:"menuitemcheckbox","aria-checked":lf(n)?"mixed":n,...o,ref:e,"data-state":h0(n),onSelect:re(o.onSelect,()=>r==null?void 0:r(lf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});i_.displayName=q9;var a_="MenuRadioGroup",[G9,Y9]=ei(a_,{value:void 0,onValueChange:()=>{}}),l_=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,s=Fe(r);return f.jsx(G9,{scope:t.__scopeMenu,value:n,onValueChange:s,children:f.jsx(d0,{...o,ref:e})})});l_.displayName=a_;var c_="MenuRadioItem",u_=p.forwardRef((t,e)=>{const{value:n,...r}=t,o=Y9(c_,t.__scopeMenu),s=n===o.value;return f.jsx(d_,{scope:t.__scopeMenu,checked:s,children:f.jsx(uh,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":h0(s),onSelect:re(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});u_.displayName=c_;var f0="MenuItemIndicator",[d_,J9]=ei(f0,{checked:!1}),f_=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,s=J9(f0,n);return f.jsx(xr,{present:r||lf(s.checked)||s.checked===!0,children:f.jsx(be.span,{...o,ref:e,"data-state":h0(s.checked)})})});f_.displayName=f0;var X9="MenuSeparator",h_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return f.jsx(be.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});h_.displayName=X9;var Q9="MenuArrow",p_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=ch(n);return f.jsx(jc,{...o,...r,ref:e})});p_.displayName=Q9;var Z9="MenuSub",[xQ,m_]=ei(Z9),ll="MenuSubTrigger",g_=p.forwardRef((t,e)=>{const n=ti(ll,t.__scopeMenu),r=$c(ll,t.__scopeMenu),o=m_(ll,t.__scopeMenu),s=c0(ll,t.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>u,[u]),p.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(a0,{asChild:!0,...c,children:f.jsx(s_,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":x_(n.open),...t,ref:Yf(e,o.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:re(t.onPointerMove,lc(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:re(t.onPointerLeave,lc(d=>{var m,g;u();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,w=h[x?"left":"right"],b=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:re(t.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||I9[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});g_.displayName=ll;var v_="MenuSubContent",y_=p.forwardRef((t,e)=>{const n=t_(Pn,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=ti(Pn,t.__scopeMenu),i=$c(Pn,t.__scopeMenu),a=m_(v_,t.__scopeMenu),l=p.useRef(null),c=De(e,l);return f.jsx(ac.Provider,{scope:t.__scopeMenu,children:f.jsx(xr,{present:r||s.open,children:f.jsx(ac.Slot,{scope:t.__scopeMenu,children:f.jsx(u0,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:re(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:re(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:re(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),h=j9[i.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});y_.displayName=v_;function x_(t){return t?"open":"closed"}function lf(t){return t==="indeterminate"}function h0(t){return lf(t)?"indeterminate":t?"checked":"unchecked"}function eU(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function tU(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function nU(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=tU(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function rU(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function oU(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return rU(n,e)}function lc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var sU=e_,iU=a0,aU=n_,lU=r_,cU=d0,uU=o_,dU=uh,fU=i_,hU=l_,pU=u_,mU=f_,gU=h_,vU=p_,yU=g_,xU=y_,p0="DropdownMenu",[wU,wQ]=Ft(p0,[QM]),Jt=QM(),[bU,w_]=wU(p0),b_=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=Jt(e),c=p.useRef(null),[u=!1,d]=Jn({prop:o,defaultProp:s,onChange:i});return f.jsx(bU,{scope:e,triggerId:dt(),triggerRef:c,contentId:dt(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:a,children:f.jsx(sU,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};b_.displayName=p0;var S_="DropdownMenuTrigger",C_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,s=w_(S_,n),i=Jt(n);return f.jsx(iU,{asChild:!0,...i,children:f.jsx(be.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Yf(e,s.triggerRef),onPointerDown:re(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:re(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});C_.displayName=S_;var SU="DropdownMenuPortal",k_=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Jt(e);return f.jsx(aU,{...r,...n})};k_.displayName=SU;var E_="DropdownMenuContent",T_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=w_(E_,n),s=Jt(n),i=p.useRef(!1);return f.jsx(lU,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:e,onCloseAutoFocus:re(t.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:re(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});T_.displayName=E_;var CU="DropdownMenuGroup",kU=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(cU,{...o,...r,ref:e})});kU.displayName=CU;var EU="DropdownMenuLabel",N_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(uU,{...o,...r,ref:e})});N_.displayName=EU;var TU="DropdownMenuItem",M_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(dU,{...o,...r,ref:e})});M_.displayName=TU;var NU="DropdownMenuCheckboxItem",__=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(fU,{...o,...r,ref:e})});__.displayName=NU;var MU="DropdownMenuRadioGroup",_U=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(hU,{...o,...r,ref:e})});_U.displayName=MU;var PU="DropdownMenuRadioItem",P_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(pU,{...o,...r,ref:e})});P_.displayName=PU;var RU="DropdownMenuItemIndicator",R_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(mU,{...o,...r,ref:e})});R_.displayName=RU;var AU="DropdownMenuSeparator",A_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(gU,{...o,...r,ref:e})});A_.displayName=AU;var OU="DropdownMenuArrow",IU=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(vU,{...o,...r,ref:e})});IU.displayName=OU;var jU="DropdownMenuSubTrigger",O_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(yU,{...o,...r,ref:e})});O_.displayName=jU;var DU="DropdownMenuSubContent",I_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Jt(n);return f.jsx(xU,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});I_.displayName=DU;var LU=b_,$U=C_,FU=k_,j_=T_,D_=N_,L_=M_,$_=__,F_=P_,z_=R_,B_=A_,H_=O_,U_=I_;const m0=LU,g0=$U,zU=p.forwardRef(({className:t,inset:e,children:n,...r},o)=>f.jsxs(H_,{ref:o,className:oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,f.jsx(CM,{className:"ml-auto h-4 w-4"})]}));zU.displayName=H_.displayName;const BU=p.forwardRef(({className:t,...e},n)=>f.jsx(U_,{ref:n,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out",t),...e}));BU.displayName=U_.displayName;const dh=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(FU,{children:f.jsx(j_,{ref:r,sideOffset:e,className:oe("z-50 min-w-[10rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out",t),...n})}));dh.displayName=j_.displayName;const cc=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(L_,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent",e&&"pl-8",t),...n}));cc.displayName=L_.displayName;const HU=p.forwardRef(({className:t,children:e,checked:n,...r},o)=>f.jsxs($_,{ref:o,className:oe("z-50 min-w-[12rem] text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[f.jsx("span",{className:"absolute left-2 flex h-4 w-4 items-center justify-center",children:f.jsx(z_,{children:f.jsx(n0,{className:"h-4 w-4"})})}),f.jsx("span",{className:"ml-2 flex-grow",children:e})]}));HU.displayName=$_.displayName;const UU=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(F_,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-10 pr-2 text-sm outline-none transition-colors focus:bg-accent",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-4 w-4 items-center justify-center",children:f.jsx(z_,{children:f.jsx(kM,{className:"h-4 w-4 fill-current"})})}),f.jsx("span",{className:"flex-grow",children:e})]}));UU.displayName=F_.displayName;const V_=p.forwardRef(({className:t,inset:e,...n},r)=>f.jsx(D_,{ref:r,className:oe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));V_.displayName=D_.displayName;const W_=p.forwardRef(({className:t,...e},n)=>f.jsx(B_,{ref:n,className:oe("-mx-1 my-1 h-px bg-muted",t),...e}));W_.displayName=B_.displayName;var VU="VisuallyHidden",v0=p.forwardRef((t,e)=>f.jsx(be.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));v0.displayName=VU;var WU=v0,[fh,bQ]=Ft("Tooltip",[yr]),hh=yr(),K_="TooltipProvider",KU=700,Fg="tooltip.open",[qU,y0]=fh(K_),q_=t=>{const{__scopeTooltip:e,delayDuration:n=KU,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=t,[i,a]=p.useState(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),f.jsx(qU,{scope:e,isOpenDelayed:i,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:o,children:s})};q_.displayName=K_;var ph="Tooltip",[GU,Fc]=fh(ph),G_=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o=!1,onOpenChange:s,disableHoverableContent:i,delayDuration:a}=t,l=y0(ph,t.__scopeTooltip),c=hh(e),[u,d]=p.useState(null),h=dt(),m=p.useRef(0),g=i??l.disableHoverableContent,v=a??l.delayDuration,x=p.useRef(!1),[y=!1,w]=Jn({prop:r,defaultProp:o,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(Fg))):l.onClose(),s==null||s(k)}}),b=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),S=p.useCallback(()=>{window.clearTimeout(m.current),x.current=!1,w(!0)},[w]),C=p.useCallback(()=>{window.clearTimeout(m.current),w(!1)},[w]),E=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,w(!0)},v)},[v,w]);return p.useEffect(()=>()=>window.clearTimeout(m.current),[]),f.jsx(Oc,{...c,children:f.jsx(GU,{scope:e,contentId:h,open:y,stateAttribute:b,trigger:u,onTriggerChange:d,onTriggerEnter:p.useCallback(()=>{l.isOpenDelayed?E():S()},[l.isOpenDelayed,E,S]),onTriggerLeave:p.useCallback(()=>{g?C():window.clearTimeout(m.current)},[C,g]),onOpen:S,onClose:C,disableHoverableContent:g,children:n})})};G_.displayName=ph;var zg="TooltipTrigger",Y_=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Fc(zg,n),s=y0(zg,n),i=hh(n),a=p.useRef(null),l=De(e,a,o.onTriggerChange),c=p.useRef(!1),u=p.useRef(!1),d=p.useCallback(()=>c.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),f.jsx(Ma,{asChild:!0,...i,children:f.jsx(be.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:re(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:re(t.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:re(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:re(t.onFocus,()=>{c.current||o.onOpen()}),onBlur:re(t.onBlur,o.onClose),onClick:re(t.onClick,o.onClose)})})});Y_.displayName=zg;var x0="TooltipPortal",[YU,JU]=fh(x0,{forceMount:void 0}),J_=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:o}=t,s=Fc(x0,e);return f.jsx(YU,{scope:e,forceMount:n,children:f.jsx(xr,{present:n||s.open,children:f.jsx(Dc,{asChild:!0,container:o,children:r})})})};J_.displayName=x0;var pa="TooltipContent",X_=p.forwardRef((t,e)=>{const n=JU(pa,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=t,i=Fc(pa,t.__scopeTooltip);return f.jsx(xr,{present:r||i.open,children:i.disableHoverableContent?f.jsx(Q_,{side:o,...s,ref:e}):f.jsx(XU,{side:o,...s,ref:e})})}),XU=p.forwardRef((t,e)=>{const n=Fc(pa,t.__scopeTooltip),r=y0(pa,t.__scopeTooltip),o=p.useRef(null),s=De(e,o),[i,a]=p.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:d}=r,h=p.useCallback(()=>{a(null),d(!1)},[d]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},w=tV(y,x.getBoundingClientRect()),b=nV(y,w),S=rV(v.getBoundingClientRect()),C=sV([...b,...S]);a(C),d(!0)},[d]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(l&&u){const g=x=>m(x,u),v=x=>m(x,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[l,u,m,h]),p.useEffect(()=>{if(i){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(x))||(u==null?void 0:u.contains(x)),b=!oV(y,i);w?h():b&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,i,c,h]),f.jsx(Q_,{...t,ref:s})}),[QU,ZU]=fh(ph,{isInside:!1}),Q_=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=t,l=Fc(pa,n),c=hh(n),{onClose:u}=l;return p.useEffect(()=>(document.addEventListener(Fg,u),()=>document.removeEventListener(Fg,u)),[u]),p.useEffect(()=>{if(l.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),f.jsx(Na,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:f.jsxs(Ic,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(_T,{children:r}),f.jsx(QU,{scope:n,isInside:!0,children:f.jsx(WU,{id:l.contentId,role:"tooltip",children:o||r})})]})})});X_.displayName=pa;var Z_="TooltipArrow",eV=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=hh(n);return ZU(Z_,n).isInside?null:f.jsx(jc,{...o,...r,ref:e})});eV.displayName=Z_;function tV(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function nV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function rV(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function oV(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function sV(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),iV(e)}function iV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const s=e[e.length-1],i=e[e.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var aV=q_,lV=G_,cV=Y_,uV=J_,eP=X_;const dV=aV,ju=lV,Du=cV,cl=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>f.jsx(uV,{children:f.jsx(eP,{ref:r,sideOffset:e,className:oe("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));cl.displayName=eP.displayName;const h1={Small:"9pt",Normal:"11pt",Large:"14pt",Huge:"18pt"};function fV({editor:t,hasSelection:e=!1,onAddComment:n,showParagraphTopics:r=!1,showEssayTopics:o=!1,onToggleParagraphTopics:s,onToggleEssayTopics:i}){const a=()=>{var d;if(!t)return"Normal";const u=t.getAttributes("textStyle").fontSize||"11pt";return((d=Object.entries(h1).find(([h,m])=>m===u))==null?void 0:d[0])||"Normal"},l=c=>{t&&t.chain().focus().setMark("textStyle",{fontSize:c}).run()};return f.jsx(dV,{delayDuration:150,children:f.jsx("div",{className:"flex items-center px-4 py-2 h-12 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:f.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center space-x-4",children:[f.jsxs(m0,{children:[f.jsx(g0,{asChild:!0,children:f.jsxs(pe,{variant:"ghost",size:"sm",className:"h-8 px-3 text-xs flex items-center space-x-1",children:[f.jsx("span",{children:a()}),f.jsx(Gf,{className:"h-3.5 w-3.5 ml-1"})]})}),f.jsx(dh,{align:"start",className:"w-32",children:Object.entries(h1).map(([c,u])=>f.jsxs(cc,{onClick:()=>l(u),className:"flex items-center justify-between",children:[f.jsx("span",{children:c}),a()===c&&f.jsx(da,{className:"h-4 w-4"})]},u))})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsxs(ju,{children:[f.jsx(Du,{asChild:!0,children:f.jsx(pe,{variant:t!=null&&t.isActive("bold")?"secondary":"ghost",size:"sm",onClick:()=>t==null?void 0:t.chain().focus().toggleBold().run(),className:"h-8 w-8 p-0",children:f.jsx("span",{className:"font-bold",children:"B"})})}),f.jsx(cl,{side:"bottom",children:f.jsx("p",{children:"Bold"})})]}),f.jsxs(ju,{children:[f.jsx(Du,{asChild:!0,children:f.jsx(pe,{variant:t!=null&&t.isActive("italic")?"secondary":"ghost",size:"sm",onClick:()=>t==null?void 0:t.chain().focus().toggleItalic().run(),className:"h-8 w-8 p-0",children:f.jsx("span",{className:"italic",children:"I"})})}),f.jsx(cl,{side:"bottom",children:f.jsx("p",{children:"Italic"})})]}),f.jsxs(ju,{children:[f.jsx(Du,{asChild:!0,children:f.jsx(pe,{variant:t!=null&&t.isActive("underline")?"secondary":"ghost",size:"sm",onClick:()=>t==null?void 0:t.chain().focus().toggleUnderline().run(),className:"h-8 w-8 p-0",children:f.jsx("span",{className:"underline",children:"U"})})}),f.jsx(cl,{side:"bottom",children:f.jsx("p",{children:"Underline"})})]})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"}),f.jsxs(ju,{children:[f.jsx(Du,{asChild:!0,children:f.jsx(pe,{variant:"ghost",size:"sm",onClick:n,disabled:!e,className:"h-8 w-8 p-0",children:f.jsx(jo,{className:"h-4 w-4"})})}),f.jsx(cl,{side:"bottom",children:f.jsx("p",{children:"Add Comment"})})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsxs(pe,{variant:r?"secondary":"ghost",size:"sm",onClick:s,className:`h-8 px-3 text-xs flex items-center space-x-1 transition-all duration-200 ${r?"bg-orange-100 text-orange-800 border-orange-300 hover:bg-orange-200":"hover:bg-gray-100 text-gray-600"}`,children:[f.jsx(TT,{className:"h-3.5 w-3.5"}),f.jsxs("span",{children:[r?"Hide":"Show"," Paragraph Topics"]}),r&&f.jsx("div",{className:"ml-1 w-2 h-2 bg-orange-500 rounded-full animate-pulse"})]}),f.jsxs(pe,{variant:o?"secondary":"ghost",size:"sm",onClick:i,className:`h-8 px-3 text-xs flex items-center space-x-1 transition-all duration-200 ${o?"bg-yellow-100 text-yellow-800 border-yellow-300 hover:bg-yellow-200":"hover:bg-gray-100 text-gray-600"}`,children:[f.jsx(Zd,{className:"h-3.5 w-3.5"}),f.jsxs("span",{children:[o?"Hide":"Show"," Essay Topics"]}),o&&f.jsx("div",{className:"ml-1 w-2 h-2 bg-yellow-500 rounded-full animate-pulse"})]})]}),f.jsx("div",{className:"h-4 w-px bg-border/40"})]})})})}const hV=_t.create({name:"comment"}).extend({inclusive:!1,addOptions(){return{HTMLAttributes:{},onCommentActivated:()=>{},onCommentClicked:()=>{}}},addAttributes(){return{commentId:{default:null,parseHTML:t=>t.getAttribute("data-comment-id")||"",renderHTML:t=>({"data-comment-id":t.commentId})},content:{default:"",parseHTML:t=>t.getAttribute("data-comment-content")||"",renderHTML:t=>({"data-comment-content":t.content})}}},parseHTML(){return[{tag:"span[data-comment-id]",getAttrs:t=>{const e=t.getAttribute("data-comment-id");return e!=null&&e.trim()?{commentId:e}:!1}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t),0]},onSelectionUpdate(){const{$from:t}=this.editor.state.selection,e=t.marks();if(!e.length){this.storage.activeCommentId=null,this.options.onCommentActivated(this.storage.activeCommentId);return}const n=this.editor.schema.marks.comment,r=e.find(o=>o.type===n);this.storage.activeCommentId=(r==null?void 0:r.attrs.commentId)||null,this.options.onCommentActivated(this.storage.activeCommentId)},addStorage(){return{activeCommentId:null}},onCreate(){const t=e=>{const n=e.target;console.log("Comment click detected on:",n);let r=n.closest("[data-comment-id]");if(r||(r=n.hasAttribute("data-comment-id")?n:null),r){const o=r.getAttribute("data-comment-id");console.log("Found comment ID:",o),o&&this.options.onCommentClicked&&(e.preventDefault(),e.stopPropagation(),console.log("Triggering onCommentClicked for:",o),this.options.onCommentClicked(o))}else console.log("No comment element found for click")};this.editor.view.dom.addEventListener("click",t),this.commentClickHandler=t},onDestroy(){this.commentClickHandler&&this.editor.view.dom.removeEventListener("click",this.commentClickHandler)},addCommands(){return{setComment:t=>({commands:e})=>t?e.setMark("comment",{commentId:t,content:""}):!1,unsetComment:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name==="comment"&&a.attrs.commentId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}});function Kr(){}Kr.prototype={diff:function(e,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.callback;typeof o=="function"&&(s=o,o={}),this.options=o;var i=this;function a(S){return s?(setTimeout(function(){s(void 0,S)},0),!0):S}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,u=1,d=l+c;o.maxEditLength&&(d=Math.min(d,o.maxEditLength));var h=(r=o.timeout)!==null&&r!==void 0?r:1/0,m=Date.now()+h,g=[{oldPos:-1,lastComponent:void 0}],v=this.extractCommon(g[0],n,e,0);if(g[0].oldPos+1>=c&&v+1>=l)return a([{value:this.join(n),count:n.length}]);var x=-1/0,y=1/0;function w(){for(var S=Math.max(x,-u);S<=Math.min(y,u);S+=2){var C=void 0,E=g[S-1],k=g[S+1];E&&(g[S-1]=void 0);var T=!1;if(k){var R=k.oldPos-S;T=k&&0<=R&&R<l}var O=E&&E.oldPos+1<c;if(!T&&!O){g[S]=void 0;continue}if(!O||T&&E.oldPos+1<k.oldPos?C=i.addToPath(k,!0,void 0,0):C=i.addToPath(E,void 0,!0,1),v=i.extractCommon(C,n,e,S),C.oldPos+1>=c&&v+1>=l)return a(pV(i,C.lastComponent,n,e,i.useLongestToken));g[S]=C,C.oldPos+1>=c&&(y=Math.min(y,S-1)),v+1>=l&&(x=Math.max(x,S+1))}u++}if(s)(function S(){setTimeout(function(){if(u>d||Date.now()>m)return s();w()||S()},0)})();else for(;u<=d&&Date.now()<=m;){var b=w();if(b)return b}},addToPath:function(e,n,r,o){var s=e.lastComponent;return s&&s.added===n&&s.removed===r?{oldPos:e.oldPos+o,lastComponent:{count:s.count+1,added:n,removed:r,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:r,previousComponent:s}}},extractCommon:function(e,n,r,o){for(var s=n.length,i=r.length,a=e.oldPos,l=a-o,c=0;l+1<s&&a+1<i&&this.equals(n[l+1],r[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function pV(t,e,n,r,o){for(var s=[],i;e;)s.push(e),i=e.previousComponent,delete e.previousComponent,e=i;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var d=s[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&s[a-1].added){var m=s[a-1];s[a-1]=s[a],s[a]=m}}else{if(!d.added&&o){var h=n.slice(c,c+d.count);h=h.map(function(v,x){var y=r[u+x];return y.length>v.length?y:v}),d.value=t.join(h)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var g=s[l-1];return l>1&&typeof g.value=="string"&&(g.added||g.removed)&&t.equals("",g.value)&&(s[l-2].value+=g.value,s.pop()),s}var mV=new Kr;function gV(t,e,n){return mV.diff(t,e,n)}var p1=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,m1=/\S/,tP=new Kr;tP.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!m1.test(t)&&!m1.test(e)};tP.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&p1.test(e[n])&&p1.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var nP=new Kr;nP.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),e.push(o))}return e};var vV=new Kr;vV.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var yV=new Kr;yV.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function dd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dd=function(e){return typeof e}:dd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(t)}var xV=Object.prototype.toString,uc=new Kr;uc.useLongestToken=!0;uc.tokenize=nP.tokenize;uc.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,o=r===void 0?function(s,i){return typeof i>"u"?n:i}:r;return typeof t=="string"?t:JSON.stringify(Bg(t,null,null,o),o,"  ")};uc.equals=function(t,e){return Kr.prototype.equals.call(uc,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Bg(t,e,n,r,o){e=e||[],n=n||[],r&&(t=r(o,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var i;if(xV.call(t)==="[object Array]"){for(e.push(t),i=new Array(t.length),n.push(i),s=0;s<t.length;s+=1)i[s]=Bg(t[s],e,n,r,o);return e.pop(),n.pop(),i}if(t&&t.toJSON&&(t=t.toJSON()),dd(t)==="object"&&t!==null){e.push(t),i={},n.push(i);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],i[l]=Bg(t[l],e,n,r,l);e.pop(),n.pop()}else i=t;return i}var Hg=new Kr;Hg.tokenize=function(t){return t.slice()};Hg.join=Hg.removeEmpty=function(t){return t};const wV=_t.create({name:"suggestEditMark",addAttributes(){return{id:{default:null},suggestion:{default:null}}},parseHTML(){return[{tag:"span[data-suggest-edit-id]",getAttrs:t=>t instanceof HTMLElement?{id:t.getAttribute("data-suggest-edit-id"),suggestion:t.getAttribute("data-suggestion")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),bV=Pt.create({name:"suggestEdit",addOptions(){return{HTMLAttributes:{},onSuggestEdit:()=>{}}},addExtensions(){return[wV]},addCommands(){return{setSuggestEdit:t=>({chain:e,state:n})=>{var a,l;const{from:r,to:o}=n.selection,s=n.doc.textBetween(r,o);if(r===o)return!1;const i=`suggest-${Date.now()}`;return(l=(a=this.options).onSuggestEdit)==null||l.call(a,s,t),e().setMark("suggestEditMark",{id:i,suggestion:t}).run()},removeSuggestEdit:()=>({chain:t})=>t().unsetMark("suggestEditMark").run()}},addProseMirrorPlugins(){return[new qt({key:new In("suggestEditPlugin"),props:{decorations(t){const e=[],n=t.doc;if(!n||n.nodeSize===0)return ot.empty;try{return n.descendants((r,o)=>{if(!r||!r.marks)return;const s=r.marks.find(u=>u.type.name==="suggestEditMark");if(!s||!r.isText)return;const i=r.text||"",a=s.attrs.suggestion||"";if(!i&&!a)return;const l=gV(i,a);let c=o;l.forEach(u=>{if(u.added)e.push(tn.widget(c,()=>{const d=document.createElement("span");return d.className="suggest-edit-addition",d.textContent=u.value,d},{side:1}));else if(u.removed){const d=c+u.value.length;d<=n.nodeSize-2&&e.push(tn.inline(c,d,{class:"suggest-edit-deletion"})),c+=u.value.length}else c+=u.value.length})}),ot.create(n,e)}catch(r){return console.warn("SuggestEdit decorations error:",r),ot.empty}}}})]}}),SV=_t.create({name:"commentMode",addOptions(){return{HTMLAttributes:{},onCommentActivated:()=>{},onCommentClicked:()=>{}}},addStorage(){return{activeCommentId:null}},addAttributes(){return{commentId:{default:null,parseHTML:t=>t.getAttribute("data-comment-id")||"",renderHTML:t=>({"data-comment-id":t.commentId})},commentType:{default:"general",parseHTML:t=>t.getAttribute("data-comment-type")||"general",renderHTML:t=>({"data-comment-type":t.commentType})},severity:{default:"medium",parseHTML:t=>t.getAttribute("data-severity")||"medium",renderHTML:t=>({"data-severity":t.severity})}}},parseHTML(){return[{tag:"span[data-comment-id]",getAttrs:t=>{const e=t;return{commentId:e.getAttribute("data-comment-id"),commentType:e.getAttribute("data-comment-type")||"general",severity:e.getAttribute("data-severity")||"medium"}}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t,{class:"comment-mode-highlight"}),0]},addCommands(){return{setCommentHighlight:(t,e="general",n="medium")=>({commands:r})=>t?r.setMark(this.name,{commentId:t,commentType:e,severity:n}):!1,unsetCommentHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.commentId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}});_t.create({name:"referencesMode",addOptions(){return{HTMLAttributes:{},onReferenceActivated:()=>{},onReferenceClicked:()=>{}}},addStorage(){return{activeReferenceId:null}},addAttributes(){return{referenceId:{default:null,parseHTML:t=>t.getAttribute("data-reference-id")||"",renderHTML:t=>({"data-reference-id":t.referenceId})},referenceType:{default:"citation",parseHTML:t=>t.getAttribute("data-reference-type")||"citation",renderHTML:t=>({"data-reference-type":t.referenceType})},sourceText:{default:"",parseHTML:t=>t.getAttribute("data-source-text")||"",renderHTML:t=>({"data-source-text":t.sourceText})},targetSentence:{default:"",parseHTML:t=>t.getAttribute("data-target-sentence")||"",renderHTML:t=>({"data-target-sentence":t.targetSentence})}}},parseHTML(){return[{tag:"span[data-reference-id]",getAttrs:t=>{const e=t;return{referenceId:e.getAttribute("data-reference-id"),referenceType:e.getAttribute("data-reference-type")||"citation",sourceText:e.getAttribute("data-source-text")||"",targetSentence:e.getAttribute("data-target-sentence")||""}}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t,{class:"references-mode-highlight"}),0]},addCommands(){return{setReferenceHighlight:(t,e="citation",n="",r="")=>({commands:o})=>t?o.setMark(this.name,{referenceId:t,referenceType:e,sourceText:n,targetSentence:r}):!1,unsetReferenceHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.referenceId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}});const CV=_t.create({name:"flowMode",addOptions(){return{HTMLAttributes:{},onConnectionActivated:()=>{},onConnectionClicked:()=>{}}},addStorage(){return{activeConnectionId:null}},addAttributes(){return{sentenceId:{default:null,parseHTML:t=>t.getAttribute("data-sentence-id")||"",renderHTML:t=>({"data-sentence-id":t.sentenceId})},connectionStrength:{default:0,parseHTML:t=>{const e=t.getAttribute("data-connection-strength");return e?parseFloat(e):0},renderHTML:t=>({"data-connection-strength":String(t.connectionStrength)})},connectedSentences:{default:"[]",parseHTML:t=>t.getAttribute("data-connected-sentences")||"[]",renderHTML:t=>({"data-connected-sentences":t.connectedSentences})}}},parseHTML(){return[{tag:"span[data-sentence-id]",getAttrs:t=>{const e=t;return{sentenceId:e.getAttribute("data-sentence-id"),connectionStrength:parseFloat(e.getAttribute("data-connection-strength")||"0"),connectedSentences:e.getAttribute("data-connected-sentences")||"[]"}}}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t,{class:"flow-mode-highlight"}),0]},addCommands(){return{setSentenceHighlight:(t,e=0,n=[])=>({commands:r})=>t?r.setMark(this.name,{sentenceId:t,connectionStrength:e,connectedSentences:JSON.stringify(n)}):!1,unsetSentenceHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.sentenceId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)}}}}),kV=_t.create({name:"sentenceConnectionMode",addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{connectionId:{default:null,parseHTML:t=>t.getAttribute("data-connection-id")||"",renderHTML:t=>({"data-connection-id":t.connectionId})},connectionStrength:{default:0,parseHTML:t=>{const e=t.getAttribute("data-connection-strength");return e?parseFloat(e):0},renderHTML:t=>({"data-connection-strength":String(t.connectionStrength)})},reason:{default:"",parseHTML:t=>t.getAttribute("data-connection-reason")||"",renderHTML:t=>({"data-connection-reason":t.reason})}}},parseHTML(){return[{tag:"span[data-connection-id]",getAttrs:t=>{const e=t;return{connectionId:e.getAttribute("data-connection-id"),connectionStrength:parseFloat(e.getAttribute("data-connection-strength")||"0"),reason:e.getAttribute("data-connection-reason")||""}}}]},renderHTML({HTMLAttributes:t,mark:e}){const n=e.attrs.connectionStrength;let r="sentence-connection-weak";return n>=.7?r="sentence-connection-strong":n>=.4&&(r="sentence-connection-moderate"),["span",nt(this.options.HTMLAttributes,t,{class:`sentence-connection ${r}`}),0]},addCommands(){return{setSentenceConnectionHighlight:(t,e=0,n="")=>({commands:r})=>t?r.setMark(this.name,{connectionId:t,connectionStrength:e,reason:n}):!1,unsetSentenceConnectionHighlight:t=>({tr:e,dispatch:n})=>{if(!t)return!1;const r=[];return e.doc.descendants((o,s)=>{const i=o.marks.find(a=>a.type.name===this.name&&a.attrs.connectionId===t);i&&r.push({mark:i,range:{from:s,to:s+o.nodeSize}})}),r.forEach(({mark:o,range:s})=>{e.removeMark(s.from,s.to,o)}),n==null?void 0:n(e)},clearAllSentenceConnectionHighlights:()=>({tr:t,dispatch:e})=>{const n=[];return t.doc.descendants((r,o)=>{const s=r.marks.find(i=>i.type.name===this.name);s&&n.push({mark:s,range:{from:o,to:o+r.nodeSize}})}),n.forEach(({mark:r,range:o})=>{t.removeMark(o.from,o.to,r)}),e==null?void 0:e(t)}}}}),EV="modulepreload",TV=function(t){return"/Ripple/"+t},g1={},ma=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=TV(l),l in g1)return;g1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":EV,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},NV=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>_a);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class w0 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class MV extends w0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _V extends w0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class PV extends w0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ug;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ug||(Ug={}));var RV=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class AV{constructor(e,{headers:n={},customFetch:r,region:o=Ug.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=NV(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return RV(this,void 0,void 0,function*(){try{const{headers:o,method:s,body:i}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=i):typeof i=="string"?(a["Content-Type"]="text/plain",c=i):typeof FormData<"u"&&i instanceof FormData?c=i:(a["Content-Type"]="application/json",c=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:c}).catch(g=>{throw new MV(g)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new _V(u);if(!u.ok)throw new PV(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield u.json():h==="application/octet-stream"?m=yield u.blob():h==="text/event-stream"?m=u:h==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(o){return{data:null,error:o}}})}}var Zt={},b0={},mh={},zc={},gh={},vh={},OV=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ga=OV();const IV=ga.fetch,rP=ga.fetch.bind(ga),oP=ga.Headers,jV=ga.Request,DV=ga.Response,_a=Object.freeze(Object.defineProperty({__proto__:null,Headers:oP,Request:jV,Response:DV,default:rP,fetch:IV},Symbol.toStringTag,{value:"Module"})),LV=$O(_a);var yh={};Object.defineProperty(yh,"__esModule",{value:!0});let $V=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};yh.default=$V;var sP=Rn&&Rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vh,"__esModule",{value:!0});const FV=sP(LV),zV=sP(yh);let BV=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=FV.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var i,a,l;let c=null,u=null,d=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const v=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),x=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await s.text();try{c=JSON.parse(v),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,m="OK")}catch{s.status===404&&v===""?(h=204,m="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,m="OK"),c&&this.shouldThrowOnError)throw new zV.default(c)}return{error:c,data:u,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(o=o.catch(s=>{var i,a,l;return{error:{message:`${(i=s==null?void 0:s.name)!==null&&i!==void 0?i:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}};vh.default=BV;var HV=Rn&&Rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gh,"__esModule",{value:!0});const UV=HV(vh);let VV=class extends UV.default{select(e){let n=!1;const r=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:s=o}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:o=r}={}){const s=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:s=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};gh.default=VV;var WV=Rn&&Rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zc,"__esModule",{value:!0});const KV=WV(gh);let qV=class extends KV.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:o}={}){let s="";o==="plain"?s="pl":o==="phrase"?s="ph":o==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};zc.default=qV;var GV=Rn&&Rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mh,"__esModule",{value:!0});const Ya=GV(zc);let YV=class{constructor(e,{headers:n={},schema:r,fetch:o}){this.url=e,this.headers=n,this.schema=r,this.fetch=o}select(e,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let s=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new Ya.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const o="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const i=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ya.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:s=!0}={}){const i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ya.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),this.headers.Prefer=o.join(","),new Ya.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ya.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};mh.default=YV;var xh={},wh={};Object.defineProperty(wh,"__esModule",{value:!0});wh.version=void 0;wh.version="0.0.0-automated";Object.defineProperty(xh,"__esModule",{value:!0});xh.DEFAULT_HEADERS=void 0;const JV=wh;xh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${JV.version}`};var iP=Rn&&Rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(b0,"__esModule",{value:!0});const XV=iP(mh),QV=iP(zc),ZV=xh;let eW=class aP{constructor(e,{headers:n={},schema:r,fetch:o}={}){this.url=e,this.headers=Object.assign(Object.assign({},ZV.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=o}from(e){const n=new URL(`${this.url}/${e}`);return new XV.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new aP(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:o=!1,count:s}={}){let i;const a=new URL(`${this.url}/rpc/${e}`);let l;r||o?(i=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(i="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new QV.default({method:i,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};b0.default=eW;var Pa=Rn&&Rn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.PostgrestError=Zt.PostgrestBuilder=Zt.PostgrestTransformBuilder=Zt.PostgrestFilterBuilder=Zt.PostgrestQueryBuilder=Zt.PostgrestClient=void 0;const lP=Pa(b0);Zt.PostgrestClient=lP.default;const cP=Pa(mh);Zt.PostgrestQueryBuilder=cP.default;const uP=Pa(zc);Zt.PostgrestFilterBuilder=uP.default;const dP=Pa(gh);Zt.PostgrestTransformBuilder=dP.default;const fP=Pa(vh);Zt.PostgrestBuilder=fP.default;const hP=Pa(yh);Zt.PostgrestError=hP.default;var tW=Zt.default={PostgrestClient:lP.default,PostgrestQueryBuilder:cP.default,PostgrestFilterBuilder:uP.default,PostgrestTransformBuilder:dP.default,PostgrestBuilder:fP.default,PostgrestError:hP.default};const{PostgrestClient:nW,PostgrestQueryBuilder:NQ,PostgrestFilterBuilder:MQ,PostgrestTransformBuilder:_Q,PostgrestBuilder:PQ,PostgrestError:RQ}=tW,rW="2.11.2",oW={"X-Client-Info":`realtime-js/${rW}`},sW="1.0.0",pP=1e4,iW=1e3;var Zi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Zi||(Zi={}));var cn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(cn||(cn={}));var Bn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bn||(Bn={}));var Vg;(function(t){t.websocket="websocket"})(Vg||(Vg={}));var gs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(gs||(gs={}));class aW{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),s=n.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+o));i=i+o;const l=r.decode(e.slice(i,i+s));i=i+s;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class mP{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ue||(Ue={}));const v1=(t,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,i)=>(s[i]=lW(i,t,e,o),s),{})},lW=(t,e,n,r)=>{const o=e.find(a=>a.name===t),s=o==null?void 0:o.type,i=n[t];return s&&!r.includes(s)?gP(s,i):Wg(i)},gP=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return fW(e,n)}switch(t){case Ue.bool:return cW(e);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return uW(e);case Ue.json:case Ue.jsonb:return dW(e);case Ue.timestamp:return hW(e);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return Wg(e);default:return Wg(e)}},Wg=t=>t,cW=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},uW=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dW=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},fW=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const i=t.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(a=>gP(e,a))}return t},hW=t=>typeof t=="string"?t.replace(" ","T"):t,vP=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Vp{constructor(e,n,r={},o=pP){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var y1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(y1||(y1={}));class Nl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nl.syncState(this.state,o,s,i),this.pendingDiffs.forEach(l=>{this.state=Nl.syncDiff(this.state,l,s,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:s,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Nl.syncDiff(this.state,o,s,i),a())}),this.onJoin((o,s,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:i})}),this.onLeave((o,s,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const s=this.cloneDeep(e),i=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{i[c]||(l[c]=u)}),this.map(i,(c,u)=>{const d=s[c];if(d){const h=u.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=u.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(a[c]=g),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,o)}static syncDiff(e,n,r,o){const{joins:s,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(m=>m.presence_ref),h=u.filter(m=>d.indexOf(m.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(i,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,o(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var x1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(x1||(x1={}));var w1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(w1||(w1={}));var _r;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(_r||(_r={}));class S0{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Vp(this,Bn.join,this.params,this.timeout),this.rejoinTimer=new mP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bn.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Nl(this),this.broadcastEndpointURL=vP(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i,private:a}}=this.params;this._onError(u=>e==null?void 0:e(_r.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(_r.CLOSED));const l={},c={broadcast:s,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&o!==void 0?o:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(_r.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,g=[];for(let v=0;v<m;v++){const x=h[v],{filter:{event:y,schema:w,table:b,filter:S}}=x,C=u&&u[v];if(C&&C.event===y&&C.schema===w&&C.table===b&&C.filter===S)g.push(Object.assign(Object.assign({},x),{id:C.id}));else{this.unsubscribe(),e==null||e(_r.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(_r.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(_r.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_r.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=c.body)===null||o===void 0?void 0:o.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var i,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=cn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const o=new Vp(this,Bn.leave,{},e);o.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const o=new AbortController,s=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(s),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Vp(this,e,n,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,s;const i=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Bn;if(r&&[a,l,c,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(m=>m.callback(h,r)):(s=this.bindings[i])===null||s===void 0||s.filter(m=>{var g,v,x,y,w,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const S=m.id,C=(g=m.filter)===null||g===void 0?void 0:g.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(w=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===cn.closed}_isJoined(){return this.state===cn.joined}_isJoining(){return this.state===cn.joining}_isLeaving(){return this.state===cn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),s={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&S0.isEqual(o.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bn.close,{},e)}_onError(e){this._on(Bn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=v1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=v1(e.columns,e.old_record)),n}}const pW=()=>{},mW=typeof WebSocket<"u",gW=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vW{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=oW,this.params={},this.timeout=pP,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=pW,this.conn=null,this.sendBuffer=[],this.serializer=new aW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>ma(async()=>{const{default:l}=await Promise.resolve().then(()=>_a);return{default:l}},void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${Vg.websocket}`,this.httpEndpoint=vP(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,i)=>i(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mP(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(mW){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new yW(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ma(async()=>{const{default:e}=await import("./browser-Cwss7Hpw.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sW}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Zi.connecting:return gs.Connecting;case Zi.open:return gs.Open;case Zi.closing:return gs.Closing;default:return gs.Closed}}isConnected(){return this.connectionState()===gs.Open}channel(e,n={config:{}}){const r=new S0(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:o,ref:s}=e,i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(o=>{n&&o.updateJoinPayload({access_token:n}),o.joinedOnce&&o._isJoined()&&o._push(Bn.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(iW,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:o,payload:s,ref:i}=n;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(o,s,i)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([gW],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class yW{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Zi.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class C0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class xW extends C0{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Kg extends C0{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var wW=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const yP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>_a);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},bW=()=>wW(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ma(()=>Promise.resolve().then(()=>_a),void 0)).Response:Response}),qg=t=>{if(Array.isArray(t))return t.map(n=>qg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=qg(r)}),e};var ni=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Wp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),SW=(t,e,n)=>ni(void 0,void 0,void 0,function*(){const r=yield bW();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{e(new xW(Wp(o),t.status||500))}).catch(o=>{e(new Kg(Wp(o),o))}):e(new Kg(Wp(t),t))}),CW=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))};function Bc(t,e,n,r,o,s){return ni(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(n,CW(e,r,o,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>SW(l,a,r))})})}function cf(t,e,n,r){return ni(this,void 0,void 0,function*(){return Bc(t,"GET",e,n,r)})}function fo(t,e,n,r,o){return ni(this,void 0,void 0,function*(){return Bc(t,"POST",e,r,o,n)})}function kW(t,e,n,r,o){return ni(this,void 0,void 0,function*(){return Bc(t,"PUT",e,r,o,n)})}function EW(t,e,n,r){return ni(this,void 0,void 0,function*(){return Bc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function xP(t,e,n,r,o){return ni(this,void 0,void 0,function*(){return Bc(t,"DELETE",e,r,o,n)})}var Xt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const TW={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},b1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NW{constructor(e,n={},r,o){this.url=e,this.headers=n,this.bucketId=r,this.fetch=yP(o)}uploadOrUpdate(e,n,r,o){return Xt(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},b1),o);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o!=null&&o.headers&&(a=Object.assign(Object.assign({},a),o.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return Xt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:b1.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(mt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Xt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const s=yield fo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new C0("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Xt(this,void 0,void 0,function*(){try{return{data:yield fo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}copy(e,n,r){return Xt(this,void 0,void 0,function*(){try{return{data:{path:(yield fo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return Xt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),s=yield fo(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return Xt(this,void 0,void 0,function*(){try{const o=yield fo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${s}`):null})),error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}download(e,n){return Xt(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield cf(this.fetch,`${this.url}/${o}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(mt(a))return{data:null,error:a};throw a}})}info(e){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield cf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:qg(r),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}exists(e){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield EW(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(mt(r)&&r instanceof Kg){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&o.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&o.push(l);let c=o.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield xP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Xt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},TW),n),{prefix:e||""});return{data:yield fo(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const MW="2.7.1",_W={"X-Client-Info":`storage-js/${MW}`};var hi=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class PW{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},_W),n),this.fetch=yP(r)}listBuckets(){return hi(this,void 0,void 0,function*(){try{return{data:yield cf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(mt(e))return{data:null,error:e};throw e}})}getBucket(e){return hi(this,void 0,void 0,function*(){try{return{data:yield cf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return hi(this,void 0,void 0,function*(){try{return{data:yield fo(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return hi(this,void 0,void 0,function*(){try{return{data:yield kW(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return hi(this,void 0,void 0,function*(){try{return{data:yield fo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return hi(this,void 0,void 0,function*(){try{return{data:yield xP(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}}class RW extends PW{constructor(e,n={},r){super(e,n,r)}from(e){return new NW(this.url,this.headers,e,this.fetch)}}const AW="2.49.4";let ul="";typeof Deno<"u"?ul="deno":typeof document<"u"?ul="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ul="react-native":ul="node";const OW={"X-Client-Info":`supabase-js-${ul}/${AW}`},IW={headers:OW},jW={schema:"public"},DW={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},LW={};var $W=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const FW=t=>{let e;return t?e=t:typeof fetch>"u"?e=rP:e=fetch,(...n)=>e(...n)},zW=()=>typeof Headers>"u"?oP:Headers,BW=(t,e,n)=>{const r=FW(n),o=zW();return(s,i)=>$W(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new o(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},i),{headers:c}))})};var HW=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function UW(t){return t.replace(/\/$/,"")}function VW(t,e){const{db:n,auth:r,realtime:o,global:s}=t,{db:i,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),o),global:Object.assign(Object.assign({},c),s),accessToken:()=>HW(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const wP="2.69.1",bi=30*1e3,Gg=3,Kp=Gg*bi,WW="http://localhost:9999",KW="supabase.auth.token",qW={"X-Client-Info":`gotrue-js/${wP}`},Yg="X-Supabase-Api-Version",bP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GW=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,YW=6e5;class k0 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class JW extends k0{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function XW(t){return ke(t)&&t.name==="AuthApiError"}class SP extends k0{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zo extends k0{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class oo extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function QW(t){return ke(t)&&t.name==="AuthSessionMissingError"}class qp extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lu extends Zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $u extends Zo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ZW(t){return ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class S1 extends Zo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jg extends Zo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Gp(t){return ke(t)&&t.name==="AuthRetryableFetchError"}class C1 extends Zo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ml extends Zo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const k1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),E1=` 	
\r=`.split(""),e7=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<E1.length;e+=1)t[E1[e].charCodeAt(0)]=-2;for(let e=0;e<k1.length;e+=1)t[k1[e].charCodeAt(0)]=e;return t})();function CP(t,e,n){const r=e7[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function T1(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=i=>{r7(i,r,n)};for(let i=0;i<t.length;i+=1)CP(t.charCodeAt(i),o,s);return e.join("")}function t7(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function n7(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}t7(r,e)}}function r7(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function o7(t){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)CP(t.charCodeAt(o),n,r);return new Uint8Array(e)}function s7(t){const e=[];return n7(t,n=>e.push(n)),new Uint8Array(e)}function i7(t){return Math.round(Date.now()/1e3)+t}function a7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ir=()=>typeof window<"u"&&typeof document<"u",ls={tested:!1,writable:!1},_l=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ls.tested)return ls.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ls.tested=!0,ls.writable=!0}catch{ls.tested=!0,ls.writable=!1}return ls.writable};function l7(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const kP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>_a);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},c7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",EP=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Fu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zu=async(t,e)=>{await t.removeItem(e)};class bh{constructor(){this.promise=new bh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}bh.promiseConstructor=Promise;function Yp(t){const e=t.split(".");if(e.length!==3)throw new Ml("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!GW.test(e[r]))throw new Ml("JWT not in base64url format");return{header:JSON.parse(T1(e[0])),payload:JSON.parse(T1(e[1])),signature:o7(e[2]),raw:{header:e[0],payload:e[1]}}}async function u7(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function d7(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await t(s);if(!e(s,null,i)){r(i);return}}catch(i){if(!e(s,i)){o(i);return}}})()})}function f7(t){return("0"+t.toString(16)).substr(-2)}function h7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let s=0;s<56;s++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,f7).join("")}async function p7(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function m7(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await p7(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pi(t,e,n=!1){const r=h7();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await EP(t,`${e}-code-verifier`,o);const s=await m7(r);return[s,r===s?"plain":"s256"]}const g7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v7(t){const e=t.headers.get(Yg);if(!e||!e.match(g7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function y7(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function x7(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var w7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ds=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b7=[502,503,504];async function N1(t){var e;if(!c7(t))throw new Jg(ds(t),0);if(b7.includes(t.status))throw new Jg(ds(t),t.status);let n;try{n=await t.json()}catch(s){throw new SP(ds(s),s)}let r;const o=v7(t);if(o&&o.getTime()>=bP["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new C1(ds(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new oo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0))throw new C1(ds(n),t.status,n.weak_password.reasons);throw new JW(ds(n),t.status||500,r)}const S7=(t,e,n,r)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function _e(t,e,n,r){var o;const s=Object.assign({},r==null?void 0:r.headers);s[Yg]||(s[Yg]=bP["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await C7(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function C7(t,e,n,r,o,s){const i=S7(e,r,o,s);let a;try{a=await t(n,Object.assign({},i))}catch(l){throw console.error(l),new Jg(ds(l),0)}if(a.ok||await N1(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await N1(l)}}function so(t){var e;let n=null;N7(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=i7(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function M1(t){const e=so(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function go(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function k7(t){return{data:t,error:null}}function E7(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s}=t,i=w7(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:s},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function T7(t){return t}function N7(t){return t.access_token&&t.refresh_token&&t.expires_in}var M7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class _7{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=kP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:go})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=M7(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:E7,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:go})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,s,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:T7});if(u.error)throw u.error;const d=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);c[`${x}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(ke(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:go})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:go})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:go})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}}const P7={getItem:t=>_l()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{_l()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{_l()&&globalThis.localStorage.removeItem(t)}};function _1(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function R7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const mi={debug:!!(globalThis&&_l()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class TP extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class A7 extends TP{}async function O7(t,e,n){mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),mi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw mi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new A7(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(mi.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}R7();const I7={url:WW,storageKey:KW,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qW,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function P1(t,e,n){return await n()}class dc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dc.nextInstanceID,dc.nextInstanceID+=1,this.instanceID>0&&ir()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},I7),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new _7({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=kP(o.fetch),this.lock=o.lock||P1,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:ir()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=O7:this.lock=P1,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:_l()?this.storage=P7:(this.memoryStorage={},this.storage=_1(this.memoryStorage)):(this.memoryStorage={},this.storage=_1(this.memoryStorage)),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${wP}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=l7(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ir()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ZW(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ke(n)?{error:n}:{error:new SP("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const s=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:so}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ke(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,o;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await pi(this.storage,this.storageKey)),s=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:so})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(o=h==null?void 0:h.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:so})}else throw new Lu("You must provide either an email or phone number and a password");const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:i,options:a}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:M1})}else if("phone"in e){const{phone:s,password:i,options:a}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:M1})}else throw new Lu("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new qp}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Fu(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:s,error:i}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:so});if(await zu(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new qp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:i})}catch(s){if(ke(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:s,nonce:i}=e,a=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:so}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new qp}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,s,i;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await pi(this.storage,this.storageKey));const{error:d}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(o=l==null?void 0:l.data)!==null&&o!==void 0?o:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Lu("You must provide either an email or phone number.")}catch(a){if(ke(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let o,s;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:so});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ke(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let s=null,i=null;return this.flowType==="pkce"&&([s,i]=await pi(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:k7})}catch(s){if(ke(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new oo;const{error:o}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:s}=e,{error:i}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:o,options:s}=e,{data:i,error:a}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Lu("You must provide either an email or phone number and a type")}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Fu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Kp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:go}):await this._useSession(async n=>{var r,o,s;const{data:i,error:a}=n;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oo}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:go})})}catch(n){if(ke(n))return QW(n)&&(await this._removeSession(),await zu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:s}=r;if(s)throw s;if(!o.session)throw new oo;const i=o.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await pi(this.storage,this.storageKey));const{data:c,error:u}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:go});if(u)throw u;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oo;const n=Date.now()/1e3;let r=n,o=!0,s=null;const{payload:i}=Yp(e.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ke(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:a}=n;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new oo;const{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ke(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ir())throw new $u("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $u(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new S1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $u("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new S1("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:s,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!i||!c)throw new $u("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const m=h-u;m*1e3<=bi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,u);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:o,access_token:s,expires_in:d,expires_at:h,refresh_token:i,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(ke(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Fu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{error:s};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(XW(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await zu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=a7(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:s},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await pi(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ke(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:o}=await this._useSession(async s=>{var i,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(o)throw o;return ir()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ke(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)throw i;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await d7(async o=>(o>0&&await u7(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:so})),(o,s)=>{const i=200*Math.pow(2,o);return s&&Gp(s)&&Date.now()+i-r<bi})}catch(r){if(this._debug(n,"error",r),ke(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ir()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Fu(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Kp;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Kp}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Gp(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new oo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new bh;const{data:s,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new oo;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(o,"error",s),ke(s)){const i={session:null,error:s};return Gp(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(i),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await EP(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await zu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ir()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/bi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${bi}ms, refresh threshold is ${Gg} ticks`),o<=Gg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof TP)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ir()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,i]=await pi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);o.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((o=l==null?void 0:l.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const{data:i,error:a}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(n){if(ke(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:s}=n;return s?{data:null,error:s}:await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ke(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),s=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Yp(o.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(i=>i.kid===e);if(r||(r=this.jwks.keys.find(i=>i.kid===e),r&&this.jwks_cached_at+YW>Date.now()))return r;const{data:o,error:s}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!o.keys||o.keys.length===0)throw new Ml("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),r=o.keys.find(i=>i.kid===e),!r)throw new Ml("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:o,payload:s,signature:i,raw:{header:a,payload:l}}=Yp(r);if(y7(s.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:o,signature:i},error:null}}const c=x7(o.alg),u=await this.fetchJwk(o.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,i,s7(`${a}.${l}`)))throw new Ml("Invalid JWT signature");return{data:{claims:s,header:o,signature:i},error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}}dc.nextInstanceID=0;const j7=dc;class D7 extends j7{constructor(e){super(e)}}var L7=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class $7{constructor(e,n,r){var o,s,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=UW(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:jW,realtime:LW,auth:Object.assign(Object.assign({},DW),{storageKey:l}),global:IW},u=VW(r??{},c);this.storageKey=(o=u.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=BW(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new nW(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new AV(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new RW(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return L7(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,storageKey:s,flowType:i,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new D7({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,flowType:i,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new vW(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const F7=(t,e,n)=>new $7(t,e,n),NP="https://xkatypsllhdujlbtcjno.supabase.co",MP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhrYXR5cHNsbGhkdWpsYnRjam5vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ2OTgzODgsImV4cCI6MjA2MDI3NDM4OH0.zvlh3wLQXiBPMnRvx7zFgrTR3dE6k_65a9DdnLh0NnI";console.log("Supabase URL exists:",!!NP);console.log("Supabase Anon Key exists:",!!MP);const ft=F7(NP,MP);var Re=(t=>(t.LOGIN="login",t.LOGOUT="logout",t.FILE_SAVE="file_save",t.FILE_OPEN="file_open",t.FLOW_MODE_ENTER="flow_mode_enter",t.FLOW_MODE_EXIT="flow_mode_exit",t.WRITE_MODE_ENTER="write_mode_enter",t.WRITE_MODE_EXIT="write_mode_exit",t.FEEDBACK_MODE_ENTER="feedback_mode_enter",t.FEEDBACK_MODE_EXIT="feedback_mode_exit",t.EDITOR_CHANGE="editor_change",t.TEXT_SELECTION="text_selection",t.TOOLBAR_ACTION="toolbar_action",t.COMMENT_ADD="comment_add",t.COMMENT_EDIT="comment_edit",t.COMMENT_DELETE="comment_delete",t.INSIGHT_VIEW="insight_view",t.AI_INTERACTION="ai_interaction",t.FEEDBACK_REQUEST="feedback_request",t.FEEDBACK_ANALYSIS_START="feedback_analysis_start",t.FEEDBACK_ANALYSIS_COMPLETE="feedback_analysis_complete",t.CUSTOM_ANALYSIS_START="custom_analysis_start",t.CUSTOM_ANALYSIS_COMPLETE="custom_analysis_complete",t.FLOW_SENTENCE_HOVER="flow_sentence_hover",t.FLOW_SENTENCE_CLICK="flow_sentence_click",t.ERROR="error",t))(Re||{});async function Ge(t,e,n={},r){if(!t){console.warn("Attempted to log event without user ID");return}!r&&n.file_id&&(r=n.file_id),console.log(" Logging event:",{eventType:e,userId:t.substring(0,8)+"...",fileId:r?r.substring(0,8)+"...":"none",eventData:{...n,sentence_text:n.sentence_text?n.sentence_text.toString().substring(0,50)+"...":void 0,sentence_preview:n.sentence_preview?n.sentence_preview.toString().substring(0,30)+"...":void 0}});try{const{error:o}=await ft.from("user_events").insert([{user_id:t,file_id:r,event_type:e,event_data:n}]);o?(console.error(" Error logging event:",o),console.error("Event details:",{eventType:e,userId:t,fileId:r,eventData:n})):console.log(" Event logged successfully:",e)}catch(o){console.error(" Failed to log event:",o),console.error("Event details:",{eventType:e,userId:t,fileId:r,eventData:n})}}class z7{constructor(e,n=10,r=5e3){He(this,"userId");He(this,"batchedEvents",[]);He(this,"batchSize");He(this,"flushInterval");He(this,"timer",null);this.userId=e,this.batchSize=n,this.flushInterval=r,this.startTimer()}addEvent(e,n={},r){!r&&n.file_id&&(r=n.file_id),this.batchedEvents.push({event_type:e,event_data:n,file_id:r,timestamp:Date.now()}),this.batchedEvents.length>=this.batchSize&&this.flush()}async flush(){if(this.batchedEvents.length===0)return;const e=[...this.batchedEvents];this.batchedEvents=[];try{const{error:n}=await ft.from("user_events").insert(e.map(r=>({user_id:this.userId,file_id:r.file_id,event_type:r.event_type,event_data:{...r.event_data,timestamp:r.timestamp}})));n&&(console.error("Error logging batch of events:",n),this.batchedEvents=[...e,...this.batchedEvents])}catch(n){console.error("Failed to log batch of events:",n),this.batchedEvents=[...e,...this.batchedEvents]}}updateUserId(e){this.flush(),this.userId=e}startTimer(){this.timer=setInterval(()=>{this.flush()},this.flushInterval)}dispose(){this.timer&&(clearInterval(this.timer),this.timer=null),this.flush()}}function B7(t="test-user-id",e="test-file-id"){console.log(" Testing event logging..."),Ge(t,"flow_sentence_hover",{sentence_text:"This is a test sentence for hover logging.",sentence_id:"test-sentence-123",connection_strength:.75,hover_time:new Date().toISOString(),sentence_length:42,sentence_preview:"This is a test sentence for hover..."},e),setTimeout(()=>{Ge(t,"flow_sentence_click",{sentence_text:"This is a test sentence for click logging.",sentence_id:"test-sentence-456",connection_strength:.85,click_time:new Date().toISOString(),sentence_length:43,sentence_preview:"This is a test sentence for click...",action:"enter_flow_sentence_mode"},e)},1e3),console.log(" Test events sent! Check console and database.")}async function H7(t=10){console.log(" Checking recent events...");try{const{data:e,error:n}=await ft.from("user_events").select(`
        id,
        event_type,
        event_data,
        created_at,
        users!inner(prolific_id)
      `).order("created_at",{ascending:!1}).limit(t);if(n){console.error(" Error fetching events:",n);return}return console.table(e==null?void 0:e.map(r=>{var o,s,i;return{time:new Date(r.created_at).toLocaleTimeString(),type:r.event_type,user:((o=r.users)==null?void 0:o.prolific_id)||"unknown",data_preview:((s=r.event_data)==null?void 0:s.sentence_preview)||((i=r.event_data)==null?void 0:i.analysis_type)||JSON.stringify(r.event_data).substring(0,50)+"..."}})),console.log(" Full event data:",e),e}catch(e){console.error(" Failed to fetch events:",e)}}typeof window<"u"&&(window.testEventLogging=B7,window.checkRecentEvents=H7,window.logEvent=Ge,window.EventType=Re);class U7{constructor(){He(this,"explanationCache",new Map);He(this,"loadingStates",new Set);He(this,"documentContext","");He(this,"paragraphTopics",{});He(this,"essayTopic","")}setDocumentContext(e){this.documentContext=e,this.explanationCache.clear()}setTopics(e,n){this.paragraphTopics=e,this.essayTopic=n,this.explanationCache.clear()}async handleHover(e,n){if(this.explanationCache.has(e))return this.explanationCache.get(e)||null;if(this.loadingStates.has(e))return null;this.loadingStates.add(e);try{const r=this.findParagraphTopicForSentence(e),s=(await Oz({sentence:e,documentContext:this.documentContext,connectionStrength:n,paragraphTopic:r,essayTopic:this.essayTopic||void 0})).explanation;return this.explanationCache.set(e,s),s}catch(r){console.error("Failed to get hover explanation:",r);let o;return n>=.8?o="Strong thematic and vocabulary connections":n>=.4?o="Moderate lexical overlap with main themes":o="Limited connections to main document themes",this.explanationCache.set(e,o),o}finally{this.loadingStates.delete(e)}}findParagraphTopicForSentence(e){const r=this.documentContext.split(/\n\s*\n/).filter(o=>o.trim());for(let o=0;o<r.length;o++)if(r[o].includes(e)){const i=`paragraph-${o}`,a=this.paragraphTopics[i];if(a)return console.log(` Found paragraph topic for sentence: "${a}"`),a;break}console.log(" No paragraph topic found for this sentence")}isLoading(e){return this.loadingStates.has(e)}clearCache(){this.explanationCache.clear(),this.loadingStates.clear()}}class V7{constructor(e,n,r,o){He(this,"editor");He(this,"state");He(this,"onModeChange");He(this,"flowHoverManager");He(this,"sentenceConnectionHighlights",new Map);He(this,"lastAnalyzedSentence",null);He(this,"userId");He(this,"fileId");He(this,"selectedSentenceTracker",null);He(this,"paragraphTopics",{});He(this,"sentenceFlowPopoverState",{isVisible:!1,position:{x:0,y:0},sentenceData:null});He(this,"sentenceFlowActionPanelState",{isVisible:!1,sentenceData:null});He(this,"popoverTimeout",null);He(this,"popoverHideTimeout",null);this.editor=e,this.onModeChange=n,this.userId=r,this.fileId=o,this.state={currentMode:"comments",commentHighlights:new Map,referenceHighlights:new Map,flowHighlights:new Map},this.flowHoverManager=new U7,this.setupPopoverEventListeners()}switchMode(e){var r;this.state.currentMode=e;const n=this.editor.view.dom.closest(".editor-container");n&&n.setAttribute("data-highlighting-mode",e),(r=this.onModeChange)==null||r.call(this,e)}getCurrentMode(){return this.state.currentMode}updateUserContext(e,n){this.userId=e,this.fileId=n}exitFlowSentenceMode(){this.hideSentenceFlowPopover(),this.hideSentenceFlowActionPanel(),this.editor.view.dom.querySelectorAll(".flow-sentence-selected").forEach(n=>{n.classList.remove("flow-sentence-selected")}),this.clearSentenceConnectionHighlights(),this.switchMode("flow")}showSentenceFlowPopover(e,n){this.popoverTimeout&&(clearTimeout(this.popoverTimeout),this.popoverTimeout=null),this.sentenceFlowPopoverState={isVisible:!0,position:e,sentenceData:n},this.onModeChange&&this.onModeChange(this.state.currentMode)}hideSentenceFlowPopover(){this.popoverTimeout&&(clearTimeout(this.popoverTimeout),this.popoverTimeout=null),this.popoverHideTimeout&&(clearTimeout(this.popoverHideTimeout),this.popoverHideTimeout=null),this.sentenceFlowPopoverState={isVisible:!1,position:{x:0,y:0},sentenceData:null},this.onModeChange&&this.onModeChange(this.state.currentMode)}getSentenceFlowPopoverState(){return this.sentenceFlowPopoverState}showSentenceFlowActionPanel(e){this.sentenceFlowActionPanelState={isVisible:!0,sentenceData:e},this.onModeChange&&this.onModeChange(this.state.currentMode)}hideSentenceFlowActionPanel(){this.sentenceFlowActionPanelState={isVisible:!1,sentenceData:null},this.onModeChange&&this.onModeChange(this.state.currentMode)}getSentenceFlowActionPanelState(){return this.sentenceFlowActionPanelState}addCommentHighlights(e){this.clearCommentHighlights(),e.forEach(n=>{if(n.from!==void 0&&n.to!==void 0){const r=n.issueType||"general",o=this.determineSeverity(n);this.editor.commands.setTextSelection({from:n.from,to:n.to}),this.editor.commands.setCommentHighlight(n.id,r,o),this.state.commentHighlights.set(n.id,{commentId:n.id,commentType:r,severity:o,position:{from:n.from,to:n.to},content:n.content})}})}clearCommentHighlights(){this.state.commentHighlights.forEach((e,n)=>{this.editor.commands.unsetCommentHighlight(n)}),this.state.commentHighlights.clear()}addReferenceHighlights(e){this.clearReferenceHighlights(),e.forEach(n=>{this.editor.commands.setTextSelection(n.position),this.editor.commands.setReferenceHighlight(n.id,n.type,n.sourceText,n.targetSentence),this.state.referenceHighlights.set(n.id,{referenceId:n.id,referenceType:n.type,sourceText:n.sourceText,targetSentence:n.targetSentence,position:n.position,content:this.editor.state.doc.textBetween(n.position.from,n.position.to)})})}clearReferenceHighlights(){this.state.referenceHighlights.forEach((e,n)=>{this.editor.commands.unsetReferenceHighlight(n)}),this.state.referenceHighlights.clear()}addFlowHighlights(e){this.clearFlowHighlights(),e.forEach(n=>{this.editor.commands.setTextSelection(n.position),this.editor.commands.setSentenceHighlight(n.id,n.connectionStrength,n.connectedSentences),this.state.flowHighlights.set(n.id,{sentenceId:n.id,connectionStrength:n.connectionStrength,connectedSentences:n.connectedSentences,position:n.position,content:this.editor.state.doc.textBetween(n.position.from,n.position.to)})})}clearFlowHighlights(){this.state.flowHighlights.forEach((e,n)=>{this.editor.commands.unsetSentenceHighlight(n)}),this.state.flowHighlights.clear()}setDocumentContext(e){this.flowHoverManager.setDocumentContext(e)}updateTopicsForHover(e,n){this.flowHoverManager.setTopics(e,n)}async handleFlowHover(e,n){return await this.flowHoverManager.handleHover(e,n)}isFlowHoverLoading(e){return this.flowHoverManager.isLoading(e)}clearFlowHoverCache(){this.flowHoverManager.clearCache()}setupFlowHoverListeners(){this.cleanupFlowHoverListeners();const e=this.editor.view.dom;e.addEventListener("mouseenter",this.handleFlowMouseEnter.bind(this),!0),e.addEventListener("mouseleave",this.handleFlowMouseLeave.bind(this),!0),e.addEventListener("click",this.handleFlowClick.bind(this),!0),document.addEventListener("keydown",this.handleKeyDown.bind(this))}cleanupFlowHoverListeners(){const e=this.editor.view.dom;e.removeEventListener("mouseenter",this.handleFlowMouseEnter.bind(this),!0),e.removeEventListener("mouseleave",this.handleFlowMouseLeave.bind(this),!0),e.removeEventListener("click",this.handleFlowClick.bind(this),!0),document.removeEventListener("keydown",this.handleKeyDown.bind(this))}setupPopoverEventListeners(){document.addEventListener("popover-mouse-enter",this.handlePopoverMouseEnter.bind(this)),document.addEventListener("popover-mouse-leave",this.handlePopoverMouseLeave.bind(this))}handlePopoverMouseEnter(){console.log(" Popover mouse enter - canceling hide timeout"),this.popoverHideTimeout&&(clearTimeout(this.popoverHideTimeout),this.popoverHideTimeout=null)}handlePopoverMouseLeave(){this.popoverHideTimeout=setTimeout(()=>{this.hideSentenceFlowPopover()},500)}handleKeyDown(e){e.key==="Escape"&&this.state.currentMode==="flow-sentence"&&(console.log(" Escape pressed, exiting flow-sentence mode"),e.preventDefault(),this.exitFlowSentenceMode())}async handleFlowMouseEnter(e){const n=e.target;if(n.classList.contains("flow-sentence-selected")&&this.state.currentMode==="flow-sentence"){const r=n.getAttribute("data-sentence-id")||"",o=parseFloat(n.getAttribute("data-connection-strength")||"0"),s=n.getAttribute("data-connected-sentences")||"[]";let i=n.textContent||"";const a=this.state.flowHighlights.get(r);a?(i=a.content,console.log(" Using stored complete sentence for popover:",i.substring(0,50))):console.warn(" No stored highlight found for popover, using DOM text:",i.substring(0,50));let l=[];try{l=JSON.parse(s)}catch(h){console.warn("Failed to parse connected sentences:",h)}const c=e,u=n.getBoundingClientRect(),d={x:Math.min(c.clientX+10,window.innerWidth-320),y:Math.min(u.bottom+5,window.innerHeight-180)};this.popoverTimeout=setTimeout(()=>{this.showSentenceFlowPopover(d,{text:i,connectionStrength:o,connectedSentences:l})},500)}else if(n.classList.contains("flow-mode-highlight")&&this.state.currentMode==="flow"){const r=n.getAttribute("data-sentence-id")||"",o=parseFloat(n.getAttribute("data-connection-strength")||"0");let s=n.textContent||"";const i=this.state.flowHighlights.get(r);i?(s=i.content,console.log(" Using stored complete sentence for hover:",s.substring(0,50))):console.warn(" No stored highlight found, using DOM text:",s.substring(0,50)),this.userId?(console.log(" Flow hover detected - logging event...",{sentencePreview:s.substring(0,50),connectionStrength:o,userId:this.userId.substring(0,8)+"...",fileId:this.fileId?this.fileId.substring(0,8)+"...":"none"}),await Ge(this.userId,Re.FLOW_SENTENCE_HOVER,{sentence_text:s,sentence_id:r,connection_strength:o,hover_time:new Date().toISOString(),sentence_length:s.length,sentence_preview:s.substring(0,100)},this.fileId)):console.warn(" Flow hover detected but no userId available for logging");try{const a=await this.flowHoverManager.handleHover(s,o);a?(n.setAttribute("data-explanation",a),console.log(" Explanation loaded:",a)):console.log(" No explanation returned")}catch(a){console.error("Failed to load hover explanation:",a)}}}handleFlowMouseLeave(e){e.target.classList.contains("flow-sentence-selected")&&this.state.currentMode==="flow-sentence"&&(console.log(" Flow-sentence-selected mouse leave detected, scheduling popover hide"),this.popoverTimeout&&(clearTimeout(this.popoverTimeout),this.popoverTimeout=null),this.popoverHideTimeout=setTimeout(()=>{this.hideSentenceFlowPopover()},300))}async handleFlowClick(e){var r,o,s;const n=e.target;if(console.log(" Click detected on element:",{tagName:n.tagName,classList:Array.from(n.classList),attributes:{"data-sentence-id":n.getAttribute("data-sentence-id"),"data-connection-strength":n.getAttribute("data-connection-strength")},currentMode:this.state.currentMode,textContent:(r=n.textContent)==null?void 0:r.substring(0,50)}),n.classList.contains("flow-mode-highlight")&&this.state.currentMode==="flow"){console.log(" Flow sentence clicked, entering flow-sentence mode"),e.preventDefault(),e.stopPropagation();let i=n.textContent||"",a=n.getAttribute("data-sentence-id")||"";const l=parseFloat(n.getAttribute("data-connection-strength")||"0"),c=this.state.flowHighlights.get(a);c?(i=c.content,console.log(" Using stored complete sentence for analysis:",i.substring(0,50))):console.warn(" No stored highlight found for analysis, using DOM text:",i.substring(0,50)),this.userId?(console.log(" Flow click detected - logging event...",{sentencePreview:i.substring(0,50),connectionStrength:l,userId:this.userId.substring(0,8)+"...",fileId:this.fileId?this.fileId.substring(0,8)+"...":"none"}),await Ge(this.userId,Re.FLOW_SENTENCE_CLICK,{sentence_text:i,sentence_id:a,connection_strength:l,click_time:new Date().toISOString(),sentence_length:i.length,sentence_preview:i.substring(0,100),action:"enter_flow_sentence_mode"},this.fileId)):console.warn(" Flow click detected but no userId available for logging");const u=this.editor.getText();if(console.log(" Sentence ID found:",a),!a){for(const[h,m]of this.state.flowHighlights)if(m.content===i){a=h,console.log(" Found sentence ID from stored highlights:",a);break}a||(a=`selected-${Date.now()}`,console.log(" Generated new sentence ID:",a))}const d=this.editor.view.dom.querySelector(".flow-sentence-selected");d&&(d.classList.remove("flow-sentence-selected"),console.log(" Removed previous selection")),n.classList.add("flow-sentence-selected"),console.log(" Added flow-sentence-selected class to element"),console.log(" Element classes after adding:",Array.from(n.classList)),this.switchMode("flow-sentence"),this.setAnalyzing(!0),this.lastAnalyzedSentence=i,this.selectedSentenceTracker=this.initializeSentenceTracker(i,a);try{console.log(" Making sentence flow analysis API call..."),console.log(" API call parameters:",{sentence:i.substring(0,100),documentLength:u.length,prompt:"Analyze this sentence in the context of the document"});const h=this.findParagraphTopicForSentence(i,u),m=await Ib({sentence:i,document:u,prompt:"Analyze this sentence in the context of the document",paragraphTopic:h});if(console.log(" API call successful! Full result:",m),console.log(" Result.result type:",typeof m.result),console.log(" Result.result length:",(o=m.result)==null?void 0:o.length),console.log(" Result.result content:",m.result),m.result&&Array.isArray(m.result)&&m.result.length>0){console.log(" About to apply connection highlights..."),console.log(" Connection data:",m.result);const g=m.result.map(v=>({...v,reason:`Connection strength: ${v.connectionStrength.toFixed(2)}`}));this.addSentenceConnectionHighlights(g),this.showSentenceFlowActionPanel({text:i,connectionStrength:m.result.length>0?m.result[0].connectionStrength:0,connectedSentences:m.result.map(v=>v.text),paragraphCohesion:m.paragraphCohesion,documentCohesion:m.documentCohesion})}else console.log(" No connections found or invalid result format"),console.log(" Result structure:",{hasResult:!!m.result,isArray:Array.isArray(m.result),length:(s=m.result)==null?void 0:s.length,type:typeof m.result}),this.showSentenceFlowActionPanel({text:i,connectionStrength:0,connectedSentences:[],paragraphCohesion:m.paragraphCohesion,documentCohesion:m.documentCohesion})}catch(h){console.error(" API call failed:",h),h instanceof Error&&console.error(" Error details:",h.message,h.stack)}finally{this.setAnalyzing(!1)}}else this.state.currentMode==="flow-sentence"?console.log(" Already in flow-sentence mode, ignoring click (panel stays persistent)"):console.log(" Click conditions not met:",{hasFlowClass:n.classList.contains("flow-mode-highlight"),isFlowMode:this.state.currentMode==="flow",currentMode:this.state.currentMode})}addSentenceConnectionHighlights(e){var n;console.log(" Adding sentence connection highlights:",e.length),console.log(" Current mode:",this.state.currentMode),console.log(" Editor container mode:",(n=this.editor.view.dom.closest(".editor-container"))==null?void 0:n.getAttribute("data-highlighting-mode")),console.log(" Available commands:",Object.keys(this.editor.commands)),console.log(" setSentenceConnectionHighlight available:",typeof this.editor.commands.setSentenceConnectionHighlight),this.clearSentenceConnectionHighlights(),e.forEach((r,o)=>{const s=`connection-${Date.now()}-${o}`;console.log(` Processing connection ${o+1}:`,{text:r.text.substring(0,50)+"...",position:r.position,connectionStrength:r.connectionStrength,connectionId:s});try{console.log(` Setting text selection for connection ${o+1}...`),this.editor.commands.setTextSelection(r.position),console.log(` Applying setSentenceConnectionHighlight for connection ${o+1}...`);const i=this.editor.commands.setSentenceConnectionHighlight(s,r.connectionStrength,r.reason);console.log(` Mark application ${i?"succeeded":"FAILED"} for connection ${o+1}`),i||console.error(` Failed to apply mark for connection ${o+1}`,{connectionId:s,connectionStrength:r.connectionStrength,reason:r.reason,position:r.position})}catch(i){console.error(` Exception while applying mark for connection ${o+1}:`,i),i instanceof Error&&console.error(" Error details:",i.message,i.stack)}this.sentenceConnectionHighlights.set(s,{connectionId:s,position:r.position,connectionStrength:r.connectionStrength,reason:r.reason,text:r.text}),console.log(` Added connection highlight: ${r.text.substring(0,30)}... (strength: ${r.connectionStrength})`)}),setTimeout(()=>{const r=this.editor.view.dom.querySelectorAll(".sentence-connection");console.log(" DOM Check: Found sentence-connection elements:",r.length),r.forEach((s,i)=>{var a;console.log(` Element ${i+1}:`,{classList:Array.from(s.classList),attributes:{"data-connection-id":s.getAttribute("data-connection-id"),"data-connection-strength":s.getAttribute("data-connection-strength"),"data-connection-reason":s.getAttribute("data-connection-reason")},computedStyle:{backgroundColor:window.getComputedStyle(s).backgroundColor,borderBottom:window.getComputedStyle(s).borderBottom},textContent:((a=s.textContent)==null?void 0:a.substring(0,30))+"..."})});const o=this.editor.view.dom.closest(".editor-container");console.log(" Editor container mode attribute:",o==null?void 0:o.getAttribute("data-highlighting-mode"))},100)}clearSentenceConnectionHighlights(){console.log(" Clearing sentence connection highlights"),this.editor.commands.clearAllSentenceConnectionHighlights(),this.sentenceConnectionHighlights.clear()}updateAnalyzedSentence(e){var n;console.log(" Updating analyzed sentence:",{oldSentence:((n=this.lastAnalyzedSentence)==null?void 0:n.substring(0,50))+"...",newSentence:e.substring(0,50)+"..."}),this.lastAnalyzedSentence=e}async redoSentenceFlowAnalysis(){if(!this.lastAnalyzedSentence){console.warn(" No previous sentence to reanalyze");return}console.log(" Redoing sentence flow analysis for:",this.lastAnalyzedSentence.substring(0,50)+"...");const e=this.editor.getText(),n=this.getCurrentTrackedSentenceText(),r=n||this.lastAnalyzedSentence;console.log(" Original sentence:",this.lastAnalyzedSentence.substring(0,50)+"..."),console.log(" Current sentence:",r.substring(0,50)+"..."),n&&n!==this.lastAnalyzedSentence&&console.log(" Sentence has been modified since original analysis"),this.clearSentenceConnectionHighlights(),this.setAnalyzing(!0);try{console.log(" Making redo sentence flow analysis API call..."),console.log(" Updated document length:",e.length);const o=this.findParagraphTopicForSentence(r,e),s=await Ib({sentence:r,document:e,prompt:"Analyze this sentence in the context of the updated document",paragraphTopic:o});if(s.result&&Array.isArray(s.result)&&s.result.length>0){console.log(" Applying updated connection highlights...");const i=s.result.map(a=>({...a,reason:`Connection strength: ${a.connectionStrength.toFixed(2)}`}));this.addSentenceConnectionHighlights(i),this.showSentenceFlowActionPanel({text:r,connectionStrength:s.result.length>0?s.result[0].connectionStrength:0,connectedSentences:s.result.map(a=>a.text),paragraphCohesion:s.paragraphCohesion,documentCohesion:s.documentCohesion})}else console.log(" No connections found in updated analysis"),this.showSentenceFlowActionPanel({text:r,connectionStrength:0,connectedSentences:[],paragraphCohesion:s.paragraphCohesion,documentCohesion:s.documentCohesion})}catch(o){console.error(" Redo API call failed:",o),o instanceof Error&&console.error(" Error details:",o.message,o.stack)}finally{this.setAnalyzing(!1)}}determineSeverity(e){return e.content.toLowerCase().includes("critical")||e.content.toLowerCase().includes("major")?"high":e.content.toLowerCase().includes("minor")||e.content.toLowerCase().includes("suggestion")?"low":"medium"}onTextChange(){this.updatePositionsAfterEdit()}updatePositionsAfterEdit(){console.log("Text changed, may need to update highlight positions")}getHighlightData(e){switch(e){case"comments":return this.state.commentHighlights;case"flow":case"flow-sentence":return this.state.flowHighlights;default:return new Map}}clearAllHighlights(){this.clearCommentHighlights(),this.clearReferenceHighlights(),this.clearFlowHighlights()}cycleMode(){const e=["comments","flow","flow-sentence"],r=(e.indexOf(this.state.currentMode)+1)%e.length;this.switchMode(e[r])}exportState(){return JSON.parse(JSON.stringify({currentMode:this.state.currentMode,commentHighlights:Array.from(this.state.commentHighlights.entries()),referenceHighlights:Array.from(this.state.referenceHighlights.entries()),flowHighlights:Array.from(this.state.flowHighlights.entries())}))}importState(e){this.state.currentMode=e.currentMode||"none",this.state.commentHighlights=new Map(e.commentHighlights||[]),this.state.referenceHighlights=new Map(e.referenceHighlights||[]),this.state.flowHighlights=new Map(e.flowHighlights||[]),this.reapplyAllHighlights()}reapplyAllHighlights(){this.state.commentHighlights.forEach(e=>{this.editor.commands.setTextSelection(e.position),this.editor.commands.setCommentHighlight(e.commentId,e.commentType,e.severity)}),this.state.referenceHighlights.forEach(e=>{this.editor.commands.setTextSelection(e.position),this.editor.commands.setReferenceHighlight(e.referenceId,e.referenceType,e.sourceText,e.targetSentence)}),this.state.flowHighlights.forEach(e=>{this.editor.commands.setTextSelection(e.position),this.editor.commands.setSentenceHighlight(e.sentenceId,e.connectionStrength,e.connectedSentences)}),this.switchMode(this.state.currentMode)}setAnalyzing(e){const n=this.editor.view.dom.closest(".editor-container");n&&n.setAttribute("data-analyzing",e.toString())}initializeSentenceTracker(e,n){let r=null;const o=this.state.flowHighlights.get(n);if(o)r=o.position;else{const i=this.editor.getText().indexOf(e);i!==-1&&(r={from:i,to:i+e.length})}return console.log(" Initialized sentence tracker:",{originalText:e.substring(0,50)+"...",sentenceId:n,position:r}),{originalText:e,selectedSentenceId:n,position:r}}getCurrentTrackedSentenceText(){if(!this.selectedSentenceTracker)return console.warn(" No sentence tracker initialized"),null;if(this.selectedSentenceTracker.selectedSentenceId){const i=this.state.flowHighlights.get(this.selectedSentenceTracker.selectedSentenceId);if(i){const a=this.editor.state.doc.textBetween(i.position.from,i.position.to);if(a.trim())return console.log(" Found current sentence via flow highlight:",a.substring(0,50)+"..."),a}}if(this.selectedSentenceTracker.position)try{const i=this.editor.state.doc.textBetween(this.selectedSentenceTracker.position.from,this.selectedSentenceTracker.position.to);if(i.trim())return console.log(" Found current sentence via stored position:",i.substring(0,50)+"..."),i}catch{console.warn(" Position out of bounds, trying fallback methods")}const e=this.editor.getText(),n=this.selectedSentenceTracker.originalText.toLowerCase().split(/\s+/).filter(i=>i.length>2),r=e.split(/[.!?]+/).filter(i=>i.trim().length>10);let o=null,s=0;for(const i of r){const a=i.toLowerCase().split(/\s+/),l=n.filter(u=>a.some(d=>d.includes(u)||u.includes(d))).length,c=n.length>0?l/n.length:0;c>s&&c>.6&&(s=c,o=i.trim())}return o?(console.log(` Found current sentence via fuzzy matching (${(s*100).toFixed(1)}% similarity):`,o.substring(0,50)+"..."),o):(console.warn(" Could not find updated sentence, using original text"),this.selectedSentenceTracker.originalText)}setParagraphTopics(e){this.paragraphTopics={...e},console.log(" Updated paragraph topics in HighlightingManager:",this.paragraphTopics)}findParagraphTopicForSentence(e,n){const r=n.split(/\n\s*\n/).filter(o=>o.trim());for(let o=0;o<r.length;o++)if(r[o].includes(e.trim())){const i=`paragraph-${o}`,a=this.paragraphTopics[i];if(a)return console.log(` Found paragraph topic for sentence: "${a}"`),a;break}console.log(" No paragraph topic found for this sentence")}}function W7({sentenceText:t,connectedSentences:e,paragraphCohesion:n,documentCohesion:r,onClose:o,onUpdateSentence:s,editor:i,isAnalyzing:a=!1,userId:l,fileId:c}){const[u,d]=p.useState({x:70,y:window.innerHeight*.15}),[h,m]=p.useState(!1),[g,v]=p.useState({x:0,y:0}),x=p.useRef(null),[y,w]=p.useState(!0),[b,S]=p.useState(!0),[C,E]=p.useState(!1),[k,T]=p.useState(!1),[R,O]=p.useState(""),K=j=>{if(x.current){const X=x.current.getBoundingClientRect();v({x:j.clientX-X.left,y:j.clientY-X.top}),m(!0)}};p.useEffect(()=>{const j=P=>{if(h){const N=P.clientX-g.x,L=P.clientY-g.y,A=window.innerWidth-288,M=window.innerHeight-300;d({x:Math.max(0,Math.min(N,A)),y:Math.max(0,Math.min(L,M))})}},X=()=>{m(!1)};return h&&(document.addEventListener("mousemove",j),document.addEventListener("mouseup",X)),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",X)}},[h,g]),p.useEffect(()=>{if(!i||!k)return;const j=()=>{const{selection:P}=i.state,{from:N,to:L}=P;if(N!==L){const A=i.state.doc.textBetween(N,L);O(A)}else O("")};i.on("selectionUpdate",j),i.setEditable(!1);const X=i.view.dom.closest(".ProseMirror")||i.view.dom;return X&&X.classList.add("text-selection-mode"),()=>{i.off("selectionUpdate",j),i.setEditable(!0),X&&X.classList.remove("text-selection-mode")}},[i,k]);const z=()=>{T(!0),O(""),ve.info("Selection mode active",{description:"Select text from the editor, then click Done",duration:3e3})},Z=()=>{T(!1),O(""),ve.info("Selection mode cancelled",{duration:2e3})},Q=()=>{if(!R.trim()){ve.error("No text selected",{description:"Please select text from the editor before clicking Done",duration:3e3}),T(!1),O("");return}if(R.trim()===t.trim()){ve.info("No changes needed",{description:"Selected text is the same as current sentence",duration:2e3}),T(!1),O("");return}T(!1),O(""),s&&(s(R),ve.success("Updating flow analysis",{description:"Re-analyzing with selected text",duration:2e3}))},q=()=>{l&&Ge(l,"sentence_flow_exit",{file_id:c,sentence_text:t.substring(0,100)}),o()};return f.jsx("div",{ref:x,style:{position:"fixed",left:`${u.x}px`,top:`${u.y}px`,zIndex:1e3,pointerEvents:"auto",cursor:h?"grabbing":"auto"},children:f.jsx(fr,{className:"w-72 bg-white dark:bg-background border border-border/40 backdrop-blur-sm max-h-[80vh] flex flex-col",children:f.jsxs(hr,{className:"p-4 flex flex-col h-full overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200 cursor-grab active:cursor-grabbing flex-shrink-0",onMouseDown:K,children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(fz,{className:"h-4 w-4 text-gray-600"}),f.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"Flow Analysis"})]}),f.jsx(pe,{variant:"ghost",size:"sm",onClick:q,className:"h-6 w-6 p-0 text-gray-600 hover:text-gray-800",onMouseDown:j=>j.stopPropagation(),children:f.jsx(Ec,{className:"h-4 w-4"})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[f.jsxs("div",{className:"mb-4 pb-3 border-b border-gray-100",children:[f.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Selected Sentence:"}),f.jsxs("div",{className:"text-xs text-gray-700 max-h-20 overflow-y-auto bg-white/50 p-2 rounded border relative",onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:[t.length>150?`${t.substring(0,150)}...`:t,C&&!k&&i&&f.jsx(pe,{variant:"outline",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border shadow-md hover:shadow-lg transition-all duration-200",onClick:j=>{j.stopPropagation(),z()},title:"Select new text from editor",children:f.jsx(Ay,{className:"h-3 w-3"})})]}),k&&f.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Text Selection Mode"})}),f.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mb-3",children:"Select text from the editor above, then click Done to update the sentence and re-run flow analysis."}),R&&f.jsxs("div",{className:"mb-3 p-2 bg-white dark:bg-gray-800 rounded border",children:[f.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Selected text:"}),f.jsx("div",{className:"text-sm",children:R.length>100?`${R.substring(0,100)}...`:R})]}),f.jsxs("div",{className:"flex justify-end space-x-2",children:[f.jsx(pe,{variant:"outline",size:"sm",onClick:j=>{j.stopPropagation(),Z()},className:"h-8 px-3",children:"Cancel"}),f.jsx(pe,{variant:"default",size:"sm",onClick:j=>{j.stopPropagation(),Q()},className:"h-8 px-4 bg-blue-600 hover:bg-blue-700 text-white",disabled:!R.trim(),children:"Done"})]})]}),f.jsx("div",{className:"flex items-center gap-2 mt-3",children:f.jsxs("div",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded font-medium",children:[e.length," Connections"]})})]}),a&&f.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-50 flex items-center justify-center",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-lg flex items-center gap-3",children:[f.jsx(fa,{className:"h-5 w-5 animate-spin text-blue-600"}),f.jsx("span",{className:"text-sm font-medium",children:"Updating flow analysis..."})]})}),n?f.jsxs("div",{className:`rounded-lg border-l-2 border-blue-400 bg-blue-50/60 p-3 mb-4 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>w(!y),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Mb,{className:"h-4 w-4 text-blue-500"}),f.jsx("span",{className:"font-semibold text-blue-700 text-xs uppercase tracking-wide",children:"Paragraph Cohesion"})]}),f.jsx(Li,{className:`h-4 w-4 text-blue-500 transition-transform duration-300 ease-in-out ${y?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${y?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-700 mt-2 [&_b]:font-semibold",dangerouslySetInnerHTML:{__html:n.analysis}})})]}):f.jsxs("div",{className:`rounded-lg border-l-2 border-gray-300 bg-gray-50/60 p-3 mb-4 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>w(!y),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Mb,{className:"h-4 w-4 text-gray-400"}),f.jsx("span",{className:"font-semibold text-gray-500 text-xs uppercase tracking-wide",children:"Paragraph Cohesion"})]}),f.jsx(Li,{className:`h-4 w-4 text-gray-400 transition-transform duration-300 ease-in-out ${y?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${y?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"No data"})})]}),f.jsx("div",{className:"h-2"}),r?f.jsxs("div",{className:`rounded-lg border-l-2 border-purple-400 bg-purple-50/60 p-3 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S(!b),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Zd,{className:"h-4 w-4 text-purple-500"}),f.jsx("span",{className:"font-semibold text-purple-700 text-xs uppercase tracking-wide",children:"Document Cohesion"})]}),f.jsx(Li,{className:`h-4 w-4 text-purple-500 transition-transform duration-300 ease-in-out ${b?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${b?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-700 mt-2 [&_b]:font-semibold",dangerouslySetInnerHTML:{__html:r.analysis}})})]}):f.jsxs("div",{className:`rounded-lg border-l-2 border-gray-300 bg-gray-50/60 p-3 relative ${a?"opacity-50":""}`,children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S(!b),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Zd,{className:"h-4 w-4 text-gray-400"}),f.jsx("span",{className:"font-semibold text-gray-500 text-xs uppercase tracking-wide",children:"Document Cohesion"})]}),f.jsx(Li,{className:`h-4 w-4 text-gray-400 transition-transform duration-300 ease-in-out ${b?"rotate-90":"rotate-0"}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${b?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:f.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"No data"})})]})]}),!k&&f.jsx("div",{className:"mt-4 space-y-2 flex-shrink-0",children:f.jsxs(pe,{variant:"default",size:"sm",onClick:q,className:"w-full flex items-center gap-2 text-xs h-9 bg-blue-500 hover:bg-blue-700 text-white border-blue-600 shadow-sm",onMouseDown:j=>j.stopPropagation(),disabled:a,children:[f.jsx(lz,{className:"h-3 w-3 text-white-400"}),"Return to Flow Mode"]})})]})})})}function K7({isOpen:t,onClose:e,className:n,selectedText:r="",documentContext:o=""}){const[s,i]=p.useState([]),[a,l]=p.useState(""),[c,u]=p.useState(!1),d=p.useRef(null);p.useEffect(()=>{t&&d.current&&setTimeout(()=>{var g;(g=d.current)==null||g.focus()},100)},[t]),p.useEffect(()=>{r&&t&&l(r)},[r,t]);const h=async()=>{if(a.trim()){const g=a.trim();i(v=>[...v,{role:"user",content:g}]),l(""),u(!0);try{const v=await Rz({message:g,documentContext:o});i(x=>[...x,{role:"assistant",content:v.message}])}catch(v){console.error("Chat error:",v),i(x=>[...x,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{u(!1)}}},m=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),h())};return f.jsxs("div",{className:oe("fixed right-4 top-[80px] bottom-4 w-[300px] bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60","border border-border/40 transition-transform duration-200 ease-in-out z-50 rounded-lg overflow-hidden",t?"translate-x-0":"translate-x-[316px]",n),children:[f.jsxs("div",{className:"flex items-center h-12 px-4 border-b border-border/40",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(jo,{className:"h-4 w-4"}),f.jsx("h2",{className:"text-sm font-medium",children:"Chat"})]}),f.jsx("div",{className:"flex-grow"}),f.jsx(pe,{variant:"ghost",size:"icon",onClick:e,className:"h-7 w-7 ml-2 text-muted-foreground hover:text-foreground",children:f.jsx(Li,{className:"h-4 w-4"})})]}),f.jsxs("div",{className:"flex flex-col h-[calc(100%-3rem)]",children:[f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 text-muted-foreground",children:[f.jsx(jo,{className:"h-8 w-8 mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"No messages yet"}),f.jsx("p",{className:"text-xs mt-1",children:"Ask anything about your writing!"})]}):s.map((g,v)=>f.jsx(fr,{className:oe("w-full",g.role==="assistant"&&"bg-muted"),children:f.jsx(hr,{className:"p-3",children:f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx(jo,{className:"h-4 w-4 mt-0.5"}),f.jsx("p",{className:"text-sm whitespace-pre-wrap",children:g.content})]})})},v)),c&&f.jsx("div",{className:"flex items-center justify-center p-2",children:f.jsx(fa,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]}),f.jsx("div",{className:"p-4 border-t border-border/40",children:f.jsxs("div",{className:"relative",children:[f.jsx("textarea",{ref:d,value:a,onChange:g=>l(g.target.value),onKeyDown:m,placeholder:"Ask anything...",className:"w-full h-24 p-2 text-sm resize-none rounded-md border border-input bg-background focus:outline-none",disabled:c}),f.jsxs("div",{className:"absolute right-2 bottom-2 flex items-center space-x-2",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Press Enter to send"}),f.jsx(pe,{size:"sm",onClick:h,disabled:!a.trim()||c,className:"h-7 text-xs",children:c?f.jsx(fa,{className:"h-3.5 w-3.5 animate-spin"}):"Send"})]})]})})]})]})}function q7({isOpen:t,onClose:e}){const[n,r]=p.useState(null),o=p.useRef({}),[s,i]=p.useState([]),[a,l]=p.useState([]),[c,u]=p.useState(!1),[d,h]=p.useState("-translate-x-full");if(p.useEffect(()=>{if(t){u(!0);const x=setTimeout(()=>{h("translate-x-0")},50);return()=>clearTimeout(x)}else{h("-translate-x-full");const x=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(x)}},[t]),!c)return null;const m=[{id:"set-topics",title:"Selecting Paragraph and Essay Topics",description:"Highlight an important sentence in your editor. Then, right click and select 'Set Paragraph Topic' or 'Set Essay Topic'. This will improve the system feedback.",thumbnailUrl:"/tutorial-thumbnails/comments.jpg",videoUrl:"https://example.com/videos/comments.mp4",icon:f.jsx(w8,{className:"h-5 w-5"})},{id:"doc-feedback",title:"Checking for Feedback",description:"Get feedback on everything in the editor. Click the 'Check for Feedback' button and then select 'Check document'. For more granular feedback, highlight the text you want to check, click the 'Check for Feedback' button, and then select 'Check custom selection'.",thumbnailUrl:"/tutorial-thumbnails/getting-started.jpg",videoUrl:"https://example.com/videos/getting-started.mp4",icon:f.jsx(nz,{className:"h-5 w-5"})},{id:"flow-mode",title:"Using the Writing, Flow, and Feedback Modes",description:"Switch between three different modes. Writing Mode offers a distraction-free writing experience. Feedback Mode shares sentence-by-sentence suggestions. Flow Mode shows how strongly connected each sentence is to other sentences. The darker the shade of blue, the more connected the sentences are",thumbnailUrl:"/tutorial-thumbnails/ai-features.jpg",videoUrl:"https://example.com/videos/ai-features.mp4",icon:f.jsx(bT,{className:"h-5 w-5"})},{id:"flow-analysis",title:"Viewing Flow Analysis",description:"After checking for feedback and switching to Flow mode, click on any highlighted sentence to view detailed flow analysis. This shows how the sentence connects to its paragraph and overall document, with explanations of the connection strength and contextual relationships.",thumbnailUrl:"/tutorial-thumbnails/topics.jpg",videoUrl:"https://example.com/videos/topics.mp4",icon:f.jsx(Sz,{className:"h-5 w-5"})}],g=x=>{r(x);const y=o.current[x];y&&y.play().catch(w=>{console.error("Error playing video:",w)})},v=x=>{r(null);const y=o.current[x];y&&(y.pause(),y.currentTime=0)};return f.jsxs("div",{className:oe("fixed left-0 top-0 h-screen bg-background border-r border-border/40","transition-all duration-300 ease-in-out","z-[99999] w-[440px] shadow-lg overflow-hidden",d),children:[f.jsxs("div",{className:"border-b border-border/40 p-3 flex justify-between items-center bg-muted/30",children:[f.jsx("h2",{className:"text-lg font-semibold",children:"Get Started with Ripple"}),f.jsx(pe,{variant:"ghost",size:"icon",onClick:e,children:f.jsx(Ec,{className:"h-4 w-4"})})]}),f.jsx("div",{className:"overflow-auto h-[calc(100vh-56px)]",children:f.jsx("div",{className:"p-3",children:f.jsx("div",{className:"space-y-5",children:m.map(x=>{const y=a.includes(x.id),w=s.includes(x.id),b=()=>{i(S=>w?S.filter(C=>C!==x.id):[...S,x.id]),!y&&!w&&l(S=>[...S,x.id])};return f.jsxs("div",{className:"relative rounded-lg overflow-hidden shadow-md border border-border/40 hover:shadow-lg transition-all",onMouseEnter:()=>g(x.id),onMouseLeave:()=>v(x.id),children:[f.jsxs("div",{className:"flex items-center gap-2 mb-0 cursor-pointer select-none p-5 bg-card",onClick:b,children:[f.jsx("div",{className:"p-1 rounded-full bg-blue-100 dark:bg-blue-900/30",children:x.icon}),f.jsx("h3",{className:"font-medium text-sm flex-1",children:x.title}),y?f.jsx("svg",{className:"h-4 w-4 ml-2 text-green-600",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M5 13l4 4L19 7"})}):f.jsx("svg",{className:"h-4 w-4 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),f.jsx("div",{className:`px-5 transition-all duration-300 ease-in-out overflow-hidden text-sm text-muted-foreground
                      ${w?"pb-5 pt-1 max-h-40 opacity-100":"pb-0 pt-0 max-h-0 opacity-0"}`,style:{transitionProperty:"max-height, opacity, padding"},children:w&&f.jsx("p",{children:x.description})})]},x.id)})})})})]})}function _P(){const{theme:t,setTheme:e}=hj(),n=()=>{e(t==="light"?"dark":"light")};return f.jsxs(pe,{variant:"ghost",size:"icon",onClick:n,children:[f.jsx(xz,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),f.jsx(mz,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),f.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function Dr(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function R1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function PP(...t){return e=>{let n=!1;const r=t.map(o=>{const s=R1(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():R1(t[o],null)}}}}function uf(...t){return p.useCallback(PP(...t),t)}var df=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),s=o.find(Y7);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return f.jsx(Xg,{...r,ref:e,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return f.jsx(Xg,{...r,ref:e,children:n})});df.displayName="Slot";var Xg=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const o=X7(n),s=J7(r,n.props);return n.type!==p.Fragment&&(s.ref=e?PP(e,o):o),p.cloneElement(n,s)}return p.Children.count(n)>1?p.Children.only(null):null});Xg.displayName="SlotClone";var G7=({children:t})=>f.jsx(f.Fragment,{children:t});function Y7(t){return p.isValidElement(t)&&t.type===G7}function J7(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function X7(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Q7(t){const e=t+"CollectionProvider",[n,r]=Ft(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:g,children:v}=m,x=U.useRef(null),y=U.useRef(new Map).current;return f.jsx(o,{scope:g,itemMap:y,collectionRef:x,children:v})};i.displayName=e;const a=t+"CollectionSlot",l=U.forwardRef((m,g)=>{const{scope:v,children:x}=m,y=s(a,v),w=uf(g,y.collectionRef);return f.jsx(df,{ref:w,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=U.forwardRef((m,g)=>{const{scope:v,children:x,...y}=m,w=U.useRef(null),b=uf(g,w),S=s(c,v);return U.useEffect(()=>(S.itemMap.set(w,{ref:w,...y}),()=>void S.itemMap.delete(w))),f.jsx(df,{[u]:"",ref:b,children:x})});d.displayName=c;function h(m){const g=s(t+"CollectionConsumer",m);return U.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,C)=>y.indexOf(S.ref.current)-y.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},h,r]}var Z7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ra=Z7.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?df:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Jp="rovingFocusGroup.onEntryFocus",eK={bubbles:!1,cancelable:!0},Sh="RovingFocusGroup",[Qg,RP,tK]=Q7(Sh),[nK,AP]=Ft(Sh,[tK]),[rK,oK]=nK(Sh),OP=p.forwardRef((t,e)=>f.jsx(Qg.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Qg.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(sK,{...t,ref:e})})}));OP.displayName=Sh;var sK=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=p.useRef(null),m=uf(e,h),g=Xs(s),[v=null,x]=Jn({prop:i,defaultProp:a,onChange:l}),[y,w]=p.useState(!1),b=Fe(c),S=RP(n),C=p.useRef(!1),[E,k]=p.useState(0);return p.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(Jp,b),()=>T.removeEventListener(Jp,b)},[b]),f.jsx(rK,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:v,onItemFocus:p.useCallback(T=>x(T),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>k(T=>T-1),[]),children:f.jsx(Ra.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:Dr(t.onMouseDown,()=>{C.current=!0}),onFocus:Dr(t.onFocus,T=>{const R=!C.current;if(T.target===T.currentTarget&&R&&!y){const O=new CustomEvent(Jp,eK);if(T.currentTarget.dispatchEvent(O),!O.defaultPrevented){const K=S().filter(j=>j.focusable),z=K.find(j=>j.active),Z=K.find(j=>j.id===v),q=[z,Z,...K].filter(Boolean).map(j=>j.ref.current);DP(q,u)}}C.current=!1}),onBlur:Dr(t.onBlur,()=>w(!1))})})}),IP="RovingFocusGroupItem",jP=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=dt(),l=s||a,c=oK(IP,n),u=c.currentTabStopId===l,d=RP(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=c;return p.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),f.jsx(Qg.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:f.jsx(Ra.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:Dr(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:Dr(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Dr(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=lK(g,c.orientation,c.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const w=y.indexOf(g.currentTarget);y=c.loop?cK(y,w+1):y.slice(w+1)}setTimeout(()=>DP(y))}})})})});jP.displayName=IP;var iK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function lK(t,e,n){const r=aK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iK[r]}function DP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function cK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var uK=OP,dK=jP;function fK(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var LP=t=>{const{present:e,children:n}=t,r=hK(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=uf(r.ref,pK(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};LP.displayName="Presence";function hK(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),s=p.useRef("none"),i=t?"mounted":"unmounted",[a,l]=fK(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Bu(r.current);s.current=a==="mounted"?c:"none"},[a]),ze(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,m=Bu(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),ze(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const v=Bu(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=m=>{m.target===e&&(s.current=Bu(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Bu(t){return(t==null?void 0:t.animationName)||"none"}function pK(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var E0="Tabs",[mK,AQ]=Ft(E0,[AP]),$P=AP(),[gK,T0]=mK(E0),FP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:s,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Xs(a),[d,h]=Jn({prop:r,onChange:o,defaultProp:s});return f.jsx(gK,{scope:n,baseId:dt(),value:d,onValueChange:h,orientation:i,dir:u,activationMode:l,children:f.jsx(Ra.div,{dir:u,"data-orientation":i,...c,ref:e})})});FP.displayName=E0;var zP="TabsList",BP=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,s=T0(zP,n),i=$P(n);return f.jsx(uK,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:f.jsx(Ra.div,{role:"tablist","aria-orientation":s.orientation,...o,ref:e})})});BP.displayName=zP;var HP="TabsTrigger",UP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...s}=t,i=T0(HP,n),a=$P(n),l=KP(i.baseId,r),c=qP(i.baseId,r),u=r===i.value;return f.jsx(dK,{asChild:!0,...a,focusable:!o,active:u,children:f.jsx(Ra.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...s,ref:e,onMouseDown:Dr(t.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:Dr(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:Dr(t.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!o&&d&&i.onValueChange(r)})})})});UP.displayName=HP;var VP="TabsContent",WP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:o,children:s,...i}=t,a=T0(VP,n),l=KP(a.baseId,r),c=qP(a.baseId,r),u=r===a.value,d=p.useRef(u);return p.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),f.jsx(LP,{present:o||u,children:({present:h})=>f.jsx(Ra.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});WP.displayName=VP;function KP(t,e){return`${t}-trigger-${e}`}function qP(t,e){return`${t}-content-${e}`}var vK=FP,GP=BP,YP=UP,JP=WP;const yK=vK,XP=p.forwardRef(({className:t,...e},n)=>f.jsx(GP,{ref:n,className:oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));XP.displayName=GP.displayName;const fd=p.forwardRef(({className:t,...e},n)=>f.jsx(YP,{ref:n,className:oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));fd.displayName=YP.displayName;const xK=p.forwardRef(({className:t,...e},n)=>f.jsx(JP,{ref:n,className:oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));xK.displayName=JP.displayName;function wK({value:t,onValueChange:e,className:n,disabled:r=!1}){return f.jsx(yK,{value:t,onValueChange:r?void 0:o=>e(o),className:n,children:f.jsxs(XP,{className:`h-8 p-1 bg-white dark:bg-transparent shadow-sm dark:shadow-none ${r?"opacity-50 pointer-events-none cursor-not-allowed":""}`,children:[f.jsxs(fd,{value:"write",className:"h-6 px-2.5 text-xs flex items-center space-x-1.5 data-[state=active]:bg-green-500 data-[state=active]:text-white",disabled:r,children:[f.jsx(Ay,{className:"h-2.5 w-2.5",strokeWidth:2.5}),f.jsx("span",{children:"Write"})]}),f.jsxs(fd,{value:"flow",className:"h-6 px-2.5 text-xs flex items-center space-x-1.5 data-[state=active]:bg-blue-500 data-[state=active]:text-white",disabled:r,children:[f.jsx(bT,{className:"h-2.5 w-2.5",strokeWidth:2.5}),f.jsx("span",{children:"Flow"})]}),f.jsxs(fd,{value:"comments",className:"h-6 px-2.5 text-xs flex items-center space-x-1.5 data-[state=active]:bg-orange-500 data-[state=active]:text-white",disabled:r,children:[f.jsx(jo,{className:"h-2.5 w-2.5",strokeWidth:2.5}),f.jsx("span",{children:"Feedback"})]})]})})}var N0="Popover",[QP,OQ]=Ft(N0,[yr]),Hc=yr(),[bK,es]=QP(N0),ZP=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=t,a=Hc(e),l=p.useRef(null),[c,u]=p.useState(!1),[d=!1,h]=Jn({prop:r,defaultProp:o,onChange:s});return f.jsx(Oc,{...a,children:f.jsx(bK,{scope:e,contentId:dt(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:c,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:i,children:n})})};ZP.displayName=N0;var eR="PopoverAnchor",SK=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=es(eR,n),s=Hc(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=o;return p.useEffect(()=>(i(),()=>a()),[i,a]),f.jsx(Ma,{...s,...r,ref:e})});SK.displayName=eR;var tR="PopoverTrigger",nR=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=es(tR,n),s=Hc(n),i=De(e,o.triggerRef),a=f.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":aR(o.open),...r,ref:i,onClick:re(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:f.jsx(Ma,{asChild:!0,...s,children:a})});nR.displayName=tR;var M0="PopoverPortal",[CK,kK]=QP(M0,{forceMount:void 0}),rR=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,s=es(M0,e);return f.jsx(CK,{scope:e,forceMount:n,children:f.jsx(xr,{present:n||s.open,children:f.jsx(Dc,{asChild:!0,container:o,children:r})})})};rR.displayName=M0;var va="PopoverContent",oR=p.forwardRef((t,e)=>{const n=kK(va,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,s=es(va,t.__scopePopover);return f.jsx(xr,{present:r||s.open,children:s.modal?f.jsx(EK,{...o,ref:e}):f.jsx(TK,{...o,ref:e})})});oR.displayName=va;var EK=p.forwardRef((t,e)=>{const n=es(va,t.__scopePopover),r=p.useRef(null),o=De(e,r),s=p.useRef(!1);return p.useEffect(()=>{const i=r.current;if(i)return Pc(i)},[]),f.jsx(lh,{as:zo,allowPinchZoom:!0,children:f.jsx(sR,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:re(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:re(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),TK=p.forwardRef((t,e)=>{const n=es(va,t.__scopePopover),r=p.useRef(!1),o=p.useRef(!1);return f.jsx(sR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),sR=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=es(va,n),m=Hc(n);return Nc(),f.jsx(sh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:f.jsx(Na,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:f.jsx(Ic,{"data-state":aR(h.open),role:"dialog",id:h.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),iR="PopoverClose",NK=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=es(iR,n);return f.jsx(be.button,{type:"button",...r,ref:e,onClick:re(t.onClick,()=>o.onOpenChange(!1))})});NK.displayName=iR;var MK="PopoverArrow",_K=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Hc(n);return f.jsx(jc,{...o,...r,ref:e})});_K.displayName=MK;function aR(t){return t?"open":"closed"}var PK=ZP,RK=nR,AK=rR,lR=oR;const OK=PK,IK=RK,cR=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},o)=>f.jsx(AK,{children:f.jsx(lR,{ref:o,align:e,sideOffset:n,className:oe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));cR.displayName=lR.displayName;var A1=1,jK=.9,DK=.8,LK=.17,Xp=.1,Qp=.999,$K=.9999,FK=.99,zK=/[\\\/_+.#"@\[\(\{&]/,BK=/[\\\/_+.#"@\[\(\{&]/g,HK=/[\s-]/,uR=/[\s-]/g;function Zg(t,e,n,r,o,s,i){if(s===e.length)return o===t.length?A1:FK;var a=`${o},${s}`;if(i[a]!==void 0)return i[a];for(var l=r.charAt(s),c=n.indexOf(l,o),u=0,d,h,m,g;c>=0;)d=Zg(t,e,n,r,c+1,s+1,i),d>u&&(c===o?d*=A1:zK.test(t.charAt(c-1))?(d*=DK,m=t.slice(o,c-1).match(BK),m&&o>0&&(d*=Math.pow(Qp,m.length))):HK.test(t.charAt(c-1))?(d*=jK,g=t.slice(o,c-1).match(uR),g&&o>0&&(d*=Math.pow(Qp,g.length))):(d*=LK,o>0&&(d*=Math.pow(Qp,c-o))),t.charAt(c)!==e.charAt(s)&&(d*=$K)),(d<Xp&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(h=Zg(t,e,n,r,c+1,s+2,i),h*Xp>d&&(d=h*Xp)),d>u&&(u=d),c=n.indexOf(l,c+1);return i[a]=u,u}function O1(t){return t.toLowerCase().replace(uR," ")}function UK(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Zg(t,e,O1(t),O1(e),0,0,{})}function Do(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function I1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dR(...t){return e=>{let n=!1;const r=t.map(o=>{const s=I1(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():I1(t[o],null)}}}}function ri(...t){return p.useCallback(dR(...t),t)}var _0=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),s=o.find(WK);if(s){const i=s.props.children,a=o.map(l=>l===s?p.Children.count(i)>1?p.Children.only(null):p.isValidElement(i)?i.props.children:null:l);return f.jsx(ev,{...r,ref:e,children:p.isValidElement(i)?p.cloneElement(i,void 0,a):null})}return f.jsx(ev,{...r,ref:e,children:n})});_0.displayName="Slot";var ev=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const o=qK(n);return p.cloneElement(n,{...KK(r,n.props),ref:e?dR(e,o):o})}return p.Children.count(n)>1?p.Children.only(null):null});ev.displayName="SlotClone";var VK=({children:t})=>f.jsx(f.Fragment,{children:t});function WK(t){return p.isValidElement(t)&&t.type===VK}function KK(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function qK(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var GK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],qr=GK.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?_0:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function YK(t,e){t&&Go.flushSync(()=>t.dispatchEvent(e))}var JK="DismissableLayer",tv="dismissableLayer.update",XK="dismissableLayer.pointerDownOutside",QK="dismissableLayer.focusOutside",j1,fR=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hR=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=p.useContext(fR),[u,d]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=ri(e,k=>d(k)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,C=tq(k=>{const T=k.target,R=[...c.branches].some(O=>O.contains(T));!S||R||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),E=nq(k=>{const T=k.target;[...c.branches].some(O=>O.contains(T))||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return Iy(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),p.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(j1=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),D1(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=j1)}},[u,h,n,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),D1())},[u,c]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(tv,k),()=>document.removeEventListener(tv,k)},[]),f.jsx(qr.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:Do(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Do(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Do(t.onPointerDownCapture,C.onPointerDownCapture)})});hR.displayName=JK;var ZK="DismissableLayerBranch",eq=p.forwardRef((t,e)=>{const n=p.useContext(fR),r=p.useRef(null),o=ri(e,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(qr.div,{...t,ref:o})});eq.displayName=ZK;function tq(t,e=globalThis==null?void 0:globalThis.document){const n=Fe(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){pR(XK,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function nq(t,e=globalThis==null?void 0:globalThis.document){const n=Fe(t),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&pR(QK,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function D1(){const t=new CustomEvent(tv);document.dispatchEvent(t)}function pR(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?YK(o,s):o.dispatchEvent(s)}var Zp="focusScope.autoFocusOnMount",em="focusScope.autoFocusOnUnmount",L1={bubbles:!1,cancelable:!0},rq="FocusScope",mR=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=p.useState(null),c=Fe(o),u=Fe(s),d=p.useRef(null),h=ri(e,v=>l(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:io(d.current,{select:!0})},x=function(b){if(m.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||io(d.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&io(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,a,m.paused]),p.useEffect(()=>{if(a){F1.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(Zp,L1);a.addEventListener(Zp,c),a.dispatchEvent(y),y.defaultPrevented||(oq(cq(gR(a)),{select:!0}),document.activeElement===v&&io(a))}return()=>{a.removeEventListener(Zp,c),setTimeout(()=>{const y=new CustomEvent(em,L1);a.addEventListener(em,u),a.dispatchEvent(y),y.defaultPrevented||io(v??document.body,{select:!0}),a.removeEventListener(em,u),F1.remove(m)},0)}}},[a,c,u,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,S]=sq(w);b&&S?!v.shiftKey&&y===S?(v.preventDefault(),n&&io(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&io(S,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return f.jsx(qr.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});mR.displayName=rq;function oq(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(io(r,{select:e}),document.activeElement!==n)return}function sq(t){const e=gR(t),n=$1(e,t),r=$1(e.reverse(),t);return[n,r]}function gR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $1(t,e){for(const n of t)if(!iq(n,{upTo:e}))return n}function iq(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function aq(t){return t instanceof HTMLInputElement&&"select"in t}function io(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&aq(t)&&e&&t.select()}}var F1=lq();function lq(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=z1(t,e),t.unshift(e)},remove(e){var n;t=z1(t,e),(n=t[0])==null||n.resume()}}}function z1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function cq(t){return t.filter(e=>e.tagName!=="A")}var uq="Portal",vR=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=p.useState(!1);ze(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?bc.createPortal(f.jsx(qr.div,{...r,ref:e}),i):null});vR.displayName=uq;function dq(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Ch=t=>{const{present:e,children:n}=t,r=fq(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=ri(r.ref,hq(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:s}):null};Ch.displayName="Presence";function fq(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),s=p.useRef("none"),i=t?"mounted":"unmounted",[a,l]=dq(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Hu(r.current);s.current=a==="mounted"?c:"none"},[a]),ze(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,m=Hu(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),ze(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const v=Hu(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=m=>{m.target===e&&(s.current=Hu(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Hu(t){return(t==null?void 0:t.animationName)||"none"}function hq(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var yR=Wy(),tm=function(){},kh=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:tm,onWheelCapture:tm,onTouchMoveCapture:tm}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,b=eh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,C=Vy([n,e]),E=it(it({},b),o);return p.createElement(p.Fragment,null,u&&p.createElement(S,{sideCar:yR,removeScrollBar:c,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?p.cloneElement(p.Children.only(a),it(it({},E),{ref:C})):p.createElement(y,it({},E,{className:l,ref:C}),a))});kh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kh.classNames={fullWidth:Xi,zeroRight:Ji};var nv=!1;if(typeof window<"u")try{var Uu=Object.defineProperty({},"passive",{get:function(){return nv=!0,!0}});window.addEventListener("test",Uu,Uu),window.removeEventListener("test",Uu,Uu)}catch{nv=!1}var gi=nv?{passive:!1}:!1,pq=function(t){return t.tagName==="TEXTAREA"},xR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!pq(t)&&n[e]==="visible")},mq=function(t){return xR(t,"overflowY")},gq=function(t){return xR(t,"overflowX")},B1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=wR(t,r);if(o){var s=bR(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vq=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},yq=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},wR=function(t,e){return t==="v"?mq(e):gq(e)},bR=function(t,e){return t==="v"?vq(e):yq(e)},xq=function(t,e){return t==="h"&&e==="rtl"?-1:1},wq=function(t,e,n,r,o){var s=xq(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,h=0;do{var m=bR(t,a),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&wR(t,a)&&(d+=y,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(h)<1||!o))&&(c=!0),c},Vu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},H1=function(t){return[t.deltaX,t.deltaY]},U1=function(t){return t&&"current"in t?t.current:t},bq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Sq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Cq=0,vi=[];function kq(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(Cq++)[0],s=p.useState(nh)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var v=Uy([t.lockRef.current],(t.shards||[]).map(U1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var y=Vu(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],S="deltaY"in v?v.deltaY:w[1]-y[1],C,E=v.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&E.type==="range")return!1;var T=B1(k,E);if(!T)return!0;if(T?C=k:(C=k==="v"?"h":"v",T=B1(k,E)),!T)return!1;if(!r.current&&"changedTouches"in v&&(b||S)&&(r.current=C),!C)return!0;var R=r.current||C;return wq(R,x,v,R==="h"?b:S,!0)},[]),l=p.useCallback(function(v){var x=v;if(!(!vi.length||vi[vi.length-1]!==s)){var y="deltaY"in x?H1(x):Vu(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&bq(C.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(U1).filter(Boolean).filter(function(C){return C.contains(x.target)}),S=b.length>0?a(x,b[0]):!i.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),c=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:Eq(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=p.useCallback(function(v){n.current=Vu(v),r.current=void 0},[]),d=p.useCallback(function(v){c(v.type,H1(v),v.target,a(v,t.lockRef.current))},[]),h=p.useCallback(function(v){c(v.type,Vu(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return vi.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,gi),document.addEventListener("touchmove",l,gi),document.addEventListener("touchstart",u,gi),function(){vi=vi.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,gi),document.removeEventListener("touchmove",l,gi),document.removeEventListener("touchstart",u,gi)}},[]);var m=t.removeScrollBar,g=t.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:Sq(o)}):null,m?p.createElement(qy,{gapMode:t.gapMode}):null)}function Eq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Tq=Ky(yR,kq);var SR=p.forwardRef(function(t,e){return p.createElement(kh,it({},t,{ref:e,sideCar:Tq}))});SR.classNames=kh.classNames;var P0="Dialog",[CR,IQ]=Ft(P0),[Nq,Zn]=CR(P0),kR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=t,a=p.useRef(null),l=p.useRef(null),[c=!1,u]=Jn({prop:r,defaultProp:o,onChange:s});return f.jsx(Nq,{scope:e,triggerRef:a,contentRef:l,contentId:dt(),titleId:dt(),descriptionId:dt(),open:c,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};kR.displayName=P0;var ER="DialogTrigger",Mq=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(ER,n),s=ri(e,o.triggerRef);return f.jsx(qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":O0(o.open),...r,ref:s,onClick:Do(t.onClick,o.onOpenToggle)})});Mq.displayName=ER;var R0="DialogPortal",[_q,TR]=CR(R0,{forceMount:void 0}),NR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,s=Zn(R0,e);return f.jsx(_q,{scope:e,forceMount:n,children:p.Children.map(r,i=>f.jsx(Ch,{present:n||s.open,children:f.jsx(vR,{asChild:!0,container:o,children:i})}))})};NR.displayName=R0;var ff="DialogOverlay",MR=p.forwardRef((t,e)=>{const n=TR(ff,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Zn(ff,t.__scopeDialog);return s.modal?f.jsx(Ch,{present:r||s.open,children:f.jsx(Pq,{...o,ref:e})}):null});MR.displayName=ff;var Pq=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(ff,n);return f.jsx(SR,{as:_0,allowPinchZoom:!0,shards:[o.contentRef],children:f.jsx(qr.div,{"data-state":O0(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Us="DialogContent",_R=p.forwardRef((t,e)=>{const n=TR(Us,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Zn(Us,t.__scopeDialog);return f.jsx(Ch,{present:r||s.open,children:s.modal?f.jsx(Rq,{...o,ref:e}):f.jsx(Aq,{...o,ref:e})})});_R.displayName=Us;var Rq=p.forwardRef((t,e)=>{const n=Zn(Us,t.__scopeDialog),r=p.useRef(null),o=ri(e,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return Pc(s)},[]),f.jsx(PR,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Do(t.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Do(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:Do(t.onFocusOutside,s=>s.preventDefault())})}),Aq=p.forwardRef((t,e)=>{const n=Zn(Us,t.__scopeDialog),r=p.useRef(!1),o=p.useRef(!1);return f.jsx(PR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),PR=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=t,a=Zn(Us,n),l=p.useRef(null),c=ri(e,l);return Nc(),f.jsxs(f.Fragment,{children:[f.jsx(mR,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:f.jsx(hR,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":O0(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(Oq,{titleId:a.titleId}),f.jsx(jq,{contentRef:l,descriptionId:a.descriptionId})]})]})}),A0="DialogTitle",RR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(A0,n);return f.jsx(qr.h2,{id:o.titleId,...r,ref:e})});RR.displayName=A0;var AR="DialogDescription",OR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(AR,n);return f.jsx(qr.p,{id:o.descriptionId,...r,ref:e})});OR.displayName=AR;var IR="DialogClose",jR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zn(IR,n);return f.jsx(qr.button,{type:"button",...r,ref:e,onClick:Do(t.onClick,()=>o.onOpenChange(!1))})});jR.displayName=IR;function O0(t){return t?"open":"closed"}var DR="DialogTitleWarning",[jQ,LR]=Iz(DR,{contentName:Us,titleName:A0,docsSlug:"dialog"}),Oq=({titleId:t})=>{const e=LR(DR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Iq="DialogDescriptionWarning",jq=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${LR(Iq).contentName}}.`;return p.useEffect(()=>{var s;const o=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},$R=kR,FR=NR,I0=MR,j0=_R,zR=RR,BR=OR,Dq=jR,HR={exports:{}},UR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya=p;function Lq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $q=typeof Object.is=="function"?Object.is:Lq,Fq=ya.useState,zq=ya.useEffect,Bq=ya.useLayoutEffect,Hq=ya.useDebugValue;function Uq(t,e){var n=e(),r=Fq({inst:{value:n,getSnapshot:e}}),o=r[0].inst,s=r[1];return Bq(function(){o.value=n,o.getSnapshot=e,nm(o)&&s({inst:o})},[t,n,e]),zq(function(){return nm(o)&&s({inst:o}),t(function(){nm(o)&&s({inst:o})})},[t]),Hq(n),n}function nm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$q(t,n)}catch{return!0}}function Vq(t,e){return e()}var Wq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vq:Uq;UR.useSyncExternalStore=ya.useSyncExternalStore!==void 0?ya.useSyncExternalStore:Wq;HR.exports=UR;var Kq=HR.exports,Ja='[cmdk-group=""]',rm='[cmdk-group-items=""]',qq='[cmdk-group-heading=""]',D0='[cmdk-item=""]',V1=`${D0}:not([aria-disabled="true"])`,rv="cmdk-item-select",vs="data-value",Gq=(t,e,n)=>UK(t,e,n),VR=p.createContext(void 0),Uc=()=>p.useContext(VR),WR=p.createContext(void 0),L0=()=>p.useContext(WR),KR=p.createContext(void 0),qR=p.forwardRef((t,e)=>{let n=Si(()=>{var M,$;return{search:"",value:($=(M=t.value)!=null?M:t.defaultValue)!=null?$:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Si(()=>new Set),o=Si(()=>new Map),s=Si(()=>new Map),i=Si(()=>new Set),a=GR(t),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=t,w=dt(),b=dt(),S=dt(),C=p.useRef(null),E=sG();Vs(()=>{if(u!==void 0){let M=u.trim();n.current.value=M,k.emit()}},[u]),Vs(()=>{E(6,Z)},[]);let k=p.useMemo(()=>({subscribe:M=>(i.current.add(M),()=>i.current.delete(M)),snapshot:()=>n.current,setState:(M,$,F)=>{var H,V,_;if(!Object.is(n.current[M],$)){if(n.current[M]=$,M==="search")z(),O(),E(1,K);else if(M==="value"&&(F||E(5,Z),((H=a.current)==null?void 0:H.value)!==void 0)){let ee=$??"";(_=(V=a.current).onValueChange)==null||_.call(V,ee);return}k.emit()}},emit:()=>{i.current.forEach(M=>M())}}),[]),T=p.useMemo(()=>({value:(M,$,F)=>{var H;$!==((H=s.current.get(M))==null?void 0:H.value)&&(s.current.set(M,{value:$,keywords:F}),n.current.filtered.items.set(M,R($,F)),E(2,()=>{O(),k.emit()}))},item:(M,$)=>(r.current.add(M),$&&(o.current.has($)?o.current.get($).add(M):o.current.set($,new Set([M]))),E(3,()=>{z(),O(),n.current.value||K(),k.emit()}),()=>{s.current.delete(M),r.current.delete(M),n.current.filtered.items.delete(M);let F=Q();E(4,()=>{z(),(F==null?void 0:F.getAttribute("id"))===M&&K(),k.emit()})}),group:M=>(o.current.has(M)||o.current.set(M,new Set),()=>{s.current.delete(M),o.current.delete(M)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:w,inputId:S,labelId:b,listInnerRef:C}),[]);function R(M,$){var F,H;let V=(H=(F=a.current)==null?void 0:F.filter)!=null?H:Gq;return M?V(M,n.current.search,$):0}function O(){if(!n.current.search||a.current.shouldFilter===!1)return;let M=n.current.filtered.items,$=[];n.current.filtered.groups.forEach(H=>{let V=o.current.get(H),_=0;V.forEach(ee=>{let te=M.get(ee);_=Math.max(te,_)}),$.push([H,_])});let F=C.current;q().sort((H,V)=>{var _,ee;let te=H.getAttribute("id"),ie=V.getAttribute("id");return((_=M.get(ie))!=null?_:0)-((ee=M.get(te))!=null?ee:0)}).forEach(H=>{let V=H.closest(rm);V?V.appendChild(H.parentElement===V?H:H.closest(`${rm} > *`)):F.appendChild(H.parentElement===F?H:H.closest(`${rm} > *`))}),$.sort((H,V)=>V[1]-H[1]).forEach(H=>{var V;let _=(V=C.current)==null?void 0:V.querySelector(`${Ja}[${vs}="${encodeURIComponent(H[0])}"]`);_==null||_.parentElement.appendChild(_)})}function K(){let M=q().find(F=>F.getAttribute("aria-disabled")!=="true"),$=M==null?void 0:M.getAttribute(vs);k.setState("value",$||void 0)}function z(){var M,$,F,H;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let V=0;for(let _ of r.current){let ee=($=(M=s.current.get(_))==null?void 0:M.value)!=null?$:"",te=(H=(F=s.current.get(_))==null?void 0:F.keywords)!=null?H:[],ie=R(ee,te);n.current.filtered.items.set(_,ie),ie>0&&V++}for(let[_,ee]of o.current)for(let te of ee)if(n.current.filtered.items.get(te)>0){n.current.filtered.groups.add(_);break}n.current.filtered.count=V}function Z(){var M,$,F;let H=Q();H&&(((M=H.parentElement)==null?void 0:M.firstChild)===H&&((F=($=H.closest(Ja))==null?void 0:$.querySelector(qq))==null||F.scrollIntoView({block:"nearest"})),H.scrollIntoView({block:"nearest"}))}function Q(){var M;return(M=C.current)==null?void 0:M.querySelector(`${D0}[aria-selected="true"]`)}function q(){var M;return Array.from(((M=C.current)==null?void 0:M.querySelectorAll(V1))||[])}function j(M){let $=q()[M];$&&k.setState("value",$.getAttribute(vs))}function X(M){var $;let F=Q(),H=q(),V=H.findIndex(ee=>ee===F),_=H[V+M];($=a.current)!=null&&$.loop&&(_=V+M<0?H[H.length-1]:V+M===H.length?H[0]:H[V+M]),_&&k.setState("value",_.getAttribute(vs))}function P(M){let $=Q(),F=$==null?void 0:$.closest(Ja),H;for(;F&&!H;)F=M>0?rG(F,Ja):oG(F,Ja),H=F==null?void 0:F.querySelector(V1);H?k.setState("value",H.getAttribute(vs)):X(M)}let N=()=>j(q().length-1),L=M=>{M.preventDefault(),M.metaKey?N():M.altKey?P(1):X(1)},A=M=>{M.preventDefault(),M.metaKey?j(0):M.altKey?P(-1):X(-1)};return p.createElement(be.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:M=>{var $;if(($=y.onKeyDown)==null||$.call(y,M),!M.defaultPrevented)switch(M.key){case"n":case"j":{x&&M.ctrlKey&&L(M);break}case"ArrowDown":{L(M);break}case"p":case"k":{x&&M.ctrlKey&&A(M);break}case"ArrowUp":{A(M);break}case"Home":{M.preventDefault(),j(0);break}case"End":{M.preventDefault(),N();break}case"Enter":if(!M.nativeEvent.isComposing&&M.keyCode!==229){M.preventDefault();let F=Q();if(F){let H=new Event(rv);F.dispatchEvent(H)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:aG},l),Eh(t,M=>p.createElement(WR.Provider,{value:k},p.createElement(VR.Provider,{value:T},M))))}),Yq=p.forwardRef((t,e)=>{var n,r;let o=dt(),s=p.useRef(null),i=p.useContext(KR),a=Uc(),l=GR(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Vs(()=>{if(!c)return a.item(o,i==null?void 0:i.id)},[c]);let u=YR(o,s,[t.value,t.children,s],t.keywords),d=L0(),h=Ws(E=>E.value&&E.value===u.current),m=Ws(E=>c||a.filter()===!1?!0:E.search?E.filtered.items.get(o)>0:!0);p.useEffect(()=>{let E=s.current;if(!(!E||t.disabled))return E.addEventListener(rv,g),()=>E.removeEventListener(rv,g)},[m,t.onSelect,t.disabled]);function g(){var E,k;v(),(k=(E=l.current).onSelect)==null||k.call(E,u.current)}function v(){d.setState("value",u.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:w,forceMount:b,keywords:S,...C}=t;return p.createElement(be.div,{ref:fc([s,e]),...C,id:o,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||a.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},t.children)}),Jq=p.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:o,...s}=t,i=dt(),a=p.useRef(null),l=p.useRef(null),c=dt(),u=Uc(),d=Ws(m=>o||u.filter()===!1?!0:m.search?m.filtered.groups.has(i):!0);Vs(()=>u.group(i),[]),YR(i,a,[t.value,t.heading,l]);let h=p.useMemo(()=>({id:i,forceMount:o}),[o]);return p.createElement(be.div,{ref:fc([a,e]),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&p.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Eh(t,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},p.createElement(KR.Provider,{value:h},m))))}),Xq=p.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,o=p.useRef(null),s=Ws(i=>!i.search);return!n&&!s?null:p.createElement(be.div,{ref:fc([o,e]),...r,"cmdk-separator":"",role:"separator"})}),Qq=p.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,o=t.value!=null,s=L0(),i=Ws(u=>u.search),a=Ws(u=>u.value),l=Uc(),c=p.useMemo(()=>{var u;let d=(u=l.listInnerRef.current)==null?void 0:u.querySelector(`${D0}[${vs}="${encodeURIComponent(a)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return p.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),p.createElement(be.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:o?t.value:i,onChange:u=>{o||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),Zq=p.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...o}=t,s=p.useRef(null),i=p.useRef(null),a=Uc();return p.useEffect(()=>{if(i.current&&s.current){let l=i.current,c=s.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let h=l.offsetHeight;c.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return d.observe(l),()=>{cancelAnimationFrame(u),d.unobserve(l)}}},[]),p.createElement(be.div,{ref:fc([s,e]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:a.listId},Eh(t,l=>p.createElement("div",{ref:fc([i,a.listInnerRef]),"cmdk-list-sizer":""},l)))}),eG=p.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:s,container:i,...a}=t;return p.createElement($R,{open:n,onOpenChange:r},p.createElement(FR,{container:i},p.createElement(I0,{"cmdk-overlay":"",className:o}),p.createElement(j0,{"aria-label":t.label,"cmdk-dialog":"",className:s},p.createElement(qR,{ref:e,...a}))))}),tG=p.forwardRef((t,e)=>Ws(n=>n.filtered.count===0)?p.createElement(be.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),nG=p.forwardRef((t,e)=>{let{progress:n,children:r,label:o="Loading...",...s}=t;return p.createElement(be.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Eh(t,i=>p.createElement("div",{"aria-hidden":!0},i)))}),ln=Object.assign(qR,{List:Zq,Item:Yq,Input:Qq,Group:Jq,Separator:Xq,Dialog:eG,Empty:tG,Loading:nG});function rG(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function oG(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function GR(t){let e=p.useRef(t);return Vs(()=>{e.current=t}),e}var Vs=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Si(t){let e=p.useRef();return e.current===void 0&&(e.current=t()),e}function fc(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Ws(t){let e=L0(),n=()=>t(e.snapshot());return Kq.useSyncExternalStore(e.subscribe,n,n)}function YR(t,e,n,r=[]){let o=p.useRef(),s=Uc();return Vs(()=>{var i;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():o.current}})(),l=r.map(c=>c.trim());s.value(t,a,l),(i=e.current)==null||i.setAttribute(vs,a),o.current=a}),o}var sG=()=>{let[t,e]=p.useState(),n=Si(()=>new Map);return Vs(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,o)=>{n.current.set(r,o),e({})}};function iG(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Eh({asChild:t,children:e},n){return t&&p.isValidElement(e)?p.cloneElement(iG(e),{ref:e.ref},n(e.props.children)):n(e)}var aG={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const lG=$R,cG=FR,JR=p.forwardRef(({className:t,...e},n)=>f.jsx(I0,{ref:n,className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));JR.displayName=I0.displayName;const XR=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(cG,{children:[f.jsx(JR,{}),f.jsxs(j0,{ref:r,className:oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,f.jsxs(Dq,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(y8,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));XR.displayName=j0.displayName;const QR=({className:t,...e})=>f.jsx("div",{className:oe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});QR.displayName="DialogHeader";const ZR=({className:t,...e})=>f.jsx("div",{className:oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ZR.displayName="DialogFooter";const eA=p.forwardRef(({className:t,...e},n)=>f.jsx(zR,{ref:n,className:oe("text-lg font-semibold leading-none tracking-tight",t),...e}));eA.displayName=zR.displayName;const tA=p.forwardRef(({className:t,...e},n)=>f.jsx(BR,{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));tA.displayName=BR.displayName;const nA=p.forwardRef(({className:t,...e},n)=>f.jsx(ln,{ref:n,className:oe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));nA.displayName=ln.displayName;const uG=p.forwardRef(({className:t,...e},n)=>f.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[f.jsx(vz,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),f.jsx(ln.Input,{ref:n,className:oe("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));uG.displayName=ln.Input.displayName;const rA=p.forwardRef(({className:t,...e},n)=>f.jsx(ln.List,{ref:n,className:oe("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));rA.displayName=ln.List.displayName;const oA=p.forwardRef((t,e)=>f.jsx(ln.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));oA.displayName=ln.Empty.displayName;const sA=p.forwardRef(({className:t,...e},n)=>f.jsx(ln.Group,{ref:n,className:oe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));sA.displayName=ln.Group.displayName;const dG=p.forwardRef(({className:t,...e},n)=>f.jsx(ln.Separator,{ref:n,className:oe("-mx-1 h-px bg-border",t),...e}));dG.displayName=ln.Separator.displayName;const fG=p.forwardRef(({className:t,...e},n)=>f.jsx(ln.Item,{ref:n,className:oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...e}));fG.displayName=ln.Item.displayName;function hG({options:t,selected:e,onChange:n,className:r,disabled:o=!1,label:s,emptyText:i="No options found"}){const[a,l]=p.useState(!1),c=p.useRef(null),u=m=>{l(m)},d=m=>{console.log("Selecting value:",m),setTimeout(()=>{e.includes(m)?n(e.filter(g=>g!==m)):n([...e,m])},0)},h=e.length>0;return f.jsxs(OK,{open:a,onOpenChange:u,children:[f.jsx(IK,{asChild:!0,children:f.jsxs(pe,{variant:h?"default":"outline",size:"sm",role:"combobox","aria-expanded":a,className:oe("h-8 px-3 text-xs flex items-center justify-between",h&&"bg-accent text-accent-foreground",r),disabled:o,onClick:m=>{m.stopPropagation(),l(!a)},children:[f.jsxs("span",{className:"flex items-center",children:[s,e.length===t.length?"All":e.length===0?"None":e.length<=2?e.map(m=>{var g;return((g=t.find(v=>v.value===m))==null?void 0:g.label)||m}).join(", "):e.slice(0,2).map(m=>{var g;return((g=t.find(v=>v.value===m))==null?void 0:g.label)||m}).join(", ")+` +${e.length-2}`&&f.jsx("span",{className:"ml-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:e.length})]}),f.jsx(Gf,{className:"ml-2 h-3.5 w-3.5 shrink-0 opacity-50"})]})}),f.jsx(cR,{className:"w-52 p-0",align:"start",sideOffset:5,children:f.jsx(nA,{ref:c,children:f.jsx(rA,{children:t.length===0?f.jsx(oA,{children:i}):f.jsx(sA,{children:t.map(m=>{const g=e.includes(m.value);return f.jsxs("div",{className:oe("relative flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-primary/10 hover:text-primary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",g&&"bg-accent text-accent-foreground",m.disabled&&"pointer-events-none opacity-50"),onClick:v=>{m.disabled||(v.preventDefault(),v.stopPropagation(),d(m.value))},children:[f.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",children:f.jsx(da,{className:oe("h-4 w-4",g?"opacity-100":"opacity-0")})}),f.jsxs("span",{className:"flex items-center",children:[m.icon&&f.jsx("span",{className:"mr-2",children:m.icon}),m.label]})]},m.value)})})})})})]})}function pG({items:t,className:e,label:n,emptyText:r="No options found"}){const[o,s]=p.useState(!1),i=a=>{try{typeof a.action=="function"&&a.action()}catch(l){console.error("Error executing action:",l)}finally{s(!1)}};return f.jsxs(m0,{open:o,onOpenChange:s,children:[f.jsx(g0,{asChild:!0,children:f.jsxs(pe,{variant:"outline",size:"sm",className:oe("h-8 px-3 text-xs flex items-center justify-between pointer-events-auto",e),children:[f.jsx("span",{children:n}),f.jsx(Gf,{className:"ml-2 h-3.5 w-3.5 shrink-0 opacity-50"})]})}),f.jsx(dh,{align:"start",className:"w-64",children:t.length===0?f.jsx("div",{className:"text-sm py-2 px-3 text-muted-foreground",children:r}):t.map(a=>f.jsxs(cc,{onClick:()=>i(a),className:`flex flex-col items-start py-2 cursor-pointer ${a.className}`,children:[f.jsxs("div",{className:"flex items-center w-full",children:[a.icon&&f.jsx("span",{className:"mr-2",children:a.icon}),f.jsx("span",{className:"font-medium",children:a.label})]}),a.description&&f.jsx("p",{className:"text-xs text-muted-foreground mt-1 ml-6",children:a.description})]},a.value))})]})}class mG{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&!(this.regexp&&!bG(this.search)),this.wholeWord=!!e.wholeWord,this.filter=e.filter||null,this.impl=this.valid?this.regexp?new yG(this):new vG(this):gG}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}findNext(e,n=0,r=e.doc.content.size){for(;;){if(n>=r)return null;let o=this.impl.findNext(e,n,r);if(!o||this.checkResult(e,o))return o;n=o.from+1}}findPrev(e,n=e.doc.content.size,r=0){for(;;){if(n<=r)return null;let o=this.impl.findPrev(e,n,r);if(!o||this.checkResult(e,o))return o;n=o.to-1}}checkResult(e,n){return(!this.wholeWord||K1(e,n.from)&&K1(e,n.to))&&(!this.filter||this.filter(e,n))}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}getReplacements(e,n){let o=e.doc.resolve(n.from).marksAcross(e.doc.resolve(n.to)),s=[],i=W.empty,a=n.from,{match:l}=n,c=l?xG(l):[[0,n.to-n.from]],u=wG(this.unquote(this.replace)),d;for(let h of u)if(typeof h=="string")i=i.addToEnd(e.schema.text(h,o));else if(d=c[h.group]){let m=n.matchStart+d[0],g=n.matchStart+d[1];h.copy?i=i.append(e.doc.slice(m,g).content):((i!=W.empty||m>a)&&(s.push({from:a,to:m,insert:new ne(i,0,0)}),i=W.empty),a=g)}return(i!=W.empty||a<n.to)&&s.push({from:a,to:n.to,insert:new ne(i,0,0)}),s}}const gG=new class{findNext(){return null}findPrev(){return null}};class vG{constructor(e){this.query=e;let n=e.unquote(e.search);e.caseSensitive||(n=n.toLowerCase()),this.string=n}findNext(e,n,r){return xa(e.doc,n,r,(o,s)=>{let i=Math.max(n,s),a=hc(o).slice(i-s,Math.min(o.content.size,r-s)),l=(this.query.caseSensitive?a:a.toLowerCase()).indexOf(this.string);return l<0?null:{from:i+l,to:i+l+this.string.length,match:null,matchStart:s}})}findPrev(e,n,r){return xa(e.doc,n,r,(o,s)=>{let i=Math.max(s,r),a=hc(o).slice(i-s,Math.min(o.content.size,n-s));this.query.caseSensitive||(a=a.toLowerCase());let l=a.lastIndexOf(this.string);return l<0?null:{from:i+l,to:i+l+this.string.length,match:null,matchStart:s}})}}const iA="g"+(/x/.unicode==null?"":"u")+(/x/.hasIndices==null?"":"d");class yG{constructor(e){this.query=e,this.regexp=new RegExp(e.search,iA+(e.caseSensitive?"":"i"))}findNext(e,n,r){return xa(e.doc,n,r,(o,s)=>{let i=hc(o).slice(0,Math.min(o.content.size,r-s));this.regexp.lastIndex=n-s;let a=this.regexp.exec(i);return a?{from:s+a.index,to:s+a.index+a[0].length,match:a,matchStart:s}:null})}findPrev(e,n,r){return xa(e.doc,n,r,(o,s)=>{let i=hc(o).slice(0,Math.min(o.content.size,n-s)),a;for(let l=0;;){this.regexp.lastIndex=l;let c=this.regexp.exec(i);if(!c)break;a=c,l=c.index+1}return a?{from:s+a.index,to:s+a.index+a[0].length,match:a,matchStart:s}:null})}}function xG(t){if(t.indices)return t.indices;let e=[[0,t[0].length]];for(let n=1,r=0;n<t.length;n++){let o=t[n]?t[0].indexOf(t[n],r):-1;e.push(o<0?void 0:[o,r=o+t[n].length])}return e}function wG(t){let e=[],n=-1;function r(o){let s=e.length-1;s>-1&&typeof e[s]=="string"?e[s]+=o:e.push(o)}for(;t.length;){let o=/\$([$&\d+])/.exec(t);if(!o)return r(t),e;if(o.index>0&&r(t.slice(0,o.index+(o[1]=="$"?1:0))),o[1]!="$"){let s=o[1]=="&"?0:+o[1];n>=s?e.push({group:s,copy:!0}):(n=s||1e3,e.push({group:s,copy:!1}))}t=t.slice(o.index+o[0].length)}return e}function bG(t){try{return new RegExp(t,iA),!0}catch{return!1}}const W1=new WeakMap;function hc(t){let e=W1.get(t);if(e)return e;let n="";for(let r=0;r<t.childCount;r++){let o=t.child(r);o.isText?n+=o.text:o.isLeaf?n+="":n+=" "+hc(o)+" "}return W1.set(t,n),n}function xa(t,e,n,r,o=0){if(t.inlineContent)return r(t,o);if(!t.isLeaf)if(e>n)for(let s=t.childCount-1,i=o+t.content.size;s>=0&&i>n;s--){let a=t.child(s);if(i-=a.nodeSize,i<e){let l=xa(a,e,n,r,i+1);if(l!=null)return l}}else for(let s=0,i=o;s<t.childCount&&i<n;s++){let a=t.child(s),l=i;if(i+=a.nodeSize,i>e){let c=xa(a,e,n,r,l+1);if(c!=null)return c}}return null}function K1(t,e){let n=t.doc.resolve(e),r=n.nodeBefore,o=n.nodeAfter;return!r||!o||!r.isText||!o.isText?!0:!new RegExp("\\p{L}$","u").test(r.text)||!new RegExp("^\\p{L}","u").test(o.text)}new In("search");function Th(t,e){try{const r=new mG({search:e,caseSensitive:!0,literal:!0}).findNext(t.state,0);return r?(console.log(" ProseMirror search found text:",{searchText:e.substring(0,50),foundAt:{from:r.from,to:r.to},actualText:t.state.doc.textBetween(r.from,r.to).substring(0,50)}),{from:r.from,to:r.to}):(console.warn(" ProseMirror search: text not found:",e.substring(0,50)),null)}catch(n){return console.error(" ProseMirror search error:",n),null}}function SG(t,e,n){try{let r=e,o=e;for(;o>0;){const a=o-1,l=Math.max(0,a-2),c=Math.min(t.content.size,a+2),u=t.textBetween(l,c),d=a-l;if(d>=0&&d<u.length){const h=u[d],m=d+1<u.length?u[d+1]:"";if(/[.!?]/.test(h)&&/[\s\n]/.test(m)||h===`
`&&d>0&&u[d-1]===`
`)break}r=a,o=a}let s=n;for(o=n;o<t.content.size;){const a=Math.max(0,o-1),l=Math.min(t.content.size,o+3),c=t.textBetween(a,l),u=o-a;if(u>=0&&u<c.length){const d=c[u];if(/[.!?]/.test(d)){s=o+1;break}if(d===`
`&&u+1<c.length&&c[u+1]===`
`){s=o;break}}o++}for(r=Math.max(0,r),s=Math.min(t.content.size,s);r<s;){const a=t.textBetween(r,r+1);if(!/\s/.test(a))break;r++}const i=t.textBetween(r,s);return console.log(" Sentence boundary expansion:",{original:{from:e,to:n},expanded:{from:r,to:s},originalText:t.textBetween(e,n).substring(0,50),expandedText:i.substring(0,50),expansionStats:{expandedBackward:e-r,expandedForward:s-n,finalLength:i.length}}),{from:r,to:s}}catch(r){return console.error(" Sentence expansion error:",r),{from:e,to:n}}}function hf(t,e){const n=Th(t,e);if(!n)return null;const r=SG(t.state.doc,n.from,n.to);return console.log(" Complete find and expand result:",{searchText:e.substring(0,50),foundPosition:n,expandedPosition:r,finalText:t.state.doc.textBetween(r.from,r.to).substring(0,100)}),r}function CG(t,e){let n=null;return t.state.doc.descendants((r,o)=>{const s=r.textContent;if(s.includes(e)){const i=o+s.indexOf(e),a=i+e.length;return n={from:i,to:a},!1}}),n&&console.log(" Fallback search found text:",{searchText:e.substring(0,50),position:n}),n}function $0(t,e){let n=Th(t,e);return n||(console.log(" ProseMirror search failed, trying fallback approach..."),n=CG(t,e)),n}function kG({editor:t,setComments:e,setIsInsightsOpen:n,highlightingManager:r,isAnalysisRunning:o,setIsAnalysisRunning:s,userId:i,fileId:a}){const[l,c]=p.useState(!1),[,u]=p.useState(null),[d,h]=p.useState(null),[m]=p.useState("Highlight important arguments with high emphasis, supporting details with medium emphasis, and transitions with low emphasis"),g=o!==void 0?o:l,v=s||c,x=S=>S?S.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"",y=p.useCallback(async S=>{var C,E,k,T,R,O,K,z,Z,Q,q;if(t){i&&await Ge(i,Re.FEEDBACK_REQUEST,{analysis_type:S,request_time:new Date().toISOString()},a),v(!0);try{i&&await Ge(i,Re.FEEDBACK_ANALYSIS_START,{analysis_type:S,start_time:new Date().toISOString()},a);let j="",X="all";switch(S){case"all":t.chain().focus().selectAll().run(),j=t.state.doc.textContent;break;case"custom":if(j=t.state.doc.textBetween(t.state.selection.from,t.state.selection.to),!j){ve.warning("Please make a Custom Selection first.");return}break;case"paragraph":{ve.warning("Paragraph analysis is not yet supported.");return}}if(!j){console.error("No content selected for analysis");return}const P=t.state.doc.textContent;console.log(" Running analysis with flow highlighting for:",S);const N=await Eg({content:j,fullContext:P,targetType:X,flowPrompt:m});if(u(N.data),h(new Date),console.log(" Analysis response received:",{hasComments:!!((E=(C=N.data)==null?void 0:C.comments)!=null&&E.length),commentsCount:((T=(k=N.data)==null?void 0:k.comments)==null?void 0:T.length)||0,hasFlowHighlights:!!((O=(R=N.data)==null?void 0:R.flowHighlights)!=null&&O.length),flowHighlightsCount:((z=(K=N.data)==null?void 0:K.flowHighlights)==null?void 0:z.length)||0}),N.data.flowHighlights&&N.data.flowHighlights.length>0&&r){console.log(" Processing flow highlights as part of regular analysis:",N.data.flowHighlights.length,"highlights"),r.setDocumentContext(P);const L=[];N.data.flowHighlights.forEach((A,M)=>{const $=A.text,F=hf(t,$);if(F){const H={id:`flow-${Date.now()}-${M}`,connectionStrength:A.connectionStrength,connectedSentences:[],position:F};L.push(H);const V=t.state.doc.textBetween(F.from,F.to);console.log(` Flow highlight ${M+1} - ProseMirror search success:`,{original:$.substring(0,50),actualHighlighted:V.substring(0,50),position:F,strength:A.connectionStrength})}else console.warn(" ProseMirror search could not find position for flow highlight text:",$.substring(0,100))}),L.length>0&&(S==="all"?(r.addFlowHighlights(L),console.log(" Flow highlights replaced for full document analysis")):console.log(" Skipping flow highlights for custom analysis - will generate full flow next"),console.log(" Flow highlights details:",L.map(A=>({text:A.position?t.state.doc.textBetween(A.position.from,A.position.to):"no position",strength:A.connectionStrength,position:A.position}))))}else console.log(" No flow highlights returned or HighlightingManager not available");if(((Z=N.data.comments)==null?void 0:Z.length)>0){const L=[];N.data.comments.forEach(A=>{const M=A.highlightedText,$=$0(t,M);if($){const F=`comment-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,H={id:F,content:A.text,createdAt:new Date,createdAtTime:new Date,quotedText:A.highlightedText,isAIFeedback:!0,issueType:A.issueType||"general",...A.suggestedEdit?{suggestedEdit:{original:A.suggestedEdit.original,suggested:A.suggestedEdit.suggested,explanation:A.suggestedEdit.explanation,references:A.suggestedEdit.references||[]}}:{}};t.chain().setTextSelection($).setComment(F).run(),L.push(H)}}),e(A=>[...A,...L]),(r==null?void 0:r.getCurrentMode())==="comments"&&n(!0)}S==="custom"&&(console.log(" Custom analysis complete, generating full document flow highlights..."),await w()),i&&await Ge(i,Re.FEEDBACK_ANALYSIS_COMPLETE,{analysis_type:S,completion_time:new Date().toISOString(),comments_generated:((Q=N.data.comments)==null?void 0:Q.length)||0,flow_highlights_generated:((q=N.data.flowHighlights)==null?void 0:q.length)||0,success:!0},a),t&&t.commands.focus("end")}catch(j){console.error("Error running contextual analysis:",j),ve.error("Analysis failed. Please try again."),u(null),i&&await Ge(i,Re.FEEDBACK_ANALYSIS_COMPLETE,{analysis_type:S,completion_time:new Date().toISOString(),success:!1,error:j instanceof Error?j.message:"Unknown error"},a)}finally{v(!1)}}},[t,e,n,m,r,v]),w=p.useCallback(async()=>{if(!(!t||!r))try{console.log(" Generating full document flow highlights...");const S=t.state.doc.textContent,C=await Eg({content:S,fullContext:S,targetType:"flow",flowPrompt:m});if(C.data.flowHighlights&&C.data.flowHighlights.length>0){console.log(" Processing full document flow highlights:",C.data.flowHighlights.length,"highlights"),r.setDocumentContext(S);const E=[];C.data.flowHighlights.forEach((k,T)=>{const R=k.text,O=hf(t,R);if(O){const K={id:`flow-full-${Date.now()}-${T}`,connectionStrength:k.connectionStrength,connectedSentences:[],position:O};E.push(K)}}),E.length>0&&(r.addFlowHighlights(E),console.log(" Full document flow highlights generated and applied"))}}catch(S){console.error("Error generating full flow highlights:",S)}},[t,r,m]),b=[{value:"all",label:"Check everything",icon:f.jsx(CT,{className:"h-3.5 w-3.5 text-blue-500"}),className:"flex items-center cursor-pointer border-b border-gray-200 border-solid pt-2 pb-2",description:"Get comprehensive feedback for the entire document",action:()=>{n(!1),y("all")}},{value:"custom",label:"Check custom selection",description:"Get feedback for the selected text",icon:f.jsx(kT,{className:"h-3.5 w-3.5 text-purple-500"}),action:()=>{n(!1),y("custom")}}];return f.jsxs("div",{className:"flex items-center space-x-3",children:[d&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-xs text-muted-foreground flex items-center",children:[f.jsx(wT,{className:"h-3 w-3 mr-1.5"}),f.jsxs("span",{children:["Feedback last updated at ",x(d)]})]}),f.jsx("div",{className:"w-[1px] h-5 bg-border/40 dark:bg-zinc-800 rounded-full"})]}),f.jsx("div",{className:"flex space-x-1 text-sm",children:g?f.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 ",children:[f.jsx(fa,{className:"h-3.5 w-3.5 animate-spin"}),f.jsx("span",{children:"Checking..."})]}):f.jsx(pG,{label:"Check for Feedback",items:b})})]})}const aA=p.createContext(void 0);function EG({children:t}){const[e,n]=p.useState(null),[r,o]=p.useState(!0);p.useEffect(()=>{(async()=>{const u=localStorage.getItem("coherence-user");if(u)try{const d=JSON.parse(u);n(d)}catch(d){console.error("Error parsing stored user:",d),localStorage.removeItem("coherence-user")}o(!1)})()},[]);const s=async c=>{try{o(!0);const{data:u,error:d}=await ft.from("users").select("*").eq("prolific_id",c).single();if(d&&d.code!=="PGRST116")return console.error("Error fetching user:",d),{error:d};let h;if(u)h=u.id;else{const{data:g,error:v}=await ft.from("users").insert([{prolific_id:c}]).select().single();if(v)return console.error("Error creating user:",v),{error:v};h=g.id}const m={id:h,prolificId:c};return n(m),localStorage.setItem("coherence-user",JSON.stringify(m)),await l(h,"login",{prolificId:c}),{data:m}}catch(u){return console.error("Unexpected error during login:",u),{error:u}}finally{o(!1)}},i=async()=>{e&&await l(e.id,"logout",{}),localStorage.removeItem("coherence-user"),n(null)},a=async()=>{try{const c=crypto.randomUUID(),u=`test_${Date.now()}`,d={id:c,prolificId:u};n(d),localStorage.setItem("coherence-user",JSON.stringify(d));try{await l(c,"login",{prolificId:u,bypass:!0})}catch{console.warn("Could not log bypass login event, but continuing anyway")}return{data:d}}catch(c){return console.error("Error in bypass login:",c),{error:c}}finally{o(!1)}},l=async(c,u,d)=>{try{await ft.from("user_events").insert([{user_id:c,event_type:u,event_data:d}])}catch(h){console.error(`Error logging ${u} event:`,h)}};return f.jsx(aA.Provider,{value:{user:e,loading:r,login:s,logout:i,bypassLogin:a},children:t})}function oi(){const t=p.useContext(aA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function TG(t,e,n){var i;let r;typeof t.createdAt=="object"&&t.createdAt instanceof Date?r=t.createdAt.toISOString():typeof t.createdAt=="string"?r=t.createdAt:r=new Date().toISOString();let o="";t.content!==void 0&&t.content!==null?o=String(t.content):t.text?o=String(t.text):(i=t.suggestedEdit)!=null&&i.explanation?o=t.suggestedEdit.explanation:t.quotedText&&(o=`Comment on: ${t.quotedText}`),console.log("Processing comment for DB:",{id:t.id,originalContent:t.content,processedContent:o,hasText:!!t.text,hasSuggestedEdit:!!t.suggestedEdit});const s={id:t.id.includes("-")&&t.id.length===36?t.id:crypto.randomUUID(),file_id:e,user_id:n,content:o,position_start:t.from||0,position_end:t.to||0,created_at:r,updated_at:new Date().toISOString(),resolved:t.resolved||!1,is_ai_feedback:t.isAIFeedback||!!t.suggestedEdit,issue_type:t.issueType,completion_info:t.completionInfo||[]};return t.suggestedEdit&&(s.original_text=t.suggestedEdit.original||t.quotedText||"",s.suggested_text=t.suggestedEdit.suggested||"",s.explanation=t.suggestedEdit.explanation||""),s}function q1(t){try{console.log("Converting DB comment to UI format:",t);let e,n=t.content;if(t.is_ai_feedback||t.original_text||t.suggested_text||t.explanation)e={original:t.original_text||"",suggested:t.suggested_text||"",explanation:t.explanation||""},t.is_ai_feedback&&(n="AI Suggestion");else try{const o=JSON.parse(t.content);o&&typeof o=="object"&&o.suggestedEdit&&(e=o.suggestedEdit,n="AI Suggestion")}catch{}const r={id:t.id,content:n,from:t.position_start,to:t.position_end,createdAt:new Date(t.created_at),updatedAt:t.updated_at,resolved:t.resolved||!1,quotedText:t.original_text||"",isAIFeedback:t.is_ai_feedback,issueType:t.issue_type,suggestedEdit:e,completionInfo:t.completion_info||[]};return console.log("DB comment converted to UI format:",r),r}catch(e){return console.error("Error converting DB comment to UI format:",e),{id:t.id,content:t.content||"(Error loading comment)",from:t.position_start,to:t.position_end,createdAt:new Date(t.created_at)}}}class F0{constructor(e){He(this,"userId");this.userId=e}updateUserId(e){this.userId=e}async saveFile(e,n,r){try{const o=new Date().toISOString();if(r){const{data:s,error:i}=await ft.from("files").update({title:e,content:n,updated_at:o}).eq("id",r).eq("user_id",this.userId).select().single();return i?(console.error("Error updating file:",i),null):(await Ge(this.userId,Re.FILE_SAVE,{file_id:r,title:e,action:"update"}),s)}else{const{data:s,error:i}=await ft.from("files").insert([{user_id:this.userId,title:e,content:n,created_at:o,updated_at:o}]).select().single();return i?(console.error("Error creating file:",i),null):(await Ge(this.userId,Re.FILE_SAVE,{file_id:s.id,title:e,action:"create"}),s)}}catch(o){return console.error("Failed to save file:",o),null}}async getFile(e){try{const{data:n,error:r}=await ft.from("files").select("*").eq("id",e).eq("user_id",this.userId).single();return r?(console.error("Error getting file:",r),null):(await Ge(this.userId,Re.FILE_OPEN,{file_id:e,title:n.title}),n)}catch(n){return console.error("Failed to get file:",n),null}}async getAllFiles(){try{const{data:e,error:n}=await ft.from("files").select("*").eq("user_id",this.userId).order("updated_at",{ascending:!1});return n?(console.error("Error getting files:",n),[]):e||[]}catch(e){return console.error("Failed to get files:",e),[]}}async deleteFile(e){try{const{error:n}=await ft.from("files").delete().eq("id",e).eq("user_id",this.userId);return n?(console.error("Error deleting file:",n),!1):(await Ge(this.userId,Re.FILE_SAVE,{file_id:e,action:"delete"}),!0)}catch(n){return console.error("Failed to delete file:",n),!1}}async getComments(e){try{if(console.log(`Getting comments for file ${e} with userId ${this.userId}`),!e||typeof e!="string")return console.error("Invalid fileId for getting comments:",e),[];const{data:n,error:r}=await ft.from("comments").select("*").eq("file_id",e).order("created_at",{ascending:!0});return r?(console.error("Error getting comments:",r),[]):(console.log(`Retrieved ${(n==null?void 0:n.length)||0} comments for file ${e}:`,n),n||[])}catch(n){return console.error("Failed to get comments:",n),[]}}async addComment(e,n,r,o){try{const s=new Date().toISOString(),{data:i,error:a}=await ft.from("comments").insert([{file_id:e,user_id:this.userId,content:n,position_start:r,position_end:o,created_at:s,updated_at:s,completion_info:[]}]).select().single();return a?(console.error("Error adding comment:",a),null):(await Ge(this.userId,Re.COMMENT_ADD,{file_id:e,comment_id:i.id}),i)}catch(s){return console.error("Failed to add comment:",s),null}}async updateComment(e,n,r){try{const s={updated_at:new Date().toISOString()};n!==void 0&&(s.content=n),r!==void 0&&(s.resolved=r);const{data:i,error:a}=await ft.from("comments").update(s).eq("id",e).eq("user_id",this.userId).select().single();return a?(console.error("Error updating comment:",a),null):(await Ge(this.userId,Re.COMMENT_EDIT,{comment_id:e,file_id:i.file_id}),i)}catch(o){return console.error("Failed to update comment:",o),null}}async deleteComment(e){try{const{data:n,error:r}=await ft.from("comments").select("file_id").eq("id",e).eq("user_id",this.userId).single();if(r)return console.error("Error fetching comment:",r),!1;const{error:o}=await ft.from("comments").delete().eq("id",e).eq("user_id",this.userId);return o?(console.error("Error deleting comment:",o),!1):(await Ge(this.userId,Re.COMMENT_DELETE,{comment_id:e,file_id:n.file_id}),!0)}catch(n){return console.error("Failed to delete comment:",n),!1}}async saveComments(e,n){try{if(console.log(`Saving ${n.length} comments for file ${e}`),console.log("User ID for comment saving:",this.userId),!e||typeof e!="string"||e.length!==36)return console.error("Invalid fileId for saving comments:",e),!1;const{error:r}=await ft.from("comments").delete().eq("file_id",e);if(r)return console.error("Error deleting existing comments:",r),!1;if(n.length>0)try{const o=[];for(const i of n)try{if(!i||!i.id){console.warn("Skipping invalid comment (missing ID):",i);continue}const a=TG(i,e,this.userId);a.content||(console.warn("Comment has null content, setting to empty string:",i),a.content=""),o.push(a)}catch(a){console.error("Error converting comment - skipping:",a,i)}if(console.log(`Inserting ${o.length} DB comments`),o.length===0)return console.warn("No valid comments to save after conversion"),!0;const s=20;for(let i=0;i<o.length;i+=s){const a=o.slice(i,i+s);console.log(`Inserting batch ${i/s+1} of ${Math.ceil(o.length/s)}`);const{error:l}=await ft.from("comments").insert(a);if(l){console.error("Error saving comments batch:",l);for(const c of a)try{await ft.from("comments").insert([c])}catch(u){console.error("Failed to insert single comment:",c,u)}}}}catch(o){return console.error("Error in comment insert process:",o),!1}return await Ge(this.userId,Re.FILE_SAVE,{file_id:e,comment_count:n.length,action:"save_comments"}),console.log(`Successfully saved ${n.length} comments`),!0}catch(r){return console.error("Failed to save comments:",r),!1}}}function er(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ks(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const lA=6048e5,NG=864e5;let MG={};function Nh(){return MG}function pc(t,e){var a,l,c,u;const n=Nh(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=er(t),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function pf(t){return pc(t,{weekStartsOn:1})}function cA(t){const e=er(t),n=e.getFullYear(),r=Ks(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=pf(r),s=Ks(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=pf(s);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function G1(t){const e=er(t);return e.setHours(0,0,0,0),e}function Y1(t){const e=er(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function _G(t,e){const n=G1(t),r=G1(e),o=+n-Y1(n),s=+r-Y1(r);return Math.round((o-s)/NG)}function PG(t){const e=cA(t),n=Ks(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),pf(n)}function RG(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function AG(t){if(!RG(t)&&typeof t!="number")return!1;const e=er(t);return!isNaN(Number(e))}function OG(t){const e=er(t),n=Ks(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const IG={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jG=(t,e,n)=>{let r;const o=IG[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function om(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const DG={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LG={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$G={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FG={date:om({formats:DG,defaultWidth:"full"}),time:om({formats:LG,defaultWidth:"full"}),dateTime:om({formats:$G,defaultWidth:"full"})},zG={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},BG=(t,e,n,r)=>zG[t];function Xa(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const HG={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},UG={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WG={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},KG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},GG=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},YG={ordinalNumber:GG,era:Xa({values:HG,defaultWidth:"wide"}),quarter:Xa({values:UG,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Xa({values:VG,defaultWidth:"wide"}),day:Xa({values:WG,defaultWidth:"wide"}),dayPeriod:Xa({values:KG,defaultWidth:"wide",formattingValues:qG,defaultFormattingWidth:"wide"})};function Qa(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?XG(a,d=>d.test(i)):JG(a,d=>d.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(i.length);return{value:c,rest:u}}}function JG(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function XG(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function QG(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const ZG=/^(\d+)(th|st|nd|rd)?/i,eY=/\d+/i,tY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nY={any:[/^b/i,/^(a|c)/i]},rY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oY={any:[/1/i,/2/i,/3/i,/4/i]},sY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},aY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},dY={ordinalNumber:QG({matchPattern:ZG,parsePattern:eY,valueCallback:t=>parseInt(t,10)}),era:Qa({matchPatterns:tY,defaultMatchWidth:"wide",parsePatterns:nY,defaultParseWidth:"any"}),quarter:Qa({matchPatterns:rY,defaultMatchWidth:"wide",parsePatterns:oY,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qa({matchPatterns:sY,defaultMatchWidth:"wide",parsePatterns:iY,defaultParseWidth:"any"}),day:Qa({matchPatterns:aY,defaultMatchWidth:"wide",parsePatterns:lY,defaultParseWidth:"any"}),dayPeriod:Qa({matchPatterns:cY,defaultMatchWidth:"any",parsePatterns:uY,defaultParseWidth:"any"})},fY={code:"en-US",formatDistance:jG,formatLong:FG,formatRelative:BG,localize:YG,match:dY,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hY(t){const e=er(t);return _G(e,OG(e))+1}function pY(t){const e=er(t),n=+pf(e)-+PG(e);return Math.round(n/lA)+1}function uA(t,e){var u,d,h,m;const n=er(t),r=n.getFullYear(),o=Nh(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??o.firstWeekContainsDate??((m=(h=o.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,i=Ks(t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=pc(i,e),l=Ks(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=pc(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function mY(t,e){var a,l,c,u;const n=Nh(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,o=uA(t,e),s=Ks(t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),pc(s,e)}function gY(t,e){const n=er(t),r=+pc(n,e)-+mY(n,e);return Math.round(r/lA)+1}function Ie(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const eo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ie(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ie(n+1,2)},d(t,e){return Ie(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ie(t.getHours()%12||12,e.length)},H(t,e){return Ie(t.getHours(),e.length)},m(t,e){return Ie(t.getMinutes(),e.length)},s(t,e){return Ie(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Ie(o,e.length)}},yi={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},J1={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return eo.y(t,e)},Y:function(t,e,n,r){const o=uA(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return Ie(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ie(s,e.length)},R:function(t,e){const n=cA(t);return Ie(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ie(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ie(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ie(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return eo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ie(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=gY(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):Ie(o,e.length)},I:function(t,e,n){const r=pY(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ie(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):eo.d(t,e)},D:function(t,e,n){const r=hY(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ie(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ie(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ie(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return Ie(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=yi.noon:r===0?o=yi.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=yi.evening:r>=12?o=yi.afternoon:r>=4?o=yi.morning:o=yi.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return eo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):eo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ie(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ie(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):eo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):eo.s(t,e)},S:function(t,e){return eo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Q1(r);case"XXXX":case"XX":return fs(r);case"XXXXX":case"XXX":default:return fs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Q1(r);case"xxxx":case"xx":return fs(r);case"xxxxx":case"xxx":default:return fs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+X1(r,":");case"OOOO":default:return"GMT"+fs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+X1(r,":");case"zzzz":default:return"GMT"+fs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ie(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ie(r,e.length)}};function X1(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+Ie(s,2)}function Q1(t,e){return t%60===0?(t>0?"-":"+")+Ie(Math.abs(t)/60,2):fs(t,e)}function fs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Ie(Math.trunc(r/60),2),s=Ie(r%60,2);return n+o+e+s}const Z1=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},dA=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vY=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return Z1(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Z1(r,e)).replace("{{time}}",dA(o,e))},yY={p:dA,P:vY},xY=/^D+$/,wY=/^Y+$/,bY=["D","DD","YY","YYYY"];function SY(t){return xY.test(t)}function CY(t){return wY.test(t)}function kY(t,e,n){const r=EY(t,e,n);if(console.warn(r),bY.includes(t))throw new RangeError(r)}function EY(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MY=/^'([^]*?)'?$/,_Y=/''/g,PY=/[a-zA-Z]/;function RY(t,e,n){var u,d,h,m;const r=Nh(),o=r.locale??fY,s=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=r.weekStartsOn??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,a=er(t);if(!AG(a))throw new RangeError("Invalid time value");let l=e.match(NY).map(g=>{const v=g[0];if(v==="p"||v==="P"){const x=yY[v];return x(g,o.formatLong)}return g}).join("").match(TY).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:AY(g)};if(J1[v])return{isToken:!0,value:g};if(v.match(PY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(g=>{if(!g.isToken)return g.value;const v=g.value;(CY(v)||SY(v))&&kY(v,e,String(t));const x=J1[v[0]];return x(a,v,o.localize,c)}).join("")}function AY(t){const e=t.match(MY);return e?e[1].replace(_Y,"'"):t}function OY({isOpen:t,onClose:e,onFileSelect:n,eventBatcher:r}){const[o,s]=p.useState([]),[i,a]=p.useState(!0),{user:l}=oi();p.useEffect(()=>{(async()=>{if(l&&t){a(!0);try{const m=await new F0(l.id).getAllFiles();s(m),r==null||r.addEvent(Re.FILE_OPEN,{action:"view_file_list",file_count:m.length})}catch(h){console.error("Error loading files:",h)}finally{a(!1)}}})()},[l,t,r]);const c=d=>{n(d),e()},u=d=>{try{const h=new Date(d);return RY(h,"MMM d, yyyy h:mm a")}catch{return d}};return f.jsx(lG,{open:t,onOpenChange:e,children:f.jsxs(XR,{className:"sm:max-w-[525px]",children:[f.jsxs(QR,{children:[f.jsx(eA,{children:"Your Documents"}),f.jsx(tA,{children:"Select a document to load"})]}),f.jsx("div",{className:"py-4",children:i?f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsx(fa,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.length===0?f.jsx("div",{className:"text-center py-8 text-muted-foreground",children:f.jsx("p",{children:"No saved documents found"})}):f.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2",children:o.map(d=>f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>c(d),children:[f.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-md",children:f.jsx(CT,{className:"h-5 w-5 text-blue-700 dark:text-blue-400"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h4",{className:"font-medium text-sm truncate",children:d.title}),f.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(rz,{className:"h-3 w-3"}),f.jsxs("span",{children:["Created: ",u(d.created_at)]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(wT,{className:"h-3 w-3"}),f.jsxs("span",{children:["Updated: ",u(d.updated_at)]})]})]})]})]},d.id))})}),f.jsx(ZR,{children:f.jsx(pe,{variant:"outline",onClick:e,children:"Cancel"})})]})})}function IY({editor:t,documentTitle:e,setDocumentTitle:n,comments:r,setIsInsightsOpen:o,setIsHelpOpen:s,isHelpOpen:i,setComments:a,eventBatcher:l,currentFileId:c,setCurrentFileId:u,onLoadFile:d,highlightingManager:h,isAnalysisRunning:m,setIsAnalysisRunning:g,userId:v,isAnyAnalysisRunning:x,editorMode:y,onModeChange:w}){const[b,S]=p.useState(!1),[C,E]=p.useState(!1),k=navigator.platform.toUpperCase().indexOf("MAC")>=0,{user:T}=oi(),[R,O]=p.useState(null);p.useEffect(()=>{O(T?new F0(T.id):null)},[T]),p.useEffect(()=>{h&&y&&(console.log(" Syncing highlighting manager with initial editor mode state:",y),h.switchMode(y))},[h,y]);const K=p.useCallback(async()=>{if(!t||!T)return;S(!0);const q=t.getHTML();try{if(localStorage.setItem("ripple-doc",JSON.stringify({title:e,content:q,comments:r,lastSaved:new Date().toISOString()})),R){console.log("Comments to save:",r);const j=await R.saveFile(e,q,c||void 0);if(j&&u){u(j.id);try{await R.saveComments(j.id,r),ve.success("Document saved to cloud"),l==null||l.addEvent(Re.FILE_SAVE,{file_id:j.id,title:e,comment_count:r.length,success:!0})}catch(X){console.error("Error saving comments:",X),ve.error("File saved but failed to save comments"),l==null||l.addEvent(Re.FILE_SAVE,{file_id:j.id,title:e,success:!0,comments_success:!1,error:String(X)})}}else ve.success("Document saved locally")}else ve.success("Document saved locally")}catch(j){console.error("Error saving document:",j),ve.error("Failed to save document"),l==null||l.addEvent(Re.ERROR,{action:"save_document",error:String(j)})}finally{S(!1)}},[t,e,r,T,R,c,u,l]),z=p.useCallback(async()=>{if(!t||!T)return;S(!0);const q=t.getHTML();try{const j=new Date().toISOString().split("T")[0],X=`${e} - ${j}`,P=`ripple-doc-${Date.now()}`;if(localStorage.setItem(P,JSON.stringify({title:X,content:q,comments:r,lastSaved:new Date().toISOString()})),R){const N=await R.saveFile(X,q);if(N&&u){u(N.id);try{await R.saveComments(N.id,r),n(X),ve.success("Saved as new document in cloud"),l==null||l.addEvent(Re.FILE_SAVE,{file_id:N.id,title:X,comment_count:r.length,success:!0,action:"save_as"})}catch(L){console.error("Error saving comments:",L),n(X),ve.error("New file saved but failed to save comments"),l==null||l.addEvent(Re.FILE_SAVE,{file_id:N.id,title:X,success:!0,comments_success:!1,error:String(L),action:"save_as"})}}else n(X),ve.error("Failed to save to cloud, but saved locally"),l==null||l.addEvent(Re.FILE_SAVE,{title:X,success:!1,error:"Database save failed",action:"save_as"})}else n(X),ve.success("Document saved as new copy locally")}catch(j){console.error("Error saving document:",j),ve.error("Failed to save document"),l==null||l.addEvent(Re.ERROR,{action:"save_as_document",error:String(j)})}finally{S(!1)}},[t,e,r,T,R,n,u,l]),Z=()=>{E(!0)},Q=q=>{d&&(d(q),l==null||l.addEvent(Re.FILE_OPEN,{file_id:q.id,title:q.title,action:"load_file"}))};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"px-4 py-2 border-b border-border/40 bg-blue-100/60 dark:bg-blue-900/10 backdrop-blur supports-[backdrop-filter]:bg-blue-100/40 dark:supports-[backdrop-filter]:bg-blue-900/5",children:f.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"flex items-center space-x-2",children:f.jsx("span",{className:"text-sm font-semibold",children:"Ripple"})}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx("input",{type:"text",value:e,onChange:q=>n(q.target.value),placeholder:"Untitled document",className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 p-0 h-6 text-stone-800 dark:text-zinc-100"}),f.jsx("div",{className:"bg-white dark:bg-transparent rounded-lg shadow-sm dark:shadow-none",children:f.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>s(!i),className:"h-7 px-3 text-xs flex items-center space-x-1",children:[f.jsx(xT,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Help"})]})}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx(_P,{}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsxs(pe,{variant:"ghost",size:"sm",onClick:Z,className:"h-7 px-3 text-xs flex items-center space-x-2",children:[f.jsx(Rb,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Open"})]}),f.jsxs(pe,{variant:"ghost",size:"sm",onClick:K,disabled:b,className:"h-7 px-3 text-xs flex items-center space-x-2",children:[f.jsx(Rb,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Save"}),f.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:k?"S":"Ctrl+S"})]}),f.jsxs(pe,{variant:"ghost",size:"sm",onClick:z,disabled:b,className:"h-7 px-3 text-xs flex items-center space-x-2",children:[f.jsx(dz,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Save As"})]})]})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{}),f.jsx(kG,{editor:t,setComments:a,setIsInsightsOpen:o,highlightingManager:h||void 0,isAnalysisRunning:m,setIsAnalysisRunning:g,userId:v,fileId:c||void 0}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx(wK,{value:y||"flow",onValueChange:w||(()=>{}),disabled:x}),f.jsx("div",{className:"w-[1px] h-7 bg-border/40 dark:bg-zinc-800 rounded-full"}),f.jsx("div",{className:"bg-white dark:bg-transparent rounded-lg shadow-sm dark:shadow-none",children:f.jsxs(pe,{variant:y==="comments"?"default":"ghost",size:"sm",onClick:()=>w==null?void 0:w("comments"),className:"h-7 px-3 text-xs flex items-center space-x-1",disabled:x,children:[f.jsx(ST,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:"Toggle Suggestions"})]})})]})]})}),d&&f.jsx(OY,{isOpen:C,onClose:()=>E(!1),onFileSelect:Q,eventBatcher:l})]})}function eS(t,[e,n]){return Math.min(n,Math.max(e,t))}function jY(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var DY=[" ","Enter","ArrowUp","ArrowDown"],LY=[" ","Enter"],Vc="Select",[Mh,_h,$Y]=o0(Vc),[Aa,DQ]=Ft(Vc,[$Y,yr]),Ph=yr(),[FY,ts]=Aa(Vc),[zY,BY]=Aa(Vc),fA=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:o,onOpenChange:s,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:m,form:g}=t,v=Ph(e),[x,y]=p.useState(null),[w,b]=p.useState(null),[S,C]=p.useState(!1),E=Xs(c),[k=!1,T]=Jn({prop:r,defaultProp:o,onChange:s}),[R,O]=Jn({prop:i,defaultProp:a,onChange:l}),K=p.useRef(null),z=x?g||!!x.closest("form"):!0,[Z,Q]=p.useState(new Set),q=Array.from(Z).map(j=>j.props.value).join(";");return f.jsx(Oc,{...v,children:f.jsxs(FY,{required:m,scope:e,trigger:x,onTriggerChange:y,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:dt(),value:R,onValueChange:O,open:k,onOpenChange:T,dir:E,triggerPointerDownPosRef:K,disabled:h,children:[f.jsx(Mh.Provider,{scope:e,children:f.jsx(zY,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(j=>{Q(X=>new Set(X).add(j))},[]),onNativeOptionRemove:p.useCallback(j=>{Q(X=>{const P=new Set(X);return P.delete(j),P})},[]),children:n})}),z?f.jsxs(LA,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:d,value:R,onChange:j=>O(j.target.value),disabled:h,form:g,children:[R===void 0?f.jsx("option",{value:""}):null,Array.from(Z)]},q):null]})})};fA.displayName=Vc;var hA="SelectTrigger",pA=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,s=Ph(n),i=ts(hA,n),a=i.disabled||r,l=De(e,i.onTriggerChange),c=_h(n),u=p.useRef("touch"),[d,h,m]=$A(v=>{const x=c().filter(b=>!b.disabled),y=x.find(b=>b.value===i.value),w=FA(x,v,y);w!==void 0&&i.onValueChange(w.value)}),g=v=>{a||(i.onOpenChange(!0),m()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return f.jsx(Ma,{asChild:!0,...s,children:f.jsx(be.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":DA(i.value)?"":void 0,...o,ref:l,onClick:re(o.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&g(v)}),onPointerDown:re(o.onPointerDown,v=>{u.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:re(o.onKeyDown,v=>{const x=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(x&&v.key===" ")&&DY.includes(v.key)&&(g(),v.preventDefault())})})})});pA.displayName=hA;var mA="SelectValue",gA=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...a}=t,l=ts(mA,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=De(e,l.onValueNodeChange);return ze(()=>{c(u)},[c,u]),f.jsx(be.span,{...a,ref:d,style:{pointerEvents:"none"},children:DA(l.value)?f.jsx(f.Fragment,{children:i}):s})});gA.displayName=mA;var HY="SelectIcon",vA=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...o}=t;return f.jsx(be.span,{"aria-hidden":!0,...o,ref:e,children:r||""})});vA.displayName=HY;var UY="SelectPortal",yA=t=>f.jsx(Dc,{asChild:!0,...t});yA.displayName=UY;var qs="SelectContent",xA=p.forwardRef((t,e)=>{const n=ts(qs,t.__scopeSelect),[r,o]=p.useState();if(ze(()=>{o(new DocumentFragment)},[]),!n.open){const s=r;return s?Go.createPortal(f.jsx(wA,{scope:t.__scopeSelect,children:f.jsx(Mh.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),s):null}return f.jsx(bA,{...t,ref:e})});xA.displayName=qs;var $n=10,[wA,ns]=Aa(qs),VY="SelectContentImpl",bA=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=t,w=ts(qs,n),[b,S]=p.useState(null),[C,E]=p.useState(null),k=De(e,_=>S(_)),[T,R]=p.useState(null),[O,K]=p.useState(null),z=_h(n),[Z,Q]=p.useState(!1),q=p.useRef(!1);p.useEffect(()=>{if(b)return Pc(b)},[b]),Nc();const j=p.useCallback(_=>{const[ee,...te]=z().map(he=>he.ref.current),[ie]=te.slice(-1),ge=document.activeElement;for(const he of _)if(he===ge||(he==null||he.scrollIntoView({block:"nearest"}),he===ee&&C&&(C.scrollTop=0),he===ie&&C&&(C.scrollTop=C.scrollHeight),he==null||he.focus(),document.activeElement!==ge))return},[z,C]),X=p.useCallback(()=>j([T,b]),[j,T,b]);p.useEffect(()=>{Z&&X()},[Z,X]);const{onOpenChange:P,triggerPointerDownPosRef:N}=w;p.useEffect(()=>{if(b){let _={x:0,y:0};const ee=ie=>{var ge,he;_={x:Math.abs(Math.round(ie.pageX)-(((ge=N.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((he=N.current)==null?void 0:he.y)??0))}},te=ie=>{_.x<=10&&_.y<=10?ie.preventDefault():b.contains(ie.target)||P(!1),document.removeEventListener("pointermove",ee),N.current=null};return N.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",te,{capture:!0})}}},[b,P,N]),p.useEffect(()=>{const _=()=>P(!1);return window.addEventListener("blur",_),window.addEventListener("resize",_),()=>{window.removeEventListener("blur",_),window.removeEventListener("resize",_)}},[P]);const[L,A]=$A(_=>{const ee=z().filter(ge=>!ge.disabled),te=ee.find(ge=>ge.ref.current===document.activeElement),ie=FA(ee,_,te);ie&&setTimeout(()=>ie.ref.current.focus())}),M=p.useCallback((_,ee,te)=>{const ie=!q.current&&!te;(w.value!==void 0&&w.value===ee||ie)&&(R(_),ie&&(q.current=!0))},[w.value]),$=p.useCallback(()=>b==null?void 0:b.focus(),[b]),F=p.useCallback((_,ee,te)=>{const ie=!q.current&&!te;(w.value!==void 0&&w.value===ee||ie)&&K(_)},[w.value]),H=r==="popper"?ov:SA,V=H===ov?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return f.jsx(wA,{scope:n,content:b,viewport:C,onViewportChange:E,itemRefCallback:M,selectedItem:T,onItemLeave:$,itemTextRefCallback:F,focusSelectedItem:X,selectedItemText:O,position:r,isPositioned:Z,searchRef:L,children:f.jsx(lh,{as:zo,allowPinchZoom:!0,children:f.jsx(sh,{asChild:!0,trapped:w.open,onMountAutoFocus:_=>{_.preventDefault()},onUnmountAutoFocus:re(o,_=>{var ee;(ee=w.trigger)==null||ee.focus({preventScroll:!0}),_.preventDefault()}),children:f.jsx(Na,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:_=>_.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:f.jsx(H,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:_=>_.preventDefault(),...y,...V,onPlaced:()=>Q(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:re(y.onKeyDown,_=>{const ee=_.ctrlKey||_.altKey||_.metaKey;if(_.key==="Tab"&&_.preventDefault(),!ee&&_.key.length===1&&A(_.key),["ArrowUp","ArrowDown","Home","End"].includes(_.key)){let ie=z().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(_.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(_.key)){const ge=_.target,he=ie.indexOf(ge);ie=ie.slice(he+1)}setTimeout(()=>j(ie)),_.preventDefault()}})})})})})})});bA.displayName=VY;var WY="SelectItemAlignedPosition",SA=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,s=ts(qs,n),i=ns(qs,n),[a,l]=p.useState(null),[c,u]=p.useState(null),d=De(e,k=>u(k)),h=_h(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:w}=i,b=p.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&v&&x&&y){const k=s.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),O=y.getBoundingClientRect();if(s.dir!=="rtl"){const ge=O.left-T.left,he=R.left-ge,Ne=k.left-he,Oe=k.width+Ne,Be=Math.max(Oe,T.width),I=window.innerWidth-$n,Le=eS(he,[$n,Math.max($n,I-Be)]);a.style.minWidth=Oe+"px",a.style.left=Le+"px"}else{const ge=T.right-O.right,he=window.innerWidth-R.right-ge,Ne=window.innerWidth-k.right-he,Oe=k.width+Ne,Be=Math.max(Oe,T.width),I=window.innerWidth-$n,Le=eS(he,[$n,Math.max($n,I-Be)]);a.style.minWidth=Oe+"px",a.style.right=Le+"px"}const K=h(),z=window.innerHeight-$n*2,Z=v.scrollHeight,Q=window.getComputedStyle(c),q=parseInt(Q.borderTopWidth,10),j=parseInt(Q.paddingTop,10),X=parseInt(Q.borderBottomWidth,10),P=parseInt(Q.paddingBottom,10),N=q+j+Z+P+X,L=Math.min(x.offsetHeight*5,N),A=window.getComputedStyle(v),M=parseInt(A.paddingTop,10),$=parseInt(A.paddingBottom,10),F=k.top+k.height/2-$n,H=z-F,V=x.offsetHeight/2,_=x.offsetTop+V,ee=q+j+_,te=N-ee;if(ee<=F){const ge=K.length>0&&x===K[K.length-1].ref.current;a.style.bottom="0px";const he=c.clientHeight-v.offsetTop-v.offsetHeight,Ne=Math.max(H,V+(ge?$:0)+he+X),Oe=ee+Ne;a.style.height=Oe+"px"}else{const ge=K.length>0&&x===K[0].ref.current;a.style.top="0px";const Ne=Math.max(F,q+v.offsetTop+(ge?M:0)+V)+te;a.style.height=Ne+"px",v.scrollTop=ee-F+v.offsetTop}a.style.margin=`${$n}px 0`,a.style.minHeight=L+"px",a.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,a,c,v,x,y,s.dir,r]);ze(()=>b(),[b]);const[S,C]=p.useState();ze(()=>{c&&C(window.getComputedStyle(c).zIndex)},[c]);const E=p.useCallback(k=>{k&&g.current===!0&&(b(),w==null||w(),g.current=!1)},[b,w]);return f.jsx(qY,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:E,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:f.jsx(be.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});SA.displayName=WY;var KY="SelectPopperPosition",ov=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=$n,...s}=t,i=Ph(n);return f.jsx(Ic,{...i,...s,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ov.displayName=KY;var[qY,z0]=Aa(qs,{}),sv="SelectViewport",CA=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...o}=t,s=ns(sv,n),i=z0(sv,n),a=De(e,s.onViewportChange),l=p.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(Mh.Slot,{scope:n,children:f.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:re(o.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&d){const m=Math.abs(l.current-u.scrollTop);if(m>0){const g=window.innerHeight-$n*2,v=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),y=Math.max(v,x);if(y<g){const w=y+m,b=Math.min(g,w),S=w-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});CA.displayName=sv;var kA="SelectGroup",[GY,YY]=Aa(kA),JY=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=dt();return f.jsx(GY,{scope:n,id:o,children:f.jsx(be.div,{role:"group","aria-labelledby":o,...r,ref:e})})});JY.displayName=kA;var EA="SelectLabel",TA=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=YY(EA,n);return f.jsx(be.div,{id:o.id,...r,ref:e})});TA.displayName=EA;var mf="SelectItem",[XY,NA]=Aa(mf),MA=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:s,...i}=t,a=ts(mf,n),l=ns(mf,n),c=a.value===r,[u,d]=p.useState(s??""),[h,m]=p.useState(!1),g=De(e,w=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,w,r,o)}),v=dt(),x=p.useRef("touch"),y=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(XY,{scope:n,value:r,disabled:o,textId:v,isSelected:c,onItemTextChange:p.useCallback(w=>{d(b=>b||((w==null?void 0:w.textContent)??"").trim())},[]),children:f.jsx(Mh.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:f.jsx(be.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:g,onFocus:re(i.onFocus,()=>m(!0)),onBlur:re(i.onBlur,()=>m(!1)),onClick:re(i.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:re(i.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:re(i.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:re(i.onPointerMove,w=>{var b;x.current=w.pointerType,o?(b=l.onItemLeave)==null||b.call(l):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(i.onPointerLeave,w=>{var b;w.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:re(i.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(LY.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});MA.displayName=mf;var dl="SelectItemText",_A=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,...s}=t,i=ts(dl,n),a=ns(dl,n),l=NA(dl,n),c=BY(dl,n),[u,d]=p.useState(null),h=De(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),m=u==null?void 0:u.textContent,g=p.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=c;return ze(()=>(v(g),()=>x(g)),[v,x,g]),f.jsxs(f.Fragment,{children:[f.jsx(be.span,{id:l.textId,...s,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Go.createPortal(s.children,i.valueNode):null]})});_A.displayName=dl;var PA="SelectItemIndicator",RA=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return NA(PA,n).isSelected?f.jsx(be.span,{"aria-hidden":!0,...r,ref:e}):null});RA.displayName=PA;var iv="SelectScrollUpButton",AA=p.forwardRef((t,e)=>{const n=ns(iv,t.__scopeSelect),r=z0(iv,t.__scopeSelect),[o,s]=p.useState(!1),i=De(e,r.onScrollButtonChange);return ze(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?f.jsx(IA,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});AA.displayName=iv;var av="SelectScrollDownButton",OA=p.forwardRef((t,e)=>{const n=ns(av,t.__scopeSelect),r=z0(av,t.__scopeSelect),[o,s]=p.useState(!1),i=De(e,r.onScrollButtonChange);return ze(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?f.jsx(IA,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});OA.displayName=av;var IA=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,s=ns("SelectScrollButton",n),i=p.useRef(null),a=_h(n),l=p.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),ze(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),f.jsx(be.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:re(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:re(o.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:re(o.onPointerLeave,()=>{l()})})}),QY="SelectSeparator",jA=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return f.jsx(be.div,{"aria-hidden":!0,...r,ref:e})});jA.displayName=QY;var lv="SelectArrow",ZY=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Ph(n),s=ts(lv,n),i=ns(lv,n);return s.open&&i.position==="popper"?f.jsx(jc,{...o,...r,ref:e}):null});ZY.displayName=lv;function DA(t){return t===""||t===void 0}var LA=p.forwardRef((t,e)=>{const{value:n,...r}=t,o=p.useRef(null),s=De(e,o),i=jY(n);return p.useEffect(()=>{const a=o.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[i,n]),f.jsx(v0,{asChild:!0,children:f.jsx("select",{...r,ref:s,defaultValue:n})})});LA.displayName="BubbleSelect";function $A(t){const e=Fe(t),n=p.useRef(""),r=p.useRef(0),o=p.useCallback(i=>{const a=n.current+i;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,s]}function FA(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=eJ(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function eJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var tJ=fA,zA=pA,nJ=gA,rJ=vA,oJ=yA,BA=xA,sJ=CA,HA=TA,UA=MA,iJ=_A,aJ=RA,VA=AA,WA=OA,KA=jA;const lJ=tJ,cJ=nJ,qA=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(zA,{ref:r,className:oe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,f.jsx(rJ,{asChild:!0,children:f.jsx(u8,{className:"h-4 w-4 opacity-50"})})]}));qA.displayName=zA.displayName;const GA=p.forwardRef(({className:t,...e},n)=>f.jsx(VA,{ref:n,className:oe("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(g8,{})}));GA.displayName=VA.displayName;const YA=p.forwardRef(({className:t,...e},n)=>f.jsx(WA,{ref:n,className:oe("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(h8,{})}));YA.displayName=WA.displayName;const JA=p.forwardRef(({className:t,children:e,position:n="popper",...r},o)=>f.jsx(oJ,{children:f.jsxs(BA,{ref:o,className:oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[f.jsx(GA,{}),f.jsx(sJ,{className:oe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),f.jsx(YA,{})]})}));JA.displayName=BA.displayName;const uJ=p.forwardRef(({className:t,...e},n)=>f.jsx(HA,{ref:n,className:oe("px-2 py-1.5 text-sm font-semibold",t),...e}));uJ.displayName=HA.displayName;const cv=p.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(UA,{ref:r,className:oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(aJ,{children:f.jsx(n0,{className:"h-4 w-4"})})}),f.jsx(iJ,{children:e})]}));cv.displayName=UA.displayName;const dJ=p.forwardRef(({className:t,...e},n)=>f.jsx(KA,{ref:n,className:oe("-mx-1 my-1 h-px bg-muted",t),...e}));dJ.displayName=KA.displayName;function tS({comment:t,editor:e,activeCommentId:n,setActiveCommentId:r,setComments:o,comments:s,isRefreshing:i=!1,onTogglePin:a,onMarkAsCompleted:l,onReviveComment:c,isCompleted:u=!1,focusedCommentId:d,setFocusedCommentId:h,isWriteMode:m=!1}){var ee,te,ie,ge,he,Ne,Oe,Be,I,Le,nr;const[g,v]=p.useState(null),[x,y]=p.useState(!1),[w,b]=p.useState(!1),[S,C]=p.useState(0),[E,k]=p.useState([]),[T,R]=p.useState(1),O=t.issueType||(t.suggestedEdit?"general":"clarity"),K=t.isAIFeedback?"shadow-[0_0_15px_rgba(168,85,247,0.15)]":"",z=p.useRef(null);p.useEffect(()=>{var Y;if(t.feedbackHistory&&t.feedbackHistory.length>0)k(t.feedbackHistory),R(t.feedbackHistory.length),C(t.feedbackHistory.length-1);else if(t.suggestedEdit){const ce=[{timestamp:t.updatedAt||(typeof t.createdAt=="string"?t.createdAt:t.createdAt.toISOString()),original:t.suggestedEdit.original||t.quotedText||"",currentText:g||t.suggestedEdit.original||t.quotedText||"",suggested:t.suggestedEdit.suggested||"",explanation:t.suggestedEdit.explanation||"",issueType:t.issueType,references:t.suggestedEdit.references}];k(ce),R(1),C(0)}else k([]),R(0),C(0);console.log("Comment loaded:",{id:t.id,isAIFeedback:t.isAIFeedback,hasSuggestedEdit:!!t.suggestedEdit,issueType:t.issueType,suggestedEditData:t.suggestedEdit,referencesCreated:(Y=t.suggestedEdit)==null?void 0:Y.references})},[t.id,t.feedbackHistory,t.suggestedEdit,t.quotedText,g]),p.useEffect(()=>{var Y;if((Y=t.suggestedEdit)!=null&&Y.explanation&&(E.length===0||E[E.length-1].explanation!==t.suggestedEdit.explanation)){const ce={timestamp:new Date().toISOString(),original:t.suggestedEdit.original||"",currentText:g||t.suggestedEdit.original||"",suggested:t.suggestedEdit.suggested||"",explanation:t.suggestedEdit.explanation,issueType:t.issueType,references:t.suggestedEdit.references},de=E.length>0?E[E.length-1]:null;if(!de||de.explanation!==ce.explanation||de.suggested!==ce.suggested||JSON.stringify(de.references)!==JSON.stringify(ce.references)){const Se=[...E,ce];k(Se),R(Se.length),C(Se.length-1)}}},[(ee=t.suggestedEdit)==null?void 0:ee.explanation,(te=t.suggestedEdit)==null?void 0:te.suggested,(ie=t.suggestedEdit)==null?void 0:ie.references]),p.useEffect(()=>{if(!e||!t.id)return;(()=>{let ce=null;if(e.state.doc.descendants((de,We)=>{if(de.marks.find(Je=>Je.type.name==="comment"&&Je.attrs.commentId===t.id))return ce={from:We,to:We+de.nodeSize},!1}),ce){const de=ce,We=e.state.doc.textBetween(de.from,de.to);v(We)}})()},[e,t.id]),p.useEffect(()=>{if(x){const Y=setTimeout(()=>{y(!1)},2e3);return()=>clearTimeout(Y)}},[x]);const Z=()=>{var ce;const Y=S===T-1?(ce=t.suggestedEdit)==null?void 0:ce.suggested:q.suggested;Y&&navigator.clipboard.writeText(Y).then(()=>{y(!0),ve.success("Copied to clipboard",{description:"Suggested text has been copied",duration:2e3})}).catch(de=>{console.error("Could not copy text: ",de),ve.error("Copy failed",{description:"Could not copy text to clipboard",duration:2e3})})},Q=Y=>{Y==="prev"&&S>0?C(S-1):Y==="next"&&S<T-1&&C(S+1)},q=E[S]||{timestamp:t.updatedAt||(typeof t.createdAt=="string"?t.createdAt:t.createdAt.toISOString()),original:((ge=t.suggestedEdit)==null?void 0:ge.original)||"",currentText:g||((he=t.suggestedEdit)==null?void 0:he.original)||"",suggested:((Ne=t.suggestedEdit)==null?void 0:Ne.suggested)||"",explanation:((Oe=t.suggestedEdit)==null?void 0:Oe.explanation)||"",issueType:t.issueType},j=()=>{if(!e)return;if(m){console.log("Write mode active - not scrolling to comment for distraction-free writing");return}let Y=null;if(e.state.doc.descendants((ce,de)=>{if(ce.marks.find(Se=>Se.type.name==="comment"&&Se.attrs.commentId===t.id))return Y={from:de,to:de+ce.nodeSize},!1}),Y){const ce=Y,de=e.state.doc.textBetween(ce.from,ce.to);v(de),e.chain().focus().setTextSelection(ce).run();const We=window.getSelection();if(We&&We.rangeCount>0){const Je=We.getRangeAt(0).getBoundingClientRect();(Je.top<0||Je.bottom>window.innerHeight)&&e.commands.scrollIntoView()}}},X=()=>{if(!e||!t.suggestedEdit){l?l(t.id,"accepted"):(e==null||e.chain().focus().unsetComment(t.id).run(),o(ce=>ce.filter(de=>de.id!==t.id)));return}let Y=null;if(e.state.doc.descendants((ce,de)=>{if(ce.marks.find(Se=>Se.type.name==="comment"&&Se.attrs.commentId===t.id))return Y={from:de,to:de+ce.nodeSize},!1}),Y&&t.suggestedEdit){const ce=Y,de=S===T-1?t.suggestedEdit.suggested||"":q.suggested||"";de&&e.chain().focus().setTextSelection(ce).insertContent(de).run(),l&&l(t.id,"accepted")}},P=()=>{l?l(t.id,"ignored"):(e==null||e.chain().focus().unsetComment(t.id).run(),o(s.filter(Y=>Y.id!==t.id)))},N=()=>{c&&c(t.id)},L=()=>{a&&a(t.id,!t.isPinned)},A=Y=>{try{return(typeof Y=="string"?new Date(Y):Y).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Unknown time"}},M=()=>{var ce;if(!g)return!1;const Y=S===T-1?(ce=t.suggestedEdit)==null?void 0:ce.original:q.original;return Y?g!==Y:!1},F=(()=>{if(!t.completionInfo||t.completionInfo.length===0)return null;const Y=t.completionInfo[t.completionInfo.length-1],ce=Y.action,de=Y.timestamp;return{action:ce,timestamp:de,actionText:ce==="active"?"Replaced":"Dismissed",date:A(de)}})();p.useEffect(()=>{n===t.id&&z.current&&!m&&z.current.scrollIntoView({behavior:"smooth",block:"center"})},[n,t.id,m]),q.references&&q.references.length>0&&q.references.map((Y,ce)=>f.jsxs("div",{className:"text-xs",children:[f.jsx("div",{className:"font-medium",children:Y.allusion}),f.jsx("div",{className:"text-muted-foreground",children:Y.referenceText})]},ce));const H=Y=>{if(!e)return;const de=e.state.doc.textContent.indexOf(Y);if(de!==-1){const We=de,Se=de+Y.length;e.commands.setTextSelection({from:We,to:Se}),e.commands.setHighlight({color:"purple"}),setTimeout(()=>{e.commands.setTextSelection({from:We,to:Se}),e.commands.unsetHighlight()},2e3)}},V=(Y,ce)=>{if(!Y)return Y;let de=Y.replace(/<b>(.*?)<\/b>/g,'<span class="text-blue-500 font-semibold inline">$1<svg class="inline-block w-[1em] h-[1em] ml-[0.1em] align-[-0.125em]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></span>');if(ce&&ce.length>0){const We=[...ce].sort((Se,Je)=>{var Rt,ss;if(Se.position&&Je.position)return Je.position.from-Se.position.from;const wn=((Rt=Se.allusion)==null?void 0:Rt.length)||0;return(((ss=Je.allusion)==null?void 0:ss.length)||0)-wn});for(const Se of We){const Je=Se.allusion;console.log(Je);const wn=Se.referenceText;if(console.log(wn),!Je||!wn)continue;const jn=`<span class="text-blue-500 underline cursor-pointer hover:text-blue-600">${Je}</span>`,Rt=new RegExp(Je.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");de=de.replace(Rt,jn)}}return de};p.useEffect(()=>(window.highlightReference=Y=>{H(Y)},()=>{delete window.highlightReference}),[e]);const _=()=>{if(!e||u)return;if(d===t.id){console.log("Comment deselected, exiting focus mode for:",t.id);const Se=e.view.dom.closest(".ProseMirror")||e.view.dom;Se&&(Se.classList.remove("focus-mode-active"),Se.removeAttribute("data-focused-comment")),document.querySelectorAll(".focused-comment").forEach(wn=>{wn.classList.remove("focused-comment")}),h&&h(null),b(!1);return}console.log("Comment selected, entering focus mode for:",t.id),document.querySelectorAll(".focused-comment").forEach(Se=>{Se.classList.remove("focused-comment")});const de=e.view.dom.closest(".ProseMirror")||e.view.dom;de&&(de.classList.add("focus-mode-active"),de.setAttribute("data-focused-comment",t.id));let We=null;e.state.doc.descendants((Se,Je)=>{if(Se.marks.find(jn=>jn.type.name==="comment"&&jn.attrs.commentId===t.id))return We={from:Je,to:Je+Se.nodeSize},!1}),We&&document.querySelectorAll(`[data-comment-id="${t.id}"]`).forEach(Je=>{Je.classList.add("focused-comment")}),h&&h(t.id),b(!0)};return p.useEffect(()=>{const ce=setInterval(()=>{const de=(e==null?void 0:e.view.dom.closest(".ProseMirror"))||(e==null?void 0:e.view.dom),We=de==null?void 0:de.classList.contains("focus-mode-active"),Se=de==null?void 0:de.getAttribute("data-focused-comment");(!We||Se&&Se!==t.id)&&b(!1)},100);return()=>{clearInterval(ce)}},[e,t.id]),p.useEffect(()=>{const Y=d===t.id;w!==Y&&b(Y)},[d,t.id,w]),f.jsxs("div",{ref:z,className:oe("bg-white dark:bg-background border border-border/40 rounded-md p-4 transition-all duration-200 relative cursor-pointer dark:bg-neutral-900",n===t.id&&"ring-2 ring-blue-500",t.isPinned&&"border-yellow-400 dark:border-yellow-600",u&&"opacity-80",w&&"ring-2 ring-blue-400",K),onClick:_,"data-comment-item":t.id,children:[!u&&f.jsx(pe,{variant:"ghost",size:"sm",className:oe("absolute top-2 right-2 h-6 w-6 p-0",t.isPinned?"text-yellow-500 hover:text-yellow-600 dark:text-yellow-400 dark:hover:text-yellow-300":"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"),onClick:Y=>{Y.stopPropagation(),L()},title:t.isPinned?"Unpin comment":"Pin comment",children:t.isPinned?f.jsx(_b,{className:"h-3.5 w-3.5 fill-current"}):f.jsx(_b,{className:"h-3.5 w-3.5"})}),f.jsx("div",{className:"flex flex-col space-y-3",children:t.isAIFeedback?f.jsx("div",{className:"flex items-start gap-3",children:f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("h3",{className:"text-base font-medium break-words",children:t.content}),S===T-1?f.jsxs(f.Fragment,{children:[O==="clarity"&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 border border-blue-200 shadow-sm",children:"Clarity"})}),O==="focus"&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 border border-yellow-200 shadow-sm",children:"Focus"})}),O==="flow"&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-orange-200 text-orange-800 dark:bg-orange-900 dark:text-orange-300 border border-orange-300 shadow-sm",children:"Flow"})}),O&&!["flow","focus","clarity"].includes(O)&&f.jsx("div",{children:f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border border-gray-200 shadow-sm",children:O})})]}):f.jsxs(f.Fragment,{children:[q.issueType==="clarity"&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 border border-blue-200 shadow-sm",children:"Clarity"}),q.issueType==="focus"&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 border border-yellow-200 shadow-sm",children:"Focus"}),q.issueType==="flow"&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-orange-200 text-orange-800 dark:bg-orange-900 dark:text-orange-300 border border-orange-300 shadow-sm",children:"Flow"}),q.issueType&&!["flow","focus","clarity"].includes(q.issueType)&&f.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 border border-gray-200 shadow-sm",children:q.issueType})]}),F&&f.jsx("span",{className:oe("inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm ml-auto",F.action==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 border-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 border-red-200"),children:F.actionText}),T>1&&f.jsxs("div",{className:"flex items-center ml-2",children:[f.jsx("button",{onClick:Y=>{Y.stopPropagation(),Q("prev")},disabled:S===0,className:"p-1 rounded hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Previous version",children:f.jsx(oz,{className:"h-3 w-3"})}),f.jsxs("span",{className:"mx-1 text-xs text-muted-foreground",children:[S+1,"/",T]}),f.jsx("button",{onClick:Y=>{Y.stopPropagation(),Q("next")},disabled:S===T-1,className:"p-1 rounded hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Next version",children:f.jsx(Li,{className:"h-3 w-3"})})]})]}),t.quotedText&&f.jsx("div",{className:"text-sm text-muted-foreground bg-muted/50 p-0 rounded-md cursor-pointer hover:bg-muted/70 mt-3 break-words",onClick:j,children:t.suggestedEdit?f.jsxs("div",{className:"suggest-edit-container overflow-hidden",tabIndex:0,children:[f.jsx("div",{className:"relative",children:f.jsxs("details",{className:"mt-1",open:!0,children:[f.jsx("summary",{className:"suggest-edit-label cursor-pointer",children:"Current Text"}),f.jsx("div",{className:oe("suggest-edit-deletion break-words mt-1 relative",M()&&"bg-red-50 dark:bg-red-900/20"),children:f.jsx("div",{style:{whiteSpace:"pre-wrap"},children:S===T-1?g!==null?g:((Be=t.suggestedEdit)==null?void 0:Be.original)||"":q.currentText})})]})}),f.jsx("div",{children:f.jsxs("details",{className:"mt-1",open:!0,children:[f.jsx("summary",{className:"suggest-edit-label cursor-pointer",children:"Suggested Text"}),f.jsxs(EM,{children:[f.jsx(TM,{asChild:!0,children:f.jsx("div",{className:"suggest-edit-addition break-words relative",children:f.jsx("div",{className:"py-1",children:S===T-1?((I=t.suggestedEdit)==null?void 0:I.suggested)||"":q.suggested})})}),f.jsx(r0,{className:"w-64",children:f.jsx(Mr,{onClick:Z,className:"flex items-center",children:x?f.jsxs(f.Fragment,{children:[f.jsx(da,{className:"h-4 w-4 mr-2 text-green-500"}),f.jsx("span",{children:"Copied!"})]}):f.jsxs(f.Fragment,{children:[f.jsx(Ry,{className:"h-4 w-4 mr-2"}),f.jsx("span",{children:"Copy text"})]})})})]})]})}),f.jsx("div",{className:"relative",children:f.jsxs("div",{className:"mt-1",children:[f.jsx("div",{className:"suggest-edit-label cursor-pointer",children:f.jsx("span",{children:"Feedback"})}),f.jsx("div",{className:"suggest-edit-explanation break-words mt-1",children:i&&S===T-1?f.jsx("div",{className:"text-muted-foreground italic",children:"Updating feedback..."}):f.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:V(S===T-1?((Le=t.suggestedEdit)==null?void 0:Le.explanation)||"":q.explanation,S===T-1?(nr=t.suggestedEdit)==null?void 0:nr.references:q.references)}})}),S!==T-1&&q.timestamp&&f.jsxs("div",{className:"text-xs text-muted-foreground mt-1 italic",children:["Viewing feedback from ",A(q.timestamp)]}),F&&f.jsxs("div",{className:"text-xs text-muted-foreground mt-1 italic",children:[F.actionText," on ",F.date]})]})})]}):`"${t.quotedText}"`}),n===t.id&&!t.isAIFeedback&&f.jsxs("div",{className:"mt-3 space-y-2 bg-muted rounded-md p-2",children:[f.jsx("div",{className:"relative",children:f.jsx("textarea",{id:t.id,value:t.content,onChange:Y=>{o(ce=>ce.map(de=>de.id===t.id?{...de,content:Y.target.value}:de))},onKeyDown:Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),r(null))},placeholder:"Add a comment...",className:"w-full min-h-[60px] bg-transparent border-none p-0 resize-none focus:outline-none focus:ring-0",autoFocus:!0,readOnly:u})}),f.jsx("div",{className:"flex justify-end",children:f.jsxs(pe,{size:"sm",className:"h-7 text-xs flex items-center gap-1.5",onClick:()=>r(null),children:["Save ",f.jsx("span",{className:"opacity-60",children:""})]})})]}),u?f.jsx("div",{className:"flex items-center justify-left mt-3",children:f.jsxs(pe,{variant:"outline",size:"sm",className:"h-8 px-6",onClick:N,children:[f.jsx(Pb,{className:"h-3.5 w-3.5 mr-2"}),"Restore"]})}):f.jsxs("div",{className:"flex items-center justify-left mt-3 space-x-3",children:[f.jsxs(pe,{variant:"ghost",size:"sm",className:"h-8 px-4",onClick:P,children:[f.jsx(Ec,{className:"h-3.5 w-2.5 mr-1"}),"Dismiss"]}),f.jsxs(pe,{variant:"default",size:"sm",className:"h-8 px-6 pr-4 pl-2 bg-blue-600 hover:bg-blue-700 dark:bg-neutral-600 dark:hover:bg-blue-700 text-white dark:text-white",onClick:X,children:[f.jsx(da,{className:"h-3.5 w-3.5 mr-2"}),"Replace"]})]})]})}):f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(jo,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-base font-medium",children:"Comment"}),f.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Date(t.createdAt).toLocaleDateString()," ",new Date(t.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]}),F&&f.jsx("div",{className:"flex justify-end mt-1",children:f.jsx("span",{className:oe("inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border shadow-sm",F.action==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 border-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 border-red-200"),children:F.actionText})}),t.quotedText&&f.jsx("div",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded-md cursor-pointer hover:bg-muted/70 mt-3",onClick:j,children:`"${t.quotedText}"`}),n===t.id?f.jsxs("div",{className:"mt-3 space-y-2 bg-muted rounded-md p-2",children:[f.jsx("div",{className:"relative",children:f.jsx("textarea",{id:t.id,value:t.content,onChange:Y=>{o(ce=>ce.map(de=>de.id===t.id?{...de,content:Y.target.value}:de))},onKeyDown:Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),r(null))},placeholder:"Add a comment...",className:"w-full min-h-[60px] bg-transparent border-none p-0 resize-none focus:outline-none focus:ring-0",autoFocus:!0,readOnly:u})}),f.jsx("div",{className:"flex justify-end",children:f.jsxs(pe,{size:"sm",className:"h-7 text-xs flex items-center gap-1.5",onClick:()=>r(null),children:["Save ",f.jsx("span",{className:"opacity-60",children:""})]})})]}):f.jsx("div",{className:"mt-3 text-sm",children:t.content||"No content"}),u?f.jsx("div",{className:"flex justify-center mt-3",children:f.jsxs(pe,{variant:"outline",size:"sm",className:"h-8 px-6",onClick:N,children:[f.jsx(Pb,{className:"h-3.5 w-3.5 mr-2"}),"Restore"]})}):f.jsx("div",{className:"flex justify-end mt-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(pe,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:()=>r(t.id),disabled:u,children:[f.jsx(Ay,{className:"h-3.5 w-3.5 mr-1"}),"Edit"]}),f.jsxs(pe,{variant:"ghost",size:"sm",className:"h-8 px-3",onClick:P,children:[f.jsx(wz,{className:"h-3.5 w-3.5 mr-1"}),"Delete"]})]})})]})]})})]})}function fJ({isOpen:t,setIsOpen:e,comments:n,setComments:r,activeCommentId:o,setActiveCommentId:s,editor:i,focusedCommentId:a,setFocusedCommentId:l,sortCommentsRef:c,highlightingManager:u,isAnyAnalysisRunning:d,onModeChange:h}){const m=p.useRef(null),[g,v]=p.useState("default"),[x,y]=p.useState(!1),[w,b]=p.useState(!1),S=(A,M)=>{r($=>$.map(F=>F.id===A?{...F,isPinned:M}:F)),ve(M?"Comment pinned":"Comment unpinned",{duration:2e3})},C=(A,M,$)=>{const F=new Date().toISOString();r(H=>H.map(V=>V.id===A?{...V,completionInfo:[...V.completionInfo||[],{action:M,timestamp:F,reason:$}]}:V)),ve(`Suggestion ${M==="accepted"?"replaced":"dismissed"}`,{duration:2e3}),M==="accepted"&&!x?y(!0):M==="ignored"&&!w&&b(!0)},E=A=>{r(M=>M.map($=>$.id===A?{...$,completionInfo:[]}:$)),ve("Comment revived",{description:"Comment has been moved back to active items",duration:2e3})},k=A=>{v(A),T(A)},T=p.useCallback(A=>{const M=[...n];if(A==="newest")M.sort(($,F)=>new Date(F.createdAt).getTime()-new Date($.createdAt).getTime());else if(A==="oldest")M.sort(($,F)=>new Date($.createdAt).getTime()-new Date(F.createdAt).getTime());else if(A==="smart"){const $=new Map,F=(i==null?void 0:i.state.doc.textContent)||"";n.forEach(H=>{if(H.quotedText&&!$.has(H.quotedText)){const V=F.indexOf(H.quotedText);V>=0&&$.set(H.quotedText,V)}}),M.sort((H,V)=>{if(H.quotedText===V.quotedText)return new Date(H.createdAt).getTime()-new Date(V.createdAt).getTime();const _=$.get(H.quotedText||"")||0,ee=$.get(V.quotedText||"")||0;return _-ee})}else{const $=new Map,F=(i==null?void 0:i.state.doc.textContent)||"";n.forEach(H=>{if(H.quotedText){const V=F.indexOf(H.quotedText);V>=0&&$.set(H.id,V)}}),M.sort((H,V)=>{const _=$.get(H.id)||0,ee=$.get(V.id)||0;return _-ee})}r(M)},[n,i,r]);p.useEffect(()=>{c&&(c.current=()=>T(g))},[c,T,g]);const R=[{value:"flow",label:"Flow"},{value:"focus",label:"Focus"},{value:"clarity",label:"Clarity"}],[O,K]=p.useState(R.map(A=>A.value)),z=A=>!A.completionInfo||A.completionInfo.length===0?"active":A.completionInfo[A.completionInfo.length-1].action==="replaced"?"replaced":"dismissed",Z=n.filter(A=>z(A)==="active"),Q=n.filter(A=>z(A)==="replaced"),q=n.filter(A=>z(A)==="dismissed"),j=A=>{let M;A==="active"?M=Z:A==="replaced"?M=Q:M=q;const $=M.filter(F=>O.length===R.length?!0:F.issueType?O.includes(F.issueType):!0);if(A==="active"){const F=$.filter(V=>V.isPinned),H=$.filter(V=>!V.isPinned);return[...F,...H]}return $},X=n.filter(A=>z(A)!=="dismissed"),P=X.filter(A=>A.issueType==="clarity").length,N=X.filter(A=>A.issueType==="flow").length,L=X.filter(A=>A.issueType==="focus").length;return f.jsxs("div",{ref:m,className:oe("fixed right-0 h-[calc(100vh-7rem)] bg-background border-l border-border/40","transition-all duration-300 ease-in-out transform",t?"translate-x-0":"translate-x-full","w-[360px]"),style:{zIndex:40,top:"6rem"},"data-comments-sidebar":"true",children:[f.jsx("button",{onClick:()=>{!t&&h?h("comments"):e(!1)},className:oe("absolute left-0 top-1/4 -translate-y-1/2 -translate-x-full","bg-background border border-border/40 border-r-0","px-2 py-3 rounded-l-md","transition-colors hover:bg-accent",d?"opacity-50 cursor-not-allowed":""),disabled:d,children:f.jsx("div",{className:"flex flex-col items-center gap-2",children:t?f.jsx(ez,{className:"mr-2 h-4.0 w-4.0",strokeWidth:1.5}):f.jsx(uz,{className:"mr-2 h-4.0 w-4.0",strokeWidth:1.5})})}),f.jsxs("div",{className:"h-full flex flex-col relative",children:[f.jsxs("div",{className:"flex-1 overflow-y-auto pb-16",children:[f.jsxs("div",{className:"flex items-center justify-left mb-4 pt-6 pl-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[f.jsx("label",{htmlFor:"comment-sort",className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Sort by:"}),f.jsxs(lJ,{onValueChange:k,defaultValue:"default",children:[f.jsx(qA,{className:"h-8 text-xs w-32",children:f.jsx(cJ,{placeholder:"Sort"})}),f.jsxs(JA,{children:[f.jsx(cv,{value:"default",children:"In Order"}),f.jsx(cv,{value:"newest",children:"Newest First"})]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{htmlFor:"comment-sort",className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:"Filter by:"}),f.jsx(hG,{options:R,selected:O,onChange:K})]})]}),f.jsx("div",{className:"border-b border-border/40 pb-4",children:f.jsx("div",{className:"p-4 space-y-3",children:Z.length===0?f.jsx("div",{className:"text-center text-muted-foreground py-2",children:"No active comments"}):j("active").map(A=>f.jsx(tS,{comment:A,editor:i,activeCommentId:o,setActiveCommentId:s,setComments:r,comments:n,onTogglePin:S,onMarkAsCompleted:C,onReviveComment:E,focusedCommentId:a,setFocusedCommentId:l,isWriteMode:(u==null?void 0:u.getCurrentMode())==="write"},A.id))})}),f.jsxs("div",{className:"border-b border-border/40",children:[f.jsxs("button",{onClick:()=>b(!w),className:"flex items-center justify-between w-full px-4 py-2 bg-accent/30 hover:bg-accent/50",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(iz,{className:"mr-2 h-4 w-4",strokeWidth:1.5}),f.jsxs("span",{className:"text-sm font-medium",children:["Dismissed Suggestions (",q.length,")"]})]}),w?f.jsx(sz,{className:"h-4 w-4"}):f.jsx(Gf,{className:"h-4 w-4"})]}),w&&f.jsx("div",{className:"p-4 pt-2 space-y-3",children:q.length===0?f.jsx("div",{className:"text-center text-muted-foreground py-2",children:"No dismissed comments"}):j("dismissed").map(A=>f.jsx(tS,{comment:A,editor:i,activeCommentId:o,setActiveCommentId:s,setComments:r,comments:n,onTogglePin:S,onMarkAsCompleted:C,onReviveComment:E,isCompleted:!0,focusedCommentId:a,setFocusedCommentId:l,isWriteMode:(u==null?void 0:u.getCurrentMode())==="write"},A.id))})]}),n.length===0&&f.jsx("div",{className:"text-center text-muted-foreground pt-8",children:"No comments yet"})]}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-background border-t border-border/40 p-3",children:f.jsxs("div",{className:"flex gap-2 justify-center",children:[f.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 dark:bg-blue-900 px-2.5 py-1 text-xs font-medium text-blue-800 dark:text-blue-300",children:["Clarity: ",P]}),f.jsxs("span",{className:"inline-flex items-center rounded-full bg-orange-100 dark:bg-orange-900 px-2.5 py-1 text-xs font-medium text-orange-800 dark:text-orange-300",children:["Flow: ",N]}),f.jsxs("span",{className:"inline-flex items-center rounded-full bg-yellow-100 dark:bg-yellow-900 px-2.5 py-1 text-xs font-medium text-yellow-800 dark:text-yellow-300",children:["Focus: ",L]})]})})]})]})}const hJ=[{name:"Missing space after comma",text:"teacher,coach,counselor because",description:"Text with missing spaces that often causes positioning issues"},{name:"Lowercase sentence start",text:"student are going to have a better knowledge",description:"Sentence starting with lowercase letter"},{name:"Run-on sentence",text:"School should let student enjoy take their high school seriously",description:"Long sentence with grammar issues"},{name:"Missing punctuation",text:"I want to be a teacher,coach,counselor because I enjoy helping people",description:"Sentence missing ending punctuation"},{name:"Partial sentence fragment",text:"because I enjoy helping people",description:"Fragment that might be found mid-sentence"}];function pJ(t){console.log(" === PROSEMIRROR SEARCH TESTS ===");const e={passed:0,failed:0,details:[]};return hJ.forEach((n,r)=>{console.log(`
--- Test ${r+1}: ${n.name} ---`),console.log(`Description: ${n.description}`),console.log(`Searching for: "${n.text}"`);try{const o=Th(t,n.text),s=hf(t,n.text),i=$0(t,n.text),a={testCase:n.name,searchText:n.text,basicFound:!!o,expandedFound:!!s,robustFound:!!i,basicPosition:o,expandedPosition:s,robustPosition:i,success:!!(o||s||i)};if(o){const l=t.state.doc.textBetween(o.from,o.to);a.basicActualText=l,a.basicMatches=l===n.text,console.log(` Basic search: Found at ${o.from}-${o.to}`),console.log(`   Expected: "${n.text}"`),console.log(`   Actual: "${l}"`),console.log(`   Match: ${a.basicMatches}`)}else console.log(" Basic search: Not found");if(s){const l=t.state.doc.textBetween(s.from,s.to);a.expandedActualText=l.substring(0,100),a.expandedContainsOriginal=l.includes(n.text),console.log(` Expanded search: Found at ${s.from}-${s.to}`),console.log(`   Expanded text: "${l.substring(0,100)}..."`),console.log(`   Contains original: ${a.expandedContainsOriginal}`)}else console.log(" Expanded search: Not found");a.success?(e.passed++,console.log(` Test ${r+1} PASSED`)):(e.failed++,console.log(` Test ${r+1} FAILED`)),e.details.push(a)}catch(o){console.error(` Test ${r+1} ERROR:`,o),e.failed++,e.details.push({testCase:n.name,error:o.message,success:!1})}}),console.log(`
 === TEST SUMMARY ===`),console.log(`Passed: ${e.passed}`),console.log(`Failed: ${e.failed}`),console.log(`Success Rate: ${(e.passed/(e.passed+e.failed)*100).toFixed(1)}%`),e}function mJ(t,e){console.log(`
 Quick test for: "${e.substring(0,50)}..."`);const n=Th(t,e),r=hf(t,e),o=$0(t,e);if(console.log("Results:",{basic:n,expanded:r,robust:o,allMatch:!!(n&&r&&o)}),n){const s=t.state.doc.textBetween(n.from,n.to);console.log(`Basic result text: "${s}"`)}if(r){const s=t.state.doc.textBetween(r.from,r.to);console.log(`Expanded result text: "${s.substring(0,100)}..."`)}return{basic:n,expanded:r,robust:o}}typeof window<"u"&&(window.testProseMirrorSearch=pJ,window.quickTestSearch=mJ);const gJ=p.createContext([[],()=>{}]);function vJ({className:t="",onEditorChange:e,eventBatcher:n}){const{user:r}=oi(),[o,s]=p.useState(!1),[i,a]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[h,m]=p.useState("Untitled document"),[g,v]=p.useState([]),[x,y]=p.useState(null),[w,b]=p.useState([]),[S,C]=p.useState(null),[E,k]=p.useState({}),[T,R]=p.useState(""),[O,K]=p.useState(!1),[z,Z]=p.useState(!1),[Q,q]=p.useState({}),[j,X]=p.useState(""),[P,N]=p.useState(null),[L]=p.useState(r?new F0(r.id):null),A=p.useRef(null),[M,$]=p.useState(null),F=p.useRef(null),[H,V]=p.useState("flow"),[_,ee]=p.useState(null),[te,ie]=p.useState(0),[ge,he]=p.useState(!1),[Ne,Oe]=p.useState(!1),Be=ge||Ne,I=i5({extensions:[c4,f4.configure({multicolor:!0}),p4,m4,g4,hV.configure({HTMLAttributes:{class:"tiptap-comment"},onCommentActivated:D=>{y(D)},onCommentClicked:D=>{if(console.log("onCommentClicked triggered for:",D),_&&_.getCurrentMode()==="write"){console.log("Write mode is active - ignoring comment click for distraction-free writing");return}if(_&&_.getCurrentMode()!=="comments"){console.log("Not in comments mode - ignoring comment click focus actions");return}console.log("Available comments:",w);const B=document.querySelector(`[data-comment-item="${D}"]`);if(B)console.log("Found sidebar comment item, triggering click:",B),B.click();else{if(console.log("Comment item not found in sidebar for ID:",D),M===D){console.log("Comment already focused, exiting focus mode");const se=(I==null?void 0:I.view.dom.closest(".ProseMirror"))||(I==null?void 0:I.view.dom);se&&(se.classList.remove("focus-mode-active"),se.removeAttribute("data-focused-comment"),document.querySelectorAll(".focused-comment").forEach(xe=>{xe.classList.remove("focused-comment")})),$(null);return}const G=w.find(se=>se.id===D);if(console.log("Found comment:",G),G){const se=(I==null?void 0:I.view.dom.closest(".ProseMirror"))||(I==null?void 0:I.view.dom);if(se){console.log("Entering focus mode for comment:",D),document.querySelectorAll(".focused-comment").forEach(lt=>{lt.classList.remove("focused-comment")}),se.classList.add("focus-mode-active"),se.setAttribute("data-focused-comment",D);const xe=document.querySelectorAll(`[data-comment-id="${D}"]`);console.log("Found comment elements to focus:",xe),xe.forEach(lt=>{lt.classList.add("focused-comment")})}$(D)}else console.log("Comment not found in comments array")}}}),bV.configure({HTMLAttributes:{class:"tiptap-suggest-edit"},onSuggestEdit:(D,B)=>{console.log("Suggested edit:",{original:D,suggested:B})}}),SV,CV,kV],content:"",editable:!Be,editorProps:{attributes:{class:oe("outline-none min-h-[1028px] text-[11pt]","px-[64px] py-[84px]","text-stone-800 dark:text-zinc-400","caret-blue-500","[&>div]:min-h-[24px]","[&>div]:break-words","[&>div]:max-w-[666px]",Be&&"pointer-events-none cursor-wait opacity-75")},handleKeyDown:(D,B)=>Be?(B.preventDefault(),!0):((B.key.length===1&&!B.ctrlKey&&!B.metaKey||B.key===" "||B.key==="Backspace"||B.key==="Delete")&&(I==null||I.chain().unsetHighlight().run()),!1),handlePaste:(D,B)=>{const ae=B.clipboardData;if(!ae)return!1;const G=ae.getData("text");try{return JSON.parse(G),B.preventDefault(),!0}catch{return!1}}},onUpdate:({editor:D,transaction:B})=>{const ae=D.getHTML();e==null||e(ae),B.docChanged&&B.steps.some(G=>G.toJSON().stepType==="replace")&&D.chain().unsetHighlight().run()}});if(!I)return null;p.useEffect(()=>{const D=B=>{(B.metaKey||B.ctrlKey)&&B.key==="s"&&(B.preventDefault(),Gr())};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[]),p.useEffect(()=>{r&&L&&L.updateUserId(r.id)},[r,L]),p.useEffect(()=>{(async()=>{try{const B=localStorage.getItem("ripple-doc");if(B&&I){const{title:ae,content:G,comments:se=[],paragraphTopicHighlights:fe={},essayTopicHighlight:xe=null,paragraphTopicTexts:lt={},essayTopicText:Dn=""}=JSON.parse(B);m(ae),b(se),k(fe),C(xe),q(lt),X(Dn),I.commands.setContent(G)}if(r&&L&&I){const ae=await L.getAllFiles();if(ae.length>0){const G=ae[0];m(G.title),N(G.id),I.commands.setContent(G.content),console.log("Loading comments for file:",G.id);const se=await L.getComments(G.id);if(console.log("Retrieved database comments:",se),se&&se.length>0){const fe=se.map(xe=>q1(xe));console.log("Setting UI comments:",fe),b(fe),fe.forEach(xe=>{xe.from!==void 0&&xe.to!==void 0&&(I.commands.setTextSelection({from:xe.from,to:xe.to}),I.chain().setComment(xe.id).run())}),I.commands.setTextSelection(0)}else console.log("No comments found for file:",G.id),b([]);n==null||n.addEvent(Re.FILE_OPEN,{file_id:G.id,title:G.title})}}}catch(B){console.error("Error loading initial content:",B)}})()},[I,r,L,n]);const Le=p.useCallback(()=>{if(!I)return"";const{from:D,to:B}=I.state.selection;return D===B?"":(n&&r&&n.addEvent(Re.TEXT_SELECTION,{length:B-D,selection_text:I.state.doc.textBetween(D,B).substring(0,100)}),I.state.doc.textBetween(D,B))},[I,n,r]),nr=p.useCallback(()=>{if(!o){const D=Le();R(D)}s(!o)},[o,Le]),Y=p.useCallback(D=>{if(V(D),a(D==="comments"),_){if(console.log(` MODE SWITCH - Switching to ${D} mode`),_.switchMode(D),r!=null&&r.id){const B=new Date().toISOString(),ae={file_id:P,timestamp:B,previous_mode:H,new_mode:D};H==="flow"?Ge(r.id,Re.FLOW_MODE_EXIT,ae,P||void 0):H==="write"?Ge(r.id,Re.WRITE_MODE_EXIT,ae,P||void 0):H==="comments"&&Ge(r.id,Re.FEEDBACK_MODE_EXIT,ae,P||void 0),D==="flow"?Ge(r.id,Re.FLOW_MODE_ENTER,ae,P||void 0):D==="write"?Ge(r.id,Re.WRITE_MODE_ENTER,ae,P||void 0):D==="comments"&&Ge(r.id,Re.FEEDBACK_MODE_ENTER,{...ae,comments_count:w.length,panel_was_open:i},P||void 0)}D==="flow"?_.getHighlightData("flow").size===0&&ve.info("No flow highlights yet. Check for feedback to generate them.",{duration:4e3}):D==="write"?ve.info("Write mode activated - Focus on your writing!",{duration:3e3}):D==="comments"&&ve.info("Feedback mode activated - Comments panel opened",{duration:2e3})}else console.warn("HighlightingManager not available for mode toggle");console.log(`Editor mode changed to: ${D}`)},[H,a,_,r==null?void 0:r.id,P,w,i]),ce=p.useCallback(D=>{if(!I)return;const{from:B,to:ae}=I.state.selection,G=B!==ae;D==="paragraph"?Object.entries(E).forEach(([,{from:se,to:fe}])=>{I.commands.setTextSelection({from:se,to:fe}),I.commands.setHighlight({color:"#ffb700"})}):D==="paragraph_hide"?(Object.entries(E).forEach(([,{from:se,to:fe}])=>{I.commands.setTextSelection({from:se,to:fe}),I.commands.unsetHighlight()}),z&&S&&(I.commands.setTextSelection({from:S.from,to:S.to}),I.commands.setHighlight({color:"#ffff00"}))):D==="document"?S&&(I.commands.setTextSelection({from:S.from,to:S.to}),I.commands.setHighlight({color:"#ffff00"})):D==="document_hide"&&(S&&(I.commands.setTextSelection({from:S.from,to:S.to}),I.commands.unsetHighlight()),O&&Object.entries(E).forEach(([,{from:se,to:fe}])=>{I.commands.setTextSelection({from:se,to:fe}),I.commands.setHighlight({color:"#ffb700"})})),G?I.commands.setTextSelection({from:B,to:ae}):I.commands.setTextSelection(B),I.commands.focus()},[I,E,S,O,z]),de=p.useCallback(()=>{const D=!O;if(K(D),D){const B=Object.keys(E).length;B>0?(ce("paragraph"),ve.success(`Showing ${B} paragraph topic${B===1?"":"s"}`)):ve.info("No paragraph topics marked yet. Right-click on text and select 'Select as Paragraph Topic'",{duration:5e3,action:{label:"How to use",onClick:()=>{ve.info("Select important sentences in each paragraph, then right-click and choose 'Select as Paragraph Topic'",{duration:7e3})}}})}else ce("paragraph_hide"),ve.success("Paragraph topics hidden")},[O,E,ce]),We=p.useCallback(()=>{const D=!z;Z(D),D?S?(ce("document"),ve.success("Showing essay topic")):ve.info("No essay topic marked yet. Right-click on text and select 'Select as Essay Topic'",{duration:5e3,action:{label:"How to use",onClick:()=>{ve.info("Select your main thesis or focus statement, then right-click and choose 'Select as Essay Topic'",{duration:7e3})}}}):(ce("document_hide"),ve.success("Essay topic hidden"))},[z,S,ce]);p.useEffect(()=>{I&&O&&ce("paragraph")},[I,O]),p.useEffect(()=>{I&&z&&ce("document")},[I,z]);const Se=p.useCallback(()=>{if(!I)return;const{from:D,to:B}=I.state.selection;if(D===B)return;const ae=I.state.doc.resolve(D),G=ae.node(1);if(G){const se=G.attrs.id||ae.before(1).toString(),fe=I.state.doc.textBetween(D,B);if(console.log("Paragraph Topic Selected:",{paragraphId:se,position:{from:D,to:B},text:fe}),E[se]){const xe=E[se];I.chain().setTextSelection({from:xe.from,to:xe.to}).unsetHighlight().setTextSelection({from:D,to:B}).run()}O&&I.chain().setHighlight({color:"#ffb700"}).setTextSelection(B).run(),k(xe=>({...xe,[se]:{from:D,to:B}})),q(xe=>({...xe,[se]:fe})),setTimeout(()=>{console.log("Updated paragraph topic states:",{highlights:E,texts:Q})},0),ve.success("Paragraph topic set")}},[I,E,Q,O]),Je=p.useCallback(()=>{if(!I)return;const{from:D,to:B}=I.state.selection;if(D===B)return;const ae=I.state.doc.textBetween(D,B);console.log("Essay Topic Selected:",{position:{from:D,to:B},text:ae}),S&&I.chain().setTextSelection({from:S.from,to:S.to}).unsetHighlight().setTextSelection({from:D,to:B}).run(),z&&I.chain().setHighlight({color:"#ffff00"}).setTextSelection(B).run(),C({from:D,to:B}),X(ae),setTimeout(()=>{console.log("Updated essay topic states:",{highlight:S,text:j})},0),ve.success("Essay topic set")},[I,S,j,z]),wn=p.useCallback(()=>I?I.getHTML():"",[I]),jn=p.useCallback(async D=>{var B,ae,G,se,fe,xe,lt,Dn,Jc;if(I){he(!0);try{let is="",OO="all";switch(D){case"all":I.chain().focus().selectAll().run(),is=I.state.doc.textContent;break;case"custom":if(is=I.state.doc.textBetween(I.state.selection.from,I.state.selection.to),!is){ve.warning("Please make a Custom Selection first.");return}break}if(!is){console.error("No content selected for analysis");return}const ex=I.state.doc.textContent;console.log(" Running analysis with flow highlighting for:",D);const rr=await Eg({content:is,fullContext:ex,targetType:OO,flowPrompt:"Highlight important arguments with high emphasis, supporting details with medium emphasis, and transitions with low emphasis"});if(console.log(" Analysis response received:",{hasComments:!!((ae=(B=rr.data)==null?void 0:B.comments)!=null&&ae.length),commentsCount:((se=(G=rr.data)==null?void 0:G.comments)==null?void 0:se.length)||0,hasFlowHighlights:!!((xe=(fe=rr.data)==null?void 0:fe.flowHighlights)!=null&&xe.length),flowHighlightsCount:((Dn=(lt=rr.data)==null?void 0:lt.flowHighlights)==null?void 0:Dn.length)||0}),rr.data.flowHighlights&&rr.data.flowHighlights.length>0&&_){console.log(" Processing flow highlights as part of regular analysis:",rr.data.flowHighlights.length,"highlights"),_.setDocumentContext(ex);const br=[];rr.data.flowHighlights.forEach((St,Sr)=>{const Cr=St.text;let Yr=null;if(I.state.doc.descendants((as,Xc)=>{const La=as.textContent;if(La.includes(Cr)){const Qc=Xc+La.indexOf(Cr),IO=Qc+Cr.length;return Yr={from:Qc,to:IO},!1}}),Yr){const as={id:`flow-${Date.now()}-${Sr}`,connectionStrength:St.connectionStrength,connectedSentences:[],position:Yr};br.push(as),console.log(` Flow highlight ${Sr+1}: "${Cr.substring(0,50)}..." with strength ${St.connectionStrength}`)}else console.warn(" Could not find position for flow highlight text:",Cr.substring(0,100))}),br.length>0&&(_.addFlowHighlights(br),console.log(" Flow highlights added to HighlightingManager - they will be visible when flow mode is ON"))}else console.log(" No flow highlights returned or HighlightingManager not available");if(((Jc=rr.data.comments)==null?void 0:Jc.length)>0){const br=[];rr.data.comments.forEach(St=>{const Sr=St.highlightedText;let Cr=null;if(I.state.doc.descendants((Yr,as)=>{const Xc=Yr.textContent;if(Xc.includes(Sr)){const La=as+Xc.indexOf(Sr),Qc=La+Sr.length;return Cr={from:La,to:Qc},!1}}),Cr){const Yr=`comment-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,as={id:Yr,content:St.text,createdAt:new Date,createdAtTime:new Date,quotedText:St.highlightedText,isAIFeedback:!0,issueType:St.issueType||"general",...St.suggestedEdit?{suggestedEdit:{original:St.suggestedEdit.original,suggested:St.suggestedEdit.suggested,explanation:St.suggestedEdit.explanation,references:St.suggestedEdit.references||[]}}:{}};I.chain().setTextSelection(Cr).setComment(Yr).run(),br.push(as)}}),b(St=>[...St,...br]),(_==null?void 0:_.getCurrentMode())==="comments"&&a(!0),setTimeout(()=>{F.current&&F.current()},50),br.length>0&&setTimeout(()=>{const St=br[br.length-1],Sr=document.querySelector(`[data-comment-item="${St.id}"]`);Sr&&Sr.scrollIntoView({behavior:"smooth",block:"center"})},100)}I&&I.commands.focus("end")}catch(is){console.error("Error running contextual analysis:",is),ve.error("Analysis failed. Please try again.")}finally{he(!1)}}},[I,b,a,_,he]),Rt=p.useCallback(()=>{if(!I)return;const{from:D,to:B}=I.state.selection;if(D===B)return;const ae=I.state.doc.textBetween(D,B),G=crypto.randomUUID(),se={id:G,createdAt:new Date,quotedText:ae,content:"",createdAtTime:new Date,from:D,to:B};console.log("Adding new comment:",se),b(fe=>[...fe,se]),I.chain().setComment(G).run(),y(G),a(!0),setTimeout(()=>{const fe=document.getElementById(G);fe&&fe.focus()},50)},[I]),ss=p.useCallback(()=>{if(!I)return;const{from:D,to:B}=I.state.selection;if(D===B)return;const ae=I.state.doc.textBetween(D,B);if(!window.prompt("Suggest an edit:",ae))return;const se=`c${Date.now()}`,fe={id:se,createdAt:new Date,quotedText:ae,content:""};b(xe=>[...xe,fe]),y(se),a(!0)},[I]),Gr=p.useCallback(async()=>{if(!(!I||!L))try{console.log("Saving document with topics:",{paragraphTopicHighlights:E,paragraphTopicTexts:Q,essayTopicHighlight:S,essayTopicText:j}),console.log("Current comments being saved:",w),localStorage.setItem("ripple-doc",JSON.stringify({title:h,content:I.getHTML(),comments:w,paragraphTopicHighlights:E,essayTopicHighlight:S,paragraphTopicTexts:Q,essayTopicText:j,lastSaved:new Date().toISOString()}));try{const D=I.getHTML();let B=P;if(B)await L.saveFile(h,D,B);else{const ae=await L.saveFile(h,D);if(ae)B=ae.id,N(B);else throw new Error("Failed to create file")}if(B){if(console.log(`Preparing to save ${w.length} comments for file ID: ${B}`),!Array.isArray(w))throw console.error("Comments is not an array:",w),new Error("Comments is not a valid array");if(w.length>0){console.log("Comment samples before saving:",w.slice(0,2));const ae=await L.saveComments(B,w);console.log("Comment save result:",ae),ae||console.warn("Comments may not have saved successfully")}else console.log("No comments to save")}ve.success("Document saved successfully")}catch(D){console.error("Error saving document",D),Ge((r==null?void 0:r.id)||"anonymous",Re.ERROR,{error:D.message}),ve.error("Failed to save document")}}catch(D){console.error("Error saving document:",D),ve.error("Failed to save document")}},[I,L,h,w,P,E,Q,S,j,r]),Da=p.useCallback(()=>{I&&b(D=>D.map(B=>{let ae=null;if(I.state.doc.descendants((G,se)=>{if(G.marks.find(xe=>xe.type.name==="comment"&&xe.attrs.commentId===B.id))return ae={from:se,to:se+G.nodeSize},!1}),ae){const G=ae;return{...B,from:G.from,to:G.to,quotedText:I.state.doc.textBetween(G.from,G.to)}}return B}))},[I,b]);p.useEffect(()=>{if(!I)return;const D=()=>{A.current&&clearTimeout(A.current),A.current=setTimeout(Da,500)};return I.on("update",D),()=>{I.off("update",D),A.current&&clearTimeout(A.current)}},[I,Da]),p.useEffect(()=>{const D=B=>{if(!M)return;const ae=B.target,G=ae.closest("[data-comment-id]")||ae.hasAttribute("data-comment-id"),se=ae.closest("[data-comment-item]")||ae.closest(".cursor-pointer"),fe=ae.closest('button, input, textarea, select, [role="button"]');if(!G&&!se&&!fe){console.log("Global click detected, exiting focus mode");const xe=(I==null?void 0:I.view.dom.closest(".ProseMirror"))||(I==null?void 0:I.view.dom);xe!=null&&xe.classList.contains("focus-mode-active")&&(xe.classList.remove("focus-mode-active"),xe.removeAttribute("data-focused-comment"),document.querySelectorAll(".focused-comment").forEach(Dn=>{Dn.classList.remove("focused-comment")})),$(null)}};return document.addEventListener("click",D,!0),()=>{document.removeEventListener("click",D,!0)}},[M,I]),p.useEffect(()=>{if(I&&!_){console.log(" Creating HighlightingManager in EditorContainer");const D=new V7(I,B=>{console.log(` Highlighting Manager: Mode changed to ${B}`),ie(ae=>ae+1)});ee(D),window.highlightingManager=D,D.switchMode("comments"),D.setupFlowHoverListeners()}},[I,_]),p.useEffect(()=>{const D=()=>{const ae=I==null?void 0:I.view.dom.closest(".editor-container"),G=(ae==null?void 0:ae.getAttribute("data-analyzing"))==="true";Oe(G)},B=I==null?void 0:I.view.dom.closest(".editor-container");if(B){const ae=new MutationObserver(D);return ae.observe(B,{attributes:!0,attributeFilter:["data-analyzing"]}),D(),()=>ae.disconnect()}},[I]);const qc=p.useCallback(()=>{_&&_.exitFlowSentenceMode()},[_]),Gc=p.useCallback(()=>{var B;const D=_==null?void 0:_.getSentenceFlowPopoverState();(B=D==null?void 0:D.sentenceData)!=null&&B.text&&(navigator.clipboard.writeText(D.sentenceData.text),ve.success("Sentence copied to clipboard"),_==null||_.hideSentenceFlowPopover())},[_]),Yc=p.useCallback(()=>{_&&I&&I.view.dom.querySelector(".flow-sentence-selected")&&(Rt(),_.hideSentenceFlowPopover())},[_,I,Rt]),Ih=p.useCallback(()=>{var B;const D=_==null?void 0:_.getSentenceFlowPopoverState();(B=D==null?void 0:D.sentenceData)!=null&&B.text&&(ve.info("Sentence explanation feature coming soon!"),_==null||_.hideSentenceFlowPopover())},[_]);return p.useEffect(()=>{_&&Q&&_.setParagraphTopics(Q)},[_,Q]),p.useEffect(()=>{_&&_.updateTopicsForHover(Q,j)},[_,Q,j]),f.jsx("div",{className:oe("w-full h-full relative",t),children:f.jsxs(gJ.Provider,{value:[g,v],children:[f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx("div",{className:"sticky top-0 z-[50] bg-background",children:f.jsxs("div",{className:"rounded-lg overflow-hidden border border-border/40",children:[f.jsx(IY,{editor:I,documentTitle:h,setDocumentTitle:m,comments:w,isInsightsOpen:i,setIsInsightsOpen:a,setIsHelpOpen:c,isHelpOpen:l,setComments:b,eventBatcher:n,currentFileId:P,setCurrentFileId:N,highlightingManager:_,isAnalysisRunning:ge,setIsAnalysisRunning:he,isAnyAnalysisRunning:Be,editorMode:H,onModeChange:Y,onLoadFile:D=>{N(D.id),m(D.title),I.commands.setContent(D.content),L&&(console.log("Loading comments for selected file:",D.id),L.getComments(D.id).then(B=>{console.log("Retrieved comments for selected file:",B);const ae=B.map(G=>q1(G));console.log("Setting UI comments for selected file:",ae),b(ae),ae.forEach(G=>{G.from!==void 0&&G.to!==void 0&&(I.commands.setTextSelection({from:G.from,to:G.to}),I.chain().setComment(G.id).run())}),I.commands.setTextSelection(0)}))}}),f.jsx(fV,{editor:I,hasSelection:!!(I!=null&&I.state.selection.content()),onAddComment:Rt,onSuggestEdit:ss,showParagraphTopics:O,showEssayTopics:z,onToggleParagraphTopics:de,onToggleEssayTopics:We})]})}),f.jsx("div",{className:"flex-1 overflow-auto bg-[#FAF9F6] dark:bg-background/10",children:f.jsxs("div",{className:"mx-auto relative",style:{width:"794px"},children:[f.jsx("div",{className:"py-12",children:f.jsxs("div",{className:oe("relative bg-[#FFFDF7] dark:bg-neutral-900 shadow-sm",Be&&"cursor-wait"),onClick:D=>{if(Be){D.preventDefault(),D.stopPropagation();return}const B=D.target;if(B.closest(".ProseMirror")||B.classList.contains("ProseMirror")){const G=(I==null?void 0:I.view.dom.closest(".ProseMirror"))||(I==null?void 0:I.view.dom);G!=null&&G.classList.contains("focus-mode-active")&&(G.classList.remove("focus-mode-active"),G.removeAttribute("data-focused-comment"),document.querySelectorAll(".focused-comment").forEach(fe=>{fe.classList.remove("focused-comment")}))}},children:[Be&&f.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-40 flex items-center justify-center backdrop-blur-sm",children:f.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[f.jsx(fa,{className:"h-8 w-8 animate-spin text-blue-500"}),f.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:Ne?"Analyzing sentence connections...":"Analyzing document..."}),f.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ne?"Finding related sentences in flow mode":"Please wait while we process your feedback"})]})}),f.jsx(N8,{editor:I,onSelectAsParagraphTopic:Se,onSelectAsEssayTopic:Je,activeCommentId:x,setActiveCommentId:y,onAddComment:Rt,comments:w,setComments:b,runContextualAnalysis:jn,children:f.jsx("div",{className:"editor-container",children:f.jsx(J3,{editor:I})})})]})}),f.jsx(fJ,{isOpen:i,setIsOpen:a,comments:w,setComments:b,activeCommentId:x,setActiveCommentId:y,editor:I,focusedCommentId:M,setFocusedCommentId:$,sortCommentsRef:F,highlightingManager:_,isAnyAnalysisRunning:Be,onModeChange:Y})]})})]}),f.jsx(K7,{isOpen:o,onClose:nr,selectedText:T,documentContext:wn()}),f.jsx(q7,{isOpen:l,onClose:()=>c(!l)}),u&&!l&&f.jsxs("div",{className:"fixed bottom-4 right-4 p-4 bg-card rounded-lg shadow-lg max-w-xs border border-border/40 z-50 animate-in slide-in-from-bottom-10 flex items-center gap-3",children:[f.jsx("div",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full p-2",children:f.jsx(xT,{className:"h-5 w-5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-medium text-sm",children:"Welcome to Ripple!"}),f.jsx("p",{className:"text-muted-foreground text-xs mt-1",children:"Check out our help section to learn how to use all Ripple features."})]}),f.jsx("button",{className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2",onClick:()=>c(!l),children:"Learn More"})]}),(()=>{const D=_==null?void 0:_.getSentenceFlowActionPanelState();return console.log(" Action panel render check:",{hasManager:!!_,actionPanelState:D,isVisible:D==null?void 0:D.isVisible,sentenceData:D==null?void 0:D.sentenceData,trigger:te}),(D==null?void 0:D.isVisible)&&(D==null?void 0:D.sentenceData)&&f.jsx(W7,{position:{x:0,y:0},sentenceText:D.sentenceData.text,connectionStrength:D.sentenceData.connectionStrength,connectedSentences:D.sentenceData.connectedSentences,paragraphCohesion:D.sentenceData.paragraphCohesion,documentCohesion:D.sentenceData.documentCohesion,onExitFlowMode:qc,onAddComment:Yc,onCopySentence:Gc,onRedoAnalysis:()=>_==null?void 0:_.redoSentenceFlowAnalysis(),onExplainSentence:Ih,onClose:qc,onUpdateSentence:B=>{_&&(_.updateAnalyzedSentence(B),_.redoSentenceFlowAnalysis())},editor:I,isAnalyzing:Ne,userId:r==null?void 0:r.id,fileId:P||void 0})})()]})})}function yJ(t){return f.jsx(vJ,{...t})}const XA=p.forwardRef(({className:t,type:e,...n},r)=>f.jsx("input",{type:e,className:oe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));XA.displayName="Input";var xJ="Label",QA=p.forwardRef((t,e)=>f.jsx(be.label,{...t,ref:e,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));QA.displayName=xJ;var ZA=QA;const wJ=RT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),eO=p.forwardRef(({className:t,...e},n)=>f.jsx(ZA,{ref:n,className:oe(wJ(),t),...e}));eO.displayName=ZA.displayName;var B0={};Object.defineProperty(B0,"__esModule",{value:!0});B0.parse=NJ;B0.serialize=MJ;const bJ=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,SJ=/^[\u0021-\u003A\u003C-\u007E]*$/,CJ=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,kJ=/^[\u0020-\u003A\u003D-\u007E]*$/,EJ=Object.prototype.toString,TJ=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function NJ(t,e){const n=new TJ,r=t.length;if(r<2)return n;const o=(e==null?void 0:e.decode)||_J;let s=0;do{const i=t.indexOf("=",s);if(i===-1)break;const a=t.indexOf(";",s),l=a===-1?r:a;if(i>l){s=t.lastIndexOf(";",i-1)+1;continue}const c=nS(t,s,i),u=rS(t,i,c),d=t.slice(c,u);if(n[d]===void 0){let h=nS(t,i+1,l),m=rS(t,l,h);const g=o(t.slice(h,m));n[d]=g}s=l+1}while(s<r);return n}function nS(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function rS(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function MJ(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!bJ.test(t))throw new TypeError(`argument name is invalid: ${t}`);const o=r(e);if(!SJ.test(o))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+o;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!CJ.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!kJ.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!PJ(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function _J(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function PJ(t){return EJ.call(t)==="[object Date]"}/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oS="popstate";function RJ(t={}){function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return uv("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:mc(o)}return OJ(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AJ(){return Math.random().toString(36).substring(2,10)}function sS(t,e){return{usr:t.state,key:t.key,idx:e}}function uv(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Oa(e):e,state:n,key:e&&e.key||r||AJ()}}function mc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Oa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function OJ(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",l=null,c=u();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function u(){return(i.state||{idx:null}).idx}function d(){a="POP";let x=u(),y=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:y})}function h(x,y){a="PUSH";let w=uv(v.location,x,y);c=u()+1;let b=sS(w,c),S=v.createHref(w);try{i.pushState(b,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(S)}s&&l&&l({action:a,location:v.location,delta:1})}function m(x,y){a="REPLACE";let w=uv(v.location,x,y);c=u();let b=sS(w,c),S=v.createHref(w);i.replaceState(b,"",S),s&&l&&l({action:a,location:v.location,delta:0})}function g(x){let y=o.location.origin!=="null"?o.location.origin:o.location.href,w=typeof x=="string"?x:mc(x);return w=w.replace(/ $/,"%20"),Qe(y,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,y)}let v={get action(){return a},get location(){return t(o,i)},listen(x){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(oS,d),l=x,()=>{o.removeEventListener(oS,d),l=null}},createHref(x){return e(o,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return i.go(x)}};return v}function tO(t,e,n="/"){return IJ(t,e,n,!1)}function IJ(t,e,n,r){let o=typeof e=="string"?Oa(e):e,s=Vr(o.pathname||"/",n);if(s==null)return null;let i=nO(t);jJ(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=KJ(s);a=VJ(i[l],c,r)}return a}function nO(t,e=[],n=[],r=""){let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Lr([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Qe(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),nO(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:HJ(c,s.index),routesMeta:u})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of rO(s.path))o(s,i,l)}),e}function rO(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=rO(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function jJ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UJ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var DJ=/^:[\w-]+$/,LJ=3,$J=2,FJ=1,zJ=10,BJ=-2,iS=t=>t==="*";function HJ(t,e){let n=t.split("/"),r=n.length;return n.some(iS)&&(r+=BJ),e&&(r+=$J),n.filter(o=>!iS(o)).reduce((o,s)=>o+(DJ.test(s)?LJ:s===""?FJ:zJ),r)}function UJ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function VJ(t,e,n=!1){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=gf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=gf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:Lr([s,d.pathname]),pathnameBase:JJ(Lr([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Lr([s,d.pathnameBase]))}return i}function gf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WJ(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let g=a[h]||"";i=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return d&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function WJ(t,e=!1,n=!0){Xn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function KJ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qJ(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Oa(t):t;return{pathname:n?n.startsWith("/")?n:GJ(n,e):e,search:XJ(r),hash:QJ(o)}}function GJ(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function sm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YJ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function H0(t){let e=YJ(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function U0(t,e,n,r=!1){let o;typeof t=="string"?o=Oa(t):(o={...t},Qe(!o.pathname||!o.pathname.includes("?"),sm("?","pathname","search",o)),Qe(!o.pathname||!o.pathname.includes("#"),sm("#","pathname","hash",o)),Qe(!o.search||!o.search.includes("#"),sm("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let d=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),d-=1;o.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=qJ(o,a),c=i&&i!=="/"&&i.endsWith("/"),u=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Lr=t=>t.join("/").replace(/\/\/+/g,"/"),JJ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XJ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QJ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZJ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var oO=["POST","PUT","PATCH","DELETE"];new Set(oO);var eX=["GET",...oO];new Set(eX);var Ia=p.createContext(null);Ia.displayName="DataRouter";var Rh=p.createContext(null);Rh.displayName="DataRouterState";var sO=p.createContext({isTransitioning:!1});sO.displayName="ViewTransition";var tX=p.createContext(new Map);tX.displayName="Fetchers";var nX=p.createContext(null);nX.displayName="Await";var tr=p.createContext(null);tr.displayName="Navigation";var Wc=p.createContext(null);Wc.displayName="Location";var wr=p.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var V0=p.createContext(null);V0.displayName="RouteError";function rX(t,{relative:e}={}){Qe(ja(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=p.useContext(tr),{hash:o,pathname:s,search:i}=Kc(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Lr([n,s])),r.createHref({pathname:a,search:i,hash:o})}function ja(){return p.useContext(Wc)!=null}function rs(){return Qe(ja(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Wc).location}var iO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aO(t){p.useContext(tr).static||p.useLayoutEffect(t)}function lO(){let{isDataRoute:t}=p.useContext(wr);return t?gX():oX()}function oX(){Qe(ja(),"useNavigate() may be used only in the context of a <Router> component.");let t=p.useContext(Ia),{basename:e,navigator:n}=p.useContext(tr),{matches:r}=p.useContext(wr),{pathname:o}=rs(),s=JSON.stringify(H0(r)),i=p.useRef(!1);return aO(()=>{i.current=!0}),p.useCallback((l,c={})=>{if(Xn(i.current,iO),!i.current)return;if(typeof l=="number"){n.go(l);return}let u=U0(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Lr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,o,t])}p.createContext(null);function Kc(t,{relative:e}={}){let{matches:n}=p.useContext(wr),{pathname:r}=rs(),o=JSON.stringify(H0(n));return p.useMemo(()=>U0(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function sX(t,e){return cO(t,e)}function cO(t,e,n,r){var w;Qe(ja(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:s}=p.useContext(tr),{matches:i}=p.useContext(wr),a=i[i.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let b=d&&d.path||"";uO(c,!d||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=rs(),m;if(e){let b=typeof e=="string"?Oa(e):e;Qe(u==="/"||((w=b.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=h;let g=m.pathname||"/",v=g;if(u!=="/"){let b=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=!s&&n&&n.matches&&n.matches.length>0?n.matches:tO(t,{pathname:v});Xn(d||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Xn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=uX(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Lr([u,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:Lr([u,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&y?p.createElement(Wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},y):y}function iX(){let t=mX(),e=ZJ(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:s},"ErrorBoundary")," or"," ",p.createElement("code",{style:s},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:o},n):null,i)}var aX=p.createElement(iX,null),lX=class extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?p.createElement(wr.Provider,{value:this.props.routeContext},p.createElement(V0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cX({routeContext:t,match:e,children:n}){let r=p.useContext(Ia);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),p.createElement(wr.Provider,{value:t},n)}function uX(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let l=o.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Qe(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){i=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,u)=>{let d,h=!1,m=null,g=null;n&&(d=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||aX,i&&(a<0&&u===0?(uO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):a===u&&(h=!0,g=c.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,u+1)),x=()=>{let y;return d?y=m:h?y=g:c.route.Component?y=p.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=l,p.createElement(cX,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?p.createElement(lX,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function W0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dX(t){let e=p.useContext(Ia);return Qe(e,W0(t)),e}function fX(t){let e=p.useContext(Rh);return Qe(e,W0(t)),e}function hX(t){let e=p.useContext(wr);return Qe(e,W0(t)),e}function K0(t){let e=hX(t),n=e.matches[e.matches.length-1];return Qe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function pX(){return K0("useRouteId")}function mX(){var r;let t=p.useContext(V0),e=fX("useRouteError"),n=K0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function gX(){let{router:t}=dX("useNavigate"),e=K0("useNavigate"),n=p.useRef(!1);return aO(()=>{n.current=!0}),p.useCallback(async(o,s={})=>{Xn(n.current,iO),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var aS={};function uO(t,e,n){!e&&!aS[t]&&(aS[t]=!0,Xn(!1,n))}p.memo(vX);function vX({routes:t,future:e,state:n}){return cO(t,void 0,n,e)}function lS({to:t,replace:e,state:n,relative:r}){Qe(ja(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=p.useContext(tr);Xn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=p.useContext(wr),{pathname:i}=rs(),a=lO(),l=U0(t,H0(s),i,r==="path"),c=JSON.stringify(l);return p.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function hs(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yX({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){Qe(!ja(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=p.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=Oa(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,m=p.useMemo(()=>{let g=Vr(l,i);return g==null?null:{location:{pathname:g,search:c,hash:u,state:d,key:h},navigationType:r}},[i,l,c,u,d,h,r]);return Xn(m!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:p.createElement(tr.Provider,{value:a},p.createElement(Wc.Provider,{children:e,value:m}))}function cS({children:t,location:e}){return sX(dv(t),e)}function dv(t,e=[]){let n=[];return p.Children.forEach(t,(r,o)=>{if(!p.isValidElement(r))return;let s=[...e,o];if(r.type===p.Fragment){n.push.apply(n,dv(r.props.children,s));return}Qe(r.type===hs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=dv(r.props.children,s)),n.push(i)}),n}var hd="get",pd="application/x-www-form-urlencoded";function Ah(t){return t!=null&&typeof t.tagName=="string"}function xX(t){return Ah(t)&&t.tagName.toLowerCase()==="button"}function wX(t){return Ah(t)&&t.tagName.toLowerCase()==="form"}function bX(t){return Ah(t)&&t.tagName.toLowerCase()==="input"}function SX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CX(t,e){return t.button===0&&(!e||e==="_self")&&!SX(t)}var Wu=null;function kX(){if(Wu===null)try{new FormData(document.createElement("form"),0),Wu=!1}catch{Wu=!0}return Wu}var EX=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function im(t){return t!=null&&!EX.has(t)?(Xn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pd}"`),null):t}function TX(t,e){let n,r,o,s,i;if(wX(t)){let a=t.getAttribute("action");r=a?Vr(a,e):null,n=t.getAttribute("method")||hd,o=im(t.getAttribute("enctype"))||pd,s=new FormData(t)}else if(xX(t)||bX(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Vr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||hd,o=im(t.getAttribute("formenctype"))||im(a.getAttribute("enctype"))||pd,s=new FormData(a,t),!kX()){let{name:c,type:u,value:d}=t;if(u==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,d)}}else{if(Ah(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hd,r=null,o=pd,i=t}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}function q0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function NX(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MX(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _X(t,e,n){let r=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let i=await NX(s,n);return i.links?i.links():[]}return[]}));return OX(r.flat(1).filter(MX).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function uS(t,e,n,r,o,s){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function PX(t,e,{includeHydrateFallback:n}={}){return RX(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function RX(t){return[...new Set(t)]}function AX(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function OX(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let s=JSON.stringify(AX(o));return n.has(s)||(n.add(s),r.push({key:s,link:o})),r},[])}function IX(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Vr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function dO(){let t=p.useContext(Ia);return q0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function jX(){let t=p.useContext(Rh);return q0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var G0=p.createContext(void 0);G0.displayName="FrameworkContext";function fO(){let t=p.useContext(G0);return q0(t,"You must render this element inside a <HydratedRouter> element"),t}function DX(t,e){let n=p.useContext(G0),[r,o]=p.useState(!1),[s,i]=p.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=p.useRef(null);p.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let v=y=>{y.forEach(w=>{i(w.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[t]),p.useEffect(()=>{if(r){let v=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{o(!0)},g=()=>{o(!1),i(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Za(a,m),onBlur:Za(l,g),onMouseEnter:Za(c,m),onMouseLeave:Za(u,g),onTouchStart:Za(d,m)}]:[!1,h,{}]}function Za(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function LX({page:t,...e}){let{router:n}=dO(),r=p.useMemo(()=>tO(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?p.createElement(FX,{page:t,matches:r,...e}):null}function $X(t){let{manifest:e,routeModules:n}=fO(),[r,o]=p.useState([]);return p.useEffect(()=>{let s=!1;return _X(t,e,n).then(i=>{s||o(i)}),()=>{s=!0}},[t,e,n]),r}function FX({page:t,matches:e,...n}){let r=rs(),{manifest:o,routeModules:s}=fO(),{basename:i}=dO(),{loaderData:a,matches:l}=jX(),c=p.useMemo(()=>uS(t,e,l,o,r,"data"),[t,e,l,o,r]),u=p.useMemo(()=>uS(t,e,l,o,r,"assets"),[t,e,l,o,r]),d=p.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,v=!1;if(e.forEach(y=>{var b;let w=o.routes[y.route.id];!w||!w.hasLoader||(!c.some(S=>S.route.id===y.route.id)&&y.route.id in a&&((b=s[y.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?v=!0:g.add(y.route.id))}),g.size===0)return[];let x=IX(t,i);return v&&g.size>0&&x.searchParams.set("_routes",e.filter(y=>g.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[i,a,r,o,c,e,t,s]),h=p.useMemo(()=>PX(u,o),[u,o]),m=$X(u);return p.createElement(p.Fragment,null,d.map(g=>p.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),h.map(g=>p.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),m.map(({key:g,link:v})=>p.createElement("link",{key:g,...v})))}function zX(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hO&&(window.__reactRouterVersion="7.5.0")}catch{}function dS({basename:t,children:e,window:n}){let r=p.useRef();r.current==null&&(r.current=RJ({window:n,v5Compat:!0}));let o=r.current,[s,i]=p.useState({action:o.action,location:o.location}),a=p.useCallback(l=>{p.startTransition(()=>i(l))},[i]);return p.useLayoutEffect(()=>o.listen(a),[o,a]),p.createElement(yX,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var pO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rs=p.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},m){let{basename:g}=p.useContext(tr),v=typeof c=="string"&&pO.test(c),x,y=!1;if(typeof c=="string"&&v&&(x=c,hO))try{let R=new URL(window.location.href),O=c.startsWith("//")?new URL(R.protocol+c):new URL(c),K=Vr(O.pathname,g);O.origin===R.origin&&K!=null?c=K+O.search+O.hash:y=!0}catch{Xn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=rX(c,{relative:o}),[b,S,C]=DX(r,h),E=VX(c,{replace:i,state:a,target:l,preventScrollReset:u,relative:o,viewTransition:d});function k(R){e&&e(R),R.defaultPrevented||E(R)}let T=p.createElement("a",{...h,...C,href:x||w,onClick:y||s?e:k,ref:zX(m,S),target:l,"data-discover":!v&&n==="render"?"true":void 0});return b&&!v?p.createElement(p.Fragment,null,T,p.createElement(LX,{page:w})):T});Rs.displayName="Link";var BX=p.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:l,...c},u){let d=Kc(i,{relative:c.relative}),h=rs(),m=p.useContext(Rh),{navigator:g,basename:v}=p.useContext(tr),x=m!=null&&YX(d)&&a===!0,y=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,w=h.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(w=w.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&v&&(b=Vr(b,v)||b);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=w===y||!o&&w.startsWith(y)&&w.charAt(S)==="/",E=b!=null&&(b===y||!o&&b.startsWith(y)&&b.charAt(y.length)==="/"),k={isActive:C,isPending:E,isTransitioning:x},T=C?e:void 0,R;typeof r=="function"?R=r(k):R=[r,C?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(k):s;return p.createElement(Rs,{...c,"aria-current":T,className:R,ref:u,style:O,to:i,viewTransition:a},typeof l=="function"?l(k):l)});BX.displayName="NavLink";var HX=p.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:s,method:i=hd,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},m)=>{let g=qX(),v=GX(a,{relative:c}),x=i.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&pO.test(a),w=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let S=b.nativeEvent.submitter,C=(S==null?void 0:S.getAttribute("formmethod"))||i;g(S||b.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:o,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return p.createElement("form",{ref:m,method:x,action:v,onSubmit:r?l:w,...h,"data-discover":!y&&t==="render"?"true":void 0})});HX.displayName="Form";function UX(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mO(t){let e=p.useContext(Ia);return Qe(e,UX(t)),e}function VX(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=lO(),l=rs(),c=Kc(t,{relative:s});return p.useCallback(u=>{if(CX(u,e)){u.preventDefault();let d=n!==void 0?n:mc(l)===mc(c);a(t,{replace:d,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[l,a,c,n,r,e,t,o,s,i])}var WX=0,KX=()=>`__${String(++WX)}__`;function qX(){let{router:t}=mO("useSubmit"),{basename:e}=p.useContext(tr),n=pX();return p.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:l,body:c}=TX(r,e);if(o.navigate===!1){let u=o.fetcherKey||KX();await t.fetch(u,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function GX(t,{relative:e}={}){let{basename:n}=p.useContext(tr),r=p.useContext(wr);Qe(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...Kc(t||".",{relative:e})},i=rs();if(t==null){s.search=i.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Lr([n,s.pathname])),mc(s)}function YX(t,e={}){let n=p.useContext(sO);Qe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mO("useViewTransitionState"),o=Kc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Vr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Vr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gf(o.pathname,i)!=null||gf(o.pathname,s)!=null}new TextEncoder;function JX(){const[t,e]=p.useState(""),[n,r]=p.useState(!1),{login:o,bypassLogin:s}=oi(),i=async l=>{if(l.preventDefault(),!t.trim()){ve.error("Please enter your Prolific ID");return}r(!0);try{const c=await o(t.trim());"error"in c&&c.error&&ve.error("Failed to login. Please try again.")}catch(c){ve.error("An unexpected error occurred"),console.error(c)}finally{r(!1)}},a=async()=>{r(!0);try{const l=await s();"error"in l&&l.error?ve.error("Failed to bypass login. Please try again."):ve.success("Successfully logged in with test account")}catch(l){ve.error("Failed to bypass login"),console.error(l)}finally{r(!1)}};return f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background p-4",children:f.jsxs(fr,{className:"w-full max-w-md",children:[f.jsxs(El,{children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs(Rs,{to:"/",className:"flex items-center text-muted-foreground hover:text-foreground",children:[f.jsx(Z4,{className:"h-4 w-4 mr-1"}),f.jsx("span",{className:"text-sm",children:"Back to home"})]})}),f.jsx(Tl,{className:"text-xl",children:"Welcome to Coherence"}),f.jsx(AT,{children:"Please enter your Prolific ID to continue."})]}),f.jsxs("form",{onSubmit:i,children:[f.jsx(hr,{children:f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"space-y-2",children:[f.jsx(eO,{htmlFor:"prolific-id",children:"Prolific ID"}),f.jsx(XA,{id:"prolific-id",value:t,onChange:l=>e(l.target.value),placeholder:"Enter your Prolific ID",disabled:n})]})})}),f.jsxs(OT,{className:"flex flex-col gap-2",children:[f.jsx(pe,{type:"submit",className:"w-full",disabled:n,children:n?"Logging in...":"Login"}),f.jsx(pe,{type:"button",variant:"outline",className:"w-full",onClick:a,disabled:n,style:{display:"none"},children:"Bypass Login (Testing)"})]})]})]})})}var am,Y0="HoverCard",[gO,LQ]=Ft(Y0,[yr]),Oh=yr(),[XX,J0]=gO(Y0),vO=t=>{const{__scopeHoverCard:e,children:n,open:r,defaultOpen:o,onOpenChange:s,openDelay:i=700,closeDelay:a=300}=t,l=Oh(e),c=p.useRef(0),u=p.useRef(0),d=p.useRef(!1),h=p.useRef(!1),[m=!1,g]=Jn({prop:r,defaultProp:o,onChange:s}),v=p.useCallback(()=>{clearTimeout(u.current),c.current=window.setTimeout(()=>g(!0),i)},[i,g]),x=p.useCallback(()=>{clearTimeout(c.current),!d.current&&!h.current&&(u.current=window.setTimeout(()=>g(!1),a))},[a,g]),y=p.useCallback(()=>g(!1),[g]);return p.useEffect(()=>()=>{clearTimeout(c.current),clearTimeout(u.current)},[]),f.jsx(XX,{scope:e,open:m,onOpenChange:g,onOpen:v,onClose:x,onDismiss:y,hasSelectionRef:d,isPointerDownOnContentRef:h,children:f.jsx(Oc,{...l,children:n})})};vO.displayName=Y0;var yO="HoverCardTrigger",xO=p.forwardRef((t,e)=>{const{__scopeHoverCard:n,...r}=t,o=J0(yO,n),s=Oh(n);return f.jsx(Ma,{asChild:!0,...s,children:f.jsx(be.a,{"data-state":o.open?"open":"closed",...r,ref:e,onPointerEnter:re(t.onPointerEnter,yf(o.onOpen)),onPointerLeave:re(t.onPointerLeave,yf(o.onClose)),onFocus:re(t.onFocus,o.onOpen),onBlur:re(t.onBlur,o.onClose),onTouchStart:re(t.onTouchStart,i=>i.preventDefault())})})});xO.displayName=yO;var QX="HoverCardPortal",[$Q,ZX]=gO(QX,{forceMount:void 0}),vf="HoverCardContent",wO=p.forwardRef((t,e)=>{const n=ZX(vf,t.__scopeHoverCard),{forceMount:r=n.forceMount,...o}=t,s=J0(vf,t.__scopeHoverCard);return f.jsx(xr,{present:r||s.open,children:f.jsx(eQ,{"data-state":s.open?"open":"closed",...o,onPointerEnter:re(t.onPointerEnter,yf(s.onOpen)),onPointerLeave:re(t.onPointerLeave,yf(s.onClose)),ref:e})})});wO.displayName=vf;var eQ=p.forwardRef((t,e)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,...a}=t,l=J0(vf,n),c=Oh(n),u=p.useRef(null),d=De(e,u),[h,m]=p.useState(!1);return p.useEffect(()=>{if(h){const g=document.body;return am=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=am,g.style.webkitUserSelect=am}}},[h]),p.useEffect(()=>{if(u.current){const g=()=>{m(!1),l.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var x;((x=document.getSelection())==null?void 0:x.toString())!==""&&(l.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!1}}},[l.isPointerDownOnContentRef,l.hasSelectionRef]),p.useEffect(()=>{u.current&&rQ(u.current).forEach(v=>v.setAttribute("tabindex","-1"))}),f.jsx(Na,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:re(s,g=>{g.preventDefault()}),onDismiss:l.onDismiss,children:f.jsx(Ic,{...c,...a,onPointerDown:re(a.onPointerDown,g=>{g.currentTarget.contains(g.target)&&m(!0),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!0}),ref:d,style:{...a.style,userSelect:h?"text":void 0,WebkitUserSelect:h?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),tQ="HoverCardArrow",nQ=p.forwardRef((t,e)=>{const{__scopeHoverCard:n,...r}=t,o=Oh(n);return f.jsx(jc,{...o,...r,ref:e})});nQ.displayName=tQ;function yf(t){return e=>e.pointerType==="touch"?void 0:t()}function rQ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}var oQ=vO,sQ=xO,bO=wO;const iQ=oQ,aQ=sQ,SO=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},o)=>f.jsx(bO,{ref:o,align:e,sideOffset:n,className:oe("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));SO.displayName=bO.displayName;var X0="Avatar",[lQ,FQ]=Ft(X0),[cQ,CO]=lQ(X0),kO=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[o,s]=p.useState("idle");return f.jsx(cQ,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:f.jsx(be.span,{...r,ref:e})})});kO.displayName=X0;var EO="AvatarImage",TO=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=t,i=CO(EO,n),a=uQ(r,s.referrerPolicy),l=Fe(c=>{o(c),i.onImageLoadingStatusChange(c)});return ze(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?f.jsx(be.img,{...s,ref:e,src:r}):null});TO.displayName=EO;var NO="AvatarFallback",MO=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...o}=t,s=CO(NO,n),[i,a]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&s.imageLoadingStatus!=="loaded"?f.jsx(be.span,{...o,ref:e}):null});MO.displayName=NO;function uQ(t,e){const[n,r]=p.useState("idle");return ze(()=>{if(!t){r("error");return}let o=!0;const s=new window.Image,i=a=>()=>{o&&r(a)};return r("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{o=!1}},[t,e]),n}var _O=kO,PO=TO,RO=MO;const Q0=p.forwardRef(({className:t,...e},n)=>f.jsx(_O,{ref:n,className:oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Q0.displayName=_O.displayName;const AO=p.forwardRef(({className:t,...e},n)=>f.jsx(PO,{ref:n,className:oe("aspect-square h-full w-full",t),...e}));AO.displayName=PO.displayName;const Z0=p.forwardRef(({className:t,...e},n)=>f.jsx(RO,{ref:n,className:oe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Z0.displayName=RO.displayName;function dQ(){const{user:t,logout:e}=oi();if(!t)return null;const n=()=>t.prolificId.startsWith("test_")?"T":t.prolificId.substring(0,2).toUpperCase(),r=async()=>{await e()};return f.jsxs(m0,{children:[f.jsx(g0,{asChild:!0,children:f.jsx(pe,{variant:"ghost",className:"h-8 w-8 rounded-full",children:f.jsx(Q0,{className:"h-8 w-8",children:f.jsx(Z0,{className:"bg-primary text-primary-foreground",children:n()})})})}),f.jsxs(dh,{align:"end",children:[f.jsx(V_,{children:"Account"}),f.jsxs(cc,{disabled:!0,className:"flex gap-2 text-muted-foreground",children:[f.jsx(bz,{className:"h-4 w-4"}),f.jsx("span",{className:"truncate",title:t.prolificId,children:t.prolificId})]}),f.jsx(W_,{}),f.jsxs(cc,{onClick:r,className:"text-red-500 focus:text-red-500 cursor-pointer",children:[f.jsx(pz,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})}function fQ(){const{user:t}=oi();return f.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:f.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[f.jsxs("div",{className:"mr-4 flex items-center",children:[f.jsxs(Rs,{className:"mr-6 flex items-center space-x-2",to:"/",children:[f.jsx(NT,{className:"h-5 w-5 text-blue-600"}),f.jsx("span",{className:"font-bold text-lg",children:"Ripple"})]}),f.jsx("nav",{className:"hidden md:flex items-center space-x-4",children:f.jsx(Rs,{to:"/editor",className:"text-sm font-medium transition-colors hover:text-primary",children:"Editor"})})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"hidden md:flex items-center",children:t?f.jsx("div",{className:"flex items-center mr-2",children:f.jsxs(pe,{variant:"ghost",size:"sm",className:"text-sm font-medium gap-1.5",children:[f.jsx(ld,{className:"h-4 w-4"}),"AI Assistant"]})}):f.jsx(Rs,{to:"/auth",children:f.jsx(pe,{variant:"outline",size:"sm",className:"mr-2",children:"Sign In"})})}),f.jsx(_P,{}),f.jsx(dQ,{})]})]})})}function fS(){const[t,e]=p.useState(!1);return p.useEffect(()=>{e(!0)},[]),f.jsxs("div",{className:"flex min-h-screen flex-col",children:[f.jsx(fQ,{}),f.jsxs("main",{className:"flex-1",children:[f.jsx("section",{className:"w-full py-12 md:py-24 lg:py-32 xl:py-40",children:f.jsxs("div",{className:"container px-4 md:px-6",children:[f.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[f.jsx("h1",{className:"text-3xl font-bold tracking-tighter sm:text-5xl xl:text-6xl/none mb-6",children:"AI-Powered Text Editing with Ripple"}),f.jsx("p",{className:"text-muted-foreground md:text-xl mb-8",children:"An intelligent editor with AI assistance for seamless writing, collaboration, and document enhancement."}),f.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:f.jsx(Rs,{to:"/editor",children:f.jsxs(pe,{size:"lg",children:["Get Started",f.jsx(tz,{className:"ml-2 h-4 w-4"})]})})})]}),f.jsx("div",{className:"max-w-4xl mx-auto mb-20",children:f.jsxs("div",{className:"bg-card rounded-lg shadow-xl overflow-hidden border border-border",children:[f.jsxs("div",{className:"h-8 bg-muted border-b border-border flex items-center px-4",children:[f.jsxs("div",{className:"flex space-x-2 ml-1",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),f.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),f.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),f.jsx("div",{className:"absolute left-0 right-0 mx-auto text-center text-xs text-muted-foreground font-medium",style:{width:"fit-content"},children:"Ripple Editor"})]}),f.jsx("div",{className:"flex items-center justify-center p-0",children:f.jsx("img",{src:"/editor-demo.png",alt:"Ripple Editor Demo",className:"w-full h-auto"})})]})}),f.jsxs("div",{className:"max-w-5xl mx-auto",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-8 relative",children:[f.jsxs("div",{className:"flex items-center text-blue-600",children:[f.jsx(sr,{className:"h-5 w-5 mr-2"}),f.jsx("h2",{className:"text-xl font-bold",children:"KEY FEATURES"})]}),f.jsx("p",{className:"text-muted-foreground",children:"AI-powered text editing with smart suggestions"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[f.jsxs("div",{className:"flex flex-col justify-center",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"AI Chat Bar"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"Get instant assistance from our powerful AI assistant. Ask questions, request revisions, generate content, and more with the convenient side panel chat interface."})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-border shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[f.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(jo,{className:"h-4 w-4 text-blue-600 mr-2"}),f.jsx("span",{className:"font-medium text-foreground",children:"AI Assistant"})]}),f.jsxs("div",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full flex items-center dark:bg-green-950 dark:text-green-300",children:[f.jsx(sr,{className:"h-3 w-3 mr-1"}),f.jsx("span",{children:"Active"})]})]}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:[f.jsx("div",{className:"flex p-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-muted mr-3 flex items-center justify-center text-xs text-muted-foreground",children:f.jsx(ld,{className:"h-4 w-4"})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:"AI Assistant"}),f.jsx("div",{className:"text-xs text-muted-foreground",children:"How can I help with your document?"})]})]})}),f.jsx("div",{className:"flex justify-end p-4",children:f.jsxs("div",{className:"flex items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-right",children:"You"}),f.jsx("div",{className:"text-xs text-muted-foreground text-right",children:"Can you suggest a better introduction?"})]}),f.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 ml-3 flex items-center justify-center text-xs text-blue-600 dark:text-blue-300",children:f.jsx("span",{children:"You"})})]})}),f.jsx("div",{className:`flex p-4 ${t?"animate-pulse bg-gradient-to-r from-background to-blue-500/5 dark:from-background dark:to-blue-400/10":""}`,children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-muted mr-3 flex items-center justify-center text-xs text-muted-foreground flex-shrink-0",children:f.jsx(ld,{className:"h-4 w-4"})}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:"AI Assistant"}),f.jsx("div",{className:"text-xs text-muted-foreground",children:`Here's a more engaging introduction: "In today's fast-paced digital environment, standing out requires content that captivates from the first sentence..."`})]})]})})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[f.jsxs("div",{className:"flex flex-col justify-center",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Inline AI Chat"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"Interact with AI directly within your document. Highlight text and get contextual suggestions, rephrasing options, or AI-powered edits without switching contexts."})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-border shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[f.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(ld,{className:"h-4 w-4 text-indigo-600 mr-2"}),f.jsx("span",{className:"font-medium text-foreground",children:"Inline Assistant"})]}),f.jsx("div",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full flex items-center dark:bg-blue-950 dark:text-blue-300",children:f.jsx("span",{children:"Context-aware"})})]}),f.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:[f.jsxs("div",{className:`flex justify-between items-center p-4 ${t?"animate-pulse bg-gradient-to-r from-background to-blue-500/5 dark:from-background dark:to-blue-400/10":""}`,children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:"Selected Text"}),f.jsx("div",{className:"text-xs text-muted-foreground",children:"This paragraph needs improvement for clarity."})]}),f.jsx(pe,{variant:"outline",size:"sm",children:"Ask AI"})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"text-sm font-medium mb-1",children:"AI Suggestions:"}),f.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:'Try: "This paragraph requires revision to enhance clarity and readability for the audience."'}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(pe,{variant:"outline",size:"sm",children:"Apply"}),f.jsx(pe,{variant:"outline",size:"sm",children:"Regenerate"})]})]})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[f.jsxs("div",{className:"flex flex-col justify-center",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Automatic AI Suggestions"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"Get real-time suggestions to improve your writing. Our AI provides instant feedback on grammar, cohesion, coherence, flow, and more as you type."})]}),f.jsxs("div",{className:"bg-card rounded-lg border border-border shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[f.jsx("div",{className:"p-4 border-b border-border flex justify-between items-center",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(NT,{className:"h-4 w-4 text-amber-600 mr-2"}),f.jsx("span",{className:"font-medium text-foreground",children:"Writing Enhancements"})]})}),f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Grammar Correction"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Cohesion Improvement"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Coherence Check"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Flow Enhancement"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Style Suggestions"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Clarity Improvements"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Tone Adjustment"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sr,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{children:"Conciseness"})]})]})})]})]})]})]})}),f.jsx("section",{className:"w-full py-12 md:py-24 lg:py-32 bg-muted dark:bg-black/60",children:f.jsxs("div",{className:"container px-4 md:px-6",children:[f.jsxs("div",{className:`mx-auto flex max-w-[58rem] flex-col items-center justify-center gap-4 text-center ${t?"opacity-100 translate-y-0 transition-all duration-700 ease-out":"opacity-0 translate-y-10"}`,children:[f.jsx("h2",{className:"text-3xl font-bold leading-[1.1] sm:text-3xl md:text-6xl",children:"Why Ripple Matters"}),f.jsx("p",{className:"max-w-[85%] leading-normal text-muted-foreground sm:text-lg sm:leading-7",children:"In today's AI-driven world, writing better content faster gives you a competitive advantage. Ripple combines powerful editing tools with artificial intelligence to transform your workflow."})]}),f.jsxs("div",{className:`mx-auto grid justify-center gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 lg:gap-8 xl:gap-10 mt-12 ${t?"opacity-100 transition-opacity duration-1000 delay-300":"opacity-0"}`,children:[f.jsxs(fr,{className:`h-full transition-all duration-200 hover:shadow-lg border-border ${t?"opacity-100 translate-y-0 transition-all duration-700 delay-100":"opacity-0 translate-y-10"}`,children:[f.jsxs(El,{className:"flex flex-row items-center gap-2",children:[f.jsx(hz,{className:"h-5 w-5 text-blue-600"}),f.jsx(Tl,{children:"AI-Powered Insights"})]}),f.jsx(hr,{children:f.jsx("p",{className:"text-muted-foreground",children:"Get intelligent suggestions to improve your writing automatically. Our AI analyzes your text to help you craft more compelling, error-free content."})})]}),f.jsxs(fr,{className:`h-full transition-all duration-200 hover:shadow-lg border-border ${t?"opacity-100 translate-y-0 transition-all duration-700 delay-200":"opacity-0 translate-y-10"}`,children:[f.jsxs(El,{className:"flex flex-row items-center gap-2",children:[f.jsx(yz,{className:"h-5 w-5 text-blue-600"}),f.jsx(Tl,{children:"Contextual Assistance"})]}),f.jsx(hr,{children:f.jsx("p",{className:"text-muted-foreground",children:"Ask questions and get help right where you need it. Our inline AI chat understands your document's context to provide relevant suggestions."})})]}),f.jsxs(fr,{className:`h-full transition-all duration-200 hover:shadow-lg border-border ${t?"opacity-100 translate-y-0 transition-all duration-700 delay-300":"opacity-0 translate-y-10"}`,children:[f.jsxs(El,{className:"flex flex-row items-center gap-2",children:[f.jsx(cz,{className:"h-5 w-5 text-blue-600"}),f.jsx(Tl,{children:"Seamless Collaboration"})]}),f.jsx(hr,{children:f.jsx("p",{className:"text-muted-foreground",children:"Collaborate with both humans and AI. Share your work, get feedback, and implement suggestions for better results in less time."})})]})]})]})})]}),f.jsx("footer",{className:"border-t py-6 md:py-0",children:f.jsx("div",{className:"container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row",children:f.jsxs("p",{className:"text-xs text-muted-foreground leading-loose md:text-left",children:["Built by"," ",f.jsxs(iQ,{openDelay:100,closeDelay:100,children:[f.jsx(aQ,{asChild:!0,children:f.jsx("a",{href:"https://github.com/nohaxsjustasian",target:"_blank",rel:"noreferrer",className:"font-medium underline underline-offset-4",children:"@nohaxsjustasian"})}),f.jsx(SO,{className:"w-80",children:f.jsxs("div",{className:"flex justify-between space-x-4",children:[f.jsxs(Q0,{children:[f.jsx(AO,{src:"https://github.com/nohaxsjustasian.png"}),f.jsx(Z0,{children:"NA"})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("h4",{className:"text-sm font-semibold",children:"@nohaxsjustasian"}),f.jsx("p",{className:"text-sm",children:"NEU '25 | Searching for new grad SWE positions."}),f.jsxs("div",{className:"flex items-center pt-2",children:[f.jsx(da,{className:"mr-2 h-4 w-4 opacity-70"})," ",f.jsx("span",{className:"text-xs text-muted-foreground",children:"Joined December 2021"})]})]})]})})]})]})})})]})}const hS=new z7("",20,2e3);function hQ(){const{user:t,loading:e}=oi(),[n,r]=p.useState(!1);return p.useEffect(()=>{t&&!e?(hS.updateUserId(t.id),r(!0)):r(!1)},[t,e]),e?f.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:f.jsx("div",{className:"text-foreground",children:"Loading..."})}):t?f.jsx(dS,{children:f.jsxs(cS,{children:[f.jsx(hs,{path:"/",element:f.jsx(fS,{})}),f.jsx(hs,{path:"/editor",element:f.jsx("div",{className:"min-h-screen bg-background",children:n&&f.jsx(yJ,{eventBatcher:hS})})}),f.jsx(hs,{path:"*",element:f.jsx(lS,{to:"/editor",replace:!0})})]})}):f.jsx(dS,{children:f.jsxs(cS,{children:[f.jsx(hs,{path:"/",element:f.jsx(fS,{})}),f.jsx(hs,{path:"/auth",element:f.jsx(JX,{})}),f.jsx(hs,{path:"*",element:f.jsx(lS,{to:"/auth",replace:!0})})]})})}function pQ(){return f.jsx(fj,{defaultTheme:"light",storageKey:"vite-ui-theme",children:f.jsxs(EG,{children:[f.jsx(hQ,{}),f.jsx(Hj,{})]})})}Nk(document.getElementById("root")).render(f.jsx(p.StrictMode,{children:f.jsx(pQ,{})}));export{pS as g};
